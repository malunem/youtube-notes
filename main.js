/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

"use strict";var Aj=Object.create;var bd=Object.defineProperty;var $j=Object.getOwnPropertyDescriptor;var Oj=Object.getOwnPropertyNames;var Dj=Object.getPrototypeOf,Fj=Object.prototype.hasOwnProperty;var Nj=(t,e,n)=>e in t?bd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var nt=(t,e)=>()=>(t&&(e=t(t=0)),e);var Jt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),At=(t,e)=>{for(var n in e)bd(t,n,{get:e[n],enumerable:!0})},yR=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Oj(e))!Fj.call(t,i)&&i!==n&&bd(t,i,{get:()=>e[i],enumerable:!(r=$j(e,i))||r.enumerable});return t};var I=(t,e,n)=>(n=t!=null?Aj(Dj(t)):{},yR(e||!t||!t.__esModule?bd(n,"default",{value:t,enumerable:!0}):n,t)),Vj=t=>yR(bd({},"__esModule",{value:!0}),t);var T=(t,e,n)=>(Nj(t,typeof e!="symbol"?e+"":e,n),n),v_=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var A=(t,e,n)=>(v_(t,e,"read from private field"),n?n.call(t):e.get(t)),Z=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ve=(t,e,n,r)=>(v_(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var V=(t,e,n)=>(v_(t,e,"access private method"),n);var Sd=Jt(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.assertNever=RR;function RR(t,e){if(typeof e=="string")throw new Error(e);if(typeof e=="function")throw new Error(e(t));if(e)return t;throw new Error("Unhandled discriminated union member: ".concat(JSON.stringify(t)))}ym.default=RR});var BM=Jt(ke=>{"use strict";var $d=Symbol.for("react.element"),A6=Symbol.for("react.portal"),$6=Symbol.for("react.fragment"),O6=Symbol.for("react.strict_mode"),D6=Symbol.for("react.profiler"),F6=Symbol.for("react.provider"),N6=Symbol.for("react.context"),V6=Symbol.for("react.forward_ref"),z6=Symbol.for("react.suspense"),B6=Symbol.for("react.memo"),U6=Symbol.for("react.lazy"),MM=Symbol.iterator;function H6(t){return t===null||typeof t!="object"?null:(t=MM&&t[MM]||t["@@iterator"],typeof t=="function"?t:null)}var AM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$M=Object.assign,OM={};function Kl(t,e,n){this.props=t,this.context=e,this.refs=OM,this.updater=n||AM}Kl.prototype.isReactComponent={};Kl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DM(){}DM.prototype=Kl.prototype;function O_(t,e,n){this.props=t,this.context=e,this.refs=OM,this.updater=n||AM}var D_=O_.prototype=new DM;D_.constructor=O_;$M(D_,Kl.prototype);D_.isPureReactComponent=!0;var IM=Array.isArray,FM=Object.prototype.hasOwnProperty,F_={current:null},NM={key:!0,ref:!0,__self:!0,__source:!0};function VM(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)FM.call(e,r)&&!NM.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:$d,type:t,key:o,ref:s,props:i,_owner:F_.current}}function j6(t,e){return{$$typeof:$d,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function N_(t){return typeof t=="object"&&t!==null&&t.$$typeof===$d}function W6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LM=/\/+/g;function $_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?W6(""+t.key):e.toString(36)}function Nm(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case $d:case A6:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+$_(s,0):r,IM(i)?(n="",t!=null&&(n=t.replace(LM,"$&/")+"/"),Nm(i,e,n,"",function(c){return c})):i!=null&&(N_(i)&&(i=j6(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(LM,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",IM(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+$_(o,a);s+=Nm(o,e,n,l,i)}else if(l=H6(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+$_(o,a++),s+=Nm(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Fm(t,e,n){if(t==null)return t;var r=[],i=0;return Nm(t,r,"","",function(o){return e.call(n,o,i++)}),r}function q6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kn={current:null},Vm={transition:null},Y6={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Vm,ReactCurrentOwner:F_};function zM(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Fm,forEach:function(t,e,n){Fm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fm(t,function(){e++}),e},toArray:function(t){return Fm(t,function(e){return e})||[]},only:function(t){if(!N_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Kl;ke.Fragment=$6;ke.Profiler=D6;ke.PureComponent=O_;ke.StrictMode=O6;ke.Suspense=z6;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y6;ke.act=zM;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$M({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=F_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)FM.call(e,l)&&!NM.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:$d,type:t.type,key:i,ref:o,props:r,_owner:s}};ke.createContext=function(t){return t={$$typeof:N6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:F6,_context:t},t.Consumer=t};ke.createElement=VM;ke.createFactory=function(t){var e=VM.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:V6,render:t}};ke.isValidElement=N_;ke.lazy=function(t){return{$$typeof:U6,_payload:{_status:-1,_result:t},_init:q6}};ke.memo=function(t,e){return{$$typeof:B6,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=Vm.transition;Vm.transition={};try{t()}finally{Vm.transition=e}};ke.unstable_act=zM;ke.useCallback=function(t,e){return kn.current.useCallback(t,e)};ke.useContext=function(t){return kn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return kn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return kn.current.useEffect(t,e)};ke.useId=function(){return kn.current.useId()};ke.useImperativeHandle=function(t,e,n){return kn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return kn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return kn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return kn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return kn.current.useReducer(t,e,n)};ke.useRef=function(t){return kn.current.useRef(t)};ke.useState=function(t){return kn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return kn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return kn.current.useTransition()};ke.version="18.3.1"});var H=Jt((yde,UM)=>{"use strict";UM.exports=BM()});var ZM=Jt(ze=>{"use strict";function U_(t,e){var n=t.length;t.push(e);e:for(;0<n;){var r=n-1>>>1,i=t[r];if(0<zm(i,e))t[r]=e,t[n]=i,n=r;else break e}}function si(t){return t.length===0?null:t[0]}function Um(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var r=0,i=t.length,o=i>>>1;r<o;){var s=2*(r+1)-1,a=t[s],l=s+1,c=t[l];if(0>zm(a,n))l<i&&0>zm(c,a)?(t[r]=c,t[l]=n,r=l):(t[r]=a,t[s]=n,r=s);else if(l<i&&0>zm(c,n))t[r]=c,t[l]=n,r=l;else break e}}return e}function zm(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?(HM=performance,ze.unstable_now=function(){return HM.now()}):(V_=Date,jM=V_.now(),ze.unstable_now=function(){return V_.now()-jM});var HM,V_,jM,Oi=[],as=[],K6=1,Ar=null,dn=3,Hm=!1,ya=!1,Dd=!1,YM=typeof setTimeout=="function"?setTimeout:null,KM=typeof clearTimeout=="function"?clearTimeout:null,WM=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H_(t){for(var e=si(as);e!==null;){if(e.callback===null)Um(as);else if(e.startTime<=t)Um(as),e.sortIndex=e.expirationTime,U_(Oi,e);else break;e=si(as)}}function j_(t){if(Dd=!1,H_(t),!ya)if(si(Oi)!==null)ya=!0,q_(W_);else{var e=si(as);e!==null&&Y_(j_,e.startTime-t)}}function W_(t,e){ya=!1,Dd&&(Dd=!1,KM(Fd),Fd=-1),Hm=!0;var n=dn;try{for(H_(e),Ar=si(Oi);Ar!==null&&(!(Ar.expirationTime>e)||t&&!XM());){var r=Ar.callback;if(typeof r=="function"){Ar.callback=null,dn=Ar.priorityLevel;var i=r(Ar.expirationTime<=e);e=ze.unstable_now(),typeof i=="function"?Ar.callback=i:Ar===si(Oi)&&Um(Oi),H_(e)}else Um(Oi);Ar=si(Oi)}if(Ar!==null)var o=!0;else{var s=si(as);s!==null&&Y_(j_,s.startTime-e),o=!1}return o}finally{Ar=null,dn=n,Hm=!1}}var jm=!1,Bm=null,Fd=-1,GM=5,QM=-1;function XM(){return!(ze.unstable_now()-QM<GM)}function z_(){if(Bm!==null){var t=ze.unstable_now();QM=t;var e=!0;try{e=Bm(!0,t)}finally{e?Od():(jm=!1,Bm=null)}}else jm=!1}var Od;typeof WM=="function"?Od=function(){WM(z_)}:typeof MessageChannel<"u"?(B_=new MessageChannel,qM=B_.port2,B_.port1.onmessage=z_,Od=function(){qM.postMessage(null)}):Od=function(){YM(z_,0)};var B_,qM;function q_(t){Bm=t,jm||(jm=!0,Od())}function Y_(t,e){Fd=YM(function(){t(ze.unstable_now())},e)}ze.unstable_IdlePriority=5;ze.unstable_ImmediatePriority=1;ze.unstable_LowPriority=4;ze.unstable_NormalPriority=3;ze.unstable_Profiling=null;ze.unstable_UserBlockingPriority=2;ze.unstable_cancelCallback=function(t){t.callback=null};ze.unstable_continueExecution=function(){ya||Hm||(ya=!0,q_(W_))};ze.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):GM=0<t?Math.floor(1e3/t):5};ze.unstable_getCurrentPriorityLevel=function(){return dn};ze.unstable_getFirstCallbackNode=function(){return si(Oi)};ze.unstable_next=function(t){switch(dn){case 1:case 2:case 3:var e=3;break;default:e=dn}var n=dn;dn=e;try{return t()}finally{dn=n}};ze.unstable_pauseExecution=function(){};ze.unstable_requestPaint=function(){};ze.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=dn;dn=t;try{return e()}finally{dn=n}};ze.unstable_scheduleCallback=function(t,e,n){var r=ze.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=n+i,t={id:K6++,callback:e,priorityLevel:t,startTime:n,expirationTime:i,sortIndex:-1},n>r?(t.sortIndex=n,U_(as,t),si(Oi)===null&&t===si(as)&&(Dd?(KM(Fd),Fd=-1):Dd=!0,Y_(j_,n-r))):(t.sortIndex=i,U_(Oi,t),ya||Hm||(ya=!0,q_(W_))),t};ze.unstable_shouldYield=XM;ze.unstable_wrapCallback=function(t){var e=dn;return function(){var n=dn;dn=e;try{return t.apply(this,arguments)}finally{dn=n}}}});var eI=Jt((wde,JM)=>{"use strict";JM.exports=ZM()});var i$=Jt(cr=>{"use strict";var G6=H(),ar=eI();function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aL=new Set,op={};function Ma(t,e){mc(t,e),mc(t+"Capture",e)}function mc(t,e){for(op[t]=e,t=0;t<e.length;t++)aL.add(e[t])}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gk=Object.prototype.hasOwnProperty,Q6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tI={},nI={};function X6(t){return gk.call(nI,t)?!0:gk.call(tI,t)?!1:Q6.test(t)?nI[t]=!0:(tI[t]=!0,!1)}function Z6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J6(t,e,n,r){if(e===null||typeof e>"u"||Z6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rn[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rn[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rn[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rn[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rn[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rn[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rn[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rn[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rn[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var l0=/[\-:]([a-z])/g;function c0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(l0,c0);rn[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(l0,c0);rn[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(l0,c0);rn[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rn[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});rn.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rn[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function u0(t,e,n,r){var i=rn.hasOwnProperty(e)?rn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(J6(e,n,i,r)&&(n=null),r||i===null?X6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wo=G6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wm=Symbol.for("react.element"),Xl=Symbol.for("react.portal"),Zl=Symbol.for("react.fragment"),d0=Symbol.for("react.strict_mode"),yk=Symbol.for("react.profiler"),lL=Symbol.for("react.provider"),cL=Symbol.for("react.context"),p0=Symbol.for("react.forward_ref"),vk=Symbol.for("react.suspense"),wk=Symbol.for("react.suspense_list"),f0=Symbol.for("react.memo"),cs=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var uL=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var rI=Symbol.iterator;function Nd(t){return t===null||typeof t!="object"?null:(t=rI&&t[rI]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,K_;function qd(t){if(K_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);K_=e&&e[1]||""}return`
`+K_+t}var G_=!1;function Q_(t,e){if(!t||G_)return"";G_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{G_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qd(t):""}function eW(t){switch(t.tag){case 5:return qd(t.type);case 16:return qd("Lazy");case 13:return qd("Suspense");case 19:return qd("SuspenseList");case 0:case 2:case 15:return t=Q_(t.type,!1),t;case 11:return t=Q_(t.type.render,!1),t;case 1:return t=Q_(t.type,!0),t;default:return""}}function bk(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zl:return"Fragment";case Xl:return"Portal";case yk:return"Profiler";case d0:return"StrictMode";case vk:return"Suspense";case wk:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cL:return(t.displayName||"Context")+".Consumer";case lL:return(t._context.displayName||"Context")+".Provider";case p0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case f0:return e=t.displayName||null,e!==null?e:bk(t.type)||"Memo";case cs:e=t._payload,t=t._init;try{return bk(t(e))}catch{}}return null}function tW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bk(e);case 8:return e===d0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ks(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nW(t){var e=dL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qm(t){t._valueTracker||(t._valueTracker=nW(t))}function pL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xk(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ks(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fL(t,e){e=e.checked,e!=null&&u0(t,"checked",e,!1)}function _k(t,e){fL(t,e);var n=ks(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kk(t,e.type,n):e.hasOwnProperty("defaultValue")&&kk(t,e.type,ks(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kk(t,e,n){(e!=="number"||bg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yd=Array.isArray;function cc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ks(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Tk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Yd(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ks(n)}}function hL(t,e){var n=ks(e.value),r=ks(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function aI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sk(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ym,gL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ym=Ym||document.createElement("div"),Ym.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ym.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rW=["Webkit","ms","Moz","O"];Object.keys(Qd).forEach(function(t){rW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qd[e]=Qd[t]})});function yL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qd.hasOwnProperty(t)&&Qd[t]?(""+e).trim():e+"px"}function vL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var iW=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ek(t,e){if(e){if(iW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Pk(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ck=null;function h0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rk=null,uc=null,dc=null;function lI(t){if(t=Tp(t)){if(typeof Rk!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Kg(e),Rk(t.stateNode,t.type,e))}}function wL(t){uc?dc?dc.push(t):dc=[t]:uc=t}function bL(){if(uc){var t=uc,e=dc;if(dc=uc=null,lI(t),e)for(t=0;t<e.length;t++)lI(e[t])}}function xL(t,e){return t(e)}function _L(){}var X_=!1;function kL(t,e,n){if(X_)return t(e,n);X_=!0;try{return xL(t,e,n)}finally{X_=!1,(uc!==null||dc!==null)&&(_L(),bL())}}function ap(t,e){var n=t.stateNode;if(n===null)return null;var r=Kg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Mk=!1;if(mo)try{Gl={},Object.defineProperty(Gl,"passive",{get:function(){Mk=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Mk=!1}var Gl;function oW(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Xd=!1,xg=null,_g=!1,Ik=null,sW={onError:function(t){Xd=!0,xg=t}};function aW(t,e,n,r,i,o,s,a,l){Xd=!1,xg=null,oW.apply(sW,arguments)}function lW(t,e,n,r,i,o,s,a,l){if(aW.apply(this,arguments),Xd){if(Xd){var c=xg;Xd=!1,xg=null}else throw Error(B(198));_g||(_g=!0,Ik=c)}}function Ia(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cI(t){if(Ia(t)!==t)throw Error(B(188))}function cW(t){var e=t.alternate;if(!e){if(e=Ia(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return cI(i),t;if(o===r)return cI(i),e;o=o.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function SL(t){return t=cW(t),t!==null?EL(t):null}function EL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=EL(t);if(e!==null)return e;t=t.sibling}return null}var PL=ar.unstable_scheduleCallback,uI=ar.unstable_cancelCallback,uW=ar.unstable_shouldYield,dW=ar.unstable_requestPaint,bt=ar.unstable_now,pW=ar.unstable_getCurrentPriorityLevel,m0=ar.unstable_ImmediatePriority,CL=ar.unstable_UserBlockingPriority,kg=ar.unstable_NormalPriority,fW=ar.unstable_LowPriority,RL=ar.unstable_IdlePriority,jg=null,Vi=null;function hW(t){if(Vi&&typeof Vi.onCommitFiberRoot=="function")try{Vi.onCommitFiberRoot(jg,t,void 0,(t.current.flags&128)===128)}catch{}}var di=Math.clz32?Math.clz32:yW,mW=Math.log,gW=Math.LN2;function yW(t){return t>>>=0,t===0?32:31-(mW(t)/gW|0)|0}var Km=64,Gm=4194304;function Kd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Kd(a):(o&=s,o!==0&&(r=Kd(o)))}else s=n&~i,s!==0?r=Kd(s):o!==0&&(r=Kd(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-di(e),i=1<<n,r|=t[n],e&=~i;return r}function vW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wW(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-di(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=vW(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Lk(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ML(){var t=Km;return Km<<=1,!(Km&4194240)&&(Km=64),t}function Z_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _p(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-di(e),t[e]=n}function bW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-di(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function g0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-di(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Oe=0;function IL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LL,y0,AL,$L,OL,Ak=!1,Qm=[],ms=null,gs=null,ys=null,lp=new Map,cp=new Map,ds=[],xW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dI(t,e){switch(t){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":lp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cp.delete(e.pointerId)}}function Vd(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Tp(e),e!==null&&y0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _W(t,e,n,r,i){switch(e){case"focusin":return ms=Vd(ms,t,e,n,r,i),!0;case"dragenter":return gs=Vd(gs,t,e,n,r,i),!0;case"mouseover":return ys=Vd(ys,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return lp.set(o,Vd(lp.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,cp.set(o,Vd(cp.get(o)||null,t,e,n,r,i)),!0}return!1}function DL(t){var e=ba(t.target);if(e!==null){var n=Ia(e);if(n!==null){if(e=n.tag,e===13){if(e=TL(n),e!==null){t.blockedOn=e,OL(t.priority,function(){AL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ug(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$k(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ck=r,n.target.dispatchEvent(r),Ck=null}else return e=Tp(n),e!==null&&y0(e),t.blockedOn=n,!1;e.shift()}return!0}function pI(t,e,n){ug(t)&&n.delete(e)}function kW(){Ak=!1,ms!==null&&ug(ms)&&(ms=null),gs!==null&&ug(gs)&&(gs=null),ys!==null&&ug(ys)&&(ys=null),lp.forEach(pI),cp.forEach(pI)}function zd(t,e){t.blockedOn===e&&(t.blockedOn=null,Ak||(Ak=!0,ar.unstable_scheduleCallback(ar.unstable_NormalPriority,kW)))}function up(t){function e(i){return zd(i,t)}if(0<Qm.length){zd(Qm[0],t);for(var n=1;n<Qm.length;n++){var r=Qm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ms!==null&&zd(ms,t),gs!==null&&zd(gs,t),ys!==null&&zd(ys,t),lp.forEach(e),cp.forEach(e),n=0;n<ds.length;n++)r=ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ds.length&&(n=ds[0],n.blockedOn===null);)DL(n),n.blockedOn===null&&ds.shift()}var pc=wo.ReactCurrentBatchConfig,Sg=!0;function TW(t,e,n,r){var i=Oe,o=pc.transition;pc.transition=null;try{Oe=1,v0(t,e,n,r)}finally{Oe=i,pc.transition=o}}function SW(t,e,n,r){var i=Oe,o=pc.transition;pc.transition=null;try{Oe=4,v0(t,e,n,r)}finally{Oe=i,pc.transition=o}}function v0(t,e,n,r){if(Sg){var i=$k(t,e,n,r);if(i===null)ok(t,e,r,Eg,n),dI(t,r);else if(_W(i,t,e,n,r))r.stopPropagation();else if(dI(t,r),e&4&&-1<xW.indexOf(t)){for(;i!==null;){var o=Tp(i);if(o!==null&&LL(o),o=$k(t,e,n,r),o===null&&ok(t,e,r,Eg,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ok(t,e,r,null,n)}}var Eg=null;function $k(t,e,n,r){if(Eg=null,t=h0(r),t=ba(t),t!==null)if(e=Ia(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Eg=t,null}function FL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pW()){case m0:return 1;case CL:return 4;case kg:case fW:return 16;case RL:return 536870912;default:return 16}default:return 16}}var fs=null,w0=null,dg=null;function NL(){if(dg)return dg;var t,e=w0,n=e.length,r,i="value"in fs?fs.value:fs.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return dg=i.slice(t,1<r?1-r:void 0)}function pg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xm(){return!0}function fI(){return!1}function lr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xm:fI,this.isPropagationStopped=fI,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xm)},persist:function(){},isPersistent:Xm}),e}var _c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b0=lr(_c),kp=lt({},_c,{view:0,detail:0}),EW=lr(kp),J_,ek,Bd,Wg=lt({},kp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bd&&(Bd&&t.type==="mousemove"?(J_=t.screenX-Bd.screenX,ek=t.screenY-Bd.screenY):ek=J_=0,Bd=t),J_)},movementY:function(t){return"movementY"in t?t.movementY:ek}}),hI=lr(Wg),PW=lt({},Wg,{dataTransfer:0}),CW=lr(PW),RW=lt({},kp,{relatedTarget:0}),tk=lr(RW),MW=lt({},_c,{animationName:0,elapsedTime:0,pseudoElement:0}),IW=lr(MW),LW=lt({},_c,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AW=lr(LW),$W=lt({},_c,{data:0}),mI=lr($W),OW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FW[t])?!!e[t]:!1}function x0(){return NW}var VW=lt({},kp,{key:function(t){if(t.key){var e=OW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x0,charCode:function(t){return t.type==="keypress"?pg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zW=lr(VW),BW=lt({},Wg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gI=lr(BW),UW=lt({},kp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x0}),HW=lr(UW),jW=lt({},_c,{propertyName:0,elapsedTime:0,pseudoElement:0}),WW=lr(jW),qW=lt({},Wg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YW=lr(qW),KW=[9,13,27,32],_0=mo&&"CompositionEvent"in window,Zd=null;mo&&"documentMode"in document&&(Zd=document.documentMode);var GW=mo&&"TextEvent"in window&&!Zd,VL=mo&&(!_0||Zd&&8<Zd&&11>=Zd),yI=" ",vI=!1;function zL(t,e){switch(t){case"keyup":return KW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jl=!1;function QW(t,e){switch(t){case"compositionend":return BL(e);case"keypress":return e.which!==32?null:(vI=!0,yI);case"textInput":return t=e.data,t===yI&&vI?null:t;default:return null}}function XW(t,e){if(Jl)return t==="compositionend"||!_0&&zL(t,e)?(t=NL(),dg=w0=fs=null,Jl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VL&&e.locale!=="ko"?null:e.data;default:return null}}var ZW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZW[t.type]:e==="textarea"}function UL(t,e,n,r){wL(r),e=Pg(e,"onChange"),0<e.length&&(n=new b0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jd=null,dp=null;function JW(t){JL(t,0)}function qg(t){var e=nc(t);if(pL(e))return t}function eq(t,e){if(t==="change")return e}var HL=!1;mo&&(mo?(Jm="oninput"in document,Jm||(nk=document.createElement("div"),nk.setAttribute("oninput","return;"),Jm=typeof nk.oninput=="function"),Zm=Jm):Zm=!1,HL=Zm&&(!document.documentMode||9<document.documentMode));var Zm,Jm,nk;function bI(){Jd&&(Jd.detachEvent("onpropertychange",jL),dp=Jd=null)}function jL(t){if(t.propertyName==="value"&&qg(dp)){var e=[];UL(e,dp,t,h0(t)),kL(JW,e)}}function tq(t,e,n){t==="focusin"?(bI(),Jd=e,dp=n,Jd.attachEvent("onpropertychange",jL)):t==="focusout"&&bI()}function nq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qg(dp)}function rq(t,e){if(t==="click")return qg(e)}function iq(t,e){if(t==="input"||t==="change")return qg(e)}function oq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fi=typeof Object.is=="function"?Object.is:oq;function pp(t,e){if(fi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gk.call(e,i)||!fi(t[i],e[i]))return!1}return!0}function xI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _I(t,e){var n=xI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xI(n)}}function WL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qL(){for(var t=window,e=bg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bg(t.document)}return e}function k0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sq(t){var e=qL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&WL(n.ownerDocument.documentElement,n)){if(r!==null&&k0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=_I(n,o);var s=_I(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aq=mo&&"documentMode"in document&&11>=document.documentMode,ec=null,Ok=null,ep=null,Dk=!1;function kI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dk||ec==null||ec!==bg(r)||(r=ec,"selectionStart"in r&&k0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ep&&pp(ep,r)||(ep=r,r=Pg(Ok,"onSelect"),0<r.length&&(e=new b0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ec)))}function eg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var tc={animationend:eg("Animation","AnimationEnd"),animationiteration:eg("Animation","AnimationIteration"),animationstart:eg("Animation","AnimationStart"),transitionend:eg("Transition","TransitionEnd")},rk={},YL={};mo&&(YL=document.createElement("div").style,"AnimationEvent"in window||(delete tc.animationend.animation,delete tc.animationiteration.animation,delete tc.animationstart.animation),"TransitionEvent"in window||delete tc.transitionend.transition);function Yg(t){if(rk[t])return rk[t];if(!tc[t])return t;var e=tc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in YL)return rk[t]=e[n];return t}var KL=Yg("animationend"),GL=Yg("animationiteration"),QL=Yg("animationstart"),XL=Yg("transitionend"),ZL=new Map,TI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ss(t,e){ZL.set(t,e),Ma(e,[t])}for(tg=0;tg<TI.length;tg++)ng=TI[tg],SI=ng.toLowerCase(),EI=ng[0].toUpperCase()+ng.slice(1),Ss(SI,"on"+EI);var ng,SI,EI,tg;Ss(KL,"onAnimationEnd");Ss(GL,"onAnimationIteration");Ss(QL,"onAnimationStart");Ss("dblclick","onDoubleClick");Ss("focusin","onFocus");Ss("focusout","onBlur");Ss(XL,"onTransitionEnd");mc("onMouseEnter",["mouseout","mouseover"]);mc("onMouseLeave",["mouseout","mouseover"]);mc("onPointerEnter",["pointerout","pointerover"]);mc("onPointerLeave",["pointerout","pointerover"]);Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gd));function PI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lW(r,e,void 0,t),t.currentTarget=null}function JL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;PI(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;PI(i,a,c),o=l}}}if(_g)throw t=Ik,_g=!1,Ik=null,t}function Ke(t,e){var n=e[Bk];n===void 0&&(n=e[Bk]=new Set);var r=t+"__bubble";n.has(r)||(eA(e,t,2,!1),n.add(r))}function ik(t,e,n){var r=0;e&&(r|=4),eA(n,t,r,e)}var rg="_reactListening"+Math.random().toString(36).slice(2);function fp(t){if(!t[rg]){t[rg]=!0,aL.forEach(function(n){n!=="selectionchange"&&(lq.has(n)||ik(n,!1,t),ik(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rg]||(e[rg]=!0,ik("selectionchange",!1,e))}}function eA(t,e,n,r){switch(FL(e)){case 1:var i=TW;break;case 4:i=SW;break;default:i=v0}n=i.bind(null,e,n,t),i=void 0,!Mk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ok(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=ba(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}kL(function(){var c=o,u=h0(n),d=[];e:{var p=ZL.get(t);if(p!==void 0){var f=b0,h=t;switch(t){case"keypress":if(pg(n)===0)break e;case"keydown":case"keyup":f=zW;break;case"focusin":h="focus",f=tk;break;case"focusout":h="blur",f=tk;break;case"beforeblur":case"afterblur":f=tk;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=hI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=CW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=HW;break;case KL:case GL:case QL:f=IW;break;case XL:f=WW;break;case"scroll":f=EW;break;case"wheel":f=YW;break;case"copy":case"cut":case"paste":f=AW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=gI}var g=(e&4)!==0,w=!g&&t==="scroll",m=g?p!==null?p+"Capture":null:p;g=[];for(var y=c,v;y!==null;){v=y;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,m!==null&&(b=ap(y,m),b!=null&&g.push(hp(y,b,v)))),w)break;y=y.return}0<g.length&&(p=new f(p,h,null,n,u),d.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&n!==Ck&&(h=n.relatedTarget||n.fromElement)&&(ba(h)||h[go]))break e;if((f||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,f?(h=n.relatedTarget||n.toElement,f=c,h=h?ba(h):null,h!==null&&(w=Ia(h),h!==w||h.tag!==5&&h.tag!==6)&&(h=null)):(f=null,h=c),f!==h)){if(g=hI,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=gI,b="onPointerLeave",m="onPointerEnter",y="pointer"),w=f==null?p:nc(f),v=h==null?p:nc(h),p=new g(b,y+"leave",f,n,u),p.target=w,p.relatedTarget=v,b=null,ba(u)===c&&(g=new g(m,y+"enter",h,n,u),g.target=v,g.relatedTarget=w,b=g),w=b,f&&h)t:{for(g=f,m=h,y=0,v=g;v;v=Ql(v))y++;for(v=0,b=m;b;b=Ql(b))v++;for(;0<y-v;)g=Ql(g),y--;for(;0<v-y;)m=Ql(m),v--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Ql(g),m=Ql(m)}g=null}else g=null;f!==null&&CI(d,p,f,g,!1),h!==null&&w!==null&&CI(d,w,h,g,!0)}}e:{if(p=c?nc(c):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var k=eq;else if(wI(p))if(HL)k=iq;else{k=nq;var _=tq}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=rq);if(k&&(k=k(t,c))){UL(d,k,n,u);break e}_&&_(t,p,c),t==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&kk(p,"number",p.value)}switch(_=c?nc(c):window,t){case"focusin":(wI(_)||_.contentEditable==="true")&&(ec=_,Ok=c,ep=null);break;case"focusout":ep=Ok=ec=null;break;case"mousedown":Dk=!0;break;case"contextmenu":case"mouseup":case"dragend":Dk=!1,kI(d,n,u);break;case"selectionchange":if(aq)break;case"keydown":case"keyup":kI(d,n,u)}var S;if(_0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Jl?zL(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(VL&&n.locale!=="ko"&&(Jl||C!=="onCompositionStart"?C==="onCompositionEnd"&&Jl&&(S=NL()):(fs=u,w0="value"in fs?fs.value:fs.textContent,Jl=!0)),_=Pg(c,C),0<_.length&&(C=new mI(C,t,null,n,u),d.push({event:C,listeners:_}),S?C.data=S:(S=BL(n),S!==null&&(C.data=S)))),(S=GW?QW(t,n):XW(t,n))&&(c=Pg(c,"onBeforeInput"),0<c.length&&(u=new mI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=S))}JL(d,e)})}function hp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ap(t,n),o!=null&&r.unshift(hp(t,o,i)),o=ap(t,e),o!=null&&r.push(hp(t,o,i))),t=t.return}return r}function Ql(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function CI(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ap(n,o),l!=null&&s.unshift(hp(n,l,a))):i||(l=ap(n,o),l!=null&&s.push(hp(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var cq=/\r\n?/g,uq=/\u0000|\uFFFD/g;function RI(t){return(typeof t=="string"?t:""+t).replace(cq,`
`).replace(uq,"")}function ig(t,e,n){if(e=RI(e),RI(t)!==e&&n)throw Error(B(425))}function Cg(){}var Fk=null,Nk=null;function Vk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zk=typeof setTimeout=="function"?setTimeout:void 0,dq=typeof clearTimeout=="function"?clearTimeout:void 0,MI=typeof Promise=="function"?Promise:void 0,pq=typeof queueMicrotask=="function"?queueMicrotask:typeof MI<"u"?function(t){return MI.resolve(null).then(t).catch(fq)}:zk;function fq(t){setTimeout(function(){throw t})}function sk(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),up(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);up(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function II(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kc=Math.random().toString(36).slice(2),Ni="__reactFiber$"+kc,mp="__reactProps$"+kc,go="__reactContainer$"+kc,Bk="__reactEvents$"+kc,hq="__reactListeners$"+kc,mq="__reactHandles$"+kc;function ba(t){var e=t[Ni];if(e)return e;for(var n=t.parentNode;n;){if(e=n[go]||n[Ni]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=II(t);t!==null;){if(n=t[Ni])return n;t=II(t)}return e}t=n,n=t.parentNode}return null}function Tp(t){return t=t[Ni]||t[go],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Kg(t){return t[mp]||null}var Uk=[],rc=-1;function Es(t){return{current:t}}function Ge(t){0>rc||(t.current=Uk[rc],Uk[rc]=null,rc--)}function Be(t,e){rc++,Uk[rc]=t.current,t.current=e}var Ts={},mn=Es(Ts),Bn=Es(!1),Sa=Ts;function gc(t,e){var n=t.type.contextTypes;if(!n)return Ts;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Un(t){return t=t.childContextTypes,t!=null}function Rg(){Ge(Bn),Ge(mn)}function LI(t,e,n){if(mn.current!==Ts)throw Error(B(168));Be(mn,e),Be(Bn,n)}function tA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,tW(t)||"Unknown",i));return lt({},n,r)}function Mg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,Sa=mn.current,Be(mn,t),Be(Bn,Bn.current),!0}function AI(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=tA(t,e,Sa),r.__reactInternalMemoizedMergedChildContext=t,Ge(Bn),Ge(mn),Be(mn,t)):Ge(Bn),Be(Bn,n)}var uo=null,Gg=!1,ak=!1;function nA(t){uo===null?uo=[t]:uo.push(t)}function gq(t){Gg=!0,nA(t)}function Ps(){if(!ak&&uo!==null){ak=!0;var t=0,e=Oe;try{var n=uo;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}uo=null,Gg=!1}catch(i){throw uo!==null&&(uo=uo.slice(t+1)),PL(m0,Ps),i}finally{Oe=e,ak=!1}}return null}var ic=[],oc=0,Ig=null,Lg=0,$r=[],Or=0,Ea=null,po=1,fo="";function va(t,e){ic[oc++]=Lg,ic[oc++]=Ig,Ig=t,Lg=e}function rA(t,e,n){$r[Or++]=po,$r[Or++]=fo,$r[Or++]=Ea,Ea=t;var r=po;t=fo;var i=32-di(r)-1;r&=~(1<<i),n+=1;var o=32-di(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,po=1<<32-di(e)+i|n<<i|r,fo=o+t}else po=1<<o|n<<i|r,fo=t}function T0(t){t.return!==null&&(va(t,1),rA(t,1,0))}function S0(t){for(;t===Ig;)Ig=ic[--oc],ic[oc]=null,Lg=ic[--oc],ic[oc]=null;for(;t===Ea;)Ea=$r[--Or],$r[Or]=null,fo=$r[--Or],$r[Or]=null,po=$r[--Or],$r[Or]=null}var sr=null,or=null,rt=!1,ui=null;function iA(t,e){var n=Dr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $I(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sr=t,or=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sr=t,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ea!==null?{id:po,overflow:fo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sr=t,or=null,!0):!1;default:return!1}}function Hk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jk(t){if(rt){var e=or;if(e){var n=e;if(!$I(t,e)){if(Hk(t))throw Error(B(418));e=vs(n.nextSibling);var r=sr;e&&$I(t,e)?iA(r,n):(t.flags=t.flags&-4097|2,rt=!1,sr=t)}}else{if(Hk(t))throw Error(B(418));t.flags=t.flags&-4097|2,rt=!1,sr=t}}}function OI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sr=t}function og(t){if(t!==sr)return!1;if(!rt)return OI(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vk(t.type,t.memoizedProps)),e&&(e=or)){if(Hk(t))throw oA(),Error(B(418));for(;e;)iA(t,e),e=vs(e.nextSibling)}if(OI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){or=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}or=null}}else or=sr?vs(t.stateNode.nextSibling):null;return!0}function oA(){for(var t=or;t;)t=vs(t.nextSibling)}function yc(){or=sr=null,rt=!1}function E0(t){ui===null?ui=[t]:ui.push(t)}var yq=wo.ReactCurrentBatchConfig;function Ud(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function sg(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function DI(t){var e=t._init;return e(t._payload)}function sA(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=_s(m,y),m.index=0,m.sibling=null,m}function o(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,v,b){return y===null||y.tag!==6?(y=hk(v,m.mode,b),y.return=m,y):(y=i(y,v),y.return=m,y)}function l(m,y,v,b){var k=v.type;return k===Zl?u(m,y,v.props.children,b,v.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===cs&&DI(k)===y.type)?(b=i(y,v.props),b.ref=Ud(m,y,v),b.return=m,b):(b=wg(v.type,v.key,v.props,null,m.mode,b),b.ref=Ud(m,y,v),b.return=m,b)}function c(m,y,v,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=mk(v,m.mode,b),y.return=m,y):(y=i(y,v.children||[]),y.return=m,y)}function u(m,y,v,b,k){return y===null||y.tag!==7?(y=Ta(v,m.mode,b,k),y.return=m,y):(y=i(y,v),y.return=m,y)}function d(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=hk(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wm:return v=wg(y.type,y.key,y.props,null,m.mode,v),v.ref=Ud(m,null,y),v.return=m,v;case Xl:return y=mk(y,m.mode,v),y.return=m,y;case cs:var b=y._init;return d(m,b(y._payload),v)}if(Yd(y)||Nd(y))return y=Ta(y,m.mode,v,null),y.return=m,y;sg(m,y)}return null}function p(m,y,v,b){var k=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(m,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wm:return v.key===k?l(m,y,v,b):null;case Xl:return v.key===k?c(m,y,v,b):null;case cs:return k=v._init,p(m,y,k(v._payload),b)}if(Yd(v)||Nd(v))return k!==null?null:u(m,y,v,b,null);sg(m,v)}return null}function f(m,y,v,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(v)||null,a(y,m,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wm:return m=m.get(b.key===null?v:b.key)||null,l(y,m,b,k);case Xl:return m=m.get(b.key===null?v:b.key)||null,c(y,m,b,k);case cs:var _=b._init;return f(m,y,v,_(b._payload),k)}if(Yd(b)||Nd(b))return m=m.get(v)||null,u(y,m,b,k,null);sg(y,b)}return null}function h(m,y,v,b){for(var k=null,_=null,S=y,C=y=0,M=null;S!==null&&C<v.length;C++){S.index>C?(M=S,S=null):M=S.sibling;var x=p(m,S,v[C],b);if(x===null){S===null&&(S=M);break}t&&S&&x.alternate===null&&e(m,S),y=o(x,y,C),_===null?k=x:_.sibling=x,_=x,S=M}if(C===v.length)return n(m,S),rt&&va(m,C),k;if(S===null){for(;C<v.length;C++)S=d(m,v[C],b),S!==null&&(y=o(S,y,C),_===null?k=S:_.sibling=S,_=S);return rt&&va(m,C),k}for(S=r(m,S);C<v.length;C++)M=f(S,m,C,v[C],b),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?C:M.key),y=o(M,y,C),_===null?k=M:_.sibling=M,_=M);return t&&S.forEach(function($){return e(m,$)}),rt&&va(m,C),k}function g(m,y,v,b){var k=Nd(v);if(typeof k!="function")throw Error(B(150));if(v=k.call(v),v==null)throw Error(B(151));for(var _=k=null,S=y,C=y=0,M=null,x=v.next();S!==null&&!x.done;C++,x=v.next()){S.index>C?(M=S,S=null):M=S.sibling;var $=p(m,S,x.value,b);if($===null){S===null&&(S=M);break}t&&S&&$.alternate===null&&e(m,S),y=o($,y,C),_===null?k=$:_.sibling=$,_=$,S=M}if(x.done)return n(m,S),rt&&va(m,C),k;if(S===null){for(;!x.done;C++,x=v.next())x=d(m,x.value,b),x!==null&&(y=o(x,y,C),_===null?k=x:_.sibling=x,_=x);return rt&&va(m,C),k}for(S=r(m,S);!x.done;C++,x=v.next())x=f(S,m,C,x.value,b),x!==null&&(t&&x.alternate!==null&&S.delete(x.key===null?C:x.key),y=o(x,y,C),_===null?k=x:_.sibling=x,_=x);return t&&S.forEach(function(L){return e(m,L)}),rt&&va(m,C),k}function w(m,y,v,b){if(typeof v=="object"&&v!==null&&v.type===Zl&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Wm:e:{for(var k=v.key,_=y;_!==null;){if(_.key===k){if(k=v.type,k===Zl){if(_.tag===7){n(m,_.sibling),y=i(_,v.props.children),y.return=m,m=y;break e}}else if(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===cs&&DI(k)===_.type){n(m,_.sibling),y=i(_,v.props),y.ref=Ud(m,_,v),y.return=m,m=y;break e}n(m,_);break}else e(m,_);_=_.sibling}v.type===Zl?(y=Ta(v.props.children,m.mode,b,v.key),y.return=m,m=y):(b=wg(v.type,v.key,v.props,null,m.mode,b),b.ref=Ud(m,y,v),b.return=m,m=b)}return s(m);case Xl:e:{for(_=v.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(m,y.sibling),y=i(y,v.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=mk(v,m.mode,b),y.return=m,m=y}return s(m);case cs:return _=v._init,w(m,y,_(v._payload),b)}if(Yd(v))return h(m,y,v,b);if(Nd(v))return g(m,y,v,b);sg(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,v),y.return=m,m=y):(n(m,y),y=hk(v,m.mode,b),y.return=m,m=y),s(m)):n(m,y)}return w}var vc=sA(!0),aA=sA(!1),Ag=Es(null),$g=null,sc=null,P0=null;function C0(){P0=sc=$g=null}function R0(t){var e=Ag.current;Ge(Ag),t._currentValue=e}function Wk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fc(t,e){$g=t,P0=sc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zn=!0),t.firstContext=null)}function Nr(t){var e=t._currentValue;if(P0!==t)if(t={context:t,memoizedValue:e,next:null},sc===null){if($g===null)throw Error(B(308));sc=t,$g.dependencies={lanes:0,firstContext:t}}else sc=sc.next=t;return e}var xa=null;function M0(t){xa===null?xa=[t]:xa.push(t)}function lA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,M0(e)):(n.next=i.next,i.next=n),e.interleaved=n,yo(t,r)}function yo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var us=!1;function I0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ho(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ws(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,yo(t,n)}return i=r.interleaved,i===null?(e.next=e,M0(r)):(e.next=i.next,i.next=e),r.interleaved=e,yo(t,n)}function fg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,g0(t,n)}}function FI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Og(t,e,n,r){var i=t.updateQueue;us=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var p=a.lane,f=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=t,g=a;switch(p=e,f=n,g.tag){case 1:if(h=g.payload,typeof h=="function"){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,p=typeof h=="function"?h.call(f,d,p):h,p==null)break e;d=lt({},d,p);break e;case 2:us=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else f={eventTime:f,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ca|=s,t.lanes=s,t.memoizedState=d}}function NI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Sp={},zi=Es(Sp),gp=Es(Sp),yp=Es(Sp);function _a(t){if(t===Sp)throw Error(B(174));return t}function L0(t,e){switch(Be(yp,e),Be(gp,t),Be(zi,Sp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sk(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sk(e,t)}Ge(zi),Be(zi,e)}function wc(){Ge(zi),Ge(gp),Ge(yp)}function uA(t){_a(yp.current);var e=_a(zi.current),n=Sk(e,t.type);e!==n&&(Be(gp,t),Be(zi,n))}function A0(t){gp.current===t&&(Ge(zi),Ge(gp))}var st=Es(0);function Dg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lk=[];function $0(){for(var t=0;t<lk.length;t++)lk[t]._workInProgressVersionPrimary=null;lk.length=0}var hg=wo.ReactCurrentDispatcher,ck=wo.ReactCurrentBatchConfig,Pa=0,at=null,Dt=null,Wt=null,Fg=!1,tp=!1,vp=0,vq=0;function pn(){throw Error(B(321))}function O0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fi(t[n],e[n]))return!1;return!0}function D0(t,e,n,r,i,o){if(Pa=o,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hg.current=t===null||t.memoizedState===null?_q:kq,t=n(r,i),tp){o=0;do{if(tp=!1,vp=0,25<=o)throw Error(B(301));o+=1,Wt=Dt=null,e.updateQueue=null,hg.current=Tq,t=n(r,i)}while(tp)}if(hg.current=Ng,e=Dt!==null&&Dt.next!==null,Pa=0,Wt=Dt=at=null,Fg=!1,e)throw Error(B(300));return t}function F0(){var t=vp!==0;return vp=0,t}function Fi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?at.memoizedState=Wt=t:Wt=Wt.next=t,Wt}function Vr(){if(Dt===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Wt===null?at.memoizedState:Wt.next;if(e!==null)Wt=e,Dt=t;else{if(t===null)throw Error(B(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Wt===null?at.memoizedState=Wt=t:Wt=Wt.next=t}return Wt}function wp(t,e){return typeof e=="function"?e(t):e}function uk(t){var e=Vr(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Dt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Pa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,at.lanes|=u,Ca|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,fi(r,e.memoizedState)||(zn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,at.lanes|=o,Ca|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dk(t){var e=Vr(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);fi(o,e.memoizedState)||(zn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function dA(){}function pA(t,e){var n=at,r=Vr(),i=e(),o=!fi(r.memoizedState,i);if(o&&(r.memoizedState=i,zn=!0),r=r.queue,N0(mA.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Wt!==null&&Wt.memoizedState.tag&1){if(n.flags|=2048,bp(9,hA.bind(null,n,r,i,e),void 0,null),qt===null)throw Error(B(349));Pa&30||fA(n,e,i)}return i}function fA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hA(t,e,n,r){e.value=n,e.getSnapshot=r,gA(e)&&yA(t)}function mA(t,e,n){return n(function(){gA(e)&&yA(t)})}function gA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fi(t,n)}catch{return!0}}function yA(t){var e=yo(t,1);e!==null&&pi(e,t,1,-1)}function VI(t){var e=Fi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:t},e.queue=t,t=t.dispatch=xq.bind(null,at,t),[e.memoizedState,t]}function bp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vA(){return Vr().memoizedState}function mg(t,e,n,r){var i=Fi();at.flags|=t,i.memoizedState=bp(1|e,n,void 0,r===void 0?null:r)}function Qg(t,e,n,r){var i=Vr();r=r===void 0?null:r;var o=void 0;if(Dt!==null){var s=Dt.memoizedState;if(o=s.destroy,r!==null&&O0(r,s.deps)){i.memoizedState=bp(e,n,o,r);return}}at.flags|=t,i.memoizedState=bp(1|e,n,o,r)}function zI(t,e){return mg(8390656,8,t,e)}function N0(t,e){return Qg(2048,8,t,e)}function wA(t,e){return Qg(4,2,t,e)}function bA(t,e){return Qg(4,4,t,e)}function xA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _A(t,e,n){return n=n!=null?n.concat([t]):null,Qg(4,4,xA.bind(null,e,t),n)}function V0(){}function kA(t,e){var n=Vr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TA(t,e){var n=Vr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function SA(t,e,n){return Pa&21?(fi(n,e)||(n=ML(),at.lanes|=n,Ca|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zn=!0),t.memoizedState=n)}function wq(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=ck.transition;ck.transition={};try{t(!1),e()}finally{Oe=n,ck.transition=r}}function EA(){return Vr().memoizedState}function bq(t,e,n){var r=xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PA(t))CA(e,n);else if(n=lA(t,e,n,r),n!==null){var i=Sn();pi(n,t,r,i),RA(n,e,r)}}function xq(t,e,n){var r=xs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PA(t))CA(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,fi(a,s)){var l=e.interleaved;l===null?(i.next=i,M0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=lA(t,e,i,r),n!==null&&(i=Sn(),pi(n,t,r,i),RA(n,e,r))}}function PA(t){var e=t.alternate;return t===at||e!==null&&e===at}function CA(t,e){tp=Fg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,g0(t,n)}}var Ng={readContext:Nr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},_q={readContext:Nr,useCallback:function(t,e){return Fi().memoizedState=[t,e===void 0?null:e],t},useContext:Nr,useEffect:zI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mg(4194308,4,xA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mg(4194308,4,t,e)},useInsertionEffect:function(t,e){return mg(4,2,t,e)},useMemo:function(t,e){var n=Fi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bq.bind(null,at,t),[r.memoizedState,t]},useRef:function(t){var e=Fi();return t={current:t},e.memoizedState=t},useState:VI,useDebugValue:V0,useDeferredValue:function(t){return Fi().memoizedState=t},useTransition:function(){var t=VI(!1),e=t[0];return t=wq.bind(null,t[1]),Fi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=at,i=Fi();if(rt){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),qt===null)throw Error(B(349));Pa&30||fA(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zI(mA.bind(null,r,o,t),[t]),r.flags|=2048,bp(9,hA.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Fi(),e=qt.identifierPrefix;if(rt){var n=fo,r=po;n=(r&~(1<<32-di(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kq={readContext:Nr,useCallback:kA,useContext:Nr,useEffect:N0,useImperativeHandle:_A,useInsertionEffect:wA,useLayoutEffect:bA,useMemo:TA,useReducer:uk,useRef:vA,useState:function(){return uk(wp)},useDebugValue:V0,useDeferredValue:function(t){var e=Vr();return SA(e,Dt.memoizedState,t)},useTransition:function(){var t=uk(wp)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:dA,useSyncExternalStore:pA,useId:EA,unstable_isNewReconciler:!1},Tq={readContext:Nr,useCallback:kA,useContext:Nr,useEffect:N0,useImperativeHandle:_A,useInsertionEffect:wA,useLayoutEffect:bA,useMemo:TA,useReducer:dk,useRef:vA,useState:function(){return dk(wp)},useDebugValue:V0,useDeferredValue:function(t){var e=Vr();return Dt===null?e.memoizedState=t:SA(e,Dt.memoizedState,t)},useTransition:function(){var t=dk(wp)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:dA,useSyncExternalStore:pA,useId:EA,unstable_isNewReconciler:!1};function li(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qk(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xg={isMounted:function(t){return(t=t._reactInternals)?Ia(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Sn(),i=xs(t),o=ho(r,i);o.payload=e,n!=null&&(o.callback=n),e=ws(t,o,i),e!==null&&(pi(e,t,i,r),fg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Sn(),i=xs(t),o=ho(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ws(t,o,i),e!==null&&(pi(e,t,i,r),fg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Sn(),r=xs(t),i=ho(n,r);i.tag=2,e!=null&&(i.callback=e),e=ws(t,i,r),e!==null&&(pi(e,t,r,n),fg(e,t,r))}};function BI(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!pp(n,r)||!pp(i,o):!0}function MA(t,e,n){var r=!1,i=Ts,o=e.contextType;return typeof o=="object"&&o!==null?o=Nr(o):(i=Un(e)?Sa:mn.current,r=e.contextTypes,o=(r=r!=null)?gc(t,i):Ts),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function UI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xg.enqueueReplaceState(e,e.state,null)}function Yk(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},I0(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Nr(o):(o=Un(e)?Sa:mn.current,i.context=gc(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(qk(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xg.enqueueReplaceState(i,i.state,null),Og(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bc(t,e){try{var n="",r=e;do n+=eW(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function pk(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sq=typeof WeakMap=="function"?WeakMap:Map;function IA(t,e,n){n=ho(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zg||(zg=!0,i0=r),Kk(t,e)},n}function LA(t,e,n){n=ho(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Kk(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Kk(t,e),typeof r!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function HI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sq;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Vq.bind(null,t,e,n),e.then(t,t))}function jI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ho(-1,1),e.tag=2,ws(n,e,1))),n.lanes|=1),t)}var Eq=wo.ReactCurrentOwner,zn=!1;function Tn(t,e,n,r){e.child=t===null?aA(e,null,n,r):vc(e,t.child,n,r)}function qI(t,e,n,r,i){n=n.render;var o=e.ref;return fc(e,i),r=D0(t,e,n,r,o,i),n=F0(),t!==null&&!zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vo(t,e,i)):(rt&&n&&T0(e),e.flags|=1,Tn(t,e,r,i),e.child)}function YI(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Y0(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,AA(t,e,o,r,i)):(t=wg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:pp,n(s,r)&&t.ref===e.ref)return vo(t,e,i)}return e.flags|=1,t=_s(o,r),t.ref=e.ref,t.return=e,e.child=t}function AA(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(pp(o,r)&&t.ref===e.ref)if(zn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(zn=!0);else return e.lanes=t.lanes,vo(t,e,i)}return Gk(t,e,n,r,i)}function $A(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(lc,ir),ir|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(lc,ir),ir|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Be(lc,ir),ir|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Be(lc,ir),ir|=r;return Tn(t,e,i,n),e.child}function OA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gk(t,e,n,r,i){var o=Un(n)?Sa:mn.current;return o=gc(e,o),fc(e,i),n=D0(t,e,n,r,o,i),r=F0(),t!==null&&!zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vo(t,e,i)):(rt&&r&&T0(e),e.flags|=1,Tn(t,e,n,i),e.child)}function KI(t,e,n,r,i){if(Un(n)){var o=!0;Mg(e)}else o=!1;if(fc(e,i),e.stateNode===null)gg(t,e),MA(e,n,r),Yk(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Nr(c):(c=Un(n)?Sa:mn.current,c=gc(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&UI(e,s,r,c),us=!1;var p=e.memoizedState;s.state=p,Og(e,r,s,i),l=e.memoizedState,a!==r||p!==l||Bn.current||us?(typeof u=="function"&&(qk(e,n,u,r),l=e.memoizedState),(a=us||BI(e,n,a,r,p,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,cA(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:li(e.type,a),s.props=c,d=e.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Nr(l):(l=Un(n)?Sa:mn.current,l=gc(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||p!==l)&&UI(e,s,r,l),us=!1,p=e.memoizedState,s.state=p,Og(e,r,s,i);var h=e.memoizedState;a!==d||p!==h||Bn.current||us?(typeof f=="function"&&(qk(e,n,f,r),h=e.memoizedState),(c=us||BI(e,n,c,r,p,h,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,h,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),s.props=r,s.state=h,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Qk(t,e,n,r,o,i)}function Qk(t,e,n,r,i,o){OA(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&AI(e,n,!1),vo(t,e,o);r=e.stateNode,Eq.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=vc(e,t.child,null,o),e.child=vc(e,null,a,o)):Tn(t,e,a,o),e.memoizedState=r.state,i&&AI(e,n,!0),e.child}function DA(t){var e=t.stateNode;e.pendingContext?LI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LI(t,e.context,!1),L0(t,e.containerInfo)}function GI(t,e,n,r,i){return yc(),E0(i),e.flags|=256,Tn(t,e,n,r),e.child}var Xk={dehydrated:null,treeContext:null,retryLane:0};function Zk(t){return{baseLanes:t,cachePool:null,transitions:null}}function FA(t,e,n){var r=e.pendingProps,i=st.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Be(st,i&1),t===null)return jk(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ey(s,r,0,null),t=Ta(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Zk(n),e.memoizedState=Xk,t):z0(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Pq(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_s(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=_s(a,o):(o=Ta(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Zk(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Xk,r}return o=t.child,t=o.sibling,r=_s(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function z0(t,e){return e=ey({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ag(t,e,n,r){return r!==null&&E0(r),vc(e,t.child,null,n),t=z0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Pq(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=pk(Error(B(422))),ag(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ey({mode:"visible",children:r.children},i,0,null),o=Ta(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&vc(e,t.child,null,s),e.child.memoizedState=Zk(s),e.memoizedState=Xk,o);if(!(e.mode&1))return ag(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(B(419)),r=pk(o,r,void 0),ag(t,e,s,r)}if(a=(s&t.childLanes)!==0,zn||a){if(r=qt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,yo(t,i),pi(r,t,i,-1))}return q0(),r=pk(Error(B(421))),ag(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zq.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,or=vs(i.nextSibling),sr=e,rt=!0,ui=null,t!==null&&($r[Or++]=po,$r[Or++]=fo,$r[Or++]=Ea,po=t.id,fo=t.overflow,Ea=e),e=z0(e,r.children),e.flags|=4096,e)}function QI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wk(t.return,e,n)}function fk(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function NA(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Tn(t,e,r.children,n),r=st.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&QI(t,n,e);else if(t.tag===19)QI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(st,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Dg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),fk(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Dg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}fk(e,!0,n,null,o);break;case"together":fk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ca|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=_s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Cq(t,e,n){switch(e.tag){case 3:DA(e),yc();break;case 5:uA(e);break;case 1:Un(e.type)&&Mg(e);break;case 4:L0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Be(Ag,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(st,st.current&1),e.flags|=128,null):n&e.child.childLanes?FA(t,e,n):(Be(st,st.current&1),t=vo(t,e,n),t!==null?t.sibling:null);Be(st,st.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return NA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Be(st,st.current),r)break;return null;case 22:case 23:return e.lanes=0,$A(t,e,n)}return vo(t,e,n)}var VA,Jk,zA,BA;VA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jk=function(){};zA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_a(zi.current);var o=null;switch(n){case"input":i=xk(t,i),r=xk(t,r),o=[];break;case"select":i=lt({},i,{value:void 0}),r=lt({},r,{value:void 0}),o=[];break;case"textarea":i=Tk(t,i),r=Tk(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cg)}Ek(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(op.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i?.[c],r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(op.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ke("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};BA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hd(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Rq(t,e,n){var r=e.pendingProps;switch(S0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Un(e.type)&&Rg(),fn(e),null;case 3:return r=e.stateNode,wc(),Ge(Bn),Ge(mn),$0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(og(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(a0(ui),ui=null))),Jk(t,e),fn(e),null;case 5:A0(e);var i=_a(yp.current);if(n=e.type,t!==null&&e.stateNode!=null)zA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return fn(e),null}if(t=_a(zi.current),og(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ni]=e,r[mp]=o,t=(e.mode&1)!==0,n){case"dialog":Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(i=0;i<Gd.length;i++)Ke(Gd[i],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"input":iI(r,o),Ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ke("invalid",r);break;case"textarea":sI(r,o),Ke("invalid",r)}Ek(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&ig(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&ig(r.textContent,a,t),i=["children",""+a]):op.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ke("scroll",r)}switch(n){case"input":qm(r),oI(r,o,!0);break;case"textarea":qm(r),aI(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Cg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ni]=e,t[mp]=r,VA(t,e,!1,!1),e.stateNode=t;e:{switch(s=Pk(n,r),n){case"dialog":Ke("cancel",t),Ke("close",t),i=r;break;case"iframe":case"object":case"embed":Ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gd.length;i++)Ke(Gd[i],t);i=r;break;case"source":Ke("error",t),i=r;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),i=r;break;case"details":Ke("toggle",t),i=r;break;case"input":iI(t,r),i=xk(t,r),Ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=lt({},r,{value:void 0}),Ke("invalid",t);break;case"textarea":sI(t,r),i=Tk(t,r),Ke("invalid",t);break;default:i=r}Ek(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?vL(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gL(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sp(t,l):typeof l=="number"&&sp(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(op.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ke("scroll",t):l!=null&&u0(t,o,l,s))}switch(n){case"input":qm(t),oI(t,r,!1);break;case"textarea":qm(t),aI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ks(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?cc(t,!!r.multiple,o,!1):r.defaultValue!=null&&cc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)BA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=_a(yp.current),_a(zi.current),og(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ni]=e,(o=r.nodeValue!==n)&&(t=sr,t!==null))switch(t.tag){case 3:ig(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ig(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ni]=e,e.stateNode=r}return fn(e),null;case 13:if(Ge(st),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&or!==null&&e.mode&1&&!(e.flags&128))oA(),yc(),e.flags|=98560,o=!1;else if(o=og(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(B(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[Ni]=e}else yc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),o=!1}else ui!==null&&(a0(ui),ui=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||st.current&1?Ft===0&&(Ft=3):q0())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return wc(),Jk(t,e),t===null&&fp(e.stateNode.containerInfo),fn(e),null;case 10:return R0(e.type._context),fn(e),null;case 17:return Un(e.type)&&Rg(),fn(e),null;case 19:if(Ge(st),o=e.memoizedState,o===null)return fn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Hd(o,!1);else{if(Ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Dg(t),s!==null){for(e.flags|=128,Hd(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(st,st.current&1|2),e.child}t=t.sibling}o.tail!==null&&bt()>xc&&(e.flags|=128,r=!0,Hd(o,!1),e.lanes=4194304)}else{if(!r)if(t=Dg(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!rt)return fn(e),null}else 2*bt()-o.renderingStartTime>xc&&n!==1073741824&&(e.flags|=128,r=!0,Hd(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=bt(),e.sibling=null,n=st.current,Be(st,r?n&1|2:n&1),e):(fn(e),null);case 22:case 23:return W0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ir&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function Mq(t,e){switch(S0(e),e.tag){case 1:return Un(e.type)&&Rg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wc(),Ge(Bn),Ge(mn),$0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return A0(e),null;case 13:if(Ge(st),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));yc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(st),null;case 4:return wc(),null;case 10:return R0(e.type._context),null;case 22:case 23:return W0(),null;case 24:return null;default:return null}}var lg=!1,hn=!1,Iq=typeof WeakSet=="function"?WeakSet:Set,K=null;function ac(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function e0(t,e,n){try{n()}catch(r){ht(t,e,r)}}var XI=!1;function Lq(t,e){if(Fk=Sg,t=qL(),k0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(f=d.firstChild)!==null;)p=d,d=f;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=s),p===o&&++u===r&&(l=s),(f=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nk={focusedElem:t,selectionRange:n},Sg=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var g=h.memoizedProps,w=h.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:li(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(b){ht(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return h=XI,XI=!1,h}function np(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&e0(e,n,o)}i=i.next}while(i!==r)}}function Zg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function t0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function UA(t){var e=t.alternate;e!==null&&(t.alternate=null,UA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ni],delete e[mp],delete e[Bk],delete e[hq],delete e[mq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HA(t){return t.tag===5||t.tag===3||t.tag===4}function ZI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function n0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cg));else if(r!==4&&(t=t.child,t!==null))for(n0(t,e,n),t=t.sibling;t!==null;)n0(t,e,n),t=t.sibling}function r0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(r0(t,e,n),t=t.sibling;t!==null;)r0(t,e,n),t=t.sibling}var tn=null,ci=!1;function ls(t,e,n){for(n=n.child;n!==null;)jA(t,e,n),n=n.sibling}function jA(t,e,n){if(Vi&&typeof Vi.onCommitFiberUnmount=="function")try{Vi.onCommitFiberUnmount(jg,n)}catch{}switch(n.tag){case 5:hn||ac(n,e);case 6:var r=tn,i=ci;tn=null,ls(t,e,n),tn=r,ci=i,tn!==null&&(ci?(t=tn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tn.removeChild(n.stateNode));break;case 18:tn!==null&&(ci?(t=tn,n=n.stateNode,t.nodeType===8?sk(t.parentNode,n):t.nodeType===1&&sk(t,n),up(t)):sk(tn,n.stateNode));break;case 4:r=tn,i=ci,tn=n.stateNode.containerInfo,ci=!0,ls(t,e,n),tn=r,ci=i;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&e0(n,e,s),i=i.next}while(i!==r)}ls(t,e,n);break;case 1:if(!hn&&(ac(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ht(n,e,a)}ls(t,e,n);break;case 21:ls(t,e,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,ls(t,e,n),hn=r):ls(t,e,n);break;default:ls(t,e,n)}}function JI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Iq),e.forEach(function(r){var i=Bq.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ai(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:tn=a.stateNode,ci=!1;break e;case 3:tn=a.stateNode.containerInfo,ci=!0;break e;case 4:tn=a.stateNode.containerInfo,ci=!0;break e}a=a.return}if(tn===null)throw Error(B(160));jA(o,s,i),tn=null,ci=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ht(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WA(e,t),e=e.sibling}function WA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ai(e,t),Di(t),r&4){try{np(3,t,t.return),Zg(3,t)}catch(g){ht(t,t.return,g)}try{np(5,t,t.return)}catch(g){ht(t,t.return,g)}}break;case 1:ai(e,t),Di(t),r&512&&n!==null&&ac(n,n.return);break;case 5:if(ai(e,t),Di(t),r&512&&n!==null&&ac(n,n.return),t.flags&32){var i=t.stateNode;try{sp(i,"")}catch(g){ht(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&fL(i,o),Pk(a,s);var c=Pk(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?vL(i,d):u==="dangerouslySetInnerHTML"?gL(i,d):u==="children"?sp(i,d):u0(i,u,d,c)}switch(a){case"input":_k(i,o);break;case"textarea":hL(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?cc(i,!!o.multiple,f,!1):p!==!!o.multiple&&(o.defaultValue!=null?cc(i,!!o.multiple,o.defaultValue,!0):cc(i,!!o.multiple,o.multiple?[]:"",!1))}i[mp]=o}catch(g){ht(t,t.return,g)}}break;case 6:if(ai(e,t),Di(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){ht(t,t.return,g)}}break;case 3:if(ai(e,t),Di(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{up(e.containerInfo)}catch(g){ht(t,t.return,g)}break;case 4:ai(e,t),Di(t);break;case 13:ai(e,t),Di(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(H0=bt())),r&4&&JI(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(hn=(c=hn)||u,ai(e,t),hn=c):ai(e,t),Di(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(K=t,u=t.child;u!==null;){for(d=K=u;K!==null;){switch(p=K,f=p.child,p.tag){case 0:case 11:case 14:case 15:np(4,p,p.return);break;case 1:ac(p,p.return);var h=p.stateNode;if(typeof h.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(g){ht(r,n,g)}}break;case 5:ac(p,p.return);break;case 22:if(p.memoizedState!==null){tL(d);continue}}f!==null?(f.return=p,K=f):tL(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yL("display",s))}catch(g){ht(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){ht(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ai(e,t),Di(t),r&4&&JI(t);break;case 21:break;default:ai(e,t),Di(t)}}function Di(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(HA(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(sp(i,""),r.flags&=-33);var o=ZI(t);r0(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=ZI(t);n0(t,a,s);break;default:throw Error(B(161))}}catch(l){ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Aq(t,e,n){K=t,qA(t,e,n)}function qA(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||lg;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||hn;a=lg;var c=hn;if(lg=s,(hn=l)&&!c)for(K=i;K!==null;)s=K,l=s.child,s.tag===22&&s.memoizedState!==null?nL(i):l!==null?(l.return=s,K=l):nL(i);for(;o!==null;)K=o,qA(o,e,n),o=o.sibling;K=i,lg=a,hn=c}eL(t,e,n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):eL(t,e,n)}}function eL(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||Zg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:li(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&NI(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}NI(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&up(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}hn||e.flags&512&&t0(e)}catch(p){ht(e,e.return,p)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function tL(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function nL(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zg(4,e)}catch(l){ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ht(e,i,l)}}var o=e.return;try{t0(e)}catch(l){ht(e,o,l)}break;case 5:var s=e.return;try{t0(e)}catch(l){ht(e,s,l)}}}catch(l){ht(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var $q=Math.ceil,Vg=wo.ReactCurrentDispatcher,B0=wo.ReactCurrentOwner,Fr=wo.ReactCurrentBatchConfig,Pe=0,qt=null,Ct=null,nn=0,ir=0,lc=Es(0),Ft=0,xp=null,Ca=0,Jg=0,U0=0,rp=null,Vn=null,H0=0,xc=1/0,co=null,zg=!1,i0=null,bs=null,cg=!1,hs=null,Bg=0,ip=0,o0=null,yg=-1,vg=0;function Sn(){return Pe&6?bt():yg!==-1?yg:yg=bt()}function xs(t){return t.mode&1?Pe&2&&nn!==0?nn&-nn:yq.transition!==null?(vg===0&&(vg=ML()),vg):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:FL(t.type)),t):1}function pi(t,e,n,r){if(50<ip)throw ip=0,o0=null,Error(B(185));_p(t,n,r),(!(Pe&2)||t!==qt)&&(t===qt&&(!(Pe&2)&&(Jg|=n),Ft===4&&ps(t,nn)),Hn(t,r),n===1&&Pe===0&&!(e.mode&1)&&(xc=bt()+500,Gg&&Ps()))}function Hn(t,e){var n=t.callbackNode;wW(t,e);var r=Tg(t,t===qt?nn:0);if(r===0)n!==null&&uI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uI(n),e===1)t.tag===0?gq(rL.bind(null,t)):nA(rL.bind(null,t)),pq(function(){!(Pe&6)&&Ps()}),n=null;else{switch(IL(r)){case 1:n=m0;break;case 4:n=CL;break;case 16:n=kg;break;case 536870912:n=RL;break;default:n=kg}n=e$(n,YA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YA(t,e){if(yg=-1,vg=0,Pe&6)throw Error(B(327));var n=t.callbackNode;if(hc()&&t.callbackNode!==n)return null;var r=Tg(t,t===qt?nn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ug(t,r);else{e=r;var i=Pe;Pe|=2;var o=GA();(qt!==t||nn!==e)&&(co=null,xc=bt()+500,ka(t,e));do try{Fq();break}catch(a){KA(t,a)}while(!0);C0(),Vg.current=o,Pe=i,Ct!==null?e=0:(qt=null,nn=0,e=Ft)}if(e!==0){if(e===2&&(i=Lk(t),i!==0&&(r=i,e=s0(t,i))),e===1)throw n=xp,ka(t,0),ps(t,r),Hn(t,bt()),n;if(e===6)ps(t,r);else{if(i=t.current.alternate,!(r&30)&&!Oq(i)&&(e=Ug(t,r),e===2&&(o=Lk(t),o!==0&&(r=o,e=s0(t,o))),e===1))throw n=xp,ka(t,0),ps(t,r),Hn(t,bt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:wa(t,Vn,co);break;case 3:if(ps(t,r),(r&130023424)===r&&(e=H0+500-bt(),10<e)){if(Tg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zk(wa.bind(null,t,Vn,co),e);break}wa(t,Vn,co);break;case 4:if(ps(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-di(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$q(r/1960))-r,10<r){t.timeoutHandle=zk(wa.bind(null,t,Vn,co),r);break}wa(t,Vn,co);break;case 5:wa(t,Vn,co);break;default:throw Error(B(329))}}}return Hn(t,bt()),t.callbackNode===n?YA.bind(null,t):null}function s0(t,e){var n=rp;return t.current.memoizedState.isDehydrated&&(ka(t,e).flags|=256),t=Ug(t,e),t!==2&&(e=Vn,Vn=n,e!==null&&a0(e)),t}function a0(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function Oq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!fi(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ps(t,e){for(e&=~U0,e&=~Jg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-di(e),r=1<<n;t[n]=-1,e&=~r}}function rL(t){if(Pe&6)throw Error(B(327));hc();var e=Tg(t,0);if(!(e&1))return Hn(t,bt()),null;var n=Ug(t,e);if(t.tag!==0&&n===2){var r=Lk(t);r!==0&&(e=r,n=s0(t,r))}if(n===1)throw n=xp,ka(t,0),ps(t,e),Hn(t,bt()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wa(t,Vn,co),Hn(t,bt()),null}function j0(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(xc=bt()+500,Gg&&Ps())}}function Ra(t){hs!==null&&hs.tag===0&&!(Pe&6)&&hc();var e=Pe;Pe|=1;var n=Fr.transition,r=Oe;try{if(Fr.transition=null,Oe=1,t)return t()}finally{Oe=r,Fr.transition=n,Pe=e,!(Pe&6)&&Ps()}}function W0(){ir=lc.current,Ge(lc)}function ka(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dq(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(S0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rg();break;case 3:wc(),Ge(Bn),Ge(mn),$0();break;case 5:A0(r);break;case 4:wc();break;case 13:Ge(st);break;case 19:Ge(st);break;case 10:R0(r.type._context);break;case 22:case 23:W0()}n=n.return}if(qt=t,Ct=t=_s(t.current,null),nn=ir=e,Ft=0,xp=null,U0=Jg=Ca=0,Vn=rp=null,xa!==null){for(e=0;e<xa.length;e++)if(n=xa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}xa=null}return t}function KA(t,e){do{var n=Ct;try{if(C0(),hg.current=Ng,Fg){for(var r=at.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fg=!1}if(Pa=0,Wt=Dt=at=null,tp=!1,vp=0,B0.current=null,n===null||n.return===null){Ft=1,xp=e,Ct=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=jI(s);if(f!==null){f.flags&=-257,WI(f,s,a,o,e),f.mode&1&&HI(o,c,e),e=f,l=c;var h=e.updateQueue;if(h===null){var g=new Set;g.add(l),e.updateQueue=g}else h.add(l);break e}else{if(!(e&1)){HI(o,c,e),q0();break e}l=Error(B(426))}}else if(rt&&a.mode&1){var w=jI(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),WI(w,s,a,o,e),E0(bc(l,a));break e}}o=l=bc(l,a),Ft!==4&&(Ft=2),rp===null?rp=[o]:rp.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=IA(o,l,e);FI(o,m);break e;case 1:a=l;var y=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(bs===null||!bs.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=LA(o,a,e);FI(o,b);break e}}o=o.return}while(o!==null)}XA(n)}catch(k){e=k,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function GA(){var t=Vg.current;return Vg.current=Ng,t===null?Ng:t}function q0(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),qt===null||!(Ca&268435455)&&!(Jg&268435455)||ps(qt,nn)}function Ug(t,e){var n=Pe;Pe|=2;var r=GA();(qt!==t||nn!==e)&&(co=null,ka(t,e));do try{Dq();break}catch(i){KA(t,i)}while(!0);if(C0(),Pe=n,Vg.current=r,Ct!==null)throw Error(B(261));return qt=null,nn=0,Ft}function Dq(){for(;Ct!==null;)QA(Ct)}function Fq(){for(;Ct!==null&&!uW();)QA(Ct)}function QA(t){var e=JA(t.alternate,t,ir);t.memoizedProps=t.pendingProps,e===null?XA(t):Ct=e,B0.current=null}function XA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Mq(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,Ct=null;return}}else if(n=Rq(n,e,ir),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Ft===0&&(Ft=5)}function wa(t,e,n){var r=Oe,i=Fr.transition;try{Fr.transition=null,Oe=1,Nq(t,e,n,r)}finally{Fr.transition=i,Oe=r}return null}function Nq(t,e,n,r){do hc();while(hs!==null);if(Pe&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(bW(t,o),t===qt&&(Ct=qt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cg||(cg=!0,e$(kg,function(){return hc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Fr.transition,Fr.transition=null;var s=Oe;Oe=1;var a=Pe;Pe|=4,B0.current=null,Lq(t,n),WA(n,t),sq(Nk),Sg=!!Fk,Nk=Fk=null,t.current=n,Aq(n,t,i),dW(),Pe=a,Oe=s,Fr.transition=o}else t.current=n;if(cg&&(cg=!1,hs=t,Bg=i),o=t.pendingLanes,o===0&&(bs=null),hW(n.stateNode,r),Hn(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zg)throw zg=!1,t=i0,i0=null,t;return Bg&1&&t.tag!==0&&hc(),o=t.pendingLanes,o&1?t===o0?ip++:(ip=0,o0=t):ip=0,Ps(),null}function hc(){if(hs!==null){var t=IL(Bg),e=Fr.transition,n=Oe;try{if(Fr.transition=null,Oe=16>t?16:t,hs===null)var r=!1;else{if(t=hs,hs=null,Bg=0,Pe&6)throw Error(B(331));var i=Pe;for(Pe|=4,K=t.current;K!==null;){var o=K,s=o.child;if(K.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:np(8,u,o)}var d=u.child;if(d!==null)d.return=u,K=d;else for(;K!==null;){u=K;var p=u.sibling,f=u.return;if(UA(u),u===c){K=null;break}if(p!==null){p.return=f,K=p;break}K=f}}}var h=o.alternate;if(h!==null){var g=h.child;if(g!==null){h.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}K=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,K=s;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:np(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,K=m;break e}K=o.return}}var y=t.current;for(K=y;K!==null;){s=K;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,K=v;else e:for(s=y;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zg(9,a)}}catch(k){ht(a,a.return,k)}if(a===s){K=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,K=b;break e}K=a.return}}if(Pe=i,Ps(),Vi&&typeof Vi.onPostCommitFiberRoot=="function")try{Vi.onPostCommitFiberRoot(jg,t)}catch{}r=!0}return r}finally{Oe=n,Fr.transition=e}}return!1}function iL(t,e,n){e=bc(n,e),e=IA(t,e,1),t=ws(t,e,1),e=Sn(),t!==null&&(_p(t,1,e),Hn(t,e))}function ht(t,e,n){if(t.tag===3)iL(t,t,n);else for(;e!==null;){if(e.tag===3){iL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bs===null||!bs.has(r))){t=bc(n,t),t=LA(e,t,1),e=ws(e,t,1),t=Sn(),e!==null&&(_p(e,1,t),Hn(e,t));break}}e=e.return}}function Vq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Sn(),t.pingedLanes|=t.suspendedLanes&n,qt===t&&(nn&n)===n&&(Ft===4||Ft===3&&(nn&130023424)===nn&&500>bt()-H0?ka(t,0):U0|=n),Hn(t,e)}function ZA(t,e){e===0&&(t.mode&1?(e=Gm,Gm<<=1,!(Gm&130023424)&&(Gm=4194304)):e=1);var n=Sn();t=yo(t,e),t!==null&&(_p(t,e,n),Hn(t,n))}function zq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ZA(t,n)}function Bq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),ZA(t,n)}var JA;JA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)zn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zn=!1,Cq(t,e,n);zn=!!(t.flags&131072)}else zn=!1,rt&&e.flags&1048576&&rA(e,Lg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gg(t,e),t=e.pendingProps;var i=gc(e,mn.current);fc(e,n),i=D0(null,e,r,t,i,n);var o=F0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Un(r)?(o=!0,Mg(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,I0(e),i.updater=Xg,e.stateNode=i,i._reactInternals=e,Yk(e,r,t,n),e=Qk(null,e,r,!0,o,n)):(e.tag=0,rt&&o&&T0(e),Tn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Hq(r),t=li(r,t),i){case 0:e=Gk(null,e,r,t,n);break e;case 1:e=KI(null,e,r,t,n);break e;case 11:e=qI(null,e,r,t,n);break e;case 14:e=YI(null,e,r,li(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),Gk(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),KI(t,e,r,i,n);case 3:e:{if(DA(e),t===null)throw Error(B(387));r=e.pendingProps,o=e.memoizedState,i=o.element,cA(t,e),Og(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=bc(Error(B(423)),e),e=GI(t,e,r,n,i);break e}else if(r!==i){i=bc(Error(B(424)),e),e=GI(t,e,r,n,i);break e}else for(or=vs(e.stateNode.containerInfo.firstChild),sr=e,rt=!0,ui=null,n=aA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yc(),r===i){e=vo(t,e,n);break e}Tn(t,e,r,n)}e=e.child}return e;case 5:return uA(e),t===null&&jk(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Vk(r,i)?s=null:o!==null&&Vk(r,o)&&(e.flags|=32),OA(t,e),Tn(t,e,s,n),e.child;case 6:return t===null&&jk(e),null;case 13:return FA(t,e,n);case 4:return L0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vc(e,null,r,n):Tn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),qI(t,e,r,i,n);case 7:return Tn(t,e,e.pendingProps,n),e.child;case 8:return Tn(t,e,e.pendingProps.children,n),e.child;case 12:return Tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Be(Ag,r._currentValue),r._currentValue=s,o!==null)if(fi(o.value,s)){if(o.children===i.children&&!Bn.current){e=vo(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=ho(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Wk(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(B(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Wk(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Tn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fc(e,n),i=Nr(i),r=r(i),e.flags|=1,Tn(t,e,r,n),e.child;case 14:return r=e.type,i=li(r,e.pendingProps),i=li(r.type,i),YI(t,e,r,i,n);case 15:return AA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),gg(t,e),e.tag=1,Un(r)?(t=!0,Mg(e)):t=!1,fc(e,n),MA(e,r,i),Yk(e,r,i,n),Qk(null,e,r,!0,t,n);case 19:return NA(t,e,n);case 22:return $A(t,e,n)}throw Error(B(156,e.tag))};function e$(t,e){return PL(t,e)}function Uq(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(t,e,n,r){return new Uq(t,e,n,r)}function Y0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hq(t){if(typeof t=="function")return Y0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===p0)return 11;if(t===f0)return 14}return 2}function _s(t,e){var n=t.alternate;return n===null?(n=Dr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wg(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Y0(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Zl:return Ta(n.children,i,o,e);case d0:s=8,i|=8;break;case yk:return t=Dr(12,n,e,i|2),t.elementType=yk,t.lanes=o,t;case vk:return t=Dr(13,n,e,i),t.elementType=vk,t.lanes=o,t;case wk:return t=Dr(19,n,e,i),t.elementType=wk,t.lanes=o,t;case uL:return ey(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lL:s=10;break e;case cL:s=9;break e;case p0:s=11;break e;case f0:s=14;break e;case cs:s=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Dr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ta(t,e,n,r){return t=Dr(7,t,r,e),t.lanes=n,t}function ey(t,e,n,r){return t=Dr(22,t,r,e),t.elementType=uL,t.lanes=n,t.stateNode={isHidden:!1},t}function hk(t,e,n){return t=Dr(6,t,null,e),t.lanes=n,t}function mk(t,e,n){return e=Dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jq(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z_(0),this.expirationTimes=Z_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function K0(t,e,n,r,i,o,s,a,l){return t=new jq(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Dr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},I0(o),t}function Wq(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function t$(t){if(!t)return Ts;t=t._reactInternals;e:{if(Ia(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Un(n))return tA(t,n,e)}return e}function n$(t,e,n,r,i,o,s,a,l){return t=K0(n,r,!0,t,i,o,s,a,l),t.context=t$(null),n=t.current,r=Sn(),i=xs(n),o=ho(r,i),o.callback=e??null,ws(n,o,i),t.current.lanes=i,_p(t,i,r),Hn(t,r),t}function ty(t,e,n,r){var i=e.current,o=Sn(),s=xs(i);return n=t$(n),e.context===null?e.context=n:e.pendingContext=n,e=ho(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ws(i,e,s),t!==null&&(pi(t,i,s,o),fg(t,i,s)),s}function Hg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function G0(t,e){oL(t,e),(t=t.alternate)&&oL(t,e)}function qq(){return null}var r$=typeof reportError=="function"?reportError:function(t){console.error(t)};function Q0(t){this._internalRoot=t}ny.prototype.render=Q0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));ty(t,e,null,null)};ny.prototype.unmount=Q0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ra(function(){ty(null,t,null,null)}),e[go]=null}};function ny(t){this._internalRoot=t}ny.prototype.unstable_scheduleHydration=function(t){if(t){var e=$L();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ds.length&&e!==0&&e<ds[n].priority;n++);ds.splice(n,0,t),n===0&&DL(t)}};function X0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ry(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sL(){}function Yq(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=Hg(s);o.call(c)}}var s=n$(e,r,t,0,null,!1,!1,"",sL);return t._reactRootContainer=s,t[go]=s.current,fp(t.nodeType===8?t.parentNode:t),Ra(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Hg(l);a.call(c)}}var l=K0(t,0,!1,null,null,!1,!1,"",sL);return t._reactRootContainer=l,t[go]=l.current,fp(t.nodeType===8?t.parentNode:t),Ra(function(){ty(e,l,n,r)}),l}function iy(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Hg(s);a.call(l)}}ty(e,s,t,i)}else s=Yq(n,e,t,i,r);return Hg(s)}LL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kd(e.pendingLanes);n!==0&&(g0(e,n|1),Hn(e,bt()),!(Pe&6)&&(xc=bt()+500,Ps()))}break;case 13:Ra(function(){var r=yo(t,1);if(r!==null){var i=Sn();pi(r,t,1,i)}}),G0(t,1)}};y0=function(t){if(t.tag===13){var e=yo(t,134217728);if(e!==null){var n=Sn();pi(e,t,134217728,n)}G0(t,134217728)}};AL=function(t){if(t.tag===13){var e=xs(t),n=yo(t,e);if(n!==null){var r=Sn();pi(n,t,e,r)}G0(t,e)}};$L=function(){return Oe};OL=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};Rk=function(t,e,n){switch(e){case"input":if(_k(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Kg(r);if(!i)throw Error(B(90));pL(r),_k(r,i)}}}break;case"textarea":hL(t,n);break;case"select":e=n.value,e!=null&&cc(t,!!n.multiple,e,!1)}};xL=j0;_L=Ra;var Kq={usingClientEntryPoint:!1,Events:[Tp,nc,Kg,wL,bL,j0]},jd={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gq={bundleType:jd.bundleType,version:jd.version,rendererPackageName:jd.rendererPackageName,rendererConfig:jd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SL(t),t===null?null:t.stateNode},findFiberByHostInstance:jd.findFiberByHostInstance||qq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Wd.isDisabled&&Wd.supportsFiber))try{jg=Wd.inject(Gq),Vi=Wd}catch{}var Wd;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kq;cr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X0(e))throw Error(B(200));return Wq(t,e,null,n)};cr.createRoot=function(t,e){if(!X0(t))throw Error(B(299));var n=!1,r="",i=r$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=K0(t,1,!1,null,null,n,!1,r,i),t[go]=e.current,fp(t.nodeType===8?t.parentNode:t),new Q0(e)};cr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=SL(e),t=t===null?null:t.stateNode,t};cr.flushSync=function(t){return Ra(t)};cr.hydrate=function(t,e,n){if(!ry(e))throw Error(B(200));return iy(null,t,e,!0,n)};cr.hydrateRoot=function(t,e,n){if(!X0(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=r$;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=n$(e,null,t,1,n??null,i,!1,o,s),t[go]=e.current,fp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ny(e)};cr.render=function(t,e,n){if(!ry(e))throw Error(B(200));return iy(null,t,e,!1,n)};cr.unmountComponentAtNode=function(t){if(!ry(t))throw Error(B(40));return t._reactRootContainer?(Ra(function(){iy(null,null,t,!1,function(){t._reactRootContainer=null,t[go]=null})}),!0):!1};cr.unstable_batchedUpdates=j0;cr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ry(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return iy(t,e,n,!1,r)};cr.version="18.3.1-next-f1338f8080-20240426"});var bo=Jt((xde,s$)=>{"use strict";function o$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o$)}catch(t){console.error(t)}}o$(),s$.exports=i$()});var Tc=Jt(Z0=>{"use strict";var a$=bo();Z0.createRoot=a$.createRoot,Z0.hydrateRoot=a$.hydrateRoot;var _de});var d$=Jt(u$=>{"use strict";var Ec=H();function Qq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xq=typeof Object.is=="function"?Object.is:Qq,Zq=Ec.useState,Jq=Ec.useEffect,e9=Ec.useLayoutEffect,t9=Ec.useDebugValue;function n9(t,e){var n=e(),r=Zq({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return e9(function(){i.value=n,i.getSnapshot=e,J0(i)&&o({inst:i})},[t,n,e]),Jq(function(){return J0(i)&&o({inst:i}),t(function(){J0(i)&&o({inst:i})})},[t]),t9(n),n}function J0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xq(t,n)}catch{return!0}}function r9(t,e){return e()}var i9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r9:n9;u$.useSyncExternalStore=Ec.useSyncExternalStore!==void 0?Ec.useSyncExternalStore:i9});var f$=Jt((Ede,p$)=>{"use strict";p$.exports=d$()});var m$=Jt(h$=>{"use strict";var oy=H(),o9=f$();function s9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var a9=typeof Object.is=="function"?Object.is:s9,l9=o9.useSyncExternalStore,c9=oy.useRef,u9=oy.useEffect,d9=oy.useMemo,p9=oy.useDebugValue;h$.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=c9(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=d9(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),i!==void 0&&s.hasValue){var h=s.value;if(i(h,f))return d=h}return d=f}if(h=d,a9(u,f))return h;var g=r(f);return i!==void 0&&i(h,g)?(u=f,h):(u=f,d=g)}var c=!1,u,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=l9(t,o[0],o[1]);return u9(function(){s.hasValue=!0,s.value=a},[a]),p9(a),a}});var y$=Jt((Cde,g$)=>{"use strict";g$.exports=m$()});function b9(){py=!0,queueMicrotask(O$)}function O$(){if(!Pc.length){py=!1;return}rT=!0;for(let t=0;t<Pc.length;t++)Pc[t].$st!==Mc&&x9(Pc[t]);Pc=[],py=!1,rT=!1}function x9(t){let e=[t];for(;t=t[dr];)t.$e&&t.$st!==Mc&&e.push(t);for(let n=e.length-1;n>=0;n--)gT(e[n])}function D$(t){let e=Cn();return Lp(e,t.length?t.bind(null,Ip.bind(e)):t,null)}function U(t){return Lp(Pn,t,null)}function Ic(t){return Lp(null,t,null)}function mi(){rT||O$()}function Mp(){return Pn}function Yt(t,e){try{return Lp(e,t,null)}catch(n){dT(e,n);return}}function uT(t,e=Pn){return e?.$cx[t]}function _9(t,e,n=Pn){n&&(n.$cx={...n.$cx,[t]:e})}function k9(t){Pn&&(Pn.$eh=Pn.$eh?[t,...Pn.$eh]:[t])}function he(t){if(!t||!Pn)return t||w9;let e=Pn;return e.$d?Array.isArray(e.$d)?e.$d.push(t):e.$d=[e.$d,t]:e.$d=t,function(){e.$st!==my&&(t.call(null),gy(e.$d)?e.$d=null:Array.isArray(e.$d)&&e.$d.splice(e.$d.indexOf(t),1))}}function Ip(t=!0){if(this.$st===my)return;let e=t?this.$ps||this[dr]:this,n=this.$ns,r=null;for(;n&&n[dr]===this;)Ip.call(n,!0),C$(n),r=n.$ns,n.$ns=null,n=r;t&&C$(this),n&&(n.$ps=t?this.$ps:this),e&&(e.$ns=n)}function C$(t){t.$st=my,t.$d&&F$(t),t.$s&&uy(t,0),t.$ps&&(t.$ps.$ns=null),t[dr]=null,t.$s=null,t.$o=null,t.$ps=null,t.$cx=cT,t.$eh=null}function F$(t){try{if(Array.isArray(t.$d))for(let e=t.$d.length-1;e>=0;e--){let n=t.$d[e];n.call(n)}else t.$d.call(t.$d);t.$d=null}catch(e){dT(t,e)}}function Lp(t,e,n){let r=Pn,i=Cc;Pn=t,Cc=n;try{return e.call(t)}finally{Pn=r,Cc=i}}function dT(t,e){if(!t||!t.$eh)throw e;let n=0,r=t.$eh.length,i=R$(e);for(n=0;n<r;n++)try{t.$eh[n](i);break}catch(o){i=R$(o)}if(n===r)throw i}function R$(t){return t instanceof Error?t:Error(JSON.stringify(t))}function pT(){return this.$st===my?this.$v:(Cc&&!this.$e&&(!zr&&Cc.$s&&Cc.$s[ur]==this?ur++:zr?zr.push(this):zr=[this]),this.$c&&gT(this),this.$v)}function N$(t){let e=gy(t)?t(this.$v):t;if(this.$ch(this.$v,e)&&(this.$v=e,this.$o))for(let n=0;n<this.$o.length;n++)B$(this.$o[n],Rp);return this.$v}function Cn(){return new fT}function mT(t,e,n){return new V$(t,e,n)}function T9(t,e){return t!==e}function gy(t){return typeof t=="function"}function gT(t){if(t.$st===$$)for(let e=0;e<t.$s.length&&(gT(t.$s[e]),t.$st!==Rp);e++);t.$st===Rp?z$(t):t.$st=Mc}function M$(t){t.$ns&&t.$ns[dr]===t&&Ip.call(t,!1),t.$d&&F$(t),t.$eh=t[dr]?t[dr].$eh:null}function z$(t){let e=zr,n=ur;zr=null,ur=0;try{M$(t);let r=Lp(t,t.$c,t);if(zr){if(t.$s&&uy(t,ur),t.$s&&ur>0){t.$s.length=ur+zr.length;for(let o=0;o<zr.length;o++)t.$s[ur+o]=zr[o]}else t.$s=zr;let i;for(let o=ur;o<t.$s.length;o++)i=t.$s[o],i.$o?i.$o.push(t):i.$o=[t]}else t.$s&&ur<t.$s.length&&(uy(t,ur),t.$s.length=ur);!t.$e&&t.$i?N$.call(t,r):(t.$v=r,t.$i=!0)}catch(r){dT(t,r),t.$st===Rp&&(M$(t),t.$s&&uy(t,0));return}zr=e,ur=n,t.$st=Mc}function B$(t,e){if(!(t.$st>=e)&&(t.$e&&t.$st===Mc&&(Pc.push(t),py||b9()),t.$st=e,t.$o))for(let n=0;n<t.$o.length;n++)B$(t.$o[n],$$)}function uy(t,e){let n,r;for(let i=e;i<t.$s.length;i++)n=t.$s[i],n.$o&&(r=n.$o.indexOf(t),n.$o[r]=n.$o[n.$o.length-1],n.$o.pop())}function ee(t,e){let n=mT(t,null,e),r=pT.bind(n);return r[dr]=!0,r.set=N$.bind(n),r}function U$(t){return gy(t)&&dr in t}function Bi(t,e){let n=mT(e?.initial,t,e),r=pT.bind(n);return r[dr]=!0,r}function H$(t,e){let n=mT(null,function(){let i=t();return gy(i)&&he(i),null},void 0);return n.$e=!0,z$(n),Ip.bind(n,!0)}function S9(t){let e=()=>t();return e[dr]=!0,e}function yT(t){return U$(t)&&"set"in t}function Wn(...t){}function Ui(t){return t===null}function it(t){return typeof t>"u"}function vT(t){return Ui(t)||it(t)}function Ap(t){return t?.constructor===Object}function Rt(t){return typeof t=="number"&&!Number.isNaN(t)}function ne(t){return typeof t=="string"}function wT(t){return typeof t=="boolean"}function sn(t){return typeof t=="function"}function xt(t){return Array.isArray(t)}function E9(t){return ne(t)?new RegExp(t):t}function P9(t){return jn?!1:t===window}function C9(t,e){return typeof process<"u",Wn}function yy(t){return!!t?.[W$]}function M9(t){return t.originEvent}function q$(t,e){if(yy(t))return t.triggers.walk(e)}function bT(t,e){return yy(t)?t.triggers.findType(e):void 0}function Y$(t,e){return!!bT(t,e)}function K$(t,e){e&&t.triggers.add(e)}function z(t,e,n,r){return jn?Wn:(t.addEventListener(e,n,r),he(()=>t.removeEventListener(e,n,r)))}function $p(t){return!!t?.type.startsWith("pointer")}function Lc(t){return!!t?.type.startsWith("touch")}function xT(t){return/^(click|mouse)/.test(t?.type??"")}function _o(t){return!!t?.type.startsWith("key")}function I9(t){return _o(t)&&t.key==="Enter"}function L9(t){return _o(t)&&t.key==="Escape"}function Op(t){return _o(t)&&(t.key==="Enter"||t.key===" ")}function _T(t){return t instanceof Node}function A9(t){return _T(t)&&t.nodeType===1}function $9(t){return _T(t)&&t.nodeType===11}function O9(){return document.createDocumentFragment()}function D9(t){return jn?t:document.createComment(t)}function fe(t,e,n){if(t)if(!n&&n!==""&&n!==0)t.removeAttribute(e);else{let r=n===!0?"":n+"";t.getAttribute(e)!==r&&t.setAttribute(e,r)}else return}function on(t,e,n){if(t)!n&&n!==0?t.style.removeProperty(e):t.style.setProperty(e,n+"");else return}function F9(t,e,n){t.classList[n?"add":"remove"](e)}function N9(t,e){let n=e?`slot[name="${e}"]`:"slot:not([name])",i=t.shadowRoot?.querySelector(n)?.assignedNodes({flatten:!0})??[];return Array.prototype.filter.call(i,o=>o.nodeType==1)}function V9(t){let e=t.firstChild,n=e.getAttribute("shadowroot");e.parentNode.attachShadow({mode:n}).appendChild(e.content),e.remove()}function z9(t){return sn(t)?t():t}function iT(t){let e=t;for(;typeof e=="function";)e=e.call(this);return e}function Hi(t){return{id:Symbol(),provide:t}}function Mn(t,e,n=Mp()){let r=!it(e);_9(t.id,r?e:t.provide?.(),n)}function ct(t){return uT(t.id)}function Br(t){return!it(uT(t.id))}function B9(t){let e={};for(let n of Object.keys(t)){let r=t[n];e[n]=ee(r,r)}return e}function kT(t,e){return D$(()=>{Cp.$$=new hy(t,Mp(),e);let n=new t;return Cp.$$.e=n,Cp.$$=null,n})}function we(t,e,n){t[eT]||(t[eT]=new Set),t[eT].add(e)}function ut(t,e,n){t[tT]||(t[tT]=new Set),t[tT].add(e)}function Aa(t){return ct(t)}function Ac(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function U9(t){return Dp(t.replace(/([A-Z])/g," $1"))}function wy(t){return t.replace(/-./g,e=>e[1].toUpperCase())}function Q$(t){return X$(t).replace(/\s/g,"")}function X$(t){return Dp(t.replace(/-./g,e=>" "+e[1].toUpperCase()))}function Dp(t){return t.charAt(0).toUpperCase()+t.slice(1)}function H9(t){return t.charAt(0).toLowerCase()+t.slice(1)}function W9(t){return t.replace(j9,"")}function by(t,...e){return $e.createElement($a.Provider,{value:t},...e)}function xy(){return $e.useContext($a).current}function _y(t){let e=xy();return $e.useMemo(()=>uT(t.id,e),[e])}function q9(){return J$}function Y9(t,e){var n;return n=class extends J${},n.F=t,n.T=e,n}function TT(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Se(...t){return e=>t.forEach(n=>TT(n,e))}function K9(t,e){let n=$e.forwardRef((r,i)=>{let o=$e.useContext($a),s=$e.useRef(null),a=$e.useRef();if(!a.current){let w=Q9(),m=A$(t,w,r,o.current);w.e=m,a.current=w,s.current=m.scope}function l(){let w=a.current,m=o.current;if(window.cancelAnimationFrame(w.ea),w.ea=-1,w.e.$$.o){let y=A$(t,w,r,m);w.e=y,w.Q=!1,w.da=!1,s.current=y.scope}return w.a&&L$(w,w.a),w.da||(TT(i,w.e),w.da=!0),()=>dy(w)}function c(w){let m=a.current;if(!m.da){m.a=w;return}window.cancelAnimationFrame(m.K),m.K=window.requestAnimationFrame(()=>{let y=a.current;y.K=-1,y.a!==w&&(dy(y),w&&L$(y,w),y.a=w)})}$e.useEffect(()=>{let w=a.current;return window.cancelAnimationFrame(w.ea),w.ea=-1,function(){sn(r.children)&&(window.cancelAnimationFrame(w.K),w.K=-1,window.cancelAnimationFrame(w.E),w.E=-1,window.cancelAnimationFrame(w.ea),w.ea=window.requestAnimationFrame(()=>{w.ea=-1,dy(w),w.e.$$.p(),w.e.$$[vy]=null,w.J={},w._={},s.current=null}))}},[]),$e.useEffect(mi);let u=a.current,{children:d,...p}=r,f={},h=u.aa,g=Object.keys(p);u.J={};for(let w of[...h,...g])if(e.props.has(w))u.e.$props[w].set(it(p[w])?t.props?.[w]:p[w]);else if(e.events?.has(w)||e.eventsRE?.test(w))u.J[w]=p[w];else if(e.domEvents?.has(w)||e.domEventsRE?.test(w)){let m=Ac(w.slice(2));u._[m]=p[w],g.includes(w)?u.a&&!u.ca?.has(m)&&(u.ca||(u.ca=new Set),u.ca.add(m),u.a.addEventListener(m,u.ba)):(u.a?.removeEventListener(m,u.ba),u.ca?.delete(m))}else f[w]=p[w];return u.aa=g,by(s,$e.createElement(G9,{effect:l}),sn(d)?d?.({...f,suppressHydrationWarning:!0,ref:c},u.e):d)});return n.displayName=t.name+"Bridge",n}function G9({effect:t}){return $e.useEffect(t,[]),null}function Q9(){let t={a:null,aa:[],J:{},_:{},K:-1,E:-1,ea:-1,Q:!1,da:!1,ca:null,ba(e){let n=it(e.detail)?[e]:[e.detail,e];t._[e.type]?.(...n)}};return t}function L$(t,e){if(!(t.a===e&&t.Q)){if(t.Q&&dy(t),t._){t.ca||(t.ca=new Set);for(let n of Object.keys(t._))t.ca.has(n)||(e.addEventListener(n,t.ba),t.ca.add(n))}t.e.$$.x(e),t.E=window.requestAnimationFrame(()=>{t.e.$$.y(),t.E=-1}),t.Q=!0}}function dy(t){if(t.Q&&(window.cancelAnimationFrame(t.E),t.E=-1,t.e.$$.s(),t.Q=!1,t.a&&t.ca)){for(let e of t.ca)t.a.removeEventListener(e,t.ba);t.ca.clear()}}function X9(t){let e=I$.get(t.type),n=it(t.detail)?[t]:[t.detail,t];e||I$.set(t.type,e=`on${Q$(t.type)}`),this.J[e]?.(...n)}function A$(t,e,n,r){let i=kT(t,{props:n,scope:r});return i.$$[vy]=X9.bind(e),i.$$.w(),i}function eO(t,e=!1){let n=typeof t;if(n!=="string")return!e&&n==="function"?eO(t()):e&&n==="boolean"?t+"":t;let r=e?'"':"<",i=e?"&quot;":"&lt;",o=t.indexOf(r),s=t.indexOf("&");if(o<0&&s<0)return t;let a=0,l="";for(;o>=0&&s>=0;)o<s?(a<o&&(l+=t.substring(a,o)),l+=i,a=o+1,o=t.indexOf(r,a)):(a<s&&(l+=t.substring(a,s)),l+="&amp;",a=s+1,s=t.indexOf("&",a));if(o>=0)do a<o&&(l+=t.substring(a,o)),l+=i,a=o+1,o=t.indexOf(r,a);while(o>=0);else for(;s>=0;)a<s&&(l+=t.substring(a,s)),l+="&amp;",a=s+1,s=t.indexOf("&",a);return a<t.length?l+t.substring(a):l}function e8(t,e){let n=e.trim().split(J9);for(let r of n)t.add(r)}function r8(t,e){let n=e.trim().split(n8);for(let r=0;r<n.length;r++){if(n[r]==="")continue;let[i,o]=n[r].split(t8);t.set(i,o)}}function o8(t,e){function n(r){let i=$e.useContext($a),o=kT(t,{props:r,scope:i.current}),s=new oT(o),a={},{style:l={},children:c,forwardRef:u,...d}=r;if(e.props.size)for(let p of Object.keys(d))e.props.has(p)||(a[p]=d[p]);else a=d;if(s.setup(),s.hasAttribute("style")){for(let[p,f]of s.style.tokens)l[p.startsWith("--")?p:wy(p)]=f;s.removeAttribute("style")}for(let[p,f]of s.attributes.tokens){let h=i8[p];h&&(h in a||(a[h]=f),s.removeAttribute(p))}return by({current:o.$$.d},sn(c)?c?.({...Object.fromEntries(s.attributes.tokens),...a,style:l},o):c,$e.createElement(()=>(s.destroy(),null)))}return n.displayName=t.name+"Bridge",n}function Cs(t){return _y(t)}function Me(t,e){let[,n]=$e.useState();return $e.useEffect(()=>H$(()=>{t(),n({})}),[e??t]),t()}function $c(t){return t?"true":"false"}function tO(t){let e=[];for(let n=0;n<t.length;n++)xt(t[n])?e.push(...tO(t[n])):(t[n]||t[n]===0)&&e.push(t[n]);return e}function Fp(){let t=new Set;return{add(...e){for(let n of e)t.add(n)},empty(){for(let e of t)e();t.clear()}}}function ST(){let t=Fp();return he(t.empty),t}function s8(t){return t()}function a8(t,e){for(let n of t)n(e)}function Np(t){return Object.keys(t)}function l8(...t){let e={};for(let n=0;n<t.length;n++){let r=t[n];r&&Object.defineProperties(e,Object.getOwnPropertyDescriptors(r))}return e}function nO(t,e){let n={};for(let r of e)Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r));return n}function c8(t,e){return nO(t,Np(t).filter(n=>!e.includes(n)))}function ko(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function u8(t,e,n){let r=new Promise((i,o)=>{let s=setTimeout(()=>{clearTimeout(s),o(n)},e)});return Promise.race([t,r])}function ET(t){return new Promise(e=>setTimeout(e,t))}function d8(t){return jn?Promise.resolve():new Promise(e=>{window.requestAnimationFrame(n=>{t?.(n),e()})})}function Rs(t){if(jn)return Wn;let e=-1,n;function r(...i){n=i,!(e>=0)&&(e=window.requestAnimationFrame(()=>{t.apply(this,n),e=-1,n=void 0}))}return r}function PT(t,e){return jn?Promise.resolve():new Promise(n=>{p8(r=>{t?.(r),n()},e)})}function CT(t){let[,e]=$e.useState(),n=$e.useRef(null);return n.current==null&&(n.current={state:{},$update:ee({}),props:new Set}),$e.useEffect(()=>{let{state:r,$update:i,props:o}=n.current;return R(()=>{for(let s of o){let a=t[s]();r[s]=xt(a)?[...a]:a}i(),e({})})},[t]),$e.useMemo(()=>{let{state:r,$update:i,props:o}=n.current,s=!1;return o.clear(),new Proxy(r,{get(a,l){if(!o.has(l)&&l in t){o.add(l);let c=t[l]();r[l]=xt(c)?[...c]:c,s||(i.set({}),s=!0,queueMicrotask(()=>s=!1))}return r[l]},set(a,l,c){return l in t||(r[l]=c),!0}})},[t])}function ve(t,e){return jn?o8(t,{props:new Set(Object.keys(t.props||{}))}):K9(t,{props:new Set(Object.keys(t.props||{})),events:new Set(e?.events),eventsRE:e?.eventsRegex,domEvents:e?.domEvents,domEventsRE:e?.domEventsRegex})}var $e,jn,dr,py,rT,Pn,Cc,zr,ur,Pc,cT,w9,Mc,$$,Rp,my,fT,La,V$,hT,R,j$,R9,W$,le,fy,Rc,eT,tT,vy,G$,nT,hy,Cp,Rn,ce,hi,j9,$a,Z$,J$,I$,Z9,J9,t8,n8,oT,sT,aT,lT,i8,p8,Ms,In=nt(()=>{"use strict";"use client";$e=I(H(),1),jn=typeof document>"u",dr=Symbol(0),py=!1,rT=!1,Pn=null,Cc=null,zr=null,ur=0,Pc=[],cT={},w9=()=>{},Mc=0,$$=1,Rp=2,my=3;fT=function(){this[dr]=null,this.$ns=null,this.$ps=null,Pn&&Pn.append(this)},La=fT.prototype;La.$cx=cT;La.$eh=null;La.$c=null;La.$d=null;La.append=function(t){if(t[dr]=this,t.$ps=this,this.$ns)if(t.$ns){let e=t.$ns;for(;e.$ns;)e=e.$ns;e.$ns=this.$ns,this.$ns.$ps=e}else t.$ns=this.$ns,this.$ns.$ps=t;this.$ns=t,t.$cx=t.$cx===cT?this.$cx:{...this.$cx,...t.$cx},this.$eh&&(t.$eh=t.$eh?[...t.$eh,...this.$eh]:this.$eh)};La.dispose=function(){Ip.call(this)};V$=function(e,n,r){fT.call(this),this.$st=n?Rp:Mc,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=e,n&&(this.$c=n),r&&r.dirty&&(this.$ch=r.dirty)},hT=V$.prototype;Object.setPrototypeOf(hT,La);hT.$ch=T9;hT.call=pT;R=jn?C9:H$;R9=jn?class{}:Event,W$=Symbol("DOM_EVENT"),le=class extends R9{constructor(e,...n){super(e,n[0]),this[j$]=!0,this.triggers=new fy,this.detail=n[0]?.detail;let r=n[0]?.trigger;r&&this.triggers.add(r)}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}};j$=W$;fy=class{constructor(){this.chain=[]}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(e){this.chain.push(e),yy(e)&&this.chain.push(...e.triggers)}remove(e){return this.chain.splice(this.chain.indexOf(e),1)[0]}has(e){return this.chain.some(n=>n===e)}hasType(e){return!!this.findType(e)}findType(e){return this.chain.find(n=>n.type===e)}walk(e){for(let n of this.chain){let r=e(n);if(r)return[n,r]}}[Symbol.iterator](){return this.chain.values()}};Rc=class extends EventTarget{addEventListener(e,n,r){return super.addEventListener(e,n,r)}removeEventListener(e,n,r){return super.removeEventListener(e,n,r)}};eT=Symbol(0),tT=Symbol(0),vy=Symbol(0),nT={},hy=class{constructor(e,n,r){this[G$]=null,this.$el=ee(null),this.a=null,this.d=null,this.f=null,this.g=null,this.e=null,this.o=!1,this.i=nT,this.b=null,this.c=null,this.l=[],this.m=[],this.j=[],this.n=[],this.d=n,r?.scope&&r.scope.append(n);let i=e.state,o=e.props;if(i&&(this.h=i.create(),this.k=new Proxy(this.h,{get:(s,a)=>this.h[a]()}),Mn(i,this.h)),o&&(this.i=B9(o),r?.props))for(let s of Object.keys(r.props))this.i[s]?.set(r.props[s]);he(this.p.bind(this))}w(){Yt(()=>{for(let e of this.l)e()},this.d)}x(e){this.a||(this.a=e,this.$el.set(e),Yt(()=>{this.f=Cn(),Yt(()=>{for(let n of this.m)n(this.a);this.q(),this.r()},this.f)},this.d),e.dispatchEvent(new Event("attached")))}s(){this.f?.dispose(),this.f=null,this.g=null,this.a=null,this.$el.set(null)}y(){!this.a||!this.f||!this.j.length||Yt(()=>{this.g=Cn(),Yt(()=>{for(let e of this.j)e(this.a)},this.g)},this.f)}z(){this.g?.dispose(),this.g=null}p(){if(this.o)return;this.o=!0,Yt(()=>{for(let n of this.n)n(this.a)},this.d);let e=this.a;this.s(),this.d.dispose(),this.l.length=0,this.m.length=0,this.j.length=0,this.n.length=0,this.e=null,this.b=null,this.c=null,this.i=nT,this.d=null,this.k=nT,this.h=null,e&&delete e.$}t(e){e.onSetup&&this.l.push(e.onSetup.bind(e)),e.onAttach&&this.m.push(e.onAttach.bind(e)),e.onConnect&&this.j.push(e.onConnect.bind(e)),e.onDestroy&&this.n.push(e.onDestroy.bind(e))}q(){if(this.b)for(let e of Object.keys(this.b))jn?fe(this.a,e,iT.call(this.e,this.b[e])):sn(this.b[e])?R(this.u.bind(this,e)):fe(this.a,e,this.b[e])}r(){if(this.c)for(let e of Object.keys(this.c))jn?on(this.a,e,iT.call(this.e,this.c[e])):sn(this.c[e])?R(this.v.bind(this,e)):on(this.a,e,this.c[e])}u(e){fe(this.a,e,this.b[e].call(this.e))}v(e){on(this.a,e,this.c[e].call(this.e))}};G$=vy;Cp={$$:null};Rn=class extends EventTarget{constructor(){super(),Cp.$$&&this.attach(Cp)}get el(){return this.$$.a}get $el(){return this.$$.$el()}get scope(){return this.$$.d}get attachScope(){return this.$$.f}get connectScope(){return this.$$.g}get $props(){return this.$$.i}get $state(){return this.$$.h}get state(){return this.$$.k}attach({$$:e}){return this.$$=e,e.t(this),this}addEventListener(e,n,r){this.listen(e,n,r)}removeEventListener(e,n,r){this.el?.removeEventListener(e,n,r)}setAttributes(e){this.$$.b||(this.$$.b={}),Object.assign(this.$$.b,e)}setStyles(e){this.$$.c||(this.$$.c={}),Object.assign(this.$$.c,e)}setCSSVars(e){this.setStyles(e)}createEvent(e,...n){return new le(e,n[0])}dispatch(e,...n){if(jn||!this.el)return!1;let r=e instanceof Event?e:new le(e,n[0]);return Object.defineProperty(r,"target",{get:()=>this.$$.e}),Ic(()=>(this.$$[vy]?.(r),this.el.dispatchEvent(r)))}dispatchEvent(e){return this.dispatch(e)}listen(e,n,r){return jn||!this.el?Wn:z(this.el,e,n,r)}},ce=class extends Rn{subscribe(e){return Yt(()=>R(()=>e(this.state)),this.$$.d)}destroy(){this.$$.p()}};hi=class{constructor(e){this.id=Symbol(0),this.record=e,this.A=Object.getOwnPropertyDescriptors(e)}create(){let e={},n=new Proxy(e,{get:(r,i)=>e[i]()});for(let r of Object.keys(this.record)){let i=this.A[r].get;e[r]=i?Bi(i.bind(n)):ee(this.record[r])}return e}reset(e,n){for(let r of Object.keys(e))!this.A[r].get&&(!n||n(r))&&e[r].set(this.record[r])}};j9=/;\s*$/;$a=$e.createContext({current:null});$a.displayName="Scope";Z$=class extends $e.Component{constructor(e,n){super(e),this.d={current:Cn()},n&&n.append(this.d.current);let r=this.constructor;r.F&&Mn(r.F,r.T?.(),this.d.current)}render(){return by(this.d,this.props?.children)}};Z$.contextType=$a;J$=Z$;I$=new Map;Z9=Symbol(0),J9=/\s+/;t8=/\s*:\s*/,n8=/\s*;\s*/;oT=class{constructor(e){this.keepAlive=!1,this.forwardKeepAlive=!0,this.attributes=new sT,this.style=new aT,this.classList=new lT,this.$=e}get $props(){return this.$.$$.i}get $state(){return this.$.$$.h}get state(){return this.$.state}setup(){let e=this.$.$$;Yt(()=>{this.hasAttribute("class")&&e8(this.classList.tokens,this.getAttribute("class")),this.hasAttribute("style")&&r8(this.style.tokens,this.getAttribute("style")),e.w(),e.x(this),this.classList.length>0&&this.setAttribute("class",this.classList.toString()),this.style.length>0&&this.setAttribute("style",this.style.toString()),this.keepAlive&&this.setAttribute("keep-alive","")},e.d)}getAttribute(e){return this.attributes.getAttribute(e)}setAttribute(e,n){this.attributes.setAttribute(e,n)}hasAttribute(e){return this.attributes.hasAttribute(e)}removeAttribute(e){return this.attributes.removeAttribute(e)}[Z9](){}addEventListener(){}removeEventListener(){}dispatchEvent(){return!1}subscribe(){return Wn}destroy(){this.$.destroy()}},sT=class{constructor(){this.Z=new Map}get length(){return this.Z.size}get tokens(){return this.Z}getAttribute(e){return this.Z.get(e)??null}hasAttribute(e){return this.Z.has(e)}setAttribute(e,n){this.Z.set(e,n+"")}removeAttribute(e){this.Z.delete(e)}toString(){if(this.Z.size===0)return"";let e="";for(let[n,r]of this.Z)e+=` ${n}="${eO(r,!0)}"`;return e}},aT=class{constructor(){this.Z=new Map}get length(){return this.Z.size}get tokens(){return this.Z}getPropertyValue(e){return this.Z.get(e)??""}setProperty(e,n){this.Z.set(e,n??"")}removeProperty(e){let n=this.Z.get(e);return this.Z.delete(e),n??""}toString(){if(this.Z.size===0)return"";let e="";for(let[n,r]of this.Z)e+=`${n}: ${r};`;return e}},lT=class{constructor(){this.Z=new Set}get length(){return this.Z.size}get tokens(){return this.Z}add(...e){for(let n of e)this.Z.add(n)}contains(e){return this.Z.has(e)}remove(e){this.Z.delete(e)}replace(e,n){return this.Z.has(e)?(this.Z.delete(e),this.Z.add(n),!0):!1}toggle(e,n){return n!==!0&&(this.Z.has(e)||n===!1)?(this.Z.delete(e),!1):(this.Z.add(e),!0)}toString(){return Array.from(this.Z).join(" ")}},i8={acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",allowfullscreen:"allowFullScreen",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",class:"className",classid:"classID",classname:"className",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",controlslist:"controlsList",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",datetime:"dateTime",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",enctype:"encType",enterkeyhint:"enterKeyHint",fetchpriority:"fetchPriority",for:"htmlFor",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",marginwidth:"marginWidth",marginheight:"marginHeight",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",nomodule:"noModule",novalidate:"noValidate",playsinline:"playsInline",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap"};p8=jn?Wn:typeof window<"u"?"requestIdleCallback"in window?window.requestIdleCallback:t=>window.setTimeout(t,1):Wn;Ms=Object.freeze({__proto__:null,Component:ce,DOMEvent:le,EventTriggers:fy,EventsTarget:Rc,Instance:hy,ReactScopeContext:$a,State:hi,ViewController:Rn,WithScope:by,animationFrameThrottle:Rs,appendTriggerEvent:K$,ariaBool:$c,attachDeclarativeShadowDOM:V9,camelToKebabCase:Ac,camelToTitleCase:U9,composeRefs:Se,computed:Bi,createComment:D9,createComponent:kT,createContext:Hi,createDisposalBin:Fp,createFragment:O9,createReactComponent:ve,createReactContextProvider:Y9,createReactScopeProvider:q9,createRegex:E9,createScope:Cn,deferredPromise:ko,effect:R,findTriggerEvent:bT,flattenArray:tO,getOriginEvent:M9,getScope:Mp,getSlottedChildren:N9,hasProvidedContext:Br,hasTriggerEvent:Y$,isArray:xt,isBoolean:wT,isDOMElement:A9,isDOMEvent:yy,isDOMFragment:$9,isDOMNode:_T,isFunction:sn,isKeyboardClick:Op,isKeyboardEvent:_o,isMouseEvent:xT,isNil:vT,isNull:Ui,isNumber:Rt,isObject:Ap,isPointerEvent:$p,isReadSignal:U$,isString:ne,isTouchEvent:Lc,isUndefined:it,isWindow:P9,isWriteSignal:yT,kebabToCamelCase:wy,kebabToPascalCase:Q$,kebabToTitleCase:X$,keysOf:Np,listenEvent:z,lowercaseFirstLetter:H9,mergeProperties:l8,method:ut,noop:Wn,omit:c8,onDispose:he,onError:k9,peek:U,pick:nO,prop:we,provideContext:Mn,readonly:S9,root:D$,run:s8,runAll:a8,scoped:Yt,setAttribute:fe,setRef:TT,setStyle:on,signal:ee,tick:mi,timedPromise:u8,toggleClass:F9,trimTrailingSemicolon:W9,untrack:Ic,unwrap:z9,unwrapDeep:iT,uppercaseFirstChar:Dp,useContext:ct,useDisposalBin:ST,useReactContext:_y,useReactScope:xy,useSignal:Me,useSignalRecord:CT,useState:Aa,useStateContext:Cs,waitAnimationFrame:d8,waitIdlePeriod:PT,waitTimeout:ET,walkTriggerEventChain:q$,wasEnterKeyPressed:I9,wasEscapeKeyPressed:L9})});var rO={};At(rO,{SRTParser:()=>ky,default:()=>m8});function m8(){return new ky}var f8,h8,ky,iO=nt(()=>{"use strict";Vp();f8=/,/g,h8="-->",ky=class extends Dc{parse(e,n){if(e==="")this.c&&(this.l.push(this.c),this.h.onCue?.(this.c),this.c=null),this.e=Oc.None;else if(this.e===Oc.Cue)this.c.text+=(this.c.text?`
`:"")+e;else if(e.includes(h8)){let r=this.q(e,n);r&&(this.c=new To(r[0],r[1],r[2].join(" ")),this.c.id=this.n,this.e=Oc.Cue)}this.n=e}q(e,n){return super.q(e.replace(f8,"."),n)}}});var RT={};At(RT,{ParseErrorBuilder:()=>g8});var g8,MT=nt(()=>{"use strict";Vp();g8={r(){return new qn({code:Ur.BadSignature,reason:"missing WEBVTT file header",line:1})},s(t,e){return new qn({code:Ur.BadTimestamp,reason:`cue start timestamp \`${t}\` is invalid on line ${e}`,line:e})},t(t,e){return new qn({code:Ur.BadTimestamp,reason:`cue end timestamp \`${t}\` is invalid on line ${e}`,line:e})},u(t,e,n){return new qn({code:Ur.BadTimestamp,reason:`cue end timestamp \`${e}\` is greater than start \`${t}\` on line ${n}`,line:n})},y(t,e,n){return new qn({code:Ur.BadSettingValue,reason:`invalid value for cue setting \`${t}\` on line ${n} (value: ${e})`,line:n})},x(t,e,n){return new qn({code:Ur.UnknownSetting,reason:`unknown cue setting \`${t}\` on line ${n} (value: ${e})`,line:n})},w(t,e,n){return new qn({code:Ur.BadSettingValue,reason:`invalid value for region setting \`${t}\` on line ${n} (value: ${e})`,line:n})},v(t,e,n){return new qn({code:Ur.UnknownSetting,reason:`unknown region setting \`${t}\` on line ${n} (value: ${e})`,line:n})},T(t,e){return new qn({code:Ur.BadFormat,reason:`format missing for \`${t}\` block on line ${e}`,line:e})}}});var uO={};At(uO,{SSAParser:()=>Ey,default:()=>y8});function LT(t){let e=parseInt(t.replace("&H",""),16);if(e>=0){let r=(e>>24&255^255)/255,i=e>>16&255,o=e>>8&255;return"rgba("+[e&255,o,i,r].join(",")+")"}return null}function AT(t,e,n){let r=Math.ceil(2*Math.PI*t),i="";for(let o=0;o<r;o++){let s=2*Math.PI*o/r;i+=t*Math.cos(s)+"px "+e*Math.sin(s)+"px 0 "+n+(o==r-1?"":",")}return i}function y8(){return new Ey}var Ty,oO,sO,Sy,aO,lO,cO,IT,Ey,dO=nt(()=>{"use strict";Vp();Ty=/^Format:[\s\t]*/,oO=/^Style:[\s\t]*/,sO=/^Dialogue:[\s\t]*/,Sy=/[\s\t]*,[\s\t]*/,aO=/\{[^}]+\}/g,lO=/\\N/g,cO=/^\[(.*)[\s\t]?Styles\]$/,IT=/^\[(.*)[\s\t]?Events\]$/,Ey=class{constructor(){T(this,"h");T(this,"O",0);T(this,"c",null);T(this,"l",[]);T(this,"m",[]);T(this,"N",null);T(this,"f");T(this,"P",{})}async init(e){this.h=e,e.errors&&(this.f=(await Promise.resolve().then(()=>(MT(),RT))).ParseErrorBuilder)}parse(e,n){if(this.O)switch(this.O){case 1:if(e==="")this.O=0;else if(oO.test(e))if(this.N){let r=e.replace(oO,"").split(Sy);this.S(r)}else this.g(this.f?.T("Style",n));else Ty.test(e)?this.N=e.replace(Ty,"").split(Sy):IT.test(e)&&(this.N=null,this.O=2);break;case 2:if(e==="")this.Q();else if(sO.test(e))if(this.Q(),this.N){let r=e.replace(sO,"").split(Sy),i=this.U(r,n);i&&(this.c=i)}else this.g(this.f?.T("Dialogue",n));else this.c?this.c.text+=`
`+e.replace(aO,"").replace(lO,`
`):Ty.test(e)?this.N=e.replace(Ty,"").split(Sy):cO.test(e)?(this.N=null,this.O=1):IT.test(e)&&(this.N=null)}else e===""||(cO.test(e)?(this.N=null,this.O=1):IT.test(e)&&(this.N=null,this.O=2))}done(){return{metadata:{},cues:this.l,regions:[],errors:this.m}}Q(){this.c&&(this.l.push(this.c),this.h.onCue?.(this.c),this.c=null)}S(e){let n="Default",r={},i,o="center",s="bottom",a,l=1.2,c,u,d=3,p=[];for(let f=0;f<this.N.length;f++){let h=this.N[f],g=e[f];switch(h){case"Name":n=g;break;case"Fontname":r["font-family"]=g;break;case"Fontsize":r["font-size"]=`calc(${g} / var(--overlay-height))`;break;case"PrimaryColour":let w=LT(g);w&&(r["--cue-color"]=w);break;case"BorderStyle":d=parseInt(g,10);break;case"BackColour":u=LT(g);break;case"OutlineColour":let m=LT(g);m&&(c=m);break;case"Bold":parseInt(g)&&(r["font-weight"]="bold");break;case"Italic":parseInt(g)&&(r["font-style"]="italic");break;case"Underline":parseInt(g)&&(r["text-decoration"]="underline");break;case"StrikeOut":parseInt(g)&&(r["text-decoration"]="line-through");break;case"Spacing":r["letter-spacing"]=g+"px";break;case"AlphaLevel":r.opacity=parseFloat(g);break;case"ScaleX":p.push(`scaleX(${parseFloat(g)/100})`);break;case"ScaleY":p.push(`scaleY(${parseFloat(g)/100})`);break;case"Angle":p.push(`rotate(${g}deg)`);break;case"Shadow":l=parseInt(g,10)*1.2;break;case"MarginL":r["--cue-width"]="auto",r["--cue-left"]=parseFloat(g)+"px";break;case"MarginR":r["--cue-width"]="auto",r["--cue-right"]=parseFloat(g)+"px";break;case"MarginV":a=parseFloat(g);break;case"Outline":i=parseInt(g,10);break;case"Alignment":let y=parseInt(g,10);switch(y>=4&&(s=y>=7?"top":"center"),y%3){case 1:o="start";break;case 2:o="center";break;case 3:o="end";break}}}if(r.R=s,r["--cue-white-space"]="normal",r["--cue-line-height"]="normal",r["--cue-text-align"]=o,s==="center"?(r["--cue-top"]="50%",p.push("translateY(-50%)")):r[`--cue-${s}`]=(a||0)+"px",d===1&&(r["--cue-padding-y"]="0"),(d===1||u)&&(r["--cue-bg-color"]=d===1?"none":u),d===3&&c&&(r["--cue-outline"]=`${i}px solid ${c}`),d===1&&typeof i=="number"){let f=u??"#000";r["--cue-text-shadow"]=[c&&AT(i*1.2,l*1.2,c),c?AT(i*(i/2),l*(i/2),f):AT(i,l,f)].filter(Boolean).join(", ")}p.length&&(r["--cue-transform"]=p.join(" ")),this.P[n]=r}U(e,n){let r=this.V(e),i=this.q(r.Start,r.End,n);if(!i)return;let o=new To(i[0],i[1],""),s={...this.P[r.Style]||{}},a=r.Name?`<v ${r.Name}>`:"",l=s.R,c=r.MarginL&&parseFloat(r.MarginL),u=r.MarginR&&parseFloat(r.MarginR),d=r.MarginV&&parseFloat(r.MarginV);return c&&(s["--cue-width"]="auto",s["--cue-left"]=c+"px"),u&&(s["--cue-width"]="auto",s["--cue-right"]=u+"px"),d&&l!=="center"&&(s[`--cue-${l}`]=d+"px"),o.text=a+e.slice(this.N.length-1).join(", ").replace(aO,"").replace(lO,`
`),delete s.R,Object.keys(s).length&&(o.style=s),o}V(e){let n={};for(let r=0;r<this.N.length;r++)n[this.N[r]]=e[r];return n}q(e,n,r){let i=So(e),o=So(n);if(i!==null&&o!==null&&o>i)return[i,o];i===null&&this.g(this.f?.s(e,r)),o===null&&this.g(this.f?.t(n,r)),i!=null&&o!==null&&o>i&&this.g(this.f?.u(i,o,r))}g(e){if(e){if(this.m.push(e),this.h.strict)throw this.h.cancel(),e;this.h.onError?.(e)}}}});async function yO(t,e){let n=new ReadableStream({start(r){let i=t.split(gO);for(let o of i)r.enqueue(o);r.close()}});return My(n,e)}async function My(t,e){let n=e?.type??"vtt",r;if(typeof n=="string")switch(n){case"srt":r=(await Promise.resolve().then(()=>(iO(),rO))).default;break;case"ssa":case"ass":r=(await Promise.resolve().then(()=>(dO(),uO))).default;break;default:r=(await Promise.resolve().then(function(){return O8})).default}else r=n;let i,o=t.getReader(),s=r(),a=!!e?.strict||!!e?.errors;await s.init({strict:!1,...e,errors:a,type:n,cancel(){o.cancel(),i=s.done(!0)}});let l=1;for(;;){let{value:c,done:u}=await o.read();if(u){s.parse("",l),i=s.done(!1);break}s.parse(c,l),l++}return i}async function vO(t,e){let n=await t;if(!n.ok||!n.body)return{metadata:{},cues:[],regions:[],errors:[void 0]};let r=n.headers.get("content-type")||"",i=r.match(/text\/(.*?)(?:;|$)/)?.[1],o=r.match(/charset=(.*?)(?:;|$)/)?.[1];return FT(n.body,{type:i,encoding:o,...e})}async function FT(t,{encoding:e="utf-8",...n}={}){let r=t.pipeThrough(new OT(e));return My(r,n)}function b8(t){let e=parseInt(t,10);return Number.isNaN(e)?null:e}function Bp(t){let e=parseInt(t.replace(w8,""),10);return!Number.isNaN(e)&&e>=0&&e<=100?e:null}function fO(t){if(!t.includes(pO))return null;let[e,n]=t.split(pO).map(Bp);return e!==null&&n!==null?[e,n]:null}function x8(t){let e=parseFloat(t);return Number.isNaN(e)?null:e}function So(t){let e=t.match(A8);if(!e)return null;let n=e[1]?parseInt(e[1],10):0,r=parseInt(e[2],10),i=parseInt(e[3],10),o=e[4]?parseInt(e[4].padEnd(3,"0"),10):0,s=n*3600+r*60+i+o/1e3;return n<0||r<0||i<0||o<0||r>59||i>59?null:s}function $8(){return new Dc}function VT(t){let e="",n=1,r=[],i=[],o;for(let c=0;c<t.text.length;c++){let u=t.text[c];switch(n){case 1:u==="<"?(l(),n=2):e+=u;break;case 2:switch(u){case`
`:case"	":case" ":s(),n=4;break;case".":s(),n=3;break;case"/":n=5;break;case">":s(),n=1;break;default:!e&&D8.test(u)&&(n=6),e+=u;break}break;case 3:switch(u){case"	":case" ":case`
`:a(),o&&o.class?.trim(),n=4;break;case".":a();break;case">":a(),o&&o.class?.trim(),n=1;break;default:e+=u}break;case 4:u===">"?(e=e.replace(F8," "),o?.type==="v"?o.voice=$T(e):o?.type==="lang"&&(o.lang=$T(e)),e="",n=1):e+=u;break;case 5:u===">"&&(e="",o=i.pop(),n=1);break;case 6:if(u===">"){let d=So(e);d!==null&&d>=t.startTime&&d<=t.endTime&&(e="timestamp",s(),o.time=d),e="",n=1}else e+=u;break}}function s(){if(B8.has(e)){let c=o;o=U8(e),c?(i[i.length-1]!==c&&i.push(c),c.children.push(o)):r.push(o)}e="",n=1}function a(){if(o&&e){let c=e.replace("bg_","");z8.has(c)?o[e.startsWith("bg_")?"bgColor":"color"]=c:o.class=o.class?o.class+" "+e:e}e=""}function l(){if(!e)return;let c={type:"text",data:$T(e)};o?o.children.push(c):r.push(c),e=""}return n===1&&l(),r}function U8(t){return{tagName:wO[t],type:t,children:[]}}function $T(t){return t.replace(V8,e=>N8[e]||"'")}function Ln(t,e,n){t.style.setProperty(`--${e}`,n+"")}function Is(t,e,n=!0){t.setAttribute(`data-${e}`,n===!0?"":n+"")}function Py(t,e){t.setAttribute("data-part",e)}function H8(t){return parseFloat(getComputedStyle(t).lineHeight)||0}function bO(t){if(NT)throw Error("[media-captions] called `createVTTCueTemplate` on the server - use `renderVTTCueString`");let e=document.createElement("template");return e.innerHTML=Iy(t),{cue:t,content:e.content}}function Iy(t,e=0){return Ly(VT(t),e)}function Ly(t,e=0){let n,r="";for(let i of t)if(i.type==="text")r+=i.data;else{let o=i.type==="timestamp";n={},n.class=i.class,n.title=i.type==="v"&&i.voice,n.lang=i.type==="lang"&&i.lang,n["data-part"]=i.type==="v"&&"voice",o&&(n["data-part"]="timed",n["data-time"]=i.time,n["data-future"]=i.time>e,n["data-past"]=i.time<e),n.style=`${i.color?`color: ${i.color};`:""}${i.bgColor?`background-color: ${i.bgColor};`:""}`;let s=Object.entries(n).filter(a=>a[1]).map(a=>`${a[0]}="${a[1]===!0?"":a[1]}"`).join(" ");r+=`<${i.tagName}${s?" "+s:""}>${Ly(i.children)}</${i.tagName}>`}return r}function zT(t,e){if(!NT)for(let n of t.querySelectorAll('[data-part="timed"]')){let r=Number(n.getAttribute("data-time"));Number.isNaN(r)||(r>e?Is(n,"future"):n.removeAttribute("data-future"),r<e?Is(n,"past"):n.removeAttribute("data-past"))}}function j8(t,e){let n=null,r;function i(){o(),t(...r),r=void 0}function o(){clearTimeout(n),n=null}function s(){r=[].slice.call(arguments),o(),n=setTimeout(i,e)}return s}function BT(t){return t.instanceOf(HTMLElement)?{top:t.offsetTop,width:t.clientWidth,height:t.clientHeight,left:t.offsetLeft,right:t.offsetLeft+t.clientWidth,bottom:t.offsetTop+t.clientHeight}:{...t}}function Cy(t,e,n){switch(e){case"+x":t.left+=n,t.right+=n;break;case"-x":t.left-=n,t.right-=n;break;case"+y":t.top+=n,t.bottom+=n;break;case"-y":t.top-=n,t.bottom-=n;break}}function W8(t,e){return t.left<=e.right&&t.right>=e.left&&t.top<=e.bottom&&t.bottom>=e.top}function q8(t,e){for(let n=0;n<e.length;n++)if(W8(t,e[n]))return e[n];return null}function mO(t,e){return e.top>=0&&e.bottom<=t.height&&e.left>=0&&e.right<=t.width}function Y8(t,e,n){switch(n){case"+x":return e.left<0;case"-x":return e.right>t.width;case"+y":return e.top<0;case"-y":return e.bottom>t.height}}function K8(t,e){let n=Math.max(0,Math.min(t.width,e.right)-Math.max(0,e.left)),r=Math.max(0,Math.min(t.height,e.bottom)-Math.max(0,e.top));return n*r/(t.height*t.width)}function UT(t,e){return{top:e.top/t.height,left:e.left/t.width,right:(t.width-e.right)/t.width,bottom:(t.height-e.bottom)/t.height}}function xO(t,e){return e.top=e.top*t.height,e.left=e.left*t.width,e.right=t.width-e.right*t.width,e.bottom=t.height-e.bottom*t.height,e}function kO(t,e,n,r){let i=UT(e,n);for(let o of _O)Ln(t,`${r}-${o}`,i[o]*100+"%")}function TO(t,e,n,r){let i=1,o,s={...e};for(let a=0;a<r.length;a++){for(;Y8(t,e,r[a])||mO(t,e)&&q8(e,n);)Cy(e,r[a],1);if(mO(t,e))return e;let l=K8(t,e);i>l&&(o={...e},i=l),e={...s}}return o||s}function G8(t,e,n,r){let i=n.firstElementChild,o=Z8(e),s,a=[];if(n[Ls]||(n[Ls]=Q8(t,n)),s=xO(t,{...n[Ls]}),n[Up])a=[n[Up]==="top"?"+y":"-y","+x","-x"];else if(e.snapToLines){let l;switch(e.vertical){case"":a=["+y","-y"],l="height";break;case"rl":a=["+x","-x"],l="width";break;case"lr":a=["-x","+x"],l="width";break}let c=H8(i),u=c*Math.round(o),d=t[l]+c,p=a[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/c)*c),o<0&&(u+=e.vertical===""?t.height:t.width,a=a.reverse()),Cy(s,p,u)}else{let l=e.vertical==="",c=l?"+y":"+x",u=l?s.height:s.width;Cy(s,c,(l?t.height:t.width)*o/100),Cy(s,c,e.lineAlign==="center"?u/2:e.lineAlign==="end"?u:0),a=l?["-y","+y","-x","+x"]:["-x","+x","-y","+y"]}return s=TO(t,s,r,a),kO(n,t,s,"cue"),s}function Q8(t,e){let n=BT(e),r=X8(e);if(e[Up]=!1,r.top&&(n.top=r.top,n.bottom=r.top+n.height,e[Up]="top"),r.bottom){let i=t.height-r.bottom;n.top=i-n.height,n.bottom=i,e[Up]="bottom"}return r.left&&(n.left=r.left),r.right&&(n.right=t.width-r.right),UT(t,n)}function X8(t){let e={};for(let n of _O)e[n]=parseFloat(t.style.getPropertyValue(`--cue-${n}`));return e}function Z8(t){return t.line==="auto"?t.snapToLines?-1:100:t.line}function J8(t){if(t.position==="auto")switch(t.align){case"start":case"left":return 0;case"right":case"end":return 100;default:return 50}return t.position}function e7(t,e){if(t.positionAlign==="auto")switch(t.align){case"start":return e==="ltr"?"line-left":"line-right";case"end":return e==="ltr"?"line-right":"line-left";case"center":return"center";default:return`line-${t.align}`}return t.positionAlign}function n7(t,e,n,r){let i=Array.from(n.querySelectorAll('[data-part="cue-display"]')),o=0,s=Math.max(0,i.length-e.lines);for(let l=i.length-1;l>=s;l--)o+=i[l].offsetHeight;Ln(n,"region-height",o+"px"),n[Ls]||(n[Ls]=UT(t,BT(n)));let a={...n[Ls]};return a=xO(t,a),a.width=n.clientWidth,a.height=o,a.right=a.left+a.width,a.bottom=a.top+o,a=TO(t,a,r,t7),kO(n,t,a,"region"),a}var Ur,qn,gO,OT,DT,Hp,NT,v8,To,jp,pO,w8,_8,hO,k8,Fc,T8,S8,E8,P8,zp,C8,R8,M8,I8,L8,A8,Oc,Dc,O8,D8,F8,wO,N8,V8,z8,B8,Ls,_O,Up,t7,Ry,Vp=nt(()=>{"use strict";Ur={LoadFail:0,BadSignature:1,BadTimestamp:2,BadSettingValue:3,BadFormat:4,UnknownSetting:5},qn=class extends Error{constructor(n){super(n.reason);T(this,"code");T(this,"line");this.code=n.code,this.line=n.line}},gO=/\r?\n|\r/gm,OT=class{constructor(e){T(this,"writable");T(this,"readable");let n=new DT(e);this.writable=new WritableStream({write(r){n.transform(r)},close(){n.close()}}),this.readable=new ReadableStream({start(r){n.onLine=i=>r.enqueue(i),n.onClose=()=>r.close()}})}},DT=class{constructor(e){T(this,"a","");T(this,"b");T(this,"onLine");T(this,"onClose");this.b=new TextDecoder(e)}transform(e){this.a+=this.b.decode(e,{stream:!0});let n=this.a.split(gO);this.a=n.pop()||"";for(let r=0;r<n.length;r++)this.onLine(n[r].trim())}close(){this.a&&this.onLine(this.a.trim()),this.a="",this.onClose()}};Hp=class extends EventTarget{constructor(n,r,i){super();T(this,"id","");T(this,"startTime");T(this,"endTime");T(this,"text");T(this,"pauseOnExit",!1);this.startTime=n,this.endTime=r,this.text=i}addEventListener(n,r,i){super.addEventListener(n,r,i)}removeEventListener(n,r,i){super.removeEventListener(n,r,i)}},NT=typeof document>"u",v8=NT?Hp:window.VTTCue,To=class extends v8{constructor(){super(...arguments);T(this,"region",null);T(this,"vertical","");T(this,"snapToLines",!0);T(this,"line","auto");T(this,"lineAlign","start");T(this,"position","auto");T(this,"positionAlign","auto");T(this,"size",100);T(this,"align","center");T(this,"style")}},jp=class{constructor(){T(this,"id","");T(this,"width",100);T(this,"lines",3);T(this,"regionAnchorX",0);T(this,"regionAnchorY",100);T(this,"viewportAnchorX",0);T(this,"viewportAnchorY",100);T(this,"scroll","")}},pO=",",w8="%";_8="WEBVTT",hO=",",k8="%",Fc=/[:=]/,T8=/^[\s\t]*(region|vertical|line|position|size|align)[:=]/,S8="NOTE",E8="REGION",P8=/^REGION:?[\s\t]+/,zp=/[\s\t]+/,C8="-->",R8=/[\s\t]*-->[\s\t]+/,M8=/start|center|end|left|right/,I8=/start|center|end/,L8=/line-(?:left|right)|center|auto/,A8=/^(?:(\d{1,2}):)?(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/,Oc=(t=>(t[t.None=0]="None",t[t.Header=1]="Header",t[t.Cue=2]="Cue",t[t.Region=3]="Region",t[t.Note=4]="Note",t))(Oc||{}),Dc=class{constructor(){T(this,"h");T(this,"e",0);T(this,"i",{});T(this,"j",{});T(this,"l",[]);T(this,"c",null);T(this,"d",null);T(this,"m",[]);T(this,"f");T(this,"n","")}async init(e){this.h=e,e.strict&&(this.e=1),e.errors&&(this.f=(await Promise.resolve().then(()=>(MT(),RT))).ParseErrorBuilder)}parse(e,n){if(e==="")this.c?(this.l.push(this.c),this.h.onCue?.(this.c),this.c=null):this.d?(this.j[this.d.id]=this.d,this.h.onRegion?.(this.d),this.d=null):this.e===1&&(this.k(e,n),this.h.onHeaderMetadata?.(this.i)),this.e=0;else if(this.e)switch(this.e){case 1:this.k(e,n);break;case 2:if(this.c){let r=this.c.text.length>0;!r&&T8.test(e)?this.o(e.split(zp),n):this.c.text+=(r?`
`:"")+e}break;case 3:this.p(e.split(zp),n);break}else if(e.startsWith(S8))this.e=4;else if(e.startsWith(E8))this.e=3,this.d=new jp,this.p(e.replace(P8,"").split(zp),n);else if(e.includes(C8)){let r=this.q(e,n);r&&(this.c=new To(r[0],r[1],""),this.c.id=this.n,this.o(r[2],n)),this.e=2}else n===1&&this.k(e,n);this.n=e}done(){return{metadata:this.i,cues:this.l,regions:Object.values(this.j),errors:this.m}}k(e,n){if(n>1){if(Fc.test(e)){let[r,i]=e.split(Fc);r&&(this.i[r]=(i||"").replace(zp,""))}}else e.startsWith(_8)?this.e=1:this.g(this.f?.r())}q(e,n){let[r,i=""]=e.split(R8),[o,...s]=i.split(zp),a=So(r),l=So(o);if(a!==null&&l!==null&&l>a)return[a,l,s];a===null&&this.g(this.f?.s(r,n)),l===null&&this.g(this.f?.t(o,n)),a!=null&&l!==null&&l>a&&this.g(this.f?.u(a,l,n))}p(e,n){let r;for(let i=0;i<e.length;i++)if(Fc.test(e[i])){r=!1;let[o,s]=e[i].split(Fc);switch(o){case"id":this.d.id=s;break;case"width":let a=Bp(s);a!==null?this.d.width=a:r=!0;break;case"lines":let l=b8(s);l!==null?this.d.lines=l:r=!0;break;case"regionanchor":let c=fO(s);c!==null?(this.d.regionAnchorX=c[0],this.d.regionAnchorY=c[1]):r=!0;break;case"viewportanchor":let u=fO(s);u!==null?(this.d.viewportAnchorX=u[0],this.d.viewportAnchorY=u[1]):r=!0;break;case"scroll":s==="up"?this.d.scroll="up":r=!0;break;default:this.g(this.f?.v(o,s,n))}r&&this.g(this.f?.w(o,s,n))}}o(e,n){let r;for(let i=0;i<e.length;i++)if(r=!1,Fc.test(e[i])){let[o,s]=e[i].split(Fc);switch(o){case"region":let a=this.j[s];a&&(this.c.region=a);break;case"vertical":s==="lr"||s==="rl"?(this.c.vertical=s,this.c.region=null):r=!0;break;case"line":let[l,c]=s.split(hO);if(l.includes(k8)){let h=Bp(l);h!==null?(this.c.line=h,this.c.snapToLines=!1):r=!0}else{let h=x8(l);h!==null?this.c.line=h:r=!0}I8.test(c)?this.c.lineAlign=c:c&&(r=!0),this.c.line!=="auto"&&(this.c.region=null);break;case"position":let[u,d]=s.split(hO),p=Bp(u);p!==null?this.c.position=p:r=!0,d&&L8.test(d)?this.c.positionAlign=d:d&&(r=!0);break;case"size":let f=Bp(s);f!==null?(this.c.size=f,f<100&&(this.c.region=null)):r=!0;break;case"align":M8.test(s)?this.c.align=s:r=!0;break;default:this.g(this.f?.x(o,s,n))}r&&this.g(this.f?.y(o,s,n))}}g(e){if(e){if(this.m.push(e),this.h.strict)throw this.h.cancel(),e;this.h.onError?.(e)}}};O8=Object.freeze({__proto__:null,VTTBlock:Oc,VTTParser:Dc,default:$8,parseVTTTimestamp:So}),D8=/[0-9]/,F8=/[\s\t]+/,wO={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span",timestamp:"span"},N8={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"\xA0","&lrm;":"\u200E","&rlm;":"\u200F"},V8=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,z8=new Set(["white","lime","cyan","red","yellow","magenta","blue","black"]),B8=new Set(Object.keys(wO));Ls=Symbol(0);_O=["top","left","right","bottom"];Up=Symbol(0);t7=["-y","+y","-x","+x"];Ry=class{constructor(e,n){T(this,"overlay");T(this,"z");T(this,"A",0);T(this,"C","ltr");T(this,"B",[]);T(this,"D",!1);T(this,"E");T(this,"j",new Map);T(this,"l",new Map);T(this,"K",j8(()=>{this.D=!1,this.G();for(let e of this.j.values())e[Ls]=null;for(let e of this.l.values())e&&(e[Ls]=null);this.H(!0)},50));this.overlay=e,this.dir=n?.dir??"ltr",e.setAttribute("translate","yes"),e.setAttribute("aria-live","off"),e.setAttribute("aria-atomic","true"),Py(e,"captions"),this.G(),this.E=new ResizeObserver(this.I.bind(this)),this.E.observe(e)}get dir(){return this.C}set dir(e){this.C=e,Is(this.overlay,"dir",e)}get currentTime(){return this.A}set currentTime(e){this.A=e,this.update()}changeTrack({regions:e,cues:n}){this.reset(),this.J(e);for(let r of n)this.l.set(r,null);this.update()}addCue(e){this.l.set(e,null),this.update()}removeCue(e){this.l.delete(e),this.update()}update(e=!1){this.H(e)}reset(){this.l.clear(),this.j.clear(),this.B=[],this.overlay.textContent=""}destroy(){this.reset(),this.E.disconnect()}I(){this.D=!0,this.K()}G(){this.z=BT(this.overlay),Ln(this.overlay,"overlay-width",this.z.width+"px"),Ln(this.overlay,"overlay-height",this.z.height+"px")}H(e=!1){if(!this.l.size||this.D)return;let n,r=[...this.l.keys()].filter(o=>this.A>=o.startTime&&this.A<=o.endTime).sort((o,s)=>o.startTime!==s.startTime?o.startTime-s.startTime:o.endTime-s.endTime),i=r.map(o=>o.region);for(let o=0;o<this.B.length;o++){if(n=this.B[o],r[o]===n)continue;if(n.region&&!i.includes(n.region)){let a=this.j.get(n.region.id);a&&(a.removeAttribute("data-active"),e=!0)}let s=this.l.get(n);s&&(s.remove(),e=!0)}for(let o=0;o<r.length;o++){n=r[o];let s=this.l.get(n);s||this.l.set(n,s=this.L(n));let a=this.F(n)&&this.j.get(n.region.id);a&&!a.hasAttribute("data-active")&&(requestAnimationFrame(()=>Is(a,"active")),e=!0),s.isConnected||((a||this.overlay).append(s),e=!0)}if(e){let o=[],s=new Set;for(let a=r.length-1;a>=0;a--){if(n=r[a],s.has(n.region||n))continue;let l=this.F(n),c=l?this.j.get(n.region.id):this.l.get(n);l?o.push(n7(this.z,n.region,c,o)):o.push(G8(this.z,n,c,o)),s.add(l?n.region:n)}}zT(this.overlay,this.A),this.B=r}J(e){if(e)for(let n of e){let r=this.M(n);this.j.set(n.id,r),this.overlay.append(r)}}M(e){let n=document.createElement("div");return Py(n,"region"),Is(n,"id",e.id),Is(n,"scroll",e.scroll),Ln(n,"region-width",e.width+"%"),Ln(n,"region-anchor-x",e.regionAnchorX),Ln(n,"region-anchor-y",e.regionAnchorY),Ln(n,"region-viewport-anchor-x",e.viewportAnchorX),Ln(n,"region-viewport-anchor-y",e.viewportAnchorY),Ln(n,"region-lines",e.lines),n}L(e){let n=document.createElement("div"),r=J8(e),i=e7(e,this.C);if(Py(n,"cue-display"),e.vertical!==""&&Is(n,"vertical"),Ln(n,"cue-text-align",e.align),e.style)for(let s of Object.keys(e.style))n.style.setProperty(s,e.style[s]);if(this.F(e))Ln(n,"cue-offset",`${r-(i==="line-right"?100:i==="center"?50:0)}%`);else if(Ln(n,"cue-writing-mode",e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl"),!e.style?.["--cue-width"]){let s=r;i==="line-left"?s=100-r:i==="center"&&r<=50?s=r*2:i==="center"&&r>50&&(s=(100-r)*2);let a=e.size<s?e.size:s;e.vertical===""?Ln(n,"cue-width",a+"%"):Ln(n,"cue-height",a+"%")}let o=document.createElement("div");return Py(o,"cue"),e.id&&Is(o,"id",e.id),o.innerHTML=Iy(e),n.append(o),n}F(e){return e.region&&e.size===100&&e.vertical===""&&e.line==="auto"}}});var Wp={};At(Wp,{CaptionsRenderer:()=>Ry,ParseError:()=>qn,ParseErrorCode:()=>Ur,TextCue:()=>Hp,VTTCue:()=>To,VTTRegion:()=>jp,createVTTCueTemplate:()=>bO,parseByteStream:()=>FT,parseResponse:()=>vO,parseText:()=>yO,parseTextStream:()=>My,parseVTTTimestamp:()=>So,renderVTTCueString:()=>Iy,renderVTTTokensString:()=>Ly,tokenizeVTTCue:()=>VT,updateTimedVTTCueNodes:()=>zT});var qp=nt(()=>{"use strict";Vp()});var ji,Yp=nt(()=>{"use strict";"use client";In();ji=class{constructor(e){this._callback=e}_start(){it(this._id)&&this._loop()}_stop(){Rt(this._id)&&window.cancelAnimationFrame(this._id),this._id=void 0}_loop(){this._id=window.requestAnimationFrame(()=>{it(this._id)||(this._callback(),this._loop())})}}});var HT,jT,Nc,WT=nt(()=>{"use strict";"use client";In();Yn();Yp();HT=class{constructor(e,n){this._provider=e,this._ctx=n,this._disposal=ST(),this._waiting=!1,this._attachedLoadStart=!1,this._attachedCanPlay=!1,this._timeRAF=new ji(this._onAnimationFrame.bind(this)),this._handlers=void 0,this._handleDevEvent=void 0,this._attachInitialListeners(),R(this._attachTimeUpdate.bind(this)),he(this._onDispose.bind(this))}get _media(){return this._provider.media}get _notify(){return this._ctx.delegate._notify}_onDispose(){this._attachedLoadStart=!1,this._attachedCanPlay=!1,this._timeRAF._stop(),this._disposal.empty()}_onAnimationFrame(){let e=this._media.currentTime;this._ctx.$state.realCurrentTime()!==e&&this._updateCurrentTime(e)}_attachInitialListeners(){this._attachEventListener("loadstart",this._onLoadStart),this._attachEventListener("abort",this._onAbort),this._attachEventListener("emptied",this._onEmptied),this._attachEventListener("error",this._onError),this._attachEventListener("volumechange",this._onVolumeChange)}_attachLoadStartListeners(){this._attachedLoadStart||(this._disposal.add(this._attachEventListener("loadeddata",this._onLoadedData),this._attachEventListener("loadedmetadata",this._onLoadedMetadata),this._attachEventListener("canplay",this._onCanPlay),this._attachEventListener("canplaythrough",this._onCanPlayThrough),this._attachEventListener("durationchange",this._onDurationChange),this._attachEventListener("play",this._onPlay),this._attachEventListener("progress",this._onProgress),this._attachEventListener("stalled",this._onStalled),this._attachEventListener("suspend",this._onSuspend),this._attachEventListener("ratechange",this._onRateChange)),this._attachedLoadStart=!0)}_attachCanPlayListeners(){this._attachedCanPlay||(this._disposal.add(this._attachEventListener("pause",this._onPause),this._attachEventListener("playing",this._onPlaying),this._attachEventListener("seeked",this._onSeeked),this._attachEventListener("seeking",this._onSeeking),this._attachEventListener("ended",this._onEnded),this._attachEventListener("waiting",this._onWaiting)),this._attachedCanPlay=!0)}_attachEventListener(e,n){return z(this._media,e,n.bind(this))}_onDevEvent(e){}_updateCurrentTime(e,n){let r={currentTime:Math.min(e,this._ctx.$state.seekableEnd()),played:this._media.played};this._notify("time-update",r,n)}_onLoadStart(e){if(this._media.networkState===3){this._onAbort(e);return}this._attachLoadStartListeners(),this._notify("load-start",void 0,e)}_onAbort(e){this._notify("abort",void 0,e)}_onEmptied(){this._notify("emptied",void 0,event)}_onLoadedData(e){this._notify("loaded-data",void 0,e)}_onLoadedMetadata(e){this._attachCanPlayListeners(),this._notify("loaded-metadata",void 0,e),(Vc||SO&&Oa(this._ctx.$state.source()))&&this._ctx.delegate._ready(this._getCanPlayDetail(),e)}_getCanPlayDetail(){return{provider:U(this._ctx.$provider),duration:this._media.duration,buffered:this._media.buffered,seekable:this._media.seekable}}_onPlay(e){this._ctx.$state.canPlay&&this._notify("play",void 0,e)}_onPause(e){this._media.readyState===1&&!this._waiting||(this._waiting=!1,this._timeRAF._stop(),this._notify("pause",void 0,e))}_onCanPlay(e){this._ctx.delegate._ready(this._getCanPlayDetail(),e)}_onCanPlayThrough(e){this._ctx.$state.started()||this._notify("can-play-through",this._getCanPlayDetail(),e)}_onPlaying(e){this._waiting=!1,this._notify("playing",void 0,e),this._timeRAF._start()}_onStalled(e){this._notify("stalled",void 0,e),this._media.readyState<3&&(this._waiting=!0,this._notify("waiting",void 0,e))}_onWaiting(e){this._media.readyState<3&&(this._waiting=!0,this._notify("waiting",void 0,e))}_onEnded(e){this._timeRAF._stop(),this._updateCurrentTime(this._media.duration,e),this._notify("end",void 0,e),this._ctx.$state.loop()&&vT(this._media.controls)&&(this._media.controls=!1)}_attachTimeUpdate(){this._ctx.$state.paused()&&z(this._media,"timeupdate",this._onTimeUpdate.bind(this))}_onTimeUpdate(e){this._updateCurrentTime(this._media.currentTime,e)}_onDurationChange(e){this._ctx.$state.ended()&&this._updateCurrentTime(this._media.duration,e),this._notify("duration-change",this._media.duration,e)}_onVolumeChange(e){let n={volume:this._media.volume,muted:this._media.muted};this._notify("volume-change",n,e)}_onSeeked(e){this._updateCurrentTime(this._media.currentTime,e),this._notify("seeked",this._media.currentTime,e),Math.trunc(this._media.currentTime)===Math.trunc(this._media.duration)&&Ay(this._media.duration)>Ay(this._media.currentTime)&&(this._updateCurrentTime(this._media.duration,e),this._media.ended||this._ctx.player.dispatch(new le("media-play-request",{trigger:e})))}_onSeeking(e){this._notify("seeking",this._media.currentTime,e)}_onProgress(e){let n={buffered:this._media.buffered,seekable:this._media.seekable};this._notify("progress",n,e)}_onSuspend(e){this._notify("suspend",void 0,e)}_onRateChange(e){this._notify("rate-change",this._media.playbackRate,e)}_onError(e){let n=this._media.error;if(!n)return;let r={message:n.message,code:n.code,mediaError:n};this._notify("error",r,e)}},jT=class{constructor(e,n){this._provider=e,this._ctx=n,this._nativeTracks.onaddtrack=this._onAddNativeTrack.bind(this),this._nativeTracks.onremovetrack=this._onRemoveNativeTrack.bind(this),this._nativeTracks.onchange=this._onChangeNativeTrack.bind(this),z(this._ctx.audioTracks,"change",this._onChangeTrack.bind(this))}get _nativeTracks(){return this._provider.media.audioTracks}_onAddNativeTrack(e){let n=e.track;if(n.label==="")return;let r={id:n.id.toString(),label:n.label,language:n.language,kind:n.kind,selected:!1};this._ctx.audioTracks[ge._add](r,e),n.enabled&&(r.selected=!0)}_onRemoveNativeTrack(e){let n=this._ctx.audioTracks.getById(e.track.id);n&&this._ctx.audioTracks[ge._remove](n,e)}_onChangeNativeTrack(e){let n=this._getEnabledNativeTrack();if(!n)return;let r=this._ctx.audioTracks.getById(n.id);r&&this._ctx.audioTracks[ge._select](r,!0,e)}_getEnabledNativeTrack(){return Array.from(this._nativeTracks).find(e=>e.enabled)}_onChangeTrack(e){let{current:n}=e.detail;if(!n)return;let r=this._nativeTracks.getTrackById(n.id);if(r){let i=this._getEnabledNativeTrack();i&&(i.enabled=!1),r.enabled=!0}}},Nc=class{constructor(e,n){this._media=e,this._ctx=n,this.scope=Cn(),this._currentSrc=null}setup(){new HT(this,this._ctx),"audioTracks"in this.media&&new jT(this,this._ctx),he(()=>{this._media.srcObject=null,this._media.removeAttribute("src");for(let e of this._media.querySelectorAll("source"))e.remove();this._media.load()})}get type(){return""}get media(){return this._media}get currentSrc(){return this._currentSrc}setPlaybackRate(e){this._media.playbackRate=e}async play(){return this._media.play()}async pause(){return this._media.pause()}setMuted(e){this._media.muted=e}setVolume(e){this._media.volume=e}setCurrentTime(e){this._media.currentTime=e}setPlaysInline(e){fe(this._media,"playsinline",e)}async loadSource({src:e,type:n},r){this._media.preload=r||"",qT(e)?(this._removeSource(),this._media.srcObject=e):(this._media.srcObject=null,ne(e)?n!=="?"?this._appendSource({src:e,type:n}):(this._removeSource(),this._media.src=this._appendMediaFragment(e)):(this._removeSource(),this._media.src=window.URL.createObjectURL(e))),this._media.load(),this._currentSrc={src:e,type:n}}_appendSource(e,n){let r=this._media.querySelector("source[data-vds]"),i=r??document.createElement("source");fe(i,"src",this._appendMediaFragment(e.src)),fe(i,"type",e.type!=="?"?e.type:n),fe(i,"data-vds",""),r||this._media.append(i)}_removeSource(){this._media.querySelector("source[data-vds]")?.remove()}_appendMediaFragment(e){let{clipStartTime:n,clipEndTime:r}=this._ctx.$state,i=n(),o=r();return i>0&&o>0?`${e}#t=${i},${o}`:i>0?`${e}#t=${i}`:o>0?`${e}#t=0,${o}`:e}}});var EO={};At(EO,{AudioProvider:()=>YT});var ape,YT,PO=nt(()=>{"use strict";"use client";WT();ape=I(H(),1),YT=class extends Nc{constructor(){super(...arguments),this.$$PROVIDER_TYPE="AUDIO"}get type(){return"audio"}setup(){super.setup(),this.type==="audio"&&this._ctx.delegate._notify("provider-setup",this)}get audio(){return this._media}}});var CO={};At(CO,{VideoProvider:()=>Kp});function r7(t,e){return Array.from(t.children).find(n=>n.track===e)}var dpe,KT,GT,QT,XT,ZT,JT,eS,Kp,tS=nt(()=>{"use strict";"use client";In();Yn();WT();dpe=I(H(),1),KT=class{constructor(e,n){this._video=e,this._ctx=n,e.textTracks.onaddtrack=this._onAddTrack.bind(this),he(this._onDispose.bind(this))}_onAddTrack(e){let n=e.track;if(!n||r7(this._video,n))return;let r=new gn({id:n.id,kind:n.kind,label:n.label,language:n.language,type:"vtt"});r[ue._native]={track:n},r[ue._readyState]=2,r[ue._nativeHLS]=!0;let i=0,o=s=>{if(n.cues)for(let a=i;a<n.cues.length;a++)r.addCue(n.cues[a],s),i++};o(e),n.oncuechange=o,this._ctx.textTracks.add(r,e),r.setMode(n.mode,e)}_onDispose(){this._video.textTracks.onaddtrack=null;for(let e of this._ctx.textTracks){let n=e[ue._native]?.track;n?.oncuechange&&(n.oncuechange=null)}}};GT=class{constructor(e,n){this._video=e,this._media=n,this._onChange=(r,i)=>{this._media.delegate._notify("picture-in-picture-change",r,i)},z(this._video,"enterpictureinpicture",this._onEnter.bind(this)),z(this._video,"leavepictureinpicture",this._onExit.bind(this))}get active(){return document.pictureInPictureElement===this._video}get supported(){return Oy(this._video)}async enter(){return this._video.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}_onEnter(e){this._onChange(!0,e)}_onExit(e){this._onChange(!1,e)}},QT=class{constructor(e,n){this._video=e,this._media=n,this._mode="inline",z(this._video,"webkitpresentationmodechanged",this._onModeChange.bind(this))}get _supported(){return Dy(this._video)}async _setPresentationMode(e){this._mode!==e&&this._video.webkitSetPresentationMode(e)}_onModeChange(e){let n=this._mode;this._mode=this._video.webkitPresentationMode,this._media.player?.dispatch(new le("video-presentation-change",{detail:this._mode,trigger:e})),["fullscreen","picture-in-picture"].forEach(r=>{(this._mode===r||n===r)&&this._media.delegate._notify(`${r}-change`,this._mode===r,e)})}},XT=class{constructor(e){this._presentation=e}get active(){return this._presentation._mode==="fullscreen"}get supported(){return this._presentation._supported}async enter(){this._presentation._setPresentationMode("fullscreen")}async exit(){this._presentation._setPresentationMode("inline")}},ZT=class{constructor(e){this._presentation=e}get active(){return this._presentation._mode==="picture-in-picture"}get supported(){return this._presentation._supported}async enter(){this._presentation._setPresentationMode("picture-in-picture")}async exit(){this._presentation._setPresentationMode("inline")}},JT=class{constructor(e,n){this._video=e,this._ctx=n,this._supported=ee(!1),this._setup()}get supported(){return this._supported()}_setup(){G||!this._video.remote||!this._canPrompt||(this._video.remote.watchAvailability(e=>{this._supported.set(e)}).catch(()=>{this._supported.set(!1)}),R(this._watchSupported.bind(this)))}_watchSupported(){if(!this._supported())return;let e=["connecting","connect","disconnect"],n=this._onStateChange.bind(this);n(),z(this._video,"playing",n);for(let r of e)z(this._video.remote,r,n)}async prompt(){if(!this.supported)throw Error("Not supported on this platform.");return this._type==="airplay"&&this._video.webkitShowPlaybackTargetPicker?this._video.webkitShowPlaybackTargetPicker():this._video.remote.prompt()}_onStateChange(e){let n=this._video.remote.state;if(n===this._state)return;let r={type:this._type,state:n};this._ctx.delegate._notify("remote-playback-change",r,e),this._state=n}},eS=class extends JT{constructor(){super(...arguments),this._type="airplay"}get _canPrompt(){return"WebKitPlaybackTargetAvailabilityEvent"in window}},Kp=class extends Nc{constructor(e,n){super(e,n),this.$$PROVIDER_TYPE="VIDEO",Yt(()=>{if(this.airPlay=new eS(e,n),Dy(e)){let r=new QT(e,n);this.fullscreen=new XT(r),this.pictureInPicture=new ZT(r)}else Oy(e)&&(this.pictureInPicture=new GT(e,n))},this.scope)}get type(){return"video"}setup(){super.setup(),$y(this.video)&&new KT(this.video,this._ctx),this._ctx.textRenderers._attachVideo(this.video),he(()=>{this._ctx.textRenderers._attachVideo(null)}),this.type==="video"&&this._ctx.delegate._notify("provider-setup",this)}get video(){return this._media}}});var RO={};At(RO,{HLSProvider:()=>Fy});async function o7(t,e={}){if(!it(t)){if(e.onLoadStart?.(),t.prototype&&t.prototype!==Function)return e.onLoaded?.(t),t;try{let n=(await t())?.default;if(n&&n.isSupported)e.onLoaded?.(n);else throw Error("");return n}catch(n){e.onLoadError?.(n)}}}async function s7(t,e={}){if(ne(t)){e.onLoadStart?.();try{if(await Vy(t),!sn(window.Hls))throw Error("");let n=window.Hls;return e.onLoaded?.(n),n}catch(n){e.onLoadError?.(n)}}}var gpe,i7,nS,rS,a7,Fy,MO=nt(()=>{"use strict";"use client";In();Yn();tS();Yp();gpe=I(H(),1),i7=t=>Ac(t),nS=class{constructor(e,n){this._video=e,this._ctx=n,this._instance=null,this._stopLiveSync=null,this._config={},this._callbacks=new Set,this._retryLoadingTimer=-1}get instance(){return this._instance}setup(e){let{streamType:n}=this._ctx.$state,r=U(n).includes("live"),i=U(n).includes("ll-");this._instance=new e({lowLatencyMode:i,backBufferLength:i?4:r?8:void 0,renderTextTracksNatively:!1,...this._config});let o=this._dispatchHLSEvent.bind(this);for(let s of Object.values(e.Events))this._instance.on(s,o);this._instance.on(e.Events.ERROR,this._onError.bind(this));for(let s of this._callbacks)s(this._instance);this._ctx.player.dispatch("hls-instance",{detail:this._instance}),this._instance.attachMedia(this._video),this._instance.on(e.Events.FRAG_LOADING,this._onFragLoading.bind(this)),this._instance.on(e.Events.AUDIO_TRACK_SWITCHED,this._onAudioSwitch.bind(this)),this._instance.on(e.Events.LEVEL_SWITCHED,this._onLevelSwitched.bind(this)),this._instance.on(e.Events.LEVEL_LOADED,this._onLevelLoaded.bind(this)),this._instance.on(e.Events.NON_NATIVE_TEXT_TRACKS_FOUND,this._onTracksFound.bind(this)),this._instance.on(e.Events.CUES_PARSED,this._onCuesParsed.bind(this)),this._ctx.qualities[pr._enableAuto]=this._enableAutoQuality.bind(this),z(this._ctx.qualities,"change",this._onQualityChange.bind(this)),z(this._ctx.audioTracks,"change",this._onAudioChange.bind(this)),this._stopLiveSync=R(this._liveSync.bind(this))}_liveSync(){if(!this._ctx.$state.live())return;let e=new ji(this._liveSyncPosition.bind(this));return e._start(),e._stop.bind(e)}_liveSyncPosition(){this._ctx.$state.liveSyncPosition.set(this._instance?.liveSyncPosition??1/0)}_dispatchHLSEvent(e,n){this._ctx.player?.dispatch(new le(i7(e),{detail:n}))}_onTracksFound(e,n){let r=new le(e,{detail:n}),i=-1;for(let o=0;o<n.tracks.length;o++){let s=n.tracks[o],a=s.subtitleTrack??s.closedCaptions,l=new gn({id:`hls-${s.kind}${o}`,src:a?.url,label:s.label,language:a?.lang,kind:s.kind,default:s.default});l[ue._readyState]=2,l[ue._onModeChange]=()=>{l.mode==="showing"?(this._instance.subtitleTrack=o,i=o):i===o&&(this._instance.subtitleTrack=-1,i=-1)},this._ctx.textTracks.add(l,r)}}_onCuesParsed(e,n){let r=this._ctx.textTracks.getById(`hls-${n.track}`);if(!r)return;let i=new le(e,{detail:n});for(let o of n.cues)o.positionAlign="auto",r.addCue(o,i)}_onAudioSwitch(e,n){let r=this._ctx.audioTracks[n.id];if(r){let i=new le(e,{detail:n});this._ctx.audioTracks[ge._select](r,!0,i)}}_onLevelSwitched(e,n){let r=this._ctx.qualities[n.level];if(r){let i=new le(e,{detail:n});this._ctx.qualities[ge._select](r,!0,i)}}_onLevelLoaded(e,n){if(this._ctx.$state.canPlay())return;let{type:r,live:i,totalduration:o,targetduration:s}=n.details,a=new le(e,{detail:n});this._ctx.delegate._notify("stream-type-change",i?r==="EVENT"&&Number.isFinite(o)&&s>=10?"live:dvr":"live":"on-demand",a),this._ctx.delegate._notify("duration-change",o,a);let l=this._instance.media;this._instance.currentLevel===-1&&this._ctx.qualities[pr._setAuto](!0,a);for(let c of this._instance.audioTracks){let u={id:c.id.toString(),label:c.name,language:c.lang||"",kind:"main"};this._ctx.audioTracks[ge._add](u,a)}for(let c of this._instance.levels){let u={id:c.id?.toString()??c.height+"p",width:c.width,height:c.height,codec:c.codecSet,bitrate:c.bitrate};this._ctx.qualities[ge._add](u,a)}l.dispatchEvent(new le("canplay",{trigger:a}))}_onError(e,n){if(n.fatal)switch(n.type){case"networkError":this._onNetworkError(n.error);break;case"mediaError":this._instance?.recoverMediaError();break;default:this._onFatalError(n.error);break}}_onFragLoading(){this._retryLoadingTimer>=0&&this._clearRetryTimer()}_onNetworkError(e){this._clearRetryTimer(),this._instance?.startLoad(),this._retryLoadingTimer=window.setTimeout(()=>{this._retryLoadingTimer=-1,this._onFatalError(e)},5e3)}_clearRetryTimer(){clearTimeout(this._retryLoadingTimer),this._retryLoadingTimer=-1}_onFatalError(e){this._instance?.destroy(),this._instance=null,this._ctx.delegate._notify("error",{message:e.message,code:1,error:e})}_enableAutoQuality(){this._instance&&(this._instance.currentLevel=-1)}_onQualityChange(){let{qualities:e}=this._ctx;!this._instance||e.auto||(this._instance[e.switch+"Level"]=e.selectedIndex,Gp&&(this._video.currentTime=this._video.currentTime))}_onAudioChange(){let{audioTracks:e}=this._ctx;this._instance&&this._instance.audioTrack!==e.selectedIndex&&(this._instance.audioTrack=e.selectedIndex)}_loadSource(e){ne(e.src)&&(this._clearRetryTimer(),this._instance?.loadSource(e.src))}_destroy(){this._clearRetryTimer(),this._ctx&&(this._ctx.qualities[pr._enableAuto]=void 0),this._instance?.destroy(),this._instance=null,this._stopLiveSync?.(),this._stopLiveSync=null}},rS=class{constructor(e,n,r){this._lib=e,this._ctx=n,this._callback=r,this._startLoading()}async _startLoading(){let e={onLoadStart:this._onLoadStart.bind(this),onLoaded:this._onLoaded.bind(this),onLoadError:this._onLoadError.bind(this)},n=await s7(this._lib,e);if(it(n)&&!ne(this._lib)&&(n=await o7(this._lib,e)),!n)return null;if(!n.isSupported()){let r="[vidstack] `hls.js` is not supported in this environment";return this._ctx.player.dispatch(new le("hls-unsupported")),this._ctx.delegate._notify("error",{message:r,code:4}),null}return n}_onLoadStart(){this._ctx.player.dispatch(new le("hls-lib-load-start"))}_onLoaded(e){this._ctx.player.dispatch(new le("hls-lib-loaded",{detail:e})),this._callback(e)}_onLoadError(e){let n=Da(e);this._ctx.player.dispatch(new le("hls-lib-load-error",{detail:n})),this._ctx.delegate._notify("error",{message:n.message,code:4,error:n})}};a7="https://cdn.jsdelivr.net",Fy=class extends Kp{constructor(){super(...arguments),this.$$PROVIDER_TYPE="HLS",this._ctor=null,this._controller=new nS(this.video,this._ctx),this._library=`${a7}/npm/hls.js@^1.5.0/dist/hls.min.js`}get ctor(){return this._ctor}get instance(){return this._controller.instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return this._controller._config}set config(e){this._controller._config=e}get library(){return this._library}set library(e){this._library=e}preconnect(){ne(this._library)&&gi(this._library)}setup(){super.setup(),new rS(this._library,this._ctx,e=>{this._ctor=e,this._controller.setup(e),this._ctx.delegate._notify("provider-setup",this);let n=U(this._ctx.$state.source);n&&this.loadSource(n)})}async loadSource(e,n){if(!ne(e.src)){this._removeSource();return}this._media.preload=n||"",this._appendSource(e,"application/x-mpegurl"),this._controller._loadSource(e),this._currentSrc=e}onInstance(e){let n=this._controller.instance;return n&&e(n),this._controller._callbacks.add(e),()=>this._controller._callbacks.delete(e)}destroy(){this._controller._destroy()}};Fy.supported=Ny()});function Bc(t,e=3e3){let n=ko();return setTimeout(()=>{let r=t();r&&n.reject(r)},e),n}var zc,iS=nt(()=>{"use strict";"use client";In();Yn();zc=class{constructor(e){this._iframe=e,this._src=ee(""),this.referrerPolicy=null,e.setAttribute("frameBorder","0"),e.setAttribute("aria-hidden","true"),e.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&e.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this._iframe}setup(){z(window,"message",this._onWindowMessage.bind(this)),z(this._iframe,"load",this._onLoad.bind(this)),R(this._watchSrc.bind(this))}_watchSrc(){let e=this._src();if(!e.length){this._iframe.setAttribute("src","");return}let n=U(()=>this._buildParams());this._iframe.setAttribute("src",IO(e,n))}_postMessage(e,n){G||this._iframe.contentWindow?.postMessage(JSON.stringify(e),n??"*")}_onWindowMessage(e){let n=this._getOrigin();if((e.source===null||e.source===this._iframe?.contentWindow)&&(!ne(n)||n===e.origin)){try{let i=JSON.parse(e.data);i&&this._onMessage(i,e);return}catch{}e.data&&this._onMessage(e.data,e)}}}});var LO={};At(LO,{getVimeoVideoInfo:()=>aS,resolveVimeoVideoId:()=>sS});function sS(t){let e=t.match(l7);return{videoId:e?.[1],hash:e?.[2]}}async function aS(t,e){if(oS.has(t))return oS.get(t);if(zy.has(t))return zy.get(t);let n=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${t}`,r=window.fetch(n,{mode:"cors",signal:e.signal}).then(i=>i.json()).then(i=>{let o=/vimeocdn.com\/video\/(.*)?_/,s=i?.thumbnail_url?.match(o)?.[1],a=s?`https://i.vimeocdn.com/video/${s}_1920x1080.webp`:"",l={title:i?.title??"",duration:i?.duration??0,poster:a,pro:i.account_type!=="basic"};return oS.set(t,l),l}).finally(()=>zy.delete(t));return zy.set(t,r),r}var l7,oS,zy,lS=nt(()=>{"use strict";"use client";l7=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:\?hash=(.*))?/,oS=new Map,zy=new Map});var AO={};At(AO,{VimeoProvider:()=>cS});var Spe,c7,cS,$O=nt(()=>{"use strict";"use client";In();Yn();Yp();iS();lS();Spe=I(H(),1),c7=["bufferend","bufferstart","durationchange","ended","enterpictureinpicture","error","fullscreenchange","leavepictureinpicture","loaded","playProgress","loadProgress","pause","play","playbackratechange","qualitychange","seeked","seeking","timeupdate","volumechange","waiting"],cS=class extends zc{constructor(e,n){super(e),this._ctx=n,this.$$PROVIDER_TYPE="VIMEO",this.scope=Cn(),this._played=0,this._playedRange=new Re(0,0),this._seekableRange=new Re(0,0),this._playPromise=null,this._pausePromise=null,this._videoInfoPromise=null,this._videoId=ee(""),this._pro=ee(!1),this._hash=null,this._currentSrc=null,this._currentCue=null,this._timeRAF=new ji(this._onAnimationFrame.bind(this)),this._chaptersTrack=null,this.cookies=!1,this.title=!0,this.byline=!0,this.portrait=!0,this.color="00ADEF",this._skipTimeUpdates=!1}get _notify(){return this._ctx.delegate._notify}get type(){return"vimeo"}get currentSrc(){return this._currentSrc}get videoId(){return this._videoId()}get hash(){return this._hash}get isPro(){return this._pro()}preconnect(){gi(this._getOrigin())}setup(){super.setup(),R(this._watchVideoId.bind(this)),R(this._watchVideoInfo.bind(this)),R(this._watchPro.bind(this)),this._notify("provider-setup",this)}destroy(){this._reset(),this._remote("destroy")}async play(){let{paused:e}=this._ctx.$state;return this._playPromise||(this._playPromise=Bc(()=>{if(this._playPromise=null,e())return"Timed out."}),this._remote("play")),this._playPromise.promise}async pause(){let{paused:e}=this._ctx.$state;return this._pausePromise||(this._pausePromise=Bc(()=>{if(this._pausePromise=null,!e())return"Timed out."}),this._remote("pause")),this._pausePromise.promise}setMuted(e){this._remote("setMuted",e)}setCurrentTime(e){this._remote("seekTo",e),this._notify("seeking",e)}setVolume(e){this._remote("setVolume",e),this._remote("setMuted",U(this._ctx.$state.muted))}setPlaybackRate(e){this._remote("setPlaybackRate",e)}async loadSource(e){if(!ne(e.src)){this._currentSrc=null,this._hash=null,this._videoId.set("");return}let{videoId:n,hash:r}=sS(e.src);this._videoId.set(n??""),this._hash=r??null,this._currentSrc=e}_watchVideoId(){this._reset();let e=this._videoId();if(!e){this._src.set("");return}this._src.set(`${this._getOrigin()}/video/${e}`),this._notify("load-start")}_watchVideoInfo(){let e=this._videoId();if(!e)return;let n=ko(),r=new AbortController;return this._videoInfoPromise=n,aS(e,r).then(i=>{n.resolve(i)}).catch(i=>{n.reject()}),()=>{n.reject(),r.abort()}}_watchPro(){let e=this._pro(),{$state:n,qualities:r}=this._ctx;if(n.canSetPlaybackRate.set(e),r[ge._setReadonly](!e),e)return z(r,"change",()=>{if(r.auto)return;let i=r.selected?.id;i&&this._remote("setQuality",i)})}_getOrigin(){return"https://player.vimeo.com"}_buildParams(){let{$iosControls:e}=this._ctx,{keyDisabled:n}=this._ctx.$props,{controls:r,playsInline:i}=this._ctx.$state,o=r()||e();return{title:this.title,byline:this.byline,color:this.color,portrait:this.portrait,controls:o,h:this.hash,keyboard:o&&!n(),transparent:!0,playsinline:i(),dnt:!this.cookies}}_onAnimationFrame(){this._remote("getCurrentTime")}_onTimeUpdate(e,n){if(this._skipTimeUpdates&&e===0)return;let{realCurrentTime:r,realDuration:i,paused:o,bufferedEnd:s}=this._ctx.$state;if(r()===e)return;let a=r(),l={currentTime:e,played:this._getPlayedRange(e)};this._notify("time-update",l,n),Math.abs(a-e)>1.5&&(this._notify("seeking",e,n),!o()&&s()<e&&this._notify("waiting",void 0,n)),i()-e<.01&&(this._notify("end",void 0,n),this._skipTimeUpdates=!0,setTimeout(()=>{this._skipTimeUpdates=!1},500))}_getPlayedRange(e){return this._played>=e?this._playedRange:this._playedRange=new Re(0,this._played=e)}_onSeeked(e,n){this._notify("seeked",e,n)}_onLoaded(e){let n=this._videoId();this._videoInfoPromise?.promise.then(r=>{if(!r)return;let{title:i,poster:o,duration:s,pro:a}=r;this._pro.set(a),this._notify("title-change",i,e),this._notify("poster-change",o,e),this._notify("duration-change",s,e),this._onReady(s,e)}).catch(()=>{n===this._videoId()&&(this._remote("getVideoTitle"),this._remote("getDuration"))})}_onReady(e,n){let{$iosControls:r}=this._ctx,{controls:i}=this._ctx.$state,o=i()||r();this._seekableRange=new Re(0,e);let s={buffered:new Re(0,0),seekable:this._seekableRange,duration:e};this._ctx.delegate._ready(s,n),o||this._remote("_hideOverlay"),this._remote("getQualities"),this._remote("getChapters")}_onMethod(e,n,r){switch(e){case"getVideoTitle":let i=n;this._notify("title-change",i,r);break;case"getDuration":let o=n;this._ctx.$state.canPlay()?this._notify("duration-change",o,r):this._onReady(o,r);break;case"getCurrentTime":this._onTimeUpdate(n,r);break;case"getBuffered":xt(n)&&n.length&&this._onLoadProgress(n[n.length-1][1],r);break;case"setMuted":this._onVolumeChange(U(this._ctx.$state.volume),n,r);break;case"getChapters":this._onChaptersChange(n);break;case"getQualities":this._onQualitiesChange(n,r);break}}_attachListeners(){for(let e of c7)this._remote("addEventListener",e)}_onPause(e){this._timeRAF._stop(),this._notify("pause",void 0,e),this._pausePromise?.resolve(),this._pausePromise=null}_onPlay(e){this._timeRAF._start(),this._notify("play",void 0,e),this._playPromise?.resolve(),this._playPromise=null}_onPlayProgress(e){let{paused:n}=this._ctx.$state;n()||this._notify("playing",void 0,e)}_onLoadProgress(e,n){let r={buffered:new Re(0,e),seekable:this._seekableRange};this._notify("progress",r,n)}_onBufferStart(e){this._notify("waiting",void 0,e)}_onBufferEnd(e){let{paused:n}=this._ctx.$state;n()||this._notify("playing",void 0,e)}_onWaiting(e){let{paused:n}=this._ctx.$state;n()&&this._notify("play",void 0,e),this._notify("waiting",void 0,e)}_onVolumeChange(e,n,r){let i={volume:e,muted:n};this._notify("volume-change",i,r)}_onChaptersChange(e){if(this._removeChapters(),!e.length)return;let n=new gn({kind:"chapters",default:!0}),{realDuration:r}=this._ctx.$state;for(let i=0;i<e.length;i++){let o=e[i],s=e[i+1];n.addCue(new window.VTTCue(o.startTime,s?.startTime??r(),o.title))}this._chaptersTrack=n,this._ctx.textTracks.add(n)}_removeChapters(){this._chaptersTrack&&(this._ctx.textTracks.remove(this._chaptersTrack),this._chaptersTrack=null)}_onQualitiesChange(e,n){this._ctx.qualities[pr._enableAuto]=e.some(r=>r.id==="auto")?()=>{this._remote("setQuality","auto")}:void 0;for(let r of e){if(r.id==="auto")continue;let i=+r.id.slice(0,-1);isNaN(i)||this._ctx.qualities[ge._add]({id:r.id,width:i*(16/9),height:i,codec:"avc1,h.264",bitrate:-1},n)}this._onQualityChange(e.find(r=>r.active),n)}_onQualityChange({id:e}={},n){if(!e)return;let r=e==="auto",i=this._ctx.qualities.toArray().find(o=>o.id===e);r?(this._ctx.qualities[pr._setAuto](r,n),this._ctx.qualities[ge._select](void 0,!0,n)):this._ctx.qualities[ge._select](i,!0,n)}_onEvent(e,n,r){switch(e){case"ready":this._attachListeners();break;case"loaded":this._onLoaded(r);break;case"play":this._onPlay(r);break;case"playProgress":this._onPlayProgress(r);break;case"pause":this._onPause(r);break;case"loadProgress":this._onLoadProgress(n.seconds,r);break;case"waiting":this._onWaiting(r);break;case"bufferstart":this._onBufferStart(r);break;case"bufferend":this._onBufferEnd(r);break;case"volumechange":this._onVolumeChange(n.volume,U(this._ctx.$state.muted),r);break;case"durationchange":this._seekableRange=new Re(0,n.duration),this._notify("duration-change",n.duration,r);break;case"playbackratechange":this._notify("rate-change",n.playbackRate,r);break;case"qualitychange":this._onQualityChange(n,r);break;case"fullscreenchange":this._notify("fullscreen-change",n.fullscreen,r);break;case"enterpictureinpicture":this._notify("picture-in-picture-change",!0,r);break;case"leavepictureinpicture":this._notify("picture-in-picture-change",!1,r);break;case"ended":this._notify("end",void 0,r);break;case"error":this._onError(n,r);break;case"seek":case"seeked":this._onSeeked(n.seconds,r);break}}_onError(e,n){if(e.method==="setPlaybackRate"&&this._pro.set(!1),e.method==="play"){this._playPromise?.reject(e.message);return}}_onMessage(e,n){e.event?this._onEvent(e.event,e.data,n):e.method&&this._onMethod(e.method,e.value,n)}_onLoad(){}_remote(e,n){return this._postMessage({method:e,value:n})}_reset(){this._timeRAF._stop(),this._played=0,this._playedRange=new Re(0,0),this._seekableRange=new Re(0,0),this._playPromise=null,this._pausePromise=null,this._videoInfoPromise=null,this._currentCue=null,this._pro.set(!1),this._removeChapters()}}});var OO={};At(OO,{findYouTubePoster:()=>d7,resolveYouTubeVideoId:()=>dS});function dS(t){return t.match(u7)?.[1]}async function d7(t,e){if(uS.has(t))return uS.get(t);if(By.has(t))return By.get(t);let n=new Promise(async r=>{let i=["maxresdefault","sddefault","hqdefault"];for(let o of i)for(let s of[!0,!1]){let a=p7(t,o,s);if((await fetch(a,{mode:"no-cors",signal:e.signal})).status<400){uS.set(t,a),r(a);return}}}).catch(()=>"").finally(()=>By.delete(t));return By.set(t,n),n}function p7(t,e,n){return`https://i.ytimg.com/${n?"vi_webp":"vi"}/${t}/${e}.${n?"webp":"jpg"}`}var u7,uS,By,pS=nt(()=>{"use strict";"use client";u7=/(?:youtu\.be|youtube|youtube\.com|youtube-nocookie\.com)\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|)((?:\w|-){11})/,uS=new Map,By=new Map});var DO={};At(DO,{YouTubeProvider:()=>fS});var Mpe,Fa,fS,FO=nt(()=>{"use strict";"use client";In();Yn();iS();pS();Mpe=I(H(),1),Fa={_Unstarted:-1,_Ended:0,_Playing:1,_Paused:2,_Buffering:3,_Cued:5},fS=class extends zc{constructor(e,n){super(e),this._ctx=n,this.$$PROVIDER_TYPE="YOUTUBE",this.scope=Cn(),this._videoId=ee(""),this._state=-1,this._seekingTimer=-1,this._pausedSeeking=!1,this._played=0,this._playedRange=new Re(0,0),this._currentSrc=null,this._playPromise=null,this._pausePromise=null,this.language="en",this.color="red",this.cookies=!1}get _notify(){return this._ctx.delegate._notify}get currentSrc(){return this._currentSrc}get type(){return"youtube"}get videoId(){return this._videoId()}preconnect(){gi(this._getOrigin())}setup(){super.setup(),R(this._watchVideoId.bind(this)),this._notify("provider-setup",this)}async play(){let{paused:e}=this._ctx.$state;return this._playPromise||(this._playPromise=Bc(()=>{if(this._playPromise=null,e())return"Timed out."}),this._remote("playVideo")),this._playPromise.promise}async pause(){let{paused:e}=this._ctx.$state;return this._pausePromise||(this._pausePromise=Bc(()=>{this._pausePromise=null,e()}),this._remote("pauseVideo")),this._pausePromise.promise}setMuted(e){e?this._remote("mute"):this._remote("unMute")}setCurrentTime(e){this._pausedSeeking=this._ctx.$state.paused(),this._remote("seekTo",e),this._notify("seeking",e)}setVolume(e){this._remote("setVolume",e*100)}setPlaybackRate(e){this._remote("setPlaybackRate",e)}async loadSource(e){if(!ne(e.src)){this._currentSrc=null,this._videoId.set("");return}let n=dS(e.src);this._videoId.set(n??""),this._currentSrc=e}_getOrigin(){return this.cookies?"https://www.youtube.com":"https://www.youtube-nocookie.com"}_watchVideoId(){this._reset();let e=this._videoId();if(!e){this._src.set("");return}this._src.set(`${this._getOrigin()}/embed/${e}`),this._notify("load-start")}_buildParams(){let{keyDisabled:e}=this._ctx.$props,{$iosControls:n}=this._ctx,{controls:r,muted:i,playsInline:o}=this._ctx.$state,s=r()||n();return{autoplay:0,cc_lang_pref:this.language,cc_load_policy:s?1:void 0,color:this.color,controls:s?1:0,disablekb:!s||e()?1:0,enablejsapi:1,fs:1,hl:this.language,iv_load_policy:s?1:3,mute:i()?1:0,playsinline:o()?1:0}}_remote(e,n){this._postMessage({event:"command",func:e,args:n?[n]:void 0})}_onLoad(){window.setTimeout(()=>this._postMessage({event:"listening"}),100)}_onReady(e){this._notify("loaded-metadata"),this._notify("loaded-data"),this._ctx.delegate._ready(void 0,e)}_onPause(e){this._pausePromise?.resolve(),this._pausePromise=null,this._notify("pause",void 0,e)}_onTimeUpdate(e,n){let{duration:r,realCurrentTime:i}=this._ctx.$state,o=this._state===Fa._Ended,s=o?r():e,a={currentTime:s,played:this._getPlayedRange(s)};this._notify("time-update",a,n),!o&&Math.abs(s-i())>1&&this._notify("seeking",s,n)}_getPlayedRange(e){return this._played>=e?this._playedRange:this._playedRange=new Re(0,this._played=e)}_onProgress(e,n,r){let i={buffered:new Re(0,e),seekable:n};this._notify("progress",i,r);let{seeking:o,realCurrentTime:s}=this._ctx.$state;o()&&e>s()&&this._onSeeked(r)}_onSeeked(e){let{paused:n,realCurrentTime:r}=this._ctx.$state;window.clearTimeout(this._seekingTimer),this._seekingTimer=window.setTimeout(()=>{this._notify("seeked",r(),e),this._seekingTimer=-1},n()?100:0),this._pausedSeeking=!1}_onEnded(e){let{seeking:n}=this._ctx.$state;n()&&this._onSeeked(e),this._notify("pause",void 0,e),this._notify("end",void 0,e)}_onStateChange(e,n){let{started:r,paused:i,seeking:o}=this._ctx.$state,s=e===Fa._Playing,a=e===Fa._Buffering,l=(i()||this._playPromise)&&(a||s);if(a&&this._notify("waiting",void 0,n),o()&&s&&this._onSeeked(n),!r()&&l&&this._pausedSeeking){this._playPromise?.reject("invalid internal play operation"),this._playPromise=null,s&&(this.pause(),this._pausedSeeking=!1);return}switch(l&&(this._playPromise?.resolve(),this._playPromise=null,this._notify("play",void 0,n)),e){case Fa._Cued:this._onReady(n);break;case Fa._Playing:this._notify("playing",void 0,n);break;case Fa._Paused:this._onPause(n);break;case Fa._Ended:this._onEnded(n);break}this._state=e}_onMessage({info:e},n){if(!e)return;let{title:r,intrinsicDuration:i,playbackRate:o}=this._ctx.$state;if(Ap(e.videoData)&&e.videoData.title!==r()&&this._notify("title-change",e.videoData.title,n),Rt(e.duration)&&e.duration!==i()){if(Rt(e.videoLoadedFraction)){let s=e.progressState?.loaded??e.videoLoadedFraction*e.duration,a=new Re(0,e.duration);this._onProgress(s,a,n)}this._notify("duration-change",e.duration,n)}if(Rt(e.playbackRate)&&e.playbackRate!==o()&&this._notify("rate-change",e.playbackRate,n),e.progressState){let{current:s,seekableStart:a,seekableEnd:l,loaded:c,duration:u}=e.progressState;this._onTimeUpdate(s,n),this._onProgress(c,new Re(a,l),n),u!==i()&&this._notify("duration-change",u,n)}if(Rt(e.volume)&&wT(e.muted)){let s={muted:e.muted,volume:e.volume/100};this._notify("volume-change",s,n)}Rt(e.playerState)&&e.playerState!==this._state&&this._onStateChange(e.playerState,n)}_reset(){this._state=-1,this._seekingTimer=-1,this._played=0,this._playedRange=new Re(0,0),this._playPromise=null,this._pausePromise=null,this._pausedSeeking=!1}}});var VO={};At(VO,{GoogleCastProvider:()=>yS});var Ope,mS,hS,NO,gS,yS,zO=nt(()=>{"use strict";"use client";In();Yn();Yp();wS();Ope=I(H(),1),mS=class{constructor(e){this._info=new chrome.cast.media.MediaInfo(e.src,e.type)}build(){return this._info}_setStreamType(e){return e.includes("live")?this._info.streamType=chrome.cast.media.StreamType.LIVE:this._info.streamType=chrome.cast.media.StreamType.BUFFERED,this}_setTracks(e){return this._info.tracks=e.map(this._buildCastTrack),this}_setMetadata(e,n){return this._info.metadata=new chrome.cast.media.GenericMediaMetadata,this._info.metadata.title=e,this._info.metadata.images=[{url:n}],this}_buildCastTrack(e,n){let r=new chrome.cast.media.Track(n,chrome.cast.media.TrackType.TEXT);return r.name=e.label,r.trackContentId=e.src,r.trackContentType="text/vtt",r.language=e.language,r.subtype=e.kind.toUpperCase(),r}},hS=chrome.cast.media.TrackType.TEXT,NO=chrome.cast.media.TrackType.AUDIO,gS=class{constructor(e,n,r){this._cast=e,this._ctx=n,this._onNewLocalTracks=r}_setup(){let e=this._syncRemoteActiveIds.bind(this);z(this._ctx.audioTracks,"change",e),z(this._ctx.textTracks,"mode-change",e),R(this._syncLocalTracks.bind(this))}_getLocalTextTracks(){return this._ctx.$state.textTracks().filter(e=>e.src&&e.type==="vtt")}_getLocalAudioTracks(){return this._ctx.$state.audioTracks()}_getRemoteTracks(e){let n=this._cast.mediaInfo?.tracks??[];return e?n.filter(r=>r.type===e):n}_getRemoteActiveIds(){let e=[],n=this._getLocalAudioTracks().find(i=>i.selected),r=this._getLocalTextTracks().filter(i=>i.mode==="showing");if(n){let i=this._getRemoteTracks(NO),o=this._findRemoteTrack(i,n);o&&e.push(o.trackId)}if(r?.length){let i=this._getRemoteTracks(hS);if(i.length)for(let o of r){let s=this._findRemoteTrack(i,o);s&&e.push(s.trackId)}}return e}_syncLocalTracks(){let e=this._getLocalTextTracks();if(!this._cast.isMediaLoaded)return;let n=this._getRemoteTracks(hS);for(let r of e)if(!this._findRemoteTrack(n,r)){Ic(()=>this._onNewLocalTracks?.());break}}_syncRemoteTracks(e){if(!this._cast.isMediaLoaded)return;let n=this._getLocalAudioTracks(),r=this._getLocalTextTracks(),i=this._getRemoteTracks(NO),o=this._getRemoteTracks(hS);for(let s of i){if(this._findLocalTrack(n,s))continue;let l={id:s.trackId.toString(),label:s.name,language:s.language,kind:s.subtype??"main",selected:!1};this._ctx.audioTracks[ge._add](l,e)}for(let s of o){if(this._findLocalTrack(r,s))continue;let l={id:s.trackId.toString(),src:s.trackContentId,label:s.name,language:s.language,kind:s.subtype.toLowerCase()};this._ctx.textTracks.add(l,e)}}_syncRemoteActiveIds(e){if(!this._cast.isMediaLoaded)return;let n=this._getRemoteActiveIds(),r=new chrome.cast.media.EditTracksInfoRequest(n);this._editTracksInfo(r).catch(i=>{})}_editTracksInfo(e){let n=Xp();return new Promise((r,i)=>n?.editTracksInfo(e,r,i))}_findLocalTrack(e,n){return e.find(r=>this._isMatch(r,n))}_findRemoteTrack(e,n){return e.find(r=>this._isMatch(n,r))}_isMatch(e,n){return n.name===e.label&&n.language===e.language&&n.subtype.toLowerCase()===e.kind.toLowerCase()}},yS=class{constructor(e,n){this._player=e,this._ctx=n,this.$$PROVIDER_TYPE="GOOGLE_CAST",this.scope=Cn(),this._currentSrc=null,this._state="disconnected",this._currentTime=0,this._played=0,this._playedRange=new Re(0,0),this._seekableRange=new Re(0,0),this._timeRAF=new ji(this._onAnimationFrame.bind(this)),this._reloadInfo=null,this._isIdle=!1,this._tracks=new gS(this._player,this._ctx,this._onNewLocalTracks.bind(this))}get _notify(){return this._ctx.delegate._notify}get type(){return"google-cast"}get currentSrc(){return this._currentSrc}get player(){return this._player}get cast(){return Na()}get session(){return Qp()}get media(){return Xp()}get hasActiveSession(){return Uy(this._currentSrc)}setup(){this._attachCastContextEventListeners(),this._attachCastPlayerEventListeners(),this._tracks._setup(),this._notify("provider-setup",this)}_attachCastContextEventListeners(){vS(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this._onCastStateChange.bind(this))}_attachCastPlayerEventListeners(){let e=cast.framework.RemotePlayerEventType,n={[e.IS_CONNECTED_CHANGED]:this._onCastStateChange,[e.IS_MEDIA_LOADED_CHANGED]:this._onMediaLoadedChange,[e.CAN_CONTROL_VOLUME_CHANGED]:this._onCanControlVolumeChange,[e.CAN_SEEK_CHANGED]:this._onCanSeekChange,[e.DURATION_CHANGED]:this._onDurationChange,[e.IS_MUTED_CHANGED]:this._onVolumeChange,[e.VOLUME_LEVEL_CHANGED]:this._onVolumeChange,[e.IS_PAUSED_CHANGED]:this._onPausedChange,[e.LIVE_SEEKABLE_RANGE_CHANGED]:this._onProgress,[e.PLAYER_STATE_CHANGED]:this._onPlayerStateChange};this._playerEventHandlers=n;let r=this._onRemotePlayerEvent.bind(this);for(let i of Np(n))this._player.controller.addEventListener(i,r);he(()=>{for(let i of Np(n))this._player.controller.removeEventListener(i,r)})}async play(){if(!(!this._player.isPaused&&!this._isIdle)){if(this._isIdle){await this._reload(!1,0);return}this._player.controller?.playOrPause()}}async pause(){this._player.isPaused||this._player.controller?.playOrPause()}getMediaStatus(e){return new Promise((n,r)=>{this.media?.getStatus(e,n,r)})}setMuted(e){(e&&!this._player.isMuted||!e&&this._player.isMuted)&&this._player.controller?.muteOrUnmute()}setCurrentTime(e){this._player.currentTime=e,this._notify("seeking",e),this._player.controller?.seek()}setVolume(e){this._player.volumeLevel=e,this._player.controller?.setVolumeLevel()}async loadSource(e){if(this._reloadInfo?.src!==e&&(this._reloadInfo=null),Uy(e)){this._resumeSession(),this._currentSrc=e;return}this._notify("load-start");let n=this._buildLoadRequest(e),r=await this.session.loadMedia(n);if(r){this._currentSrc=null,this._notify("error",Error(Hy(r)));return}this._currentSrc=e}destroy(){this._reset(),this._endSession()}_reset(){this._reloadInfo||(this._played=0,this._playedRange=new Re(0,0),this._seekableRange=new Re(0,0)),this._timeRAF._stop(),this._currentTime=0,this._reloadInfo=null}_resumeSession(){let e=new le("resume-session",{detail:this.session});this._onMediaLoadedChange(e);let{muted:n,volume:r,remotePlaybackInfo:i}=this._ctx.$state,o=i();this.setCurrentTime(Math.max(this._player.currentTime,o?.savedState?.currentTime??0)),this.setMuted(n()),this.setVolume(r()),o?.savedState?.paused===!1&&this.play()}_endSession(){this.cast.endCurrentSession(!0);let{remotePlaybackLoader:e}=this._ctx.$state;e.set(null)}_disconnectFromReceiver(){this._ctx.$state.remotePlaybackInfo.set({savedState:{paused:this._player.isPaused,currentTime:this._player.currentTime}}),this._endSession()}_onAnimationFrame(){this._onCurrentTimeChange()}_onRemotePlayerEvent(e){this._playerEventHandlers[e.type].call(this,e)}_onCastStateChange(e){let n=this.cast.getCastState(),r=n===cast.framework.CastState.CONNECTED?"connected":n===cast.framework.CastState.CONNECTING?"connecting":"disconnected";if(this._state===r)return;let i={type:"google-cast",state:r},o=this._createEvent(e);this._state=r,this._notify("remote-playback-change",i,o),r==="disconnected"&&this._disconnectFromReceiver()}_onMediaLoadedChange(e){if(!!!this._player.isMediaLoaded)return;let r=U(this._ctx.$state.source);Promise.resolve().then(()=>{if(r!==U(this._ctx.$state.source)||!this._player.isMediaLoaded)return;this._reset();let i=this._player.duration;this._seekableRange=new Re(0,i);let o={provider:this,duration:i,buffered:this._playedRange,seekable:this._getSeekableRange()},s=this._createEvent(e);this._notify("loaded-metadata",void 0,s),this._notify("loaded-data",void 0,s),this._notify("can-play",o,s),this._onCanControlVolumeChange(),this._onCanSeekChange(e);let{volume:a,muted:l}=this._ctx.$state;this.setVolume(a()),this.setMuted(l()),this._timeRAF._start(),this._tracks._syncRemoteTracks(s),this._tracks._syncRemoteActiveIds(s)})}_onCanControlVolumeChange(){this._ctx.$state.canSetVolume.set(this._player.canControlVolume)}_onCanSeekChange(e){let n=this._createEvent(e);this._notify("stream-type-change",this._getStreamType(),n)}_getStreamType(){return this._player.mediaInfo?.streamType===chrome.cast.media.StreamType.LIVE?this._player.canSeek?"live:dvr":"live":"on-demand"}_onCurrentTimeChange(){if(this._reloadInfo)return;let e=this._player.currentTime;if(e===this._currentTime)return;let n=this._played,r=this._getPlayedRange(e),i={currentTime:e,played:r};this._notify("time-update",i),e>n&&this._onProgress(),this._ctx.$state.seeking()&&this._notify("seeked",e),this._currentTime=e}_getPlayedRange(e){return this._played>=e?this._playedRange:this._playedRange=new Re(0,this._played=e)}_onDurationChange(e){if(!this._player.isMediaLoaded||this._reloadInfo)return;let n=this._player.duration,r=this._createEvent(e);this._seekableRange=new Re(0,n),this._notify("duration-change",n,r)}_onVolumeChange(e){if(!this._player.isMediaLoaded)return;let n={muted:this._player.isMuted,volume:this._player.volumeLevel},r=this._createEvent(e);this._notify("volume-change",n,r)}_onPausedChange(e){let n=this._createEvent(e);this._player.isPaused?this._notify("pause",void 0,n):this._notify("play",void 0,n)}_onProgress(e){let n={seekable:this._getSeekableRange(),buffered:this._playedRange},r=e?this._createEvent(e):void 0;this._notify("progress",n,r)}_onPlayerStateChange(e){let n=this._player.playerState,r=chrome.cast.media.PlayerState;if(this._isIdle=n===r.IDLE,n===r.PAUSED)return;let i=this._createEvent(e);switch(n){case r.PLAYING:this._notify("playing",void 0,i);break;case r.BUFFERING:this._notify("waiting",void 0,i);break;case r.IDLE:this._timeRAF._stop(),this._notify("pause"),this._notify("end");break}}_getSeekableRange(){return this._player.liveSeekableRange?new Re(this._player.liveSeekableRange.start,this._player.liveSeekableRange.end):this._seekableRange}_createEvent(e){return e instanceof Event?e:new le(e.type,{detail:e})}_buildMediaInfo(e){let{streamType:n,title:r,poster:i}=this._ctx.$state;return new mS(e)._setMetadata(r(),i())._setStreamType(n())._setTracks(this._tracks._getLocalTextTracks()).build()}_buildLoadRequest(e){let n=this._buildMediaInfo(e),r=new chrome.cast.media.LoadRequest(n),i=this._ctx.$state.remotePlaybackInfo();return r.autoplay=(this._reloadInfo?.paused??i?.savedState?.paused)===!1,r.currentTime=this._reloadInfo?.time??i?.savedState?.currentTime??0,r}async _reload(e,n){let r=U(this._ctx.$state.source);this._reloadInfo={src:r,paused:e,time:n},await this.loadSource(r)}_onNewLocalTracks(){this._reload(this._player.isPaused,this._player.currentTime).catch(e=>{})}}});var UO={};At(UO,{a:()=>Na,b:()=>Qp,c:()=>Hy,d:()=>y7,g:()=>Xp,h:()=>Uy,l:()=>vS});function f7(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function h7(){return!!window.cast?.framework}function m7(){return!!window.chrome?.cast?.isAvailable}function BO(){return Na().getCastState()===cast.framework.CastState.CONNECTED}function Na(){return window.cast.framework.CastContext.getInstance()}function Qp(){return Na().getCurrentSession()}function Xp(){return Qp()?.getSessionObj().media[0]}function Uy(t){return Xp()?.media.contentId===t?.src}function g7(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function Hy(t){return`Google Cast Error Code: ${t}`}function vS(t,e){return HO(Na(),t,e)}var bS,y7,wS=nt(()=>{"use strict";"use client";Yn();In();bS=class{constructor(){this.name="google-cast"}get cast(){return Na()}mediaType(){return"video"}canPlay(e){return Gp&&!Vc&&jy(e)}async prompt(e){let n;try{let r=await this._loadCastFramework(e);this._player||(this._player=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this._player)),n=e.player.createEvent("google-cast-prompt-open",{trigger:r}),e.player.dispatchEvent(n),this._notifyRemoteStateChange(e,"connecting",n),await this._showPrompt(U(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:Qp()?.getCastDevice().friendlyName}),BO()&&this._notifyRemoteStateChange(e,"connected",n)}catch(r){let i=Da(r);throw this._notifyRemoteStateChange(e,BO()?"connected":"disconnected",new le("google-cast-prompt-error",{detail:i})),i}finally{e.player.dispatch("google-cast-prompt-close",{trigger:n})}}async load(e){if(G)throw Error("[vidstack] can not load google cast provider server-side");if(!this._player)throw Error("[vidstack] google cast player was not initialized");return new(await Promise.resolve().then(()=>(zO(),VO))).GoogleCastProvider(this._player,e)}async _loadCastFramework(e){if(h7())return;let n=e.player.createEvent("google-cast-load-start");e.player.dispatch(n),await Vy(f7()),await customElements.whenDefined("google-cast-launcher");let r=e.player.createEvent("google-cast-loaded",{trigger:n});if(e.player.dispatch(r),!m7())throw Error("Cast not available.");return r}async _showPrompt(e){this._setOptions(e);let n=await this.cast.requestSession();if(n)throw Error(Hy(n))}_setOptions(e){this.cast?.setOptions({...g7(),...e})}_notifyRemoteStateChange(e,n,r){let i={type:"google-cast",state:n};e.delegate._notify("remote-playback-change",i,r)}},y7=Object.freeze({__proto__:null,GoogleCastLoader:bS})});function fD(){return Qy}function xS(t){if(Va.fullscreenElement===t)return!0;try{return t.matches(Va.fullscreenPseudoClass)}catch{return!1}}function KO(){if(!Qy)throw Error("[vidstack] no fullscreen API")}function jS(){return hD()&&sn(screen.orientation.unlock)}function hD(){return!G&&!it(window.screen.orientation)&&!it(window.screen.orientation.lock)}function M7(t,e){return G?!1:(t||(t=document.createElement("audio")),t.canPlayType(e).length>0)}function I7(t,e){return G?!1:(t||(t=document.createElement("video")),t.canPlayType(e).length>0)}function $y(t){return G?!1:(t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0)}function Oy(t){return G?!1:!!document.pictureInPictureEnabled&&!t?.disablePictureInPicture}function Dy(t){return G?!1:sn(t?.webkitSupportsPresentationMode)&&sn(t?.webkitSetPresentationMode)}async function mD(){let t=document.createElement("video");return t.volume=.5,await ET(0),t.volume===.5}function L7(){return G?void 0:window?.ManagedMediaSource??window?.MediaSource??window?.WebKitMediaSource}function A7(){return G?void 0:window?.SourceBuffer??window?.WebKitSourceBuffer}function Ny(){if(G)return!1;let t=L7();if(it(t))return!1;let e=t&&sn(t.isTypeSupported)&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=A7(),r=it(n)||!it(n.prototype)&&sn(n.prototype.appendBuffer)&&sn(n.prototype.remove);return!!e&&!!r}function SS(t){if(!t.length)return null;let e=t.start(0);for(let n=1;n<t.length;n++){let r=t.start(n);r<e&&(e=r)}return e}function tf(t){if(!t.length)return null;let e=t.end(0);for(let n=1;n<t.length;n++){let r=t.end(n);r>e&&(e=r)}return e}function IO(t,e){let n=new URLSearchParams;for(let r of Object.keys(e))n.set(r,e[r]+"");return t+"?"+n.toString()}function gi(t,e="preconnect"){if(G)return!1;let n=document.querySelector(`link[href="${t}"]`);if(!Ui(n))return!0;let r=document.createElement("link");return r.rel=e,r.href=t,r.crossOrigin="true",document.head.append(r),!0}function Vy(t){if(Wy[t])return Wy[t].promise;let e=ko(),n=document.querySelector(`script[src="${t}"]`);if(!Ui(n))return e.resolve(),e.promise;let r=document.createElement("script");return r.src=t,r.onload=()=>{e.resolve(),delete Wy[t]},r.onerror=()=>{e.reject(),delete Wy[t]},setTimeout(()=>document.head.append(r),0),e.promise}function Zy(t){return t==="use-credentials"?"include":ne(t)?"same-origin":void 0}function Jy(t,e){return e>=t.startTime&&e<t.endTime}function eu(t,e,n){let r=null;function i(){let o=ne(e)?[e]:e,s=t.toArray().find(a=>o.includes(a.kind)&&a.mode==="showing");if(s!==r){if(!s){n(null),r=null;return}s.readyState==2?n(s):(n(null),s.addEventListener("load",()=>n(s),{once:!0})),r=s}}return i(),z(t,"mode-change",i)}function Mt(t){return B7.test(t.kind)}function vD(t,e,n){let r=ne(t)?JSON.parse(t):t,i=[],o=[];return r.regions&&n&&(i=r.regions.map(s=>Object.assign(new n,s))),(r.cues||xt(r))&&(o=(xt(r)?r:r.cues).filter(s=>Rt(s.startTime)&&Rt(s.endTime)).map(s=>Object.assign(new e(0,0,""),s))),{regions:i,cues:o}}function wD(t){Ga.reset(t,e=>U7.has(e)),mi()}function Ie(){return ct(Wf)}function bD(t){return t.split("-")[0]}function H7(t){return t.split("-")[1]}function j7(t){return t==="x"?"y":"x"}function W7(t){return t==="y"?"height":"width"}function xD(t){return["top","bottom"].includes(bD(t))?"y":"x"}function q7(t){return j7(xD(t))}function _D(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function JO(t,e,n){let{reference:r,floating:i}=t,o=xD(e),s=q7(e),a=W7(s),l=bD(e),c=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2,f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(H7(e)){case"start":f[s]-=p*(n&&c?-1:1);break;case"end":f[s]+=p*(n&&c?-1:1);break}return f}function $s(t){return kD(t)?(t.nodeName||"").toLowerCase():"#document"}function hr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ao(t){var e;return(e=(kD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function kD(t){return t instanceof Node||t instanceof hr(t).Node}function Co(t){return t instanceof Element||t instanceof hr(t).Element}function Wi(t){return t instanceof HTMLElement||t instanceof hr(t).HTMLElement}function eD(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof hr(t).ShadowRoot}function qf(t){let{overflow:e,overflowX:n,overflowY:r,display:i}=jr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function K7(t){return["table","td","th"].includes($s(t))}function qS(t){let e=YS(),n=jr(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function G7(t){let e=qc(t);for(;Wi(e)&&!Vv(e);){if(qS(e))return e;e=qc(e)}return null}function YS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Vv(t){return["html","body","#document"].includes($s(t))}function jr(t){return hr(t).getComputedStyle(t)}function zv(t){return Co(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function qc(t){if($s(t)==="html")return t;let e=t.assignedSlot||t.parentNode||eD(t)&&t.host||Ao(t);return eD(e)?e.host:e}function TD(t){let e=qc(t);return Vv(e)?t.ownerDocument?t.ownerDocument.body:t.body:Wi(e)&&qf(e)?e:TD(e)}function nf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);let i=TD(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=hr(i);return o?e.concat(s,s.visualViewport||[],qf(i)?i:[],s.frameElement&&n?nf(s.frameElement):[]):e.concat(i,nf(i,[],n))}function SD(t){let e=jr(t),n=parseFloat(e.width)||0,r=parseFloat(e.height)||0,i=Wi(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=ev(n)!==o||ev(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function KS(t){return Co(t)?t:t.contextElement}function Hc(t){let e=KS(t);if(!Wi(e))return As(1);let n=e.getBoundingClientRect(),{width:r,height:i,$:o}=SD(e),s=(o?ev(n.width):n.width)/r,a=(o?ev(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}function ED(t){let e=hr(t);return!YS()||!e.visualViewport?Q7:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function X7(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==hr(t)?!1:e}function za(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);let i=t.getBoundingClientRect(),o=KS(t),s=As(1);e&&(r?Co(r)&&(s=Hc(r)):s=Hc(t));let a=X7(o,n,r)?ED(o):As(0),l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){let p=hr(o),f=r&&Co(r)?hr(r):r,h=p,g=h.frameElement;for(;g&&r&&f!==h;){let w=Hc(g),m=g.getBoundingClientRect(),y=jr(g),v=m.left+(g.clientLeft+parseFloat(y.paddingLeft))*w.x,b=m.top+(g.clientTop+parseFloat(y.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,d*=w.y,l+=v,c+=b,h=hr(g),g=h.frameElement}}return _D({width:u,height:d,x:l,y:c})}function PD(t){return Z7.some(e=>{try{return t.matches(e)}catch{return!1}})}function J7(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t,o=i==="fixed",s=Ao(r),a=e?PD(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=As(1),u=As(0),d=Wi(r);if((d||!d&&!o)&&(($s(r)!=="body"||qf(s))&&(l=zv(r)),Wi(r))){let p=za(r);c=Hc(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function eY(t){return Array.from(t.getClientRects())}function CD(t){return za(Ao(t)).left+zv(t).scrollLeft}function tY(t){let e=Ao(t),n=zv(t),r=t.ownerDocument.body,i=Uc(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Uc(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight),s=-n.scrollLeft+CD(t),a=-n.scrollTop;return jr(r).direction==="rtl"&&(s+=Uc(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function nY(t,e){let n=hr(t),r=Ao(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;let c=YS();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function rY(t,e){let n=za(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Wi(t)?Hc(t):As(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function tD(t,e,n){let r;if(e==="viewport")r=nY(t,n);else if(e==="document")r=tY(Ao(t));else if(Co(e))r=rY(e,n);else{let i=ED(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return _D(r)}function RD(t,e){let n=qc(t);return n===e||!Co(n)||Vv(n)?!1:jr(n).position==="fixed"||RD(n,e)}function iY(t,e){let n=e.get(t);if(n)return n;let r=nf(t,[],!1).filter(a=>Co(a)&&$s(a)!=="body"),i=null,o=jr(t).position==="fixed",s=o?qc(t):t;for(;Co(s)&&!Vv(s);){let a=jr(s),l=qS(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||qf(s)&&!l&&RD(t,s))?r=r.filter(u=>u!==s):i=a,s=qc(s)}return e.set(t,r),r}function oY(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t,s=[...n==="clippingAncestors"?iY(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{let d=tD(e,u,i);return c.top=Uc(d.top,c.top),c.right=ES(d.right,c.right),c.bottom=ES(d.bottom,c.bottom),c.left=Uc(d.left,c.left),c},tD(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function sY(t){let{width:e,height:n}=SD(t);return{width:e,height:n}}function aY(t,e,n){let r=Wi(e),i=Ao(e),o=n==="fixed",s=za(t,!0,o,e),a={scrollLeft:0,scrollTop:0},l=As(0);if(r||!r&&!o)if(($s(e)!=="body"||qf(i))&&(a=zv(e)),r){let d=za(e,!0,o,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&(l.x=CD(i));let c=s.left+a.scrollLeft-l.x,u=s.top+a.scrollTop-l.y;return{x:c,y:u,width:s.width,height:s.height}}function nD(t,e){return!Wi(t)||jr(t).position==="fixed"?null:e?e(t):t.offsetParent}function MD(t,e){let n=hr(t);if(!Wi(t)||PD(t))return n;let r=nD(t,e);for(;r&&K7(r)&&jr(r).position==="static";)r=nD(r,e);return r&&($s(r)==="html"||$s(r)==="body"&&jr(r).position==="static"&&!qS(r))?n:r||G7(t)||n}function cY(t){return jr(t).direction==="rtl"}function dY(t,e){let n=null,r,i=Ao(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();let{left:c,top:u,width:d,height:p}=t.getBoundingClientRect();if(a||e(),!d||!p)return;let f=qy(u),h=qy(i.clientWidth-(c+d)),g=qy(i.clientHeight-(u+p)),w=qy(c),y={rootMargin:-f+"px "+-h+"px "+-g+"px "+-w+"px",threshold:Uc(0,ES(1,l))||1},v=!0;function b(k){let _=k[0].intersectionRatio;if(_!==l){if(!v)return s();_?s(!1,_):r=setTimeout(()=>{s(!1,1e-7)},100)}v=!1}try{n=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,y)}n.observe(t)}return s(!0),o}function pY(t,e,n,r){r===void 0&&(r={});let{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=KS(t),u=i||o?[...c?nf(c):[],...nf(e)]:[];u.forEach(m=>{i&&m.addEventListener("scroll",n,{passive:!0}),o&&m.addEventListener("resize",n)});let d=c&&a?dY(c,n):null,p=-1,f=null;s&&(f=new ResizeObserver(m=>{let[y]=m;y&&y.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=f)==null||v.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let h,g=l?za(t):null;l&&w();function w(){let m=za(t);g&&(m.x!==g.x||m.y!==g.y||m.width!==g.width||m.height!==g.height)&&n(),g=m,h=requestAnimationFrame(w)}return n(),()=>{var m;u.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),d?.(),(m=f)==null||m.disconnect(),f=null,l&&cancelAnimationFrame(h)}}function HO(t,e,n){if(t)return z(t,e,n)}function Ue(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}function Fs(t,e){if(t.hasAttribute("aria-label")||t.hasAttribute("data-no-label"))return;if(!sn(e)){fe(t,"aria-label",e);return}function n(){fe(t,"aria-label",e())}G?n():R(n)}function ID(t,e,n){for(;e;){if(e===t)return!0;if(n?.(e))break;e=e.parentElement}return!1}function Os(t,e){z(t,"pointerup",n=>{n.button===0&&e(n)}),z(t,"keydown",n=>{Op(n)&&e(n)})}function GS(t){return Lc(t)&&(t.touches.length>1||t.changedTouches.length>1)}function tv(t){if(G)return t();let e=Mp(),n=window.requestAnimationFrame(()=>{Yt(t,e),n=-1});return()=>void window.cancelAnimationFrame(n)}function LD(t,e,n,{offsetVarName:r,xOffset:i,yOffset:o,...s}){if(!t)return;let a=n.replace(" ","-").replace("-center","");if(on(t,"visibility",e?null:"hidden"),!e)return;let l=u=>n.includes("left")?`calc(-1 * ${u})`:u,c=u=>n.includes("top")?`calc(-1 * ${u})`:u;return pY(e,t,()=>{fY(e,t,{placement:a,...s}).then(({x:u,y:d})=>{Object.assign(t.style,{top:`calc(${d+"px"} + ${c(o?o+"px":`var(--${r}-y-offset, 0px)`)})`,left:`calc(${u+"px"} + ${l(i?i+"px":`var(--${r}-x-offset, 0px)`)})`})})})}function hY(t){return getComputedStyle(t).animationName!=="none"}function mY(t,e,n){var r=null,i=null,o=n&&n.leading,s=n&&n.trailing;o==null&&(o=!0),s==null&&(s=!o),o==!0&&(s=!1);var a=function(){r&&(clearTimeout(r),r=null)},l=function(){var u=i;a(),u&&u()},c=function(){var u=o&&!r,d=this,p=arguments;if(i=function(){return t.apply(d,p)},r||(r=setTimeout(function(){if(r=null,s)return i()},e)),u)return u=!1,i()};return c.cancel=a,c.flush=l,c}function gY(t,e,n){var r=null,i=null,o=function(){r&&(clearTimeout(r),i=null,r=null)},s=function(){var l=i;o(),l&&l()},a=function(){if(!e)return t.apply(this,arguments);var l=this,c=arguments,u=n&&!r;if(o(),i=function(){t.apply(l,c)},r=setTimeout(function(){if(r=null,!u){var d=i;return i=null,d()}},e),u)return i()};return a.cancel=o,a.flush=s,a}function tu(t){return t?.$$PROVIDER_TYPE==="VIDEO"}function AD(t){return!G&&t instanceof HTMLAudioElement}function $D(t){return!G&&t instanceof HTMLVideoElement}function OD(t){return AD(t)||$D(t)}function xY(t){return t.replace(/Shift\+(\d)/g,(e,n)=>bY[n-1])}function XS({src:t,type:e}){return ne(t)?FD.test(t)||ND.has(e)||t.startsWith("blob:")&&e==="audio/object":e==="audio/object"}function ZS(t){return ne(t.src)?VD.test(t.src)||zD.has(t.type)||t.src.startsWith("blob:")&&t.type==="video/object"||Oa(t)&&(G||$y()):t.type==="video/object"}function Oa({src:t,type:e}){return ne(t)&&BD.test(t)||UD.has(e)}function jy(t){return ne(t.src)&&(XS(t)||ZS(t)||Oa(t))}function qT(t){return!G&&typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function Da(t){return t instanceof Error?t:Error(JSON.stringify(t))}function Eo(t,e){if(!t)throw Error(e||"Assertion failed.")}function kS(t,e){if(!(t&&e))throw Error("[vidstack] media not ready")}function oD(t,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}function An(t,e=2){return Number(t.toFixed(e))}function Ay(t){return String(t).split(".")[1]?.length??0}function JS(t,e,n){return Math.max(t,Math.min(n,e))}function Yy(t,e){fe(t,"data-focus",e),fe(t,"data-hocus",e)}function sD(t,e){fe(t,"data-hocus",e),fe(t,"data-hover",e)}function qD(t,e){return fetch(t,e).then(n=>n.text()).then(n=>{let r=RY(n);if(r)return qD(/^https?:/.test(r)?r:new URL(r,t).href,e);let i=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(n)?"on-demand":"live";return i==="live"&&MY(n)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(n)||n.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":i})}function RY(t){let e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split(`
`)[1].trim():null}function MY(t){let e=t.split(`
`);for(let n of e)if(n.startsWith("#EXT-X-TARGETDURATION")){let r=parseFloat(n.split(":")[1]);if(!isNaN(r))return r}return-1}function aD(t){return(xt(t)?t:[t&&!ne(t)&&"src"in t?t:{src:t||""}]).map(({src:e,type:n,...r})=>({src:e,type:n??(ne(e)?YD.get(e):null)??(!ne(e)||e.startsWith("blob:")?"video/object":e.includes("youtube")?"video/youtube":e.includes("vimeo")&&!e.includes("progressive_redirect")&&!e.includes(".m3u8")?"video/vimeo":"?"),...r})).sort(e=>e.type==="?"?1:-1)}function lD(t,e){return t?.src===e?.src&&t?.type===e?.type}function NY(t){return t?"true":"false"}function Gn(t){return()=>NY(t())}function cD(t,e,n){let r=e-t,i=n-t;return r>0?i/r:0}function VY(t,e,n,r){return JS(t,An(n,Ay(r)),e)}function zY(t,e,n,r){let i=JS(0,n,1),o=e-t,s=o*i,a=s/r,l=r*a;return t+l}function TS(t,e){let n=String(t),r=n.length;if(r<e){let o=e-r;return`${"0".repeat(o)}${t}`}return n}function KD(t){let e=Math.trunc(t/3600),n=Math.trunc(t%3600/60),r=Math.trunc(t%60),i=Number((t-Math.trunc(t)).toPrecision(3));return{hours:e,minutes:n,seconds:r,fraction:i}}function Ns(t,{padHrs:e=null,padMins:n=null,showHrs:r=!1,showMs:i=!1}={}){let{hours:o,minutes:s,seconds:a,fraction:l}=KD(t),c=e?TS(o,2):o,u=n||Ui(n)&&t>=3600?TS(s,2):s,d=TS(a,2),p=i&&l>0?`.${String(l).replace(/^0?\./,"")}`:"",f=`${u}:${d}${p}`;return o>0||r?`${c}:${f}`:f}function lf(t){let e=[],{hours:n,minutes:r,seconds:i}=KD(t);return n>0&&e.push(`${n} hour`),r>0&&e.push(`${r} min`),(i>0||e.length===0)&&e.push(`${i} sec`),e.join(" ")}function eE(t,{clamp:e,offset:n,orientation:r}){let i=getComputedStyle(t),o=parseFloat(i.width),s=parseFloat(i.height),a={top:null,right:null,bottom:null,left:null};if(a[r==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${n}px))`,r==="horizontal"){let l=o/2;if(!e)a.left=`calc(var(--slider-pointer) - ${l}px)`;else{let c=`max(0px, calc(var(--slider-pointer) - ${l}px))`,u=`calc(100% - ${o}px)`;a.left=`min(${c}, ${u})`}}else{let l=s/2;if(!e)a.bottom=`calc(var(--slider-pointer) - ${l}px)`;else{let c=`max(${l}px, calc(var(--slider-pointer) - ${l}px))`,u=`calc(100% - ${s}px)`;a.bottom=`min(${c}, ${u})`}}Object.assign(t.style,a)}function bK(t){return Qe.isValidElement(t)&&t.type===wK}function xK(t,e){let n={...e};for(let r in e){let i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function ZD(t){return t?.$$PROVIDER_TYPE==="REMOTION"}function je(t,e){let n=Cs(Ga);return Me((e?.current?.$state||n||kK)[t])}var Qe,v7,w7,b7,x7,_7,k7,T7,S7,E7,P7,C7,ge,jO,ef,fr,WO,qO,YO,Kn,Hr,Va,Qy,Xy,G,R7,Vc,GO,Gp,SO,gD,WS,Re,Wy,$7,O7,D7,F7,N7,V7,z7,ue,QO,XO,ZO,gn,B7,Ga,U7,Wf,Wc,ES,Uc,ev,qy,As,Y7,Q7,Z7,lY,uY,fY,Ro,nv,Yf,rv,PS,iv,QS,ov,Zp,sv,av,yY,vY,pr,lv,DD,rD,wY,iD,CS,bY,cv,FD,ND,VD,zD,BD,UD,uv,rf,HD,WD,dv,pv,_S,_Y,kY,fv,RS,MS,hv,IS,LS,TY,AS,$S,SY,mv,mr,EY,PY,He,De,CY,YD,DS,FS,IY,LY,AY,Yc,gv,yv,vv,jc,$Y,wv,bv,of,Kt,OY,DY,FY,sf,xv,_v,kv,Tv,Sv,Ev,Pv,Cv,Rv,Bv,uD,NS,af,Uv,qi,Mo,Po,Ky,Mv,Kc,Iv,BY,UY,HY,Ba,jY,WY,qY,Gc,cf,uf,Qc,YY,KY,Hv,Io,an,GY,dD,VS,QY,XY,Kf,ZY,Lo,JY,eK,tK,Ua,Lv,Av,Jp,df,zS,Ds,nK,rK,GD,Xc,iK,oK,sK,Zc,aK,lK,tE,Ha,cK,uK,nE,ja,dK,pK,rE,Wa,fK,hK,iE,QD,qa,mK,gK,oE,Ya,$v,BS,Ov,pf,ff,yK,vK,US,Ka,Dv,hf,mf,Fv,gf,yf,vf,wf,bf,xf,_f,kf,Tf,Sf,Ef,Pf,Cf,Rf,Mf,If,Lf,Af,$f,Of,Df,Ff,Nf,Vf,zf,Bf,Uf,Hf,Nv,Jc,jf,XD,HS,wK,_K,ae,pD,kK,Yn=nt(()=>{"use strict";"use client";Qe=I(H(),1);In();w7=Symbol(0);v7=w7;b7=Symbol(0),x7=Symbol(0),_7=Symbol(0),k7=Symbol(0),T7=Symbol(0),S7=Symbol(0),E7=Symbol(0),P7=Symbol(0),C7=Symbol(0),ge={_add:b7,_remove:x7,_reset:_7,_select:k7,_readonly:T7,_setReadonly:S7,_onReset:E7,_onRemove:P7,_onUserSelect:C7},ef=class extends Rc{constructor(){super(...arguments),this._items=[],this[jO]=!1}get length(){return this._items.length}get readonly(){return this[ge._readonly]}toArray(){return[...this._items]}[(jO=ge._readonly,Symbol.iterator)](){return this._items.values()}[ge._add](e,n){let r=this._items.length;""+r in this||Object.defineProperty(this,r,{get(){return this._items[r]}}),!this._items.includes(e)&&(this._items.push(e),this.dispatchEvent(new le("add",{detail:e,trigger:n})))}[ge._remove](e,n){let r=this._items.indexOf(e);r>=0&&(this[ge._onRemove]?.(e,n),this._items.splice(r,1),this.dispatchEvent(new le("remove",{detail:e,trigger:n})))}[ge._reset](e){for(let n of[...this._items])this[ge._remove](n,e);this._items=[],this[ge._setReadonly](!1,e),this[ge._onReset]?.()}[ge._setReadonly](e,n){this[ge._readonly]!==e&&(this[ge._readonly]=e,this.dispatchEvent(new le("readonly-change",{detail:e,trigger:n})))}},fr={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},WO=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],qO=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],YO=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],Kn=typeof window<"u"&&typeof window.document<"u"?window.document:{},Hr="fullscreenEnabled"in Kn&&Object.keys(fr)||WO[0]in Kn&&WO||qO[0]in Kn&&qO||YO[0]in Kn&&YO||[],Va={requestFullscreen:function(t){return t[Hr[fr.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[Hr[fr.requestFullscreen]]},get exitFullscreen(){return Kn[Hr[fr.exitFullscreen]].bind(Kn)},get fullscreenPseudoClass(){return":"+Hr[fr.fullscreen]},addEventListener:function(t,e,n){return Kn.addEventListener(Hr[fr[t]],e,n)},removeEventListener:function(t,e,n){return Kn.removeEventListener(Hr[fr[t]],e,n)},get fullscreenEnabled(){return!!Kn[Hr[fr.fullscreenEnabled]]},set fullscreenEnabled(t){},get fullscreenElement(){return Kn[Hr[fr.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return Kn[("on"+Hr[fr.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return Kn[("on"+Hr[fr.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return Kn[("on"+Hr[fr.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return Kn[("on"+Hr[fr.fullscreenerror]).toLowerCase()]=t}},Qy=Va.fullscreenEnabled,Xy=class extends Rn{constructor(){super(...arguments),this._listening=!1,this._active=!1}get active(){return this._active}get supported(){return Qy}onConnect(){z(Va,"fullscreenchange",this._onFullscreenChange.bind(this)),z(Va,"fullscreenerror",this._onFullscreenError.bind(this)),he(this._onDisconnect.bind(this))}async _onDisconnect(){Qy&&await this.exit()}_onFullscreenChange(e){let n=xS(this.el);n!==this._active&&(n||(this._listening=!1),this._active=n,this.dispatch("fullscreen-change",{detail:n,trigger:e}))}_onFullscreenError(e){this._listening&&(this.dispatch("fullscreen-error",{detail:null,trigger:e}),this._listening=!1)}async enter(){try{return this._listening=!0,!this.el||xS(this.el)?void 0:(KO(),Va.requestFullscreen(this.el))}catch(e){throw this._listening=!1,e}}async exit(){if(!(!this.el||!xS(this.el)))return KO(),Va.exitFullscreen()}};G=typeof document>"u",R7=G?"":navigator?.userAgent.toLowerCase()||"",Vc=!G&&/iphone|ipad|ipod|ios|crios|fxios/i.test(R7),GO=!G&&/(iphone|ipod)/gi.test(navigator?.platform||""),Gp=!G&&!!window.chrome,SO=!G&&(!!window.safari||Vc);gD=class yD extends Rn{constructor(){super(...arguments),this._type=ee(this._getScreenOrientation()),this._locked=ee(!1)}get type(){return this._type()}get locked(){return this._locked()}get portrait(){return this._type().startsWith("portrait")}get landscape(){return this._type().startsWith("landscape")}get supported(){return yD.supported}onConnect(){if(this.supported)z(screen.orientation,"change",this._onOrientationChange.bind(this));else{let e=window.matchMedia("(orientation: landscape)");e.onchange=this._onOrientationChange.bind(this),he(()=>e.onchange=null)}he(this._onDisconnect.bind(this))}async _onDisconnect(){this.supported&&this._locked()&&await this.unlock()}_onOrientationChange(e){this._type.set(this._getScreenOrientation()),this.dispatch("orientation-change",{detail:{orientation:U(this._type),lock:this._currentLock},trigger:e})}async lock(e){U(this._locked)||this._currentLock===e||(this._assertScreenOrientationAPI(),await screen.orientation.lock(e),this._locked.set(!0),this._currentLock=e)}async unlock(){U(this._locked)&&(this._assertScreenOrientationAPI(),this._currentLock=void 0,await screen.orientation.unlock(),this._locked.set(!1))}_assertScreenOrientationAPI(){if(!this.supported)throw Error("[vidstack] no orientation API")}_getScreenOrientation(){return G?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};gD.supported=jS();WS=gD,Re=class{get length(){return this._ranges.length}constructor(e,n){xt(e)?this._ranges=e:!it(e)&&!it(n)?this._ranges=[[e,n]]:this._ranges=[]}start(e){return this._ranges[e][0]??1/0}end(e){return this._ranges[e][1]??1/0}};Wy={};$7=Symbol(0),O7=Symbol(0),D7=Symbol(0),F7=Symbol(0),N7=Symbol(0),V7=Symbol(0),z7=Symbol(0),ue={_crossOrigin:$7,_readyState:O7,_updateActiveCues:D7,_canLoad:F7,_onModeChange:N7,_native:V7,_nativeHLS:z7};gn=class extends Rc{constructor(e){super(),this.id="",this.label="",this.language="",this.default=!1,this._canLoad=!1,this._currentTime=0,this._mode="disabled",this._metadata={},this._regions=[],this._cues=[],this._activeCues=[],this[QO]=0,this[XO]=null,this[ZO]=null;for(let n of Object.keys(e))this[n]=e[n];this.type||(this.type="vtt"),!G&&e.content?Promise.resolve().then(()=>(qp(),Wp)).then(({parseText:n,VTTCue:r,VTTRegion:i})=>{!ne(e.content)||e.type==="json"?(this._parseJSON(e.content,r,i),this.readyState!==3&&this._readyState()):n(e.content,{type:e.type}).then(({cues:o,regions:s})=>{this._cues=o,this._regions=s,this._readyState()})}):e.src||(this[ue._readyState]=2)}static createId(e){return`id::${e.type}-${e.kind}-${e.src??e.label}`}get metadata(){return this._metadata}get regions(){return this._regions}get cues(){return this._cues}get activeCues(){return this._activeCues}get readyState(){return this[ue._readyState]}get mode(){return this._mode}set mode(e){this.setMode(e)}addCue(e,n){let r=0,i=this._cues.length;for(r=0;r<i&&!(e.endTime<=this._cues[r].startTime);r++);r===i?this._cues.push(e):this._cues.splice(r,0,e),n?.type!=="cuechange"&&this[ue._native]?.track.addCue(e),this.dispatchEvent(new le("add-cue",{detail:e,trigger:n})),Jy(e,this._currentTime)&&this[ue._updateActiveCues](this._currentTime,n)}removeCue(e,n){let r=this._cues.indexOf(e);if(r>=0){let i=this._activeCues.includes(e);this._cues.splice(r,1),this[ue._native]?.track.removeCue(e),this.dispatchEvent(new le("remove-cue",{detail:e,trigger:n})),i&&this[ue._updateActiveCues](this._currentTime,n)}}setMode(e,n){this._mode!==e&&(this._mode=e,e==="disabled"?(this._activeCues=[],this._activeCuesChanged()):this.readyState===2?this[ue._updateActiveCues](this._currentTime,n):this._load(),this.dispatchEvent(new le("mode-change",{detail:this,trigger:n})),this[ue._onModeChange]?.())}[(QO=ue._readyState,XO=ue._onModeChange,ZO=ue._native,ue._updateActiveCues)](e,n){if(this._currentTime=e,this.mode==="disabled"||!this._cues.length)return;let r=[];for(let o=0,s=this._cues.length;o<s;o++){let a=this._cues[o];Jy(a,e)&&r.push(a)}let i=r.length!==this._activeCues.length;if(!i){for(let o=0;o<r.length;o++)if(!this._activeCues.includes(r[o])){i=!0;break}}this._activeCues=r,i&&this._activeCuesChanged(n)}[ue._canLoad](){this._canLoad=!0,this._mode!=="disabled"&&this._load()}async _load(){if(!(!this._canLoad||!this.src||this[ue._readyState]>0)){this[ue._readyState]=1,this.dispatchEvent(new le("load-start"));try{let{parseResponse:e,VTTCue:n,VTTRegion:r}=await Promise.resolve().then(()=>(qp(),Wp)),i=this[ue._crossOrigin]?.(),o=(this.customFetch??fetch)(this.src,{headers:this.type==="json"?{"Content-Type":"application/json"}:void 0,credentials:Zy(i)});if(this.type==="json")this._parseJSON(await(await o).json(),n,r);else{let{errors:s,metadata:a,regions:l,cues:c}=await e(o,{type:this.type,encoding:this.encoding});if(s[0]?.code===0)throw s[0];this._metadata=a,this._regions=l,this._cues=c}this._readyState()}catch(e){this._errorState(e)}}}_readyState(){if(this[ue._readyState]=2,!this.src||this.type!=="vtt"){let n=this[ue._native]?.track;if(n)for(let r of this._cues)n.addCue(r)}let e=new le("load");this[ue._updateActiveCues](this._currentTime,e),this.dispatchEvent(e)}_errorState(e){this[ue._readyState]=3,this.dispatchEvent(new le("error",{detail:e}))}_parseJSON(e,n,r){try{let{regions:i,cues:o}=vD(e,n,r);this._regions=i,this._cues=o}catch(i){this._errorState(i)}}_activeCuesChanged(e){this.dispatchEvent(new le("cue-change",{trigger:e}))}},B7=/captions|subtitles/;Ga=new hi({artist:"",audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,buffered:new Re,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:jS(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,controlsVisible:!1,crossOrigin:null,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new Re,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,seekable:new Re,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(Mt).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){let t=SS(this.buffered)??0;return Math.max(0,t-this.clipStartTime)},get bufferedEnd(){let t=tf(this.buffered)??0;return Math.min(this.duration,Math.max(0,t-this.clipStartTime))},get seekableStart(){let t=SS(this.seekable)??0;return Math.max(0,t-this.clipStartTime)},get seekableEnd(){let t=this.canPlay?tf(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,t-this.clipStartTime)):t},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),U7=new Set(["audioTrack","audioTracks","autoPlayError","autoPlaying","autoQuality","buffered","canPlay","ended","error","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","paused","played","playing","qualities","quality","realCurrentTime","seekable","seeking","started","userBehindLiveEdge","waiting"]);Wf=Hi();Wc=class{constructor(e=void 0){this._logger=e,this._target=null,this._player=null,this._prevTrackIndex=-1}setTarget(e){this._target=e}getPlayer(e){return this._player?this._player:((e??this._target)?.dispatchEvent(new le("find-media-player",{detail:n=>void(this._player=n),bubbles:!0,composed:!0})),this._player)}setPlayer(e){this._player=e}startLoading(e){this._dispatchRequest("media-start-loading",e)}startLoadingPoster(e){this._dispatchRequest("media-poster-start-loading",e)}requestAirPlay(e){this._dispatchRequest("media-airplay-request",e)}requestGoogleCast(e){this._dispatchRequest("media-google-cast-request",e)}play(e){this._dispatchRequest("media-play-request",e)}pause(e){this._dispatchRequest("media-pause-request",e)}mute(e){this._dispatchRequest("media-mute-request",e)}unmute(e){this._dispatchRequest("media-unmute-request",e)}enterFullscreen(e,n){this._dispatchRequest("media-enter-fullscreen-request",n,e)}exitFullscreen(e,n){this._dispatchRequest("media-exit-fullscreen-request",n,e)}lockScreenOrientation(e,n){this._dispatchRequest("media-orientation-lock-request",n,e)}unlockScreenOrientation(e){this._dispatchRequest("media-orientation-unlock-request",e)}enterPictureInPicture(e){this._dispatchRequest("media-enter-pip-request",e)}exitPictureInPicture(e){this._dispatchRequest("media-exit-pip-request",e)}seeking(e,n){this._dispatchRequest("media-seeking-request",n,e)}seek(e,n){this._dispatchRequest("media-seek-request",n,e)}seekToLiveEdge(e){this._dispatchRequest("media-live-edge-request",e)}changeVolume(e,n){this._dispatchRequest("media-volume-change-request",n,Math.max(0,Math.min(1,e)))}changeAudioTrack(e,n){this._dispatchRequest("media-audio-track-change-request",n,e)}changeQuality(e,n){this._dispatchRequest("media-quality-change-request",n,e)}requestAutoQuality(e){this.changeQuality(-1,e)}changeTextTrackMode(e,n,r){this._dispatchRequest("media-text-track-change-request",r,{index:e,mode:n})}changePlaybackRate(e,n){this._dispatchRequest("media-rate-change-request",n,e)}resumeControls(e){this._dispatchRequest("media-resume-controls-request",e)}pauseControls(e){this._dispatchRequest("media-pause-controls-request",e)}togglePaused(e){let n=this.getPlayer(e?.target);n&&(n.state.paused?this.play(e):this.pause(e))}toggleControls(e){let n=this.getPlayer(e?.target);n&&(n.controls.showing?n.controls.hide(0,e):n.controls.show(0,e))}toggleMuted(e){let n=this.getPlayer(e?.target);n&&(n.state.muted?this.unmute(e):this.mute(e))}toggleFullscreen(e,n){let r=this.getPlayer(n?.target);r&&(r.state.fullscreen?this.exitFullscreen(e,n):this.enterFullscreen(e,n))}togglePictureInPicture(e){let n=this.getPlayer(e?.target);n&&(n.state.pictureInPicture?this.exitPictureInPicture(e):this.enterPictureInPicture(e))}disableCaptions(e){let n=this.getPlayer(e?.target);if(!n)return;let r=n.state.textTracks,i=n.state.textTrack;if(i){let o=r.indexOf(i);this.changeTextTrackMode(o,"disabled",e)}}toggleCaptions(e){let n=this.getPlayer(e?.target);if(!n)return;let r=n.state.textTracks,i=n.state.textTrack;if(i){let o=r.indexOf(i);this.changeTextTrackMode(o,"disabled",e),this._prevTrackIndex=o}else{let o=this._prevTrackIndex;(!r[o]||!Mt(r[o]))&&(o=-1),o===-1&&(o=r.findIndex(s=>Mt(s)&&s.default)),o===-1&&(o=r.findIndex(s=>Mt(s))),o>=0&&this.changeTextTrackMode(o,"showing",e),this._prevTrackIndex=-1}}_dispatchRequest(e,n,r){let i=new le(e,{bubbles:!0,composed:!0,cancelable:!0,detail:r,trigger:n}),o=n?.target||null;o&&o instanceof ce&&(o=o.el),o=!o||o===document||o===window||o===document.body||this._player?.el&&o instanceof Node&&!this._player.el.contains(o)?this._target??this.getPlayer()?.el:o??this._target,this._player?e==="media-play-request"&&!this._player.state.canLoad?o?.dispatchEvent(i):this._player.canPlayQueue._enqueue(e,()=>o?.dispatchEvent(i)):o?.dispatchEvent(i)}_noPlayerWarning(e){}},ES=Math.min,Uc=Math.max,ev=Math.round,qy=Math.floor,As=t=>({x:t,y:t});Y7=async(t,e,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e)),c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=JO(c,r,l),p=r,f={},h=0;for(let g=0;g<a.length;g++){let{name:w,fn:m}=a[g],{x:y,y:v,data:b,reset:k}=await m({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:f,rects:c,platform:s,elements:{reference:t,floating:e}});u=y??u,d=v??d,f={...f,[w]:{...f[w],...b}},k&&h<=50&&(h++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(c=k.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:d}=JO(c,p,l)),g=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:f}};Q7=As(0);Z7=[":popover-open",":modal"];lY=async function(t){let e=this.getOffsetParent||MD,n=this.getDimensions;return{reference:aY(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}};uY={convertOffsetParentRelativeRectToViewportRelativeRect:J7,getDocumentElement:Ao,getClippingRect:oY,getOffsetParent:MD,getElementRects:lY,getClientRects:eY,getDimensions:sY,getScale:Hc,isElement:Co,isRTL:cY};fY=(t,e,n)=>{let r=new Map,i={platform:uY,...n},o={...i.platform,_c:r};return Y7(t,e,{...i,platform:o})};Ro=class extends Rn{},nv=class extends Ro{constructor(){super(...arguments),this._idleTimer=-2,this._pausedTracking=!1,this._hideOnMouseLeave=ee(!1),this._isMouseOutside=ee(!1),this._focusedItem=null,this.defaultDelay=2e3}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:e}=this.$props;return this._hideOnMouseLeave()||e()}set hideOnMouseLeave(e){this._hideOnMouseLeave.set(e)}get showing(){return this.$state.controlsVisible()}show(e=0,n){this._clearIdleTimer(),this._pausedTracking||this._changeVisibility(!0,e,n)}hide(e=this.defaultDelay,n){this._clearIdleTimer(),this._pausedTracking||this._changeVisibility(!1,e,n)}pause(e){this._pausedTracking=!0,this._clearIdleTimer(),this._changeVisibility(!0,0,e)}resume(e){this._pausedTracking=!1,!this.$state.paused()&&this._changeVisibility(!1,this.defaultDelay,e)}onConnect(){R(this._watchMouse.bind(this)),R(this._watchPaused.bind(this));let e=this._onPlay.bind(this),n=this._onPause.bind(this);this.listen("can-play",r=>this.show(0,r)),this.listen("play",e),this.listen("pause",n),this.listen("auto-play-fail",n)}_watchMouse(){let{started:e,pointer:n,paused:r}=this.$state;if(!e()||n()!=="fine")return;let i=this.hideOnMouseLeave;(!i||!this._isMouseOutside())&&R(()=>{r()||this.listen("pointermove",this._onStopIdle.bind(this))}),i&&(this.listen("mouseenter",this._onMouseEnter.bind(this)),this.listen("mouseleave",this._onMouseLeave.bind(this)))}_watchPaused(){let{paused:e,started:n,autoPlayError:r}=this.$state;if(e()||r()&&!n())return;let i=this._onStopIdle.bind(this);R(()=>{let o=this.$state.pointer(),s=o==="coarse",a=[s?"touchend":"pointerup","keydown"];for(let l of a)this.listen(l,i,{passive:!1})})}_onPlay(e){this.show(0,e),this.hide(void 0,e)}_onPause(e){this.show(0,e)}_onMouseEnter(e){this._isMouseOutside.set(!1),this.show(0,e),this.hide(void 0,e)}_onMouseLeave(e){this._isMouseOutside.set(!0),this.hide(0,e)}_clearIdleTimer(){window.clearTimeout(this._idleTimer),this._idleTimer=-1}_onStopIdle(e){e.MEDIA_GESTURE||this._pausedTracking||GS(e)||(_o(e)&&(e.key==="Escape"?(this.el?.focus(),this._focusedItem=null):this._focusedItem&&(e.preventDefault(),requestAnimationFrame(()=>{this._focusedItem?.focus(),this._focusedItem=null}))),this.show(0,e),this.hide(this.defaultDelay,e))}_changeVisibility(e,n,r){if(n===0){this._onChange(e,r);return}this._idleTimer=window.setTimeout(()=>{this.scope&&this._onChange(e&&!this._pausedTracking,r)},n)}_onChange(e,n){this.$state.controlsVisible()!==e&&(this.$state.controlsVisible.set(e),!e&&document.activeElement&&this.el?.contains(document.activeElement)&&(this._focusedItem=document.activeElement,requestAnimationFrame(()=>this.el?.focus())),this.dispatch("controls-change",{detail:e,trigger:n}))}},Yf=mY;rv=class{constructor(){this.playerId="vds-player",this.mediaId=null,this._data={volume:null,muted:null,time:null,lang:null,captions:null,rate:null,quality:null},this.saveTime=Yf(()=>{if(G||!this.mediaId)return;let e=(this._data.time??0).toString();localStorage.setItem(this.mediaId,e)},1e3)}async getVolume(){return this._data.volume}async setVolume(e){this._data.volume=e,this.save()}async getMuted(){return this._data.muted}async setMuted(e){this._data.muted=e,this.save()}async getTime(){return this._data.time}async setTime(e){this._data.time=e,this.saveTime()}async getLang(){return this._data.lang}async setLang(e){this._data.lang=e,this.save()}async getCaptions(){return this._data.captions}async setCaptions(e){this._data.captions=e,this.save()}async getPlaybackRate(){return this._data.rate}async setPlaybackRate(e){this._data.rate=e,this.save()}async getVideoQuality(){return this._data.quality}async setVideoQuality(e){this._data.quality=e,this.save()}onChange(e,n,r="vds-player"){let i=r?localStorage.getItem(r):null,o=n?localStorage.getItem(n):null;this.playerId=r,this.mediaId=n,this._data={volume:null,muted:null,lang:null,captions:null,rate:null,quality:null,...i?JSON.parse(i):{},time:o?+o:null}}save(){if(G||!this.playerId)return;let e=JSON.stringify({...this._data,time:void 0});localStorage.setItem(this.playerId,e)}},PS=class{constructor(){this.priority=0,this._display=!0,this._video=null,this._track=null,this._tracks=new Set}canRender(e,n){return!!n}attach(e){this._video=e,e&&(e.textTracks.onchange=this._onChange.bind(this))}addTrack(e){this._tracks.add(e),this._attachTrack(e)}removeTrack(e){e[ue._native]?.remove?.(),e[ue._native]=null,this._tracks.delete(e)}changeTrack(e){let n=e?.[ue._native];n&&n.track.mode!=="showing"&&(n.track.mode="showing"),this._track=e}setDisplay(e){this._display=e,this._onChange()}detach(){this._video&&(this._video.textTracks.onchange=null);for(let e of this._tracks)this.removeTrack(e);this._tracks.clear(),this._video=null,this._track=null}_attachTrack(e){var r;if(!this._video)return;let n=e[r=ue._native]??(e[r]=this._createTrackElement(e));n instanceof HTMLElement&&(this._video.append(n),n.track.mode=n.default?"showing":"hidden")}_createTrackElement(e){let n=document.createElement("track"),r=e.default||e.mode==="showing",i=e.src&&e.type==="vtt";if(n.id=e.id,i)n.src=e.src;else{let o=function(){URL.revokeObjectURL(this.src),this.removeEventListener("load",o),this.removeEventListener("error",o)},s=new Blob([`WEBVTT
`],{type:"text/vtt"});n.src=URL.createObjectURL(s),n.addEventListener("load",o),n.addEventListener("error",o)}return n.label=e.label,n.kind=e.kind,n.default=r,e.language&&(n.srclang=e.language),r&&!i&&this._copyCues(e,n.track),n}_copyCues(e,n){if(!(e.src&&e.type==="vtt"||n.cues?.length))for(let r of e.cues)n.addCue(r)}_onChange(e){for(let n of this._tracks){let r=n[ue._native]?.track;if(!r)continue;if(!this._display){r.mode="disabled";continue}let i=r.mode==="showing";i&&this._copyCues(n,r),n.setMode(i?"showing":"disabled",e)}}},iv=class{constructor(e){this._media=e,this._video=null,this._renderers=[],this._nativeDisplay=!1,this._nativeRenderer=null,this._customRenderer=null;let n=e.textTracks;this._textTracks=n,R(this._watchControls.bind(this)),he(this._detach.bind(this)),z(n,"add",this._onAddTrack.bind(this)),z(n,"remove",this._onRemoveTrack.bind(this)),z(n,"mode-change",this._update.bind(this))}_watchControls(){let{$state:e,$iosControls:n}=this._media;this._nativeDisplay=e.controls()||n(),this._update()}add(e){this._renderers.push(e),this._update()}remove(e){e.detach(),this._renderers.splice(this._renderers.indexOf(e),1),this._update()}_attachVideo(e){requestAnimationFrame(()=>{if(this._video=e,e){this._nativeRenderer=new PS,this._nativeRenderer.attach(e);for(let n of this._textTracks)this._addNativeTrack(n)}this._update()})}_addNativeTrack(e){Mt(e)&&this._nativeRenderer?.addTrack(e)}_removeNativeTrack(e){Mt(e)&&this._nativeRenderer?.removeTrack(e)}_onAddTrack(e){this._addNativeTrack(e.detail)}_onRemoveTrack(e){this._removeNativeTrack(e.detail)}_update(){let e=this._textTracks.selected;if(this._video&&(this._nativeDisplay||e?.[ue._nativeHLS])){this._customRenderer?.changeTrack(null),this._nativeRenderer?.setDisplay(!0),this._nativeRenderer?.changeTrack(e);return}if(this._nativeRenderer?.setDisplay(!1),this._nativeRenderer?.changeTrack(null),!e){this._customRenderer?.changeTrack(null);return}let n=this._renderers.sort((r,i)=>r.priority-i.priority).find(r=>r.canRender(e,this._video));this._customRenderer!==n&&(this._customRenderer?.detach(),n?.attach(this._video),this._customRenderer=n??null),n?.changeTrack(e)}_detach(){this._nativeRenderer?.detach(),this._nativeRenderer=null,this._customRenderer?.detach(),this._customRenderer=null}},QS=gY;ov=class extends ef{constructor(){super(),this._canLoad=!1,this._defaults={},this._storage=null,this._preferredLang=null,this._selectTracks=QS(async()=>{if(!this._canLoad)return;!this._preferredLang&&this._storage&&(this._preferredLang=await this._storage.getLang());let e=await this._storage?.getCaptions(),n=[["captions","subtitles"],"chapters","descriptions","metadata"];for(let r of n){let i=this.getByKind(r);if(i.find(c=>c.mode==="showing"))continue;let o=this._preferredLang?i.find(c=>c.language===this._preferredLang):null,s=xt(r)?this._defaults[r.find(c=>this._defaults[c])||""]:this._defaults[r],a=o??s,l=a&&Mt(a);a&&(!l||e!==!1)&&(a.mode="showing",l&&this._saveCaptionsTrack(a))}},300),this._onTrackModeChangeBind=this._onTrackModeChange.bind(this)}get selected(){return this._items.find(n=>n.mode==="showing"&&Mt(n))??null}get preferredLang(){return this._preferredLang}set preferredLang(e){this._preferredLang=e,this._saveLang(e)}add(e,n){let r=e instanceof gn,i=r?e:new gn(e),o=e.kind==="captions"||e.kind==="subtitles"?"captions":e.kind;return this._defaults[o]&&e.default&&delete e.default,i.addEventListener("mode-change",this._onTrackModeChangeBind),this[ge._add](i,n),i[ue._crossOrigin]=this[ue._crossOrigin],this._canLoad&&i[ue._canLoad](),e.default&&(this._defaults[o]=i),this._selectTracks(),this}remove(e,n){if(this._items.includes(e))return e===this._defaults[e.kind]&&delete this._defaults[e.kind],e.mode="disabled",e[ue._onModeChange]=null,e.removeEventListener("mode-change",this._onTrackModeChangeBind),this[ge._remove](e,n),this}clear(e){for(let n of[...this._items])this.remove(n,e);return this}getById(e){return this._items.find(n=>n.id===e)??null}getByKind(e){let n=Array.isArray(e)?e:[e];return this._items.filter(r=>n.includes(r.kind))}[ue._canLoad](){if(!this._canLoad){for(let e of this._items)e[ue._canLoad]();this._canLoad=!0,this._selectTracks()}}_onTrackModeChange(e){let n=e.detail;if(this._storage&&Mt(n)&&n.mode!=="disabled"&&this._saveCaptionsTrack(n),n.mode==="showing"){let r=Mt(n)?["captions","subtitles"]:[n.kind];for(let i of this._items)i.mode==="showing"&&i!=n&&r.includes(i.kind)&&(i.mode="disabled")}this.dispatchEvent(new le("mode-change",{detail:e.detail,trigger:e}))}_saveCaptionsTrack(e){this._saveLang(e.language),this._storage?.setCaptions?.(e.mode==="showing")}_saveLang(e){this._storage?.setLang?.(this._preferredLang=e)}setStorage(e){this._storage=e}},Zp=Symbol(0),sv=class extends ef{get selected(){return this._items.find(e=>e.selected)??null}get selectedIndex(){return this._items.findIndex(e=>e.selected)}[ge._onRemove](e,n){this[ge._select](e,!1,n)}[ge._add](e,n){e[Zp]=!1,Object.defineProperty(e,"selected",{get(){return this[Zp]},set:r=>{this.readonly||(this[ge._onUserSelect]?.(),this[ge._select](e,r))}}),super[ge._add](e,n)}[ge._select](e,n,r){if(n===e?.[Zp])return;let i=this.selected;e&&(e[Zp]=n),(n?i!==e:i===e)&&(i&&(i[Zp]=!1),this.dispatchEvent(new le("change",{detail:{prev:i,current:this.selected},trigger:r})))}},av=class extends sv{getById(e){return e===""?null:this._items.find(n=>n.id===e)??null}},yY=Symbol(0),vY=Symbol(0),pr={_setAuto:yY,_enableAuto:vY},lv=class extends sv{constructor(){super(...arguments),this._auto=!1,this.switch="current"}get auto(){return this._auto||this.readonly}[ge._onUserSelect](){this[pr._setAuto](!1)}[ge._onReset](e){this[pr._setAuto](!1,e)}autoSelect(e){this.readonly||this._auto||!this[pr._enableAuto]||(this[pr._enableAuto]?.(),this[pr._setAuto](!0,e))}[pr._setAuto](e,n){this._auto!==e&&(this._auto=e,this.dispatchEvent(new le("auto-change",{detail:e,trigger:n})))}};DD={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},rD=new Set(["Shift","Alt","Meta","Control"]),wY='button, [role="button"]',iD='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]',CS=class extends Ro{constructor(e){super(),this._media=e,this._timeSlider=null}onConnect(){R(this._onTargetChange.bind(this))}_onTargetChange(){let{keyDisabled:e,keyTarget:n}=this.$props;if(e())return;let r=n()==="player"?this.el:document,i=ee(!1);r===this.el?(this.listen("focusin",()=>i.set(!0)),this.listen("focusout",o=>{this.el.contains(o.target)||i.set(!1)})):(U(i)||i.set(document.querySelector("[data-media-player]")===this.el),z(document,"focusin",o=>{let s=o.composedPath().find(a=>a instanceof Element&&a.localName==="media-player");s!==void 0&&i.set(this.el===s)})),R(()=>{i()&&(z(r,"keyup",this._onKeyUp.bind(this)),z(r,"keydown",this._onKeyDown.bind(this)),z(r,"keydown",this._onPreventVideoKeys.bind(this),{capture:!0}))})}_onKeyUp(e){let n=document.activeElement;if(!e.key||!this.$state.canSeek()||n?.matches(iD))return;let{method:r,value:i}=this._getMatchingMethod(e);if(!ne(i)&&!xt(i)){i?.onKeyUp?.({event:e,player:this._media.player,remote:this._media.remote}),i?.callback?.(e,this._media.remote);return}r?.startsWith("seek")&&(e.preventDefault(),e.stopPropagation(),this._timeSlider?(this._forwardTimeKeyboardEvent(e,r==="seekForward"),this._timeSlider=null):(this._media.remote.seek(this._seekTotal,e),this._seekTotal=void 0)),r?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:r==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}))}_onKeyDown(e){if(!e.key||rD.has(e.key))return;let n=document.activeElement;if(n?.matches(iD)||Op(e)&&n?.matches(wY))return;let{method:r,value:i}=this._getMatchingMethod(e),o=!e.metaKey&&/^[0-9]$/.test(e.key);if(!ne(i)&&!xt(i)&&!o){i?.onKeyDown?.({event:e,player:this._media.player,remote:this._media.remote}),i?.callback?.(e,this._media.remote);return}if(!r&&o){e.preventDefault(),e.stopPropagation(),this._media.remote.seek(this.$state.duration()/10*Number(e.key),e);return}if(r){switch(e.preventDefault(),e.stopPropagation(),r){case"seekForward":case"seekBackward":this._seeking(e,r,r==="seekForward");break;case"volumeUp":case"volumeDown":let s=this.el.querySelector("[data-media-volume-slider]");if(s)s.dispatchEvent(new KeyboardEvent("keydown",{key:r==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}));else{let l=e.shiftKey?.1:.05;this._media.remote.changeVolume(this.$state.volume()+(r==="volumeUp"?+l:-l),e)}break;case"toggleFullscreen":this._media.remote.toggleFullscreen("prefer-media",e);break;case"speedUp":case"slowDown":let a=this.$state.playbackRate();this._media.remote.changePlaybackRate(Math.max(.25,Math.min(2,a+(r==="speedUp"?.25:-.25))),e);break;default:this._media.remote[r]?.(e)}this.$state.lastKeyboardAction.set({action:r,event:e})}}_onPreventVideoKeys(e){OD(e.target)&&this._getMatchingMethod(e).method&&e.preventDefault()}_getMatchingMethod(e){let n={...this.$props.keyShortcuts(),...this._media.ariaKeys},r=Object.keys(n).find(i=>{let o=n[i],s=xt(o)?o.join(" "):ne(o)?o:o?.keys;return(xt(s)?s:s?.split(" "))?.some(a=>xY(a).replace(/Control/g,"Ctrl").split("+").every(l=>rD.has(l)?e[l.toLowerCase()+"Key"]:e.key===l.replace("Space"," ")))});return{method:r,value:r?n[r]:null}}_calcSeekAmount(e,n){let r=e.shiftKey?10:5;return this._seekTotal=Math.max(0,Math.min((this._seekTotal??this.$state.currentTime())+(n==="seekForward"?+r:-r),this.$state.duration()))}_forwardTimeKeyboardEvent(e,n){this._timeSlider?.dispatchEvent(new KeyboardEvent(e.type,{key:n?"Right":"Left",shiftKey:e.shiftKey,trigger:e}))}_seeking(e,n,r){this.$state.canSeek()&&(this._timeSlider||(this._timeSlider=this.el.querySelector("[data-media-time-slider]")),this._timeSlider?this._forwardTimeKeyboardEvent(e,r):this._media.remote.seeking(this._calcSeekAmount(e,n),e))}},bY=["!","@","#","$","%","^","&","*","(",")"];cv=class extends Rn{constructor(e){super(),this._shortcut=e}onAttach(e){let{$props:n,ariaKeys:r}=Ie(),i=e.getAttribute("aria-keyshortcuts");if(i){r[this._shortcut]=i,G||he(()=>{delete r[this._shortcut]});return}let o=n.keyShortcuts()[this._shortcut];if(o){let s=xt(o)?o.join(" "):ne(o)?o:o?.keys;e.setAttribute("aria-keyshortcuts",xt(s)?s.join(" "):s)}}},FD=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,ND=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),VD=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,zD=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),BD=/\.(m3u8)($|\?)/i,UD=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]);uv=class{constructor(){this.name="audio"}canPlay(e){return XS(e)?G||!ne(e.src)||e.type==="?"||M7(this.target,e.type):!1}mediaType(){return"audio"}async load(e){if(G)throw Error("[vidstack] can not load audio provider server-side");return new(await Promise.resolve().then(()=>(PO(),EO))).AudioProvider(this.target,e)}},rf=class{constructor(){this.name="video"}canPlay(e){return ZS(e)?G||!ne(e.src)||e.type==="?"||I7(this.target,e.type):!1}mediaType(){return"video"}async load(e){if(G)throw Error("[vidstack] can not load video provider server-side");return new(await Promise.resolve().then(()=>(tS(),CO))).VideoProvider(this.target,e)}},HD=class jD extends rf{constructor(){super(...arguments),this.name="hls"}canPlay(e){return jD.supported&&Oa(e)}async load(e){if(G)throw Error("[vidstack] can not load hls provider server-side");return new(await Promise.resolve().then(()=>(MO(),RO))).HLSProvider(this.target,e)}};HD.supported=Ny();WD=HD,dv=class{constructor(){this.name="vimeo"}preconnect(){let e=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(let n of e)gi(n)}canPlay(e){return ne(e.src)&&e.type==="video/vimeo"}mediaType(){return"video"}async load(e){if(G)throw Error("[vidstack] can not load vimeo provider server-side");return new(await Promise.resolve().then(()=>($O(),AO))).VimeoProvider(this.target,e)}async loadPoster(e,n,r){let{resolveVimeoVideoId:i,getVimeoVideoInfo:o}=await Promise.resolve().then(()=>(lS(),LO));if(!ne(e.src))return null;let{videoId:s}=i(e.src);return s?o(s,r).then(a=>a?a.poster:null):null}},pv=class{constructor(){this.name="youtube"}preconnect(){let e=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(let n of e)gi(n)}canPlay(e){return ne(e.src)&&e.type==="video/youtube"}mediaType(){return"video"}async load(e){if(G)throw Error("[vidstack] can not load youtube provider server-side");return new(await Promise.resolve().then(()=>(FO(),DO))).YouTubeProvider(this.target,e)}async loadPoster(e,n,r){let{findYouTubePoster:i,resolveYouTubeVideoId:o}=await Promise.resolve().then(()=>(pS(),OO)),s=ne(e.src)&&o(e.src);return s?i(s,r):null}},_S=Symbol(0),_Y=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],kY={artist:"",autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:DD,storage:null},fv=class extends Ro{constructor(e,n){super(),this._type=e,this._callback=n}async onAttach(e){if(G)return;let n=this.$props[this._type]();if(n==="eager")requestAnimationFrame(this._callback);else if(n==="idle")PT(this._callback);else if(n==="visible"){let r,i=new IntersectionObserver(o=>{this.scope&&o[0].isIntersecting&&(r?.(),r=void 0,this._callback())});i.observe(e),r=he(()=>i.disconnect())}}},RS=class{constructor(e,n){this._handle=e,this._media=n,this._notify=(r,...i)=>{G||this._handle(new le(r,{detail:i?.[0],trigger:i?.[1]}))}}async _ready(e,n){if(!G)return Ic(async()=>{this._media;let{autoPlay:r,canPlay:i,started:o,duration:s,seekable:a,buffered:l,remotePlaybackInfo:c,playsInline:u}=this._media.$state;if(i())return;let d={duration:e?.duration??s(),seekable:e?.seekable??a(),buffered:e?.buffered??l(),provider:this._media.$provider()};this._notify("can-play",d,n),mi();let p=this._media.$provider(),{storage:f,qualities:h}=this._media,{muted:g,volume:w,clipStartTime:m,playbackRate:y}=this._media.$props,v=c()?.savedState?.currentTime,b=c()?.savedState?.paused===!1,k=v??await f?.getTime()??m(),_=b||r();p&&(p.setVolume(await f?.getVolume()??w()),p.setMuted(await f?.getMuted()??g()),p.setPlaybackRate?.(await f?.getPlaybackRate()??y()),p.setPlaysInline?.(u()),k>0&&p.setCurrentTime(k));let S=await f?.getVideoQuality();if(S&&h.length){let C=null,M=1/0;for(let x of h){let $=Math.abs(S.width-x.width)+Math.abs(S.height-x.height)+(S.bitrate?Math.abs(S.bitrate-x.bitrate):0);$<M&&(C=x,M=$)}C&&(C.selected=!0)}i()&&_&&!o()&&await this._attemptAutoplay(n),c.set(null)})}async _attemptAutoplay(e){let{player:n,$state:{autoPlaying:r,muted:i}}=this._media;r.set(!0);let o=new le("auto-play-attempt",{trigger:e});try{await n.play(o)}catch{}}},MS=class{constructor(){this._queue=new Map}_enqueue(e,n){this._queue.set(e,n)}_serve(e){let n=this._peek(e);return this._queue.delete(e),n}_peek(e){return this._queue.get(e)}_delete(e){this._queue.delete(e)}_clear(){this._queue.clear()}},hv=class{constructor(){this._serving=!1,this._pending=ko(),this._queue=new Map}get _size(){return this._queue.size}get _isServing(){return this._serving}async _waitForFlush(){this._serving||await this._pending.promise}_enqueue(e,n){if(this._serving){n();return}this._queue.delete(e),this._queue.set(e,n)}_serve(e){this._queue.get(e)?.(),this._queue.delete(e)}_start(){this._flush(),this._serving=!0,this._queue.size>0&&this._flush()}_stop(){this._serving=!1}_reset(){this._stop(),this._queue.clear(),this._release()}_flush(){for(let e of this._queue.keys())this._serve(e);this._release()}_release(){this._pending.resolve(),this._pending=ko()}};IS=class extends Ro{constructor(e,n,r){super(),this._stateMgr=e,this._request=n,this._media=r,this._providerQueue=new hv,this._wasPIPActive=!1,this._$provider=r.$provider,this._controls=new nv,this._fullscreen=new Xy,this._orientation=new WS}onAttach(){this.listen("fullscreen-change",this._onFullscreenChange.bind(this))}onConnect(){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),n=this._handleRequest.bind(this);for(let r of e)r.startsWith("media-")&&this.listen(r,n);this._attachLoadPlayListener(),R(this._watchProvider.bind(this)),R(this._onControlsDelayChange.bind(this)),R(this._onAirPlaySupportChange.bind(this)),R(this._onGoogleCastSupportChange.bind(this)),R(this._onFullscreenSupportChange.bind(this)),R(this._onPiPSupportChange.bind(this))}onDestroy(){this._providerQueue._reset()}_attachLoadPlayListener(){let{load:e}=this.$props,{canLoad:n}=this.$state;if(e()!=="play"||n())return;let r=this.listen("media-play-request",i=>{this._handleLoadPlayStrategy(i),r()})}_watchProvider(){let e=this._$provider(),n=this.$state.canPlay();return e&&n&&this._providerQueue._start(),()=>{this._providerQueue._stop()}}_handleRequest(e){e.stopPropagation(),!e.defaultPrevented&&this[e.type]&&(U(this._$provider)?this[e.type](e):this._providerQueue._enqueue(e.type,()=>{U(this._$provider)&&this[e.type](e)}))}async _play(e){if(G)return;let{canPlay:n,paused:r,autoPlaying:i}=this.$state;if(!this._handleLoadPlayStrategy(e)&&U(r)){e&&this._request._queue._enqueue("media-play-request",e);try{let o=U(this._$provider);return kS(o,U(n)),await o.play()}catch(o){let s=this.createEvent("play-fail",{detail:Da(o),trigger:e});throw s.autoPlay=i(),this._stateMgr._handle(s),o}}}_handleLoadPlayStrategy(e){let{load:n}=this.$props,{canLoad:r}=this.$state;if(n()==="play"&&!r()){let i=this.createEvent("media-start-loading",{trigger:e});return this.dispatchEvent(i),this._providerQueue._enqueue("media-play-request",async()=>{try{await this._play(i)}catch{}}),!0}return!1}async _pause(e){if(G)return;let{canPlay:n,paused:r}=this.$state;if(!U(r)){e&&this._request._queue._enqueue("media-pause-request",e);try{let i=U(this._$provider);return kS(i,U(n)),await i.pause()}catch(i){throw this._request._queue._delete("media-pause-request"),i}}}_seekToLiveEdge(e){if(G)return;let{canPlay:n,live:r,liveEdge:i,canSeek:o,liveSyncPosition:s,seekableEnd:a,userBehindLiveEdge:l}=this.$state;if(l.set(!1),U(()=>!r()||i()||!o()))return;let c=U(this._$provider);kS(c,U(n)),e&&this._request._queue._enqueue("media-seek-request",e);let u=a()-2;c.setCurrentTime(Math.min(u,s()??u))}async _enterFullscreen(e="prefer-media",n){if(G)return;let r=this._getFullscreenAdapter(e);if(oD(e,r),!r.active)return U(this.$state.pictureInPicture)&&(this._wasPIPActive=!0,await this._exitPictureInPicture(n)),n&&this._request._queue._enqueue("media-enter-fullscreen-request",n),r.enter()}async _exitFullscreen(e="prefer-media",n){if(G)return;let r=this._getFullscreenAdapter(e);if(oD(e,r),!!r.active){n&&this._request._queue._enqueue("media-exit-fullscreen-request",n);try{let i=await r.exit();return this._wasPIPActive&&U(this.$state.canPictureInPicture)&&await this._enterPictureInPicture(),i}finally{this._wasPIPActive=!1}}}_getFullscreenAdapter(e){let n=U(this._$provider);return e==="prefer-media"&&this._fullscreen.supported||e==="media"?this._fullscreen:n?.fullscreen}async _enterPictureInPicture(e){if(!G&&(this._throwIfPIPNotSupported(),!this.$state.pictureInPicture()))return e&&this._request._queue._enqueue("media-enter-pip-request",e),await this._$provider().pictureInPicture.enter()}async _exitPictureInPicture(e){if(!G&&(this._throwIfPIPNotSupported(),!!this.$state.pictureInPicture()))return e&&this._request._queue._enqueue("media-exit-pip-request",e),await this._$provider().pictureInPicture.exit()}_throwIfPIPNotSupported(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}_onControlsDelayChange(){this._controls.defaultDelay=this.$props.controlsDelay()}_onAirPlaySupportChange(){let{canAirPlay:e}=this.$state,n=!!this._$provider()?.airPlay?.supported;e.set(n)}_onGoogleCastSupportChange(){let{canGoogleCast:e,source:n}=this.$state,r=Gp&&!Vc&&jy(n());e.set(r)}_onFullscreenSupportChange(){let{canFullscreen:e}=this.$state,n=this._fullscreen.supported||!!this._$provider()?.fullscreen?.supported;e.set(n)}_onPiPSupportChange(){let{canPictureInPicture:e}=this.$state,n=!!this._$provider()?.pictureInPicture?.supported;e.set(n)}async"media-airplay-request"(e){try{await this._requestAirPlay(e)}catch{}}async _requestAirPlay(e){try{let n=this._$provider()?.airPlay;if(!n?.supported)throw Error("No AirPlay adapter.");return e&&this._request._queue._enqueue("media-airplay-request",e),await n.prompt()}catch(n){throw this._request._queue._delete("media-airplay-request"),n}}async"media-google-cast-request"(e){try{await this._requestGoogleCast(e)}catch{}}async _requestGoogleCast(e){try{let{canGoogleCast:n}=this.$state;if(!U(n))throw new Error("Cast not available.");if(gi("https://www.gstatic.com"),!this._googleCastLoader){let i=await Promise.resolve().then(()=>(wS(),UO)).then(function(o){return o.d});this._googleCastLoader=new i.GoogleCastLoader}await this._googleCastLoader.prompt(this._media),e&&this._request._queue._enqueue("media-google-cast-request",e);let r=U(this.$state.remotePlaybackState)!=="disconnected";r&&this.$state.remotePlaybackInfo.set(i=>({...i,savedState:{paused:U(this.$state.paused),currentTime:U(this.$state.currentTime)}})),this.$state.remotePlaybackLoader.set(r?this._googleCastLoader:null)}catch(n){throw this._request._queue._delete("media-google-cast-request"),n}}"media-audio-track-change-request"(e){let{logger:n,audioTracks:r}=this._media;if(r.readonly)return;let i=e.detail,o=r[i];if(o){let s=e.type;this._request._queue._enqueue(s,e),o.selected=!0}}async"media-enter-fullscreen-request"(e){try{await this._enterFullscreen(e.detail,e)}catch(n){this._onFullscreenError(n,e)}}async"media-exit-fullscreen-request"(e){try{await this._exitFullscreen(e.detail,e)}catch(n){this._onFullscreenError(n,e)}}async _onFullscreenChange(e){let n=U(this.$props.fullscreenOrientation),r=e.detail;if(!(it(n)||!this._orientation.supported))if(r){if(this._orientation.locked)return;this.dispatch("media-orientation-lock-request",{detail:n,trigger:e})}else this._orientation.locked&&this.dispatch("media-orientation-unlock-request",{trigger:e})}_onFullscreenError(e,n){this._stateMgr._handle(this.createEvent("fullscreen-error",{detail:Da(e)}))}async"media-orientation-lock-request"(e){let n=e.type;try{this._request._queue._enqueue(n,e),await this._orientation.lock(e.detail)}catch{this._request._queue._delete(n)}}async"media-orientation-unlock-request"(e){let n=e.type;try{this._request._queue._enqueue(n,e),await this._orientation.unlock()}catch{this._request._queue._delete(n)}}async"media-enter-pip-request"(e){try{await this._enterPictureInPicture(e)}catch(n){this._onPictureInPictureError(n,e)}}async"media-exit-pip-request"(e){try{await this._exitPictureInPicture(e)}catch(n){this._onPictureInPictureError(n,e)}}_onPictureInPictureError(e,n){this._stateMgr._handle(this.createEvent("picture-in-picture-error",{detail:Da(e)}))}"media-live-edge-request"(e){let{live:n,liveEdge:r,canSeek:i}=this.$state;if(!(!n()||r()||!i())){this._request._queue._enqueue("media-seek-request",e);try{this._seekToLiveEdge()}catch{this._request._queue._delete("media-seek-request")}}}async"media-loop-request"(e){try{this._request._looping=!0,this._request._replaying=!0,await this._play(e)}catch{this._request._looping=!1}}async"media-pause-request"(e){if(!this.$state.paused())try{await this._pause(e)}catch{}}async"media-play-request"(e){if(this.$state.paused())try{await this._play(e)}catch{}}"media-rate-change-request"(e){let{playbackRate:n,canSetPlaybackRate:r}=this.$state;if(n()===e.detail||!r())return;let i=this._$provider();i?.setPlaybackRate&&(this._request._queue._enqueue("media-rate-change-request",e),i.setPlaybackRate(e.detail))}"media-quality-change-request"(e){let{qualities:n,storage:r,logger:i}=this._media;if(n.readonly)return;this._request._queue._enqueue("media-quality-change-request",e);let o=e.detail;if(o<0)n.autoSelect(e),e.isOriginTrusted&&r?.setVideoQuality?.(null);else{let s=n[o];s&&(s.selected=!0,e.isOriginTrusted&&r?.setVideoQuality?.({id:s.id,width:s.width,height:s.height,bitrate:s.bitrate}))}}"media-pause-controls-request"(e){let n=e.type;this._request._queue._enqueue(n,e),this._controls.pause(e)}"media-resume-controls-request"(e){let n=e.type;this._request._queue._enqueue(n,e),this._controls.resume(e)}"media-seek-request"(e){let{seekableStart:n,seekableEnd:r,ended:i,canSeek:o,live:s,userBehindLiveEdge:a,clipStartTime:l}=this.$state;i()&&(this._request._replaying=!0);let c=e.type;this._request._seeking=!1,this._request._queue._delete(c);let u=Math.min(Math.max(n()+.1,e.detail+l()),r()-.1);!Number.isFinite(u)||!o()||(this._request._queue._enqueue(c,e),this._$provider().setCurrentTime(u),s()&&e.isOriginTrusted&&Math.abs(r()-u)>=2&&a.set(!0))}"media-seeking-request"(e){let n=e.type;this._request._queue._enqueue(n,e),this.$state.seeking.set(!0),this._request._seeking=!0}"media-start-loading"(e){if(this.$state.canLoad())return;let n=e.type;this._request._queue._enqueue(n,e),this._stateMgr._handle(this.createEvent("can-load"))}"media-poster-start-loading"(e){if(this.$state.canLoadPoster())return;let n=e.type;this._request._queue._enqueue(n,e),this._stateMgr._handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(e){let{index:n,mode:r}=e.detail,i=this._media.textTracks[n];if(i){let o=e.type;this._request._queue._enqueue(o,e),i.setMode(r,e)}}"media-mute-request"(e){if(this.$state.muted())return;let n=e.type;this._request._queue._enqueue(n,e),this._$provider().setMuted(!0)}"media-unmute-request"(e){let{muted:n,volume:r}=this.$state;if(!n())return;let i=e.type;this._request._queue._enqueue(i,e),this._media.$provider().setMuted(!1),r()===0&&(this._request._queue._enqueue(i,e),this._$provider().setVolume(.25))}"media-volume-change-request"(e){let{muted:n,volume:r}=this.$state,i=e.detail;if(r()===i)return;let o=e.type;this._request._queue._enqueue(o,e),this._$provider().setVolume(i),i>0&&n()&&(this._request._queue._enqueue(o,e),this._$provider().setMuted(!1))}_logError(e,n,r){}};LS=class{constructor(){this._seeking=!1,this._looping=!1,this._replaying=!1,this._queue=new MS}},TY=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]),AS=class extends Ro{constructor(e,n){super(),this._request=e,this._media=n,this._trackedEvents=new Map,this._clipEnded=!1,this._firingWaiting=!1,this._isPlayingOnDisconnect=!1,this.seeking=Yf(r=>{let{seeking:i,realCurrentTime:o,paused:s}=this.$state;i.set(!0),o.set(r.detail),this._satisfyRequest("media-seeking-request",r),s()&&(this._waitingTrigger=r,this._fireWaiting())},150,{leading:!0}),this._fireWaiting=QS(()=>{if(!this._waitingTrigger)return;this._firingWaiting=!0;let{waiting:r,playing:i}=this.$state;r.set(!0),i.set(!1);let o=this.createEvent("waiting",{trigger:this._waitingTrigger});this._trackedEvents.set("waiting",o),this.dispatch(o),this._waitingTrigger=void 0,this._firingWaiting=!1},300)}onAttach(e){e.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(e){R(this._watchCanSetVolume.bind(this)),this._addTextTrackListeners(),this._addQualityListeners(),this._addAudioTrackListeners(),this._resumePlaybackOnConnect(),he(this._pausePlaybackOnDisconnect.bind(this))}_handle(e){if(!this.scope)return;let n=e.type;this[e.type]?.(e),G||(TY.has(n)&&this._trackedEvents.set(n,e),this.dispatch(e))}_resumePlaybackOnConnect(){this._isPlayingOnDisconnect&&(requestAnimationFrame(()=>{this.scope&&this._media.remote.play(new le("dom-connect"))}),this._isPlayingOnDisconnect=!1)}_pausePlaybackOnDisconnect(){this._isPlayingOnDisconnect||(this._isPlayingOnDisconnect=!this._media.$state.paused(),this._media.$provider()?.pause())}_resetTracking(){this._stopWaiting(),this._clipEnded=!1,this._request._replaying=!1,this._request._looping=!1,this._firingWaiting=!1,this._waitingTrigger=void 0,this._trackedEvents.clear()}_satisfyRequest(e,n){let r=this._request._queue._serve(e);r&&(n.request=r,n.triggers.add(r))}_addTextTrackListeners(){this._onTextTracksChange(),this._onTextTrackModeChange();let e=this._media.textTracks;z(e,"add",this._onTextTracksChange.bind(this)),z(e,"remove",this._onTextTracksChange.bind(this)),z(e,"mode-change",this._onTextTrackModeChange.bind(this))}_addQualityListeners(){let e=this._media.qualities;z(e,"add",this._onQualitiesChange.bind(this)),z(e,"remove",this._onQualitiesChange.bind(this)),z(e,"change",this._onQualityChange.bind(this)),z(e,"auto-change",this._onAutoQualityChange.bind(this)),z(e,"readonly-change",this._onCanSetQualityChange.bind(this))}_addAudioTrackListeners(){let e=this._media.audioTracks;z(e,"add",this._onAudioTracksChange.bind(this)),z(e,"remove",this._onAudioTracksChange.bind(this)),z(e,"change",this._onAudioTrackChange.bind(this))}_onTextTracksChange(e){let{textTracks:n}=this.$state;n.set(this._media.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:n(),trigger:e})}_onTextTrackModeChange(e){e&&this._satisfyRequest("media-text-track-change-request",e);let n=this._media.textTracks.selected,{textTrack:r}=this.$state;r()!==n&&(r.set(n),this.dispatch("text-track-change",{detail:n,trigger:e}))}_onAudioTracksChange(e){let{audioTracks:n}=this.$state;n.set(this._media.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:n(),trigger:e})}_onAudioTrackChange(e){let{audioTrack:n}=this.$state;n.set(this._media.audioTracks.selected),e&&this._satisfyRequest("media-audio-track-change-request",e),this.dispatch("audio-track-change",{detail:n(),trigger:e})}_onQualitiesChange(e){let{qualities:n}=this.$state;n.set(this._media.qualities.toArray()),this.dispatch("qualities-change",{detail:n(),trigger:e})}_onQualityChange(e){let{quality:n}=this.$state;n.set(this._media.qualities.selected),e&&this._satisfyRequest("media-quality-change-request",e),this.dispatch("quality-change",{detail:n(),trigger:e})}_onAutoQualityChange(){this.$state.autoQuality.set(this._media.qualities.auto)}_onCanSetQualityChange(){this.$state.canSetQuality.set(!this._media.qualities.readonly)}_watchCanSetVolume(){let{canSetVolume:e,isGoogleCastConnected:n}=this.$state;if(n()){e.set(!1);return}mD().then(e.set)}"provider-change"(e){let n=this._media.$provider(),r=e.detail;n?.type!==r?.type&&(n?.destroy?.(),n?.scope?.dispose(),this._media.$provider.set(e.detail),n&&e.detail===null&&this._resetMediaState(e))}"provider-loader-change"(e){}"auto-play"(e){this.$state.autoPlayError.set(null)}"auto-play-fail"(e){this.$state.autoPlayError.set(e.detail),this._resetTracking()}"can-load"(e){this.$state.canLoad.set(!0),this._trackedEvents.set("can-load",e),this._media.textTracks[ue._canLoad](),this._satisfyRequest("media-start-loading",e)}"can-load-poster"(e){this.$state.canLoadPoster.set(!0),this._trackedEvents.set("can-load-poster",e),this._satisfyRequest("media-poster-start-loading",e)}"media-type-change"(e){let n=this._trackedEvents.get("source-change");n&&e.triggers.add(n);let r=this.$state.viewType();this.$state.mediaType.set(e.detail);let i=this.$state.providedViewType(),o=i==="unknown"?e.detail:i;r!==o&&(G?this.$state.inferredViewType.set(o):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(e.detail),this.dispatch("view-type-change",{detail:o,trigger:e}))})},0))}"stream-type-change"(e){let n=this._trackedEvents.get("source-change");n&&e.triggers.add(n);let{streamType:r,inferredStreamType:i}=this.$state;i.set(e.detail),e.detail=r()}"rate-change"(e){let{storage:n}=this._media,{canPlay:r}=this.$state;this.$state.playbackRate.set(e.detail),this._satisfyRequest("media-rate-change-request",e),r()&&n?.setPlaybackRate?.(e.detail)}"remote-playback-change"(e){let{remotePlaybackState:n,remotePlaybackType:r}=this.$state,{type:i,state:o}=e.detail,s=o==="connected";r.set(i),n.set(o);let a=i==="airplay"?"media-airplay-request":"media-google-cast-request";if(s)this._satisfyRequest(a,e);else{let l=this._request._queue._peek(a);l&&(e.request=l,e.triggers.add(l))}}"sources-change"(e){this.$state.sources.set(e.detail)}"source-change"(e){let n=this._trackedEvents.get("sources-change");n&&e.triggers.add(n),this._resetMediaState(e),this._trackedEvents.set(e.type,e),this.$state.source.set(e.detail),this.el?.setAttribute("aria-busy","true")}_resetMediaState(e){this._media.audioTracks[ge._reset](e),this._media.qualities[ge._reset](e),this._resetTracking(),wD(this._media.$state)}abort(e){let n=this._trackedEvents.get("source-change");n&&e.triggers.add(n);let r=this._trackedEvents.get("can-load");r&&!e.triggers.hasType("can-load")&&e.triggers.add(r)}"load-start"(e){let n=this._trackedEvents.get("source-change");n&&e.triggers.add(n)}error(e){this.$state.error.set(e.detail);let n=this._trackedEvents.get("abort");n&&e.triggers.add(n)}"loaded-metadata"(e){let n=this._trackedEvents.get("load-start");n&&e.triggers.add(n)}"loaded-data"(e){let n=this._trackedEvents.get("load-start");n&&e.triggers.add(n)}"can-play"(e){let n=this._trackedEvents.get("loaded-metadata");n&&e.triggers.add(n),this._onCanPlayDetail(e.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(e){this._onCanPlayDetail(e.detail);let n=this._trackedEvents.get("can-play");n&&e.triggers.add(n)}_onCanPlayDetail(e){let{seekable:n,buffered:r,intrinsicDuration:i,canPlay:o}=this.$state;o.set(!0),r.set(e.buffered),n.set(e.seekable);let s=tf(e.seekable)??1/0;i.set(s)}"duration-change"(e){let{live:n,intrinsicDuration:r}=this.$state,i=e.detail;n()||r.set(Number.isNaN(i)?0:i)}progress(e){let{buffered:n,seekable:r,live:i,intrinsicDuration:o}=this.$state,s=e.detail;if(n.set(s.buffered),r.set(s.seekable),i()){let a=tf(s.seekable)??1/0;o.set(a),this.dispatch("duration-change",{detail:a,trigger:e})}}play(e){let{paused:n,autoPlayError:r,ended:i,autoPlaying:o,playsInline:s,pointer:a,muted:l,viewType:c,live:u,userBehindLiveEdge:d}=this.$state;if(this._resetPlaybackIfNeeded(),!n()){e.stopImmediatePropagation();return}e.autoPlay=o();let p=this._trackedEvents.get("waiting");p&&e.triggers.add(p),this._satisfyRequest("media-play-request",e),this._trackedEvents.set("play",e),n.set(!1),r.set(null),e.autoPlay&&(this._handle(this.createEvent("auto-play",{detail:{muted:l()},trigger:e})),o.set(!1)),(i()||this._request._replaying)&&(this._request._replaying=!1,i.set(!1),this._handle(this.createEvent("replay",{trigger:e}))),!s()&&c()==="video"&&a()==="coarse"&&this._media.remote.enterFullscreen("prefer-media",e),u()&&!d()&&this._media.remote.seekToLiveEdge(e)}_resetPlaybackIfNeeded(e){if(!U(this._media.$provider))return;let{ended:r,seekableStart:i,clipStartTime:o,clipEndTime:s,realCurrentTime:a,duration:l}=this.$state,c=a()<o()||s()>0&&a()>=s()||Math.abs(a()-l())<.1||r();return c&&this.dispatch("media-seek-request",{detail:(o()>0?0:i())+.1,trigger:e}),c}"play-fail"(e){let{muted:n,autoPlaying:r}=this.$state,i=this._trackedEvents.get("play");i&&e.triggers.add(i),this._satisfyRequest("media-play-request",e);let{paused:o,playing:s}=this.$state;o.set(!0),s.set(!1),this._resetTracking(),this._trackedEvents.set("play-fail",e),e.autoPlay&&(this._handle(this.createEvent("auto-play-fail",{detail:{muted:n(),error:e.detail},trigger:e})),r.set(!1))}playing(e){let n=this._trackedEvents.get("play"),r=this._trackedEvents.get("seeked");n?e.triggers.add(n):r&&e.triggers.add(r),setTimeout(()=>this._resetTracking(),0);let{paused:i,playing:o,live:s,liveSyncPosition:a,seekableEnd:l,started:c,currentTime:u,seeking:d,ended:p}=this.$state;if(i.set(!1),o.set(!0),d.set(!1),p.set(!1),this._request._looping){this._request._looping=!1;return}if(s()&&!c()&&u()===0){let f=a()??l()-2;Number.isFinite(f)&&this._media.$provider().setCurrentTime(f)}this.started(e)}started(e){let{started:n}=this.$state;n()||(n.set(!0),this._handle(this.createEvent("started",{trigger:e})))}pause(e){this.el?.isConnected||(this._isPlayingOnDisconnect=!0),this._satisfyRequest("media-pause-request",e);let n=this._trackedEvents.get("seeked");n&&e.triggers.add(n);let{paused:r,playing:i}=this.$state;r.set(!0),i.set(!1),this._clipEnded&&setTimeout(()=>{this._handle(this.createEvent("end",{trigger:e})),this._clipEnded=!1},0),this._resetTracking()}"time-update"(e){if(this._request._looping){e.stopImmediatePropagation();return}let{realCurrentTime:n,played:r,waiting:i,clipEndTime:o}=this.$state,s=o(),a=e.detail;n.set(a.currentTime),r.set(a.played),i.set(!1);for(let l of this._media.textTracks)l[ue._updateActiveCues](a.currentTime,e);s>0&&a.currentTime>=s&&(this._clipEnded=!0,this.dispatch("media-pause-request",{trigger:e})),this._saveTime()}_saveTime(){let{storage:e}=this._media,{canPlay:n,realCurrentTime:r}=this.$state;n()&&e?.setTime?.(r())}"volume-change"(e){let{storage:n}=this._media,{volume:r,muted:i,canPlay:o}=this.$state,s=e.detail;r.set(s.volume),i.set(s.muted||s.volume===0),this._satisfyRequest("media-volume-change-request",e),this._satisfyRequest(s.muted?"media-mute-request":"media-unmute-request",e),o()&&(n?.setVolume?.(r()),n?.setMuted?.(i()))}seeked(e){let{seeking:n,currentTime:r,realCurrentTime:i,paused:o,duration:s,ended:a}=this.$state;if(this._request._seeking)n.set(!0),e.stopImmediatePropagation();else if(n()){let l=this._trackedEvents.get("waiting");l&&e.triggers.add(l);let c=this._trackedEvents.get("seeking");c&&!e.triggers.has(c)&&e.triggers.add(c),o()&&this._stopWaiting(),n.set(!1),e.detail!==s()&&a.set(!1),i.set(e.detail),this._satisfyRequest("media-seek-request",e);let u=e?.originEvent;u?.isTrusted&&!/seek/.test(u.type)&&this.started(e)}Math.abs(s()-r())>=.1&&a.set(!1)}waiting(e){this._firingWaiting||this._request._seeking||(e.stopImmediatePropagation(),this._waitingTrigger=e,this._fireWaiting())}end(e){let{loop:n}=this.$state;if(n()){setTimeout(()=>{requestAnimationFrame(()=>{this.dispatch("media-loop-request",{trigger:e})})},10);return}this._onEnded(e)}_onEnded(e){let{paused:n,seeking:r,ended:i,duration:o}=this.$state;n()||this.dispatch("pause",{trigger:e}),r()&&this.dispatch("seeked",{detail:o(),trigger:e}),i.set(!0),this._resetTracking(),this.dispatch("ended",{trigger:e})}_stopWaiting(){this._fireWaiting.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(e){let n=e.detail;this.$state.fullscreen.set(n),this._satisfyRequest(n?"media-enter-fullscreen-request":"media-exit-fullscreen-request",e)}"fullscreen-error"(e){this._satisfyRequest("media-enter-fullscreen-request",e),this._satisfyRequest("media-exit-fullscreen-request",e)}"orientation-change"(e){let n=e.detail.lock;this._satisfyRequest(n?"media-orientation-lock-request":"media-orientation-unlock-request",e)}"picture-in-picture-change"(e){let n=e.detail;this.$state.pictureInPicture.set(n),this._satisfyRequest(n?"media-enter-pip-request":"media-exit-pip-request",e)}"picture-in-picture-error"(e){this._satisfyRequest("media-enter-pip-request",e),this._satisfyRequest("media-exit-pip-request",e)}"title-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredTitle.set(e.detail))}"poster-change"(e){e.trigger&&(e.stopImmediatePropagation(),this.$state.inferredPoster.set(e.detail))}},$S=class extends Ro{onSetup(){this._init(),!G&&(R(this._watchArtist.bind(this)),R(this._watchAutoplay.bind(this)),R(this._watchClipTimes.bind(this)),R(this._watchControls.bind(this)),R(this._watchCrossOrigin.bind(this)),R(this._watchDuration.bind(this)),R(this._watchLive.bind(this)),R(this._watchLiveEdge.bind(this)),R(this._watchLiveTolerance.bind(this)),R(this._watchLoop.bind(this)),R(this._watchPlaysInline.bind(this)),R(this._watchPoster.bind(this)),R(this._watchProvidedTypes.bind(this)),R(this._watchTitle.bind(this)))}_init(){let e={duration:"providedDuration",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},n=new Set(["currentTime","paused","playbackRate","volume"]);for(let r of Object.keys(this.$props))n.has(r)||this.$state[e[r]??r]?.set(this.$props[r]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}_watchProvidedTypes(){let{viewType:e,streamType:n,title:r,poster:i}=this.$props;this.$state.providedPoster.set(i()),this.$state.providedStreamType.set(n()),this.$state.providedViewType.set(e()),this.$state.providedTitle.set(r())}_watchLogLevel(){}_watchArtist(){let{artist:e}=this.$props;this.$state.artist.set(e())}_watchTitle(){let{title:e}=this.$state;this.dispatch("title-change",{detail:e()})}_watchAutoplay(){let e=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(e),this.dispatch("auto-play-change",{detail:e})}_watchLoop(){let e=this.$props.loop();this.$state.loop.set(e),this.dispatch("loop-change",{detail:e})}_watchControls(){let e=this.$props.controls();this.$state.controls.set(e)}_watchPoster(){let{poster:e}=this.$state;this.dispatch("poster-change",{detail:e()})}_watchCrossOrigin(){let e=this.$props.crossOrigin()??this.$props.crossorigin(),n=e===!0?"":e;this.$state.crossOrigin.set(n)}_watchDuration(){let{providedDuration:e}=this.$state;e.set(this.$props.duration())}_watchPlaysInline(){let e=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(e),this.dispatch("plays-inline-change",{detail:e})}_watchClipTimes(){let{clipStartTime:e,clipEndTime:n}=this.$props;this.$state.clipStartTime.set(e()),this.$state.clipEndTime.set(n())}_watchLive(){this.dispatch("live-change",{detail:this.$state.live()})}_watchLiveTolerance(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}_watchLiveEdge(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}},SY=class OS extends Ro{constructor(){super()}onConnect(){R(this._onMetadataChange.bind(this)),R(this._onPlaybackStateChange.bind(this));let e=this._handleAction.bind(this);for(let n of OS._actions)navigator.mediaSession.setActionHandler(n,e);he(this._onDisconnect.bind(this))}_onDisconnect(){for(let e of OS._actions)navigator.mediaSession.setActionHandler(e,null)}_onMetadataChange(){let{title:e,artist:n,poster:r}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:e(),artist:n(),artwork:[{src:r()}]})}_onPlaybackStateChange(){let{canPlay:e,paused:n}=this.$state;navigator.mediaSession.playbackState=e()?n()?"paused":"playing":"none"}_handleAction(e){let n=new le("media-session-action",{detail:e});switch(e.action){case"play":this.dispatch("media-play-request",{trigger:n});break;case"pause":this.dispatch("media-pause-request",{trigger:n});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:Rt(e.seekTime)?e.seekTime:this.$state.currentTime()+(e.seekOffset??10),trigger:n});break}}};SY._actions=["play","pause","seekforward","seekbackward","seekto"];mv=ee(!1);G||(z(document,"pointerdown",()=>{mv.set(!1)}),z(document,"keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||mv.set(!0)}));mr=class extends Rn{constructor(){super(...arguments),this._focused=ee(!1)}onConnect(e){R(()=>{if(!mv()){this._focused.set(!1),Yy(e,!1),this.listen("pointerenter",this._onPointerEnter.bind(this)),this.listen("pointerleave",this._onPointerLeave.bind(this));return}let n=document.activeElement===e;this._focused.set(n),Yy(e,n),this.listen("focus",this._onFocus.bind(this)),this.listen("blur",this._onBlur.bind(this))})}focused(){return this._focused()}_onFocus(){this._focused.set(!0),Yy(this.el,!0)}_onBlur(){this._focused.set(!1),Yy(this.el,!1)}_onPointerEnter(){sD(this.el,!0)}_onPointerLeave(){sD(this.el,!1)}};EY=Object.defineProperty,PY=Object.getOwnPropertyDescriptor,He=(t,e,n,r)=>{for(var i=r>1?void 0:r?PY(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&EY(e,n,i),i},De=class Gy extends ce{constructor(){super(),this.canPlayQueue=new hv,this._skipTitleUpdate=!1,new $S;let e={player:this,qualities:new lv,audioTracks:new av,storage:null,$provider:ee(null),$providerSetup:ee(!1),$props:this.$props,$state:this.$state};e.remote=new Wc(void 0),e.remote.setPlayer(this),e.$iosControls=Bi(this._isIOSControls.bind(this)),e.textTracks=new ov,e.textTracks[ue._crossOrigin]=this.$state.crossOrigin,e.textRenderers=new iv(e),e.ariaKeys={},this._media=e,Mn(Wf,e),this.orientation=new WS,new mr,new CS(e);let n=new LS;this._stateMgr=new AS(n,e),this._requestMgr=new IS(this._stateMgr,n,e),e.delegate=new RS(this._stateMgr._handle.bind(this._stateMgr),e),new fv("load",this.startLoading.bind(this)),new fv("posterLoad",this.startLoadingPoster.bind(this))}get _provider(){return this._media.$provider()}get _$$props(){return this.$props}onSetup(){this._setupMediaAttributes(),R(this._watchCanPlay.bind(this)),R(this._watchMuted.bind(this)),R(this._watchPaused.bind(this)),R(this._watchVolume.bind(this)),R(this._watchCurrentTime.bind(this)),R(this._watchPlaysInline.bind(this)),R(this._watchPlaybackRate.bind(this))}onAttach(e){e.setAttribute("data-media-player",""),Ue(e,"tabindex","0"),Ue(e,"role","region"),R(this._watchStorage.bind(this)),G?this._watchTitle():R(this._watchTitle.bind(this)),G?this._watchOrientation():R(this._watchOrientation.bind(this)),z(e,"find-media-player",this._onFindPlayer.bind(this))}onConnect(e){GO&&fe(e,"data-iphone","");let n=window.matchMedia("(pointer: coarse)");this._onPointerChange(n),n.onchange=this._onPointerChange.bind(this);let r=new ResizeObserver(Rs(this._onResize.bind(this)));r.observe(e),R(this._onResize.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),he(()=>{r.disconnect(),n.onchange=null})}onDestroy(){this._media.player=null,this.canPlayQueue._reset()}_watchTitle(){let e=this.$el,{title:n,live:r,viewType:i,providedTitle:o}=this.$state,s=r(),a=Dp(i()),l=a!=="Unknown"?`${s?"Live ":""}${a}`:s?"Live":"Media",c=n();fe(this.el,"aria-label",c?`${l} - ${c}`:l+" Player"),!G&&e?.hasAttribute("title")&&(this._skipTitleUpdate=!0,e?.removeAttribute("title"))}_watchOrientation(){let e=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(e),fe(this.el,"data-orientation",e),this._onResize()}_watchCanPlay(){this.$state.canPlay()&&this._provider?this.canPlayQueue._start():this.canPlayQueue._stop()}_setupMediaAttributes(){if(Gy[_S]){this.setAttributes(Gy[_S]);return}let e={"data-load":function(){return this.$props.load()},"data-captions":function(){let r=this.$state.textTrack();return!!r&&Mt(r)},"data-ios-controls":function(){return this._media.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:r,canPlay:i,waiting:o}=this.$state;return r()&&(!i()||o())},"data-error":function(){let{error:r}=this.$state;return!!r()},"data-autoplay-error":function(){let{autoPlayError:r}=this.$state;return!!r()}},n={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let r of _Y){let i="data-"+(n[r]??Ac(r));e[i]=function(){return this.$state[r]()}}delete e.title,Gy[_S]=e,this.setAttributes(e)}_onFindPlayer(e){e.detail(this)}_onResize(){if(G||!this.el)return;let e=this.el.clientWidth,n=this.el.clientHeight;this.$state.width.set(e),this.$state.height.set(n),on(this.el,"--player-width",e+"px"),on(this.el,"--player-height",n+"px")}_onPointerChange(e){if(G)return;let n=e.matches?"coarse":"fine";fe(this.el,"data-pointer",n),this.$state.pointer.set(n),this._onResize()}_isIOSControls(){let{playsInline:e,fullscreen:n}=this.$state;return GO&&!fD()&&this.$state.mediaType()==="video"&&(!e()||n())}get provider(){return this._provider}get controls(){return this._requestMgr._controls}set controls(e){this._$$props.controls.set(e)}get title(){return U(this.$state.providedTitle)}set title(e){if(this._skipTitleUpdate){this._skipTitleUpdate=!1;return}this.$state.providedTitle.set(e)}get qualities(){return this._media.qualities}get audioTracks(){return this._media.audioTracks}get textTracks(){return this._media.textTracks}get textRenderers(){return this._media.textRenderers}get duration(){return this.$state.duration()}set duration(e){this._$$props.duration.set(e)}get paused(){return U(this.$state.paused)}set paused(e){this._queuePausedUpdate(e)}_watchPaused(){this._queuePausedUpdate(this.$props.paused())}_queuePausedUpdate(e){e?this.canPlayQueue._enqueue("paused",()=>this._requestMgr._pause()):this.canPlayQueue._enqueue("paused",()=>this._requestMgr._play())}get muted(){return U(this.$state.muted)}set muted(e){this._$$props.muted.set(e)}_watchMuted(){this._queueMutedUpdate(this.$props.muted())}_queueMutedUpdate(e){this.canPlayQueue._enqueue("muted",()=>{this._provider&&this._provider.setMuted(e)})}get currentTime(){return U(this.$state.currentTime)}set currentTime(e){this._queueCurrentTimeUpdate(e)}_watchCurrentTime(){this._queueCurrentTimeUpdate(this.$props.currentTime())}_queueCurrentTimeUpdate(e){this.canPlayQueue._enqueue("currentTime",()=>{let{currentTime:n,clipStartTime:r,seekableStart:i,seekableEnd:o}=this.$state;e!==U(n)&&U(()=>{if(!this._provider)return;let s=Math.min(Math.max(i()+.1,e+r()),o()-.1);Number.isFinite(s)&&this._provider.setCurrentTime(s)})})}get volume(){return U(this.$state.volume)}set volume(e){this._$$props.volume.set(e)}_watchVolume(){this._queueVolumeUpdate(this.$props.volume())}_queueVolumeUpdate(e){let n=JS(0,e,1);this.canPlayQueue._enqueue("volume",()=>{this._provider&&this._provider.setVolume(n)})}get playbackRate(){return U(this.$state.playbackRate)}set playbackRate(e){this._queuePlaybackRateUpdate(e)}_watchPlaybackRate(){this._queuePlaybackRateUpdate(this.$props.playbackRate())}_queuePlaybackRateUpdate(e){this.canPlayQueue._enqueue("rate",()=>{this._provider&&this._provider.setPlaybackRate?.(e)})}_watchPlaysInline(){this._queuePlaysInlineUpdate(this.$props.playsInline())}_queuePlaysInlineUpdate(e){this.canPlayQueue._enqueue("playsinline",()=>{this._provider&&this._provider.setPlaysInline?.(e)})}_watchStorage(){let e=this.$props.storage(),n=ne(e)?new rv:e;if(n?.onChange){let{source:r}=this.$state,i=ne(e)?e:this.el?.id,o=Bi(this._computeMediaId.bind(this));R(()=>n.onChange(r(),o(),i))}this._media.storage=n,this._media.textTracks.setStorage(n),he(()=>{n?.onDestroy?.(),this._media.storage=null,this._media.textTracks.setStorage(null)})}_computeMediaId(){let{clipStartTime:e,clipEndTime:n}=this.$props,{source:r}=this.$state,i=r();return i.src?`${i.src}:${e()}:${n()}`:null}async play(e){return this._requestMgr._play(e)}async pause(e){return this._requestMgr._pause(e)}async enterFullscreen(e,n){return this._requestMgr._enterFullscreen(e,n)}async exitFullscreen(e,n){return this._requestMgr._exitFullscreen(e,n)}enterPictureInPicture(e){return this._requestMgr._enterPictureInPicture(e)}exitPictureInPicture(e){return this._requestMgr._exitPictureInPicture(e)}seekToLiveEdge(e){this._requestMgr._seekToLiveEdge(e)}startLoading(e){this._media.delegate._notify("can-load",void 0,e)}startLoadingPoster(e){this._media.delegate._notify("can-load-poster",void 0,e)}requestAirPlay(e){return this._requestMgr._requestAirPlay(e)}requestGoogleCast(e){return this._requestMgr._requestGoogleCast(e)}destroy(){this._media.remote.setPlayer(null),this.dispatch("destroy")}};De.props=kY;De.state=Ga;He([we],De.prototype,"canPlayQueue",2);He([we],De.prototype,"provider",1);He([we],De.prototype,"controls",1);He([we],De.prototype,"orientation",2);He([we],De.prototype,"title",1);He([we],De.prototype,"qualities",1);He([we],De.prototype,"audioTracks",1);He([we],De.prototype,"textTracks",1);He([we],De.prototype,"textRenderers",1);He([we],De.prototype,"duration",1);He([we],De.prototype,"paused",1);He([we],De.prototype,"muted",1);He([we],De.prototype,"currentTime",1);He([we],De.prototype,"volume",1);He([we],De.prototype,"playbackRate",1);He([ut],De.prototype,"play",1);He([ut],De.prototype,"pause",1);He([ut],De.prototype,"enterFullscreen",1);He([ut],De.prototype,"exitFullscreen",1);He([ut],De.prototype,"enterPictureInPicture",1);He([ut],De.prototype,"exitPictureInPicture",1);He([ut],De.prototype,"seekToLiveEdge",1);He([ut],De.prototype,"startLoading",1);He([ut],De.prototype,"startLoadingPoster",1);He([ut],De.prototype,"requestAirPlay",1);He([ut],De.prototype,"requestGoogleCast",1);CY=De;YD=new Map,DS=class{constructor(e,n,r,i=[]){this._domSources=e,this._media=n,this._loader=r,this._initialize=!1;let o=new WD,s=new rf,a=new uv,l=new pv,c=new dv,u=[l,c];this._loaders=Bi(()=>{let p=n.$state.remotePlaybackLoader(),f=n.$props.preferNativeHLS()?[...i,s,a,o,...u]:[...i,o,s,a,...u];return p?[p,...f]:f});let{$state:d}=n;d.sources.set(aD(n.$props.src()));for(let p of d.sources()){let f=this._loaders().find(g=>g.canPlay(p));if(!f)continue;let h=f.mediaType(p);this._media.$state.source.set(p),this._media.$state.mediaType.set(h),this._media.$state.inferredViewType.set(h),this._loader.set(f),this._initialize=!0}}get _notify(){return this._media.delegate._notify}connect(){let e=this._loader();this._initialize&&(this._notifySourceChange(this._media.$state.source(),e),this._notifyLoaderChange(e),this._initialize=!1),R(this._onSourcesChange.bind(this)),R(this._onSourceChange.bind(this)),R(this._onSetup.bind(this)),R(this._onLoadSource.bind(this)),R(this._onLoadPoster.bind(this))}_onSourcesChange(){this._notify("sources-change",[...aD(this._media.$props.src()),...this._domSources()])}_onSourceChange(){let{$state:e}=this._media,n=e.sources(),r=U(e.source),i=this._findNewSource(r,n);if(n[0]?.src&&!i.src&&!i.type){let{crossOrigin:s}=e,a=Zy(s()),l=new AbortController;return Promise.all(n.map(c=>ne(c.src)&&c.type==="?"?fetch(c.src,{method:"HEAD",credentials:a,signal:l.signal}).then(u=>(c.type=u.headers.get("content-type")||"??",YD.set(c.src,c.type),c)).catch(()=>c):c)).then(c=>{l.signal.aborted||(this._findNewSource(U(e.source),c),mi())}),()=>l.abort()}mi()}_findNewSource(e,n){let r={src:"",type:""},i=null,o=this._loaders();for(let s of n){let a=o.find(l=>l.canPlay(s));if(a){r=s,i=a;break}}return lD(e,r)||this._notifySourceChange(r,i),i!==U(this._loader)&&this._notifyLoaderChange(i),r}_notifySourceChange(e,n){this._notify("source-change",e),this._notify("media-type-change",n?.mediaType(e)||"unknown")}_notifyLoaderChange(e){this._media.$providerSetup.set(!1),this._notify("provider-change",null),e&&U(()=>e.preconnect?.(this._media)),this._loader.set(e),this._notify("provider-loader-change",e)}_onSetup(){let e=this._media.$provider();if(!(!e||U(this._media.$providerSetup))){if(this._media.$state.canLoad()){Yt(()=>e.setup(),e.scope),this._media.$providerSetup.set(!0);return}U(()=>e.preconnect?.())}}_onLoadSource(){if(!this._media.$providerSetup())return;let e=this._media.$provider(),n=this._media.$state.source(),r=U(this._media.$state.crossOrigin),i=U(this._media.$props.preferNativeHLS);if(!lD(e?.currentSrc,n)){if(this._media.$state.canLoad()){let o=new AbortController;return Oa(n)?(i||!Ny())&&qD(n.src,{credentials:Zy(r),signal:o.signal}).then(s=>{this._notify("stream-type-change",s)}).catch(Wn):this._notify("stream-type-change","on-demand"),U(()=>{let s=U(this._media.$state.preload);return e?.loadSource(n,s).catch(a=>{})}),()=>o.abort()}try{ne(n.src)&&gi(new URL(n.src).origin)}catch{}}}_onLoadPoster(){let e=this._loader(),{providedPoster:n,source:r,canLoadPoster:i}=this._media.$state;if(!e||!e.loadPoster||!r()||!i()||n())return;let o=new AbortController,s=new le("source-change",{detail:r});return e.loadPoster(r(),this._media,o).then(a=>{this._notify("poster-change",a||"",s)}).catch(()=>{this._notify("poster-change","",s)}),()=>{o.abort()}}};FS=class{constructor(e,n){this._domTracks=e,this._media=n,this._prevTracks=[],R(this._onTracksChange.bind(this))}_onTracksChange(){let e=this._domTracks();for(let n of this._prevTracks)if(!e.some(r=>r.id===n.id)){let r=n.id&&this._media.textTracks.getById(n.id);r&&this._media.textTracks.remove(r)}for(let n of e){let r=n.id||gn.createId(n);this._media.textTracks.getById(r)||(n.id=r,this._media.textTracks.add(n))}this._prevTracks=e}},IY=Object.defineProperty,LY=Object.getOwnPropertyDescriptor,AY=(t,e,n,r)=>{for(var i=r>1?void 0:r?LY(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&IY(e,n,i),i},Yc=class extends ce{constructor(){super(...arguments),this._domSources=ee([]),this._domTracks=ee([]),this._loader=null,this._loadRafId=-1}onSetup(){this._media=Ie(),this._sources=new DS(this._domSources,this._media,this.$state.loader,this.$props.loaders())}onAttach(e){e.setAttribute("data-media-provider","")}onConnect(e){this._sources.connect(),new FS(this._domTracks,this._media);let n=new ResizeObserver(Rs(this._onResize.bind(this)));n.observe(e);let r=new MutationObserver(this._onMutation.bind(this));r.observe(e,{attributes:!0,childList:!0}),this._onResize(),this._onMutation(),he(()=>{n.disconnect(),r.disconnect()})}load(e){window.cancelAnimationFrame(this._loadRafId),this._loadRafId=requestAnimationFrame(()=>this._runLoader(e)),he(()=>{window.cancelAnimationFrame(this._loadRafId)})}_runLoader(e){if(!this.scope)return;let n=this.$state.loader(),{$provider:r}=this._media;this._loader===n&&n?.target===e&&U(r)||(this._destroyProvider(),this._loader=n,n&&(n.target=e||null),!(!n||!e)&&n.load(this._media).then(i=>{this.scope&&U(this.$state.loader)===n&&this._media.delegate._notify("provider-change",i)}))}onDestroy(){this._loader=null,this._destroyProvider()}_destroyProvider(){this._media.delegate._notify("provider-change",null)}_onResize(){if(!this.el)return;let e=this._media.player,n=this.el.offsetWidth,r=this.el.offsetHeight;e&&(e.$state.mediaWidth.set(n),e.$state.mediaHeight.set(r),e.el&&(on(e.el,"--media-width",n+"px"),on(e.el,"--media-height",r+"px")))}_onMutation(){let e=[],n=[],r=this.el.children;for(let i of r)i.hasAttribute("data-vds")||(i instanceof HTMLSourceElement?e.push({src:i.src,type:i.type}):i instanceof HTMLTrackElement&&n.push({id:i.id,src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")}));this._domSources.set(e),this._domTracks.set(n),mi()}};Yc.props={loaders:[]};Yc.state=new hi({loader:null});AY([ut],Yc.prototype,"load",1);gv=class extends ce{onSetup(){this._media=Ie(),R(this._watchProps.bind(this))}onAttach(e){let{pictureInPicture:n,fullscreen:r}=this._media.$state;on(e,"pointer-events","none"),Ue(e,"role","group"),this.setAttributes({"data-visible":this._isShowing.bind(this),"data-fullscreen":r,"data-pip":n}),R(()=>{this.dispatch("change",{detail:this._isShowing()})}),R(this._hideControls.bind(this)),R(()=>{let i=r();for(let o of["top","right","bottom","left"])on(e,`padding-${o}`,i&&`env(safe-area-inset-${o})`)})}_hideControls(){if(!this.el)return;let{$iosControls:e}=this._media,{controls:n}=this._media.$state,r=n()||e();fe(this.el,"aria-hidden",r?"true":null),on(this.el,"display",r?"none":null)}_watchProps(){let{controls:e}=this._media.player,{hideDelay:n,hideOnMouseLeave:r}=this.$props;e.defaultDelay=n()===2e3?this._media.$props.controlsDelay():n(),e.hideOnMouseLeave=r()}_isShowing(){let{controlsVisible:e}=this._media.$state;return e()}};gv.props={hideDelay:2e3,hideOnMouseLeave:!1};yv=class extends ce{onAttach(e){e.style.pointerEvents||on(e,"pointer-events","auto")}},vv=class extends Rn{constructor(e){super(),this._delegate=e,this._showTimerId=-1,this._hideRafId=-1,this._stopAnimationEndListener=null,R(this._watchTrigger.bind(this))}onDestroy(){this._stopAnimationEndListener?.(),this._stopAnimationEndListener=null}_watchTrigger(){let e=this._delegate._trigger();if(!e){this.hide();return}let n=this.show.bind(this),r=this.hide.bind(this);this._delegate._listen(e,n,r)}show(e){this._cancelShowing(),window.cancelAnimationFrame(this._hideRafId),this._hideRafId=-1,this._stopAnimationEndListener?.(),this._stopAnimationEndListener=null,this._showTimerId=window.setTimeout(()=>{this._showTimerId=-1;let n=this._delegate._content();n&&n.style.removeProperty("display"),U(()=>this._delegate._onChange(!0,e))},this._delegate._showDelay?.()??0)}hide(e){this._cancelShowing(),U(()=>this._delegate._onChange(!1,e)),this._hideRafId=requestAnimationFrame(()=>{this._cancelShowing(),this._hideRafId=-1;let n=this._delegate._content();if(n){let r=()=>{n.style.display="none",this._stopAnimationEndListener=null};if(hY(n)){this._stopAnimationEndListener?.();let o=z(n,"animationend",r,{once:!0});this._stopAnimationEndListener=o}else r()}})}_cancelShowing(){window.clearTimeout(this._showTimerId),this._showTimerId=-1}},jc=Hi(),$Y=0,wv=class extends ce{constructor(){super(),this._id=`media-tooltip-${++$Y}`,this._trigger=ee(null),this._content=ee(null),new mr;let{showDelay:e}=this.$props;new vv({_trigger:this._trigger,_content:this._content,_showDelay:e,_listen(n,r,i){z(n,"touchstart",o=>o.preventDefault(),{passive:!1}),R(()=>{mv()&&z(n,"focus",r),z(n,"blur",i)}),z(n,"mouseenter",r),z(n,"mouseleave",i)},_onChange:this._onShowingChange.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onSetup(){Mn(jc,{_trigger:this._trigger,_content:this._content,_attachTrigger:this._attachTrigger.bind(this),_detachTrigger:this._detachTrigger.bind(this),_attachContent:this._attachContent.bind(this),_detachContent:this._detachContent.bind(this)})}_attachTrigger(e){this._trigger.set(e);let n=e.getAttribute("data-media-tooltip");n&&this.el?.setAttribute(`data-media-${n}-tooltip`,""),fe(e,"data-describedby",this._id)}_detachTrigger(e){e.removeAttribute("data-describedby"),e.removeAttribute("aria-describedby"),this._trigger.set(null)}_attachContent(e){e.setAttribute("id",this._id),e.style.display="none",Ue(e,"role","tooltip"),this._content.set(e)}_detachContent(e){e.removeAttribute("id"),e.removeAttribute("role"),this._content.set(null)}_onShowingChange(e){let n=this._trigger(),r=this._content();n&&fe(n,"aria-describedby",e?this._id:null);for(let i of[this.el,n,r])i&&fe(i,"data-visible",e)}};wv.props={showDelay:700};bv=class extends ce{constructor(){super(),new mr}onConnect(e){he(tv(()=>{if(!this.connectScope)return;this._attach();let n=ct(jc);he(()=>{let r=this._getButton();r&&n._detachTrigger(r)})}))}_attach(){let e=this._getButton(),n=ct(jc);e&&n._attachTrigger(e)}_getButton(){let e=this.el.firstElementChild;return e?.localName==="button"||e?.getAttribute("role")==="button"?e:this.el}},of=class extends ce{constructor(){super(),new mr;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){this._attach(e),Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){this._attach(e);let n=ct(jc);he(()=>n._detachContent(e)),he(tv(()=>{this.connectScope&&R(this._watchPlacement.bind(this))}))}_attach(e){ct(jc)._attachContent(e)}_watchPlacement(){let{placement:e,offset:n,alignOffset:r}=this.$props;return LD(this.el,this._getTrigger(),e(),{offsetVarName:"media-tooltip",xOffset:r(),yOffset:n()})}_getTrigger(){return ct(jc)._trigger()}};of.props={placement:"top center",offset:0,alignOffset:0};Kt=class extends Rn{constructor(e){super(),this._delegate=e,new mr,e._keyShortcut&&new cv(e._keyShortcut)}onSetup(){let{disabled:e}=this.$props;this.setAttributes({"data-pressed":this._delegate._isPressed,"aria-pressed":this._isARIAPressed.bind(this),"aria-disabled":()=>e()?"true":null})}onAttach(e){Ue(e,"tabindex","0"),Ue(e,"role","button"),Ue(e,"type","button")}onConnect(e){Os(e,this._onMaybePress.bind(this));for(let n of["click","touchstart"])this.listen(n,this._onInteraction.bind(this))}_isARIAPressed(){return $c(this._delegate._isPressed())}_onPressed(e){yT(this._delegate._isPressed)&&this._delegate._isPressed.set(n=>!n)}_onMaybePress(e){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){e.preventDefault(),e.stopImmediatePropagation();return}e.preventDefault(),(this._delegate._onPress??this._onPressed).call(this,e)}_onInteraction(e){this.$props.disabled()&&(e.preventDefault(),e.stopImmediatePropagation())}};Kt.props={disabled:!1};OY=Object.defineProperty,DY=Object.getOwnPropertyDescriptor,FY=(t,e,n,r)=>{for(var i=r>1?void 0:r?DY(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&OY(e,n,i),i},sf=class extends ce{constructor(){super(),this._pressed=ee(!1),new Kt({_isPressed:this._pressed})}get pressed(){return this._pressed()}};sf.props={disabled:!1,defaultPressed:!1};FY([we],sf.prototype,"pressed",1);xv=class extends ce{constructor(){super(),new Kt({_isPressed:this._isPressed.bind(this),_onPress:this._onPress.bind(this)})}onSetup(){this._media=Ie();let{canAirPlay:e,isAirPlayConnected:n}=this._media.$state;this.setAttributes({"data-active":n,"data-supported":e,"data-state":this._getState.bind(this),"aria-hidden":Gn(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","airplay"),Fs(e,this._getDefaultLabel.bind(this))}_onPress(e){this._media.remote.requestAirPlay(e)}_isPressed(){let{remotePlaybackType:e,remotePlaybackState:n}=this._media.$state;return e()==="airplay"&&n()!=="disconnected"}_getState(){let{remotePlaybackType:e,remotePlaybackState:n}=this._media.$state;return e()==="airplay"&&n()}_getDefaultLabel(){let{remotePlaybackState:e}=this._media.$state;return`AirPlay ${e()}`}};xv.props=Kt.props;_v=class extends ce{constructor(){super(),new Kt({_isPressed:this._isPressed.bind(this),_onPress:this._onPress.bind(this)})}onSetup(){this._media=Ie();let{canGoogleCast:e,isGoogleCastConnected:n}=this._media.$state;this.setAttributes({"data-active":n,"data-supported":e,"data-state":this._getState.bind(this),"aria-hidden":Gn(()=>!e())})}onAttach(e){e.setAttribute("data-media-tooltip","google-cast"),Fs(e,this._getDefaultLabel.bind(this))}_onPress(e){this._media.remote.requestGoogleCast(e)}_isPressed(){let{remotePlaybackType:e,remotePlaybackState:n}=this._media.$state;return e()==="google-cast"&&n()!=="disconnected"}_getState(){let{remotePlaybackType:e,remotePlaybackState:n}=this._media.$state;return e()==="google-cast"&&n()}_getDefaultLabel(){let{remotePlaybackState:e}=this._media.$state;return`Google Cast ${e()}`}};_v.props=Kt.props;kv=class extends ce{constructor(){super(),new Kt({_isPressed:this._isPressed.bind(this),_keyShortcut:"togglePaused",_onPress:this._onPress.bind(this)})}onSetup(){this._media=Ie();let{paused:e,ended:n}=this._media.$state;this.setAttributes({"data-paused":e,"data-ended":n})}onAttach(e){e.setAttribute("data-media-tooltip","play"),Fs(e,"Play")}_onPress(e){let n=this._media.remote;this._isPressed()?n.pause(e):n.play(e)}_isPressed(){let{paused:e}=this._media.$state;return!e()}};kv.props=Kt.props;Tv=class extends ce{constructor(){super(),new Kt({_isPressed:this._isPressed.bind(this),_keyShortcut:"toggleCaptions",_onPress:this._onPress.bind(this)})}onSetup(){this._media=Ie(),this.setAttributes({"data-active":this._isPressed.bind(this),"data-supported":()=>!this._isHidden(),"aria-hidden":Gn(this._isHidden.bind(this))})}onAttach(e){e.setAttribute("data-media-tooltip","caption"),Fs(e,"Captions")}_onPress(e){this._media.remote.toggleCaptions(e)}_isPressed(){let{textTrack:e}=this._media.$state,n=e();return!!n&&Mt(n)}_isHidden(){let{hasCaptions:e}=this._media.$state;return!e()}};Tv.props=Kt.props;Sv=class extends ce{constructor(){super(),new Kt({_isPressed:this._isPressed.bind(this),_keyShortcut:"toggleFullscreen",_onPress:this._onPress.bind(this)})}onSetup(){this._media=Ie();let{fullscreen:e}=this._media.$state,n=this._isSupported.bind(this);this.setAttributes({"data-active":e,"data-supported":n,"aria-hidden":Gn(()=>!n())})}onAttach(e){e.setAttribute("data-media-tooltip","fullscreen"),Fs(e,"Fullscreen")}_onPress(e){let n=this._media.remote,r=this.$props.target();this._isPressed()?n.exitFullscreen(r,e):n.enterFullscreen(r,e)}_isPressed(){let{fullscreen:e}=this._media.$state;return e()}_isSupported(){let{canFullscreen:e}=this._media.$state;return e()}};Sv.props={...Kt.props,target:"prefer-media"};Ev=class extends ce{constructor(){super(),new Kt({_isPressed:this._isPressed.bind(this),_keyShortcut:"toggleMuted",_onPress:this._onPress.bind(this)})}onSetup(){this._media=Ie(),this.setAttributes({"data-muted":this._isPressed.bind(this),"data-state":this._getState.bind(this)})}onAttach(e){e.setAttribute("data-media-mute-button",""),e.setAttribute("data-media-tooltip","mute"),Fs(e,"Mute")}_onPress(e){let n=this._media.remote;this._isPressed()?n.unmute(e):n.mute(e)}_isPressed(){let{muted:e,volume:n}=this._media.$state;return e()||n()===0}_getState(){let{muted:e,volume:n}=this._media.$state,r=n();if(e()||r===0)return"muted";if(r>=.5)return"high";if(r<.5)return"low"}};Ev.props=Kt.props;Pv=class extends ce{constructor(){super(),new Kt({_isPressed:this._isPressed.bind(this),_keyShortcut:"togglePictureInPicture",_onPress:this._onPress.bind(this)})}onSetup(){this._media=Ie();let{pictureInPicture:e}=this._media.$state,n=this._isSupported.bind(this);this.setAttributes({"data-active":e,"data-supported":n,"aria-hidden":Gn(()=>!n())})}onAttach(e){e.setAttribute("data-media-tooltip","pip"),Fs(e,"PiP")}_onPress(e){let n=this._media.remote;this._isPressed()?n.exitPictureInPicture(e):n.enterPictureInPicture(e)}_isPressed(){let{pictureInPicture:e}=this._media.$state;return e()}_isSupported(){let{canPictureInPicture:e}=this._media.$state;return e()}};Pv.props=Kt.props;Cv=class extends ce{constructor(){super(),new mr}onSetup(){this._media=Ie();let{seeking:e}=this._media.$state,{seconds:n}=this.$props,r=this._isSupported.bind(this);this.setAttributes({seconds:n,"data-seeking":e,"data-supported":r,"aria-hidden":Gn(()=>!r())})}onAttach(e){Ue(e,"tabindex","0"),Ue(e,"role","button"),Ue(e,"type","button"),e.setAttribute("data-media-tooltip","seek"),Fs(e,this._getDefaultLabel.bind(this))}onConnect(e){Os(e,this._onPress.bind(this))}_isSupported(){let{canSeek:e}=this._media.$state;return e()}_getDefaultLabel(){let{seconds:e}=this.$props;return`Seek ${e()>0?"forward":"backward"} ${e()} seconds`}_onPress(e){let{seconds:n,disabled:r}=this.$props;if(r())return;let{currentTime:i}=this._media.$state,o=i()+n();this._media.remote.seek(o,e)}};Cv.props={disabled:!1,seconds:30};Rv=class extends ce{constructor(){super(),new mr}onSetup(){this._media=Ie();let{disabled:e}=this.$props,{live:n,liveEdge:r}=this._media.$state,i=()=>!n();this.setAttributes({"data-edge":r,"data-hidden":i,"aria-disabled":Gn(()=>e()||r()),"aria-hidden":Gn(i)})}onAttach(e){Ue(e,"tabindex","0"),Ue(e,"role","button"),Ue(e,"type","button"),e.setAttribute("data-media-tooltip","live")}onConnect(e){Os(e,this._onPress.bind(this))}_onPress(e){let{disabled:n}=this.$props,{liveEdge:r}=this._media.$state;n()||r()||this._media.remote.seekToLiveEdge(e)}};Rv.props={disabled:!1};Bv=new hi({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return cD(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return cD(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});uD={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1},NS=class extends Rn{constructor(e,n){super(),this._delegate=e,this._media=n,this._provider=null,this._touch=null,this._touchStartValue=null,this._onDocumentPointerMove=Yf(r=>{this._updatePointerValue(this._getPointerValue(r),r)},20,{leading:!0})}onConnect(){R(this._attachEventListeners.bind(this)),R(this._attachPointerListeners.bind(this)),this._delegate._swipeGesture&&R(this._watchSwipeGesture.bind(this))}_watchSwipeGesture(){let{pointer:e}=this._media.$state;if(e()!=="coarse"||!this._delegate._swipeGesture()){this._provider=null;return}this._provider=this._media.player.el?.querySelector("media-provider,[data-media-provider]"),this._provider&&(z(this._provider,"touchstart",this._onTouchStart.bind(this),{passive:!0}),z(this._provider,"touchmove",this._onTouchMove.bind(this),{passive:!1}))}_onTouchStart(e){this._touch=e.touches[0]}_onTouchMove(e){if(Ui(this._touch)||GS(e))return;let n=e.touches[0],r=n.clientX-this._touch.clientX,i=n.clientY-this._touch.clientY,o=this.$state.dragging();!o&&Math.abs(i)>5||o||(e.preventDefault(),Math.abs(r)>20&&(this._touch=n,this._touchStartValue=this.$state.value(),this._onStartDragging(this._touchStartValue,e)))}_attachEventListeners(){this._delegate._isDisabled()||(this.listen("focus",this._onFocus.bind(this)),this.listen("pointerenter",this._onPointerEnter.bind(this)),this.listen("pointermove",this._onPointerMove.bind(this)),this.listen("pointerleave",this._onPointerLeave.bind(this)),this.listen("pointerdown",this._onPointerDown.bind(this)),this.listen("keydown",this._onKeyDown.bind(this)),this.listen("keyup",this._onKeyUp.bind(this)))}_attachPointerListeners(){this._delegate._isDisabled()||!this.$state.dragging()||(z(document,"pointerup",this._onDocumentPointerUp.bind(this)),z(document,"pointermove",this._onDocumentPointerMove.bind(this)),z(document,"touchmove",this._onDocumentTouchMove.bind(this),{passive:!1}))}_onFocus(){this._updatePointerValue(this.$state.value())}_updateValue(e,n){let{value:r,min:i,max:o,dragging:s}=this.$state,a=Math.max(i(),Math.min(e,o()));r.set(a);let l=this.createEvent("value-change",{detail:a,trigger:n});if(this.dispatch(l),this._delegate._onValueChange?.(l),s()){let c=this.createEvent("drag-value-change",{detail:a,trigger:n});this.dispatch(c),this._delegate._onDragValueChange?.(c)}}_updatePointerValue(e,n){let{pointerValue:r,dragging:i}=this.$state;r.set(e),this.dispatch("pointer-value-change",{detail:e,trigger:n}),i()&&this._updateValue(e,n)}_getPointerValue(e){let n,r=this.el.getBoundingClientRect(),{min:i,max:o}=this.$state;if(this.$props.orientation()==="vertical"){let{bottom:s,height:a}=r;n=(s-e.clientY)/a}else if(this._touch&&Rt(this._touchStartValue)){let{width:s}=this._provider.getBoundingClientRect(),a=(e.clientX-this._touch.clientX)/s,l=o()-i(),c=l*Math.abs(a);n=(a<0?this._touchStartValue-c:this._touchStartValue+c)/l}else{let{left:s,width:a}=r;n=(e.clientX-s)/a}return Math.max(i(),Math.min(o(),this._delegate._roundValue(zY(i(),o(),n,this._delegate._getStep()))))}_onPointerEnter(e){this.$state.pointing.set(!0)}_onPointerMove(e){let{dragging:n}=this.$state;n()||this._updatePointerValue(this._getPointerValue(e),e)}_onPointerLeave(e){this.$state.pointing.set(!1)}_onPointerDown(e){if(e.button!==0)return;let n=this._getPointerValue(e);this._onStartDragging(n,e),this._updatePointerValue(n,e)}_onStartDragging(e,n){let{dragging:r}=this.$state;if(r())return;r.set(!0),this._media.remote.pauseControls(n);let i=this.createEvent("drag-start",{detail:e,trigger:n});this.dispatch(i),this._delegate._onDragStart?.(i)}_onStopDragging(e,n){let{dragging:r}=this.$state;if(!r())return;r.set(!1),this._media.remote.resumeControls(n);let i=this.createEvent("drag-end",{detail:e,trigger:n});this.dispatch(i),this._delegate._onDragEnd?.(i),this._touch=null,this._touchStartValue=null}_onKeyDown(e){let{key:n}=e,{min:r,max:i}=this.$state,o;if(n==="Home"||n==="PageUp"?o=r():n==="End"||n==="PageDown"?o=i():!e.metaKey&&/^[0-9]$/.test(n)&&(o=(i()-r())/10*Number(n)),!it(o)){this._updatePointerValue(o,e),this._updateValue(o,e);return}let s=this._getKeyValue(e);if(it(s))return;let a=n===this._lastDownKey;!this.$state.dragging()&&a&&this._onStartDragging(s,e),this._updatePointerValue(s,e),a||this._updateValue(s,e),this._lastDownKey=n}_onKeyUp(e){this._lastDownKey="";let{dragging:n,value:r}=this.$state;if(!n())return;let i=this._getKeyValue(e)??r();this._updatePointerValue(i),this._onStopDragging(i,e)}_getKeyValue(e){let{key:n,shiftKey:r}=e;if(!Object.keys(uD).includes(n))return;e.preventDefault(),e.stopPropagation();let{shiftKeyMultiplier:o}=this.$props,{value:s,min:a,max:l}=this.$state,c=this._delegate._getStep(),u=this._delegate._getKeyStep(),d=r?u*o():u,p=Number(uD[n]),f=d*p,h=(s()+f)/c;return Math.max(a(),Math.min(l(),Number((c*h).toFixed(3))))}_onDocumentPointerUp(e){if(e.button!==0)return;let n=this._getPointerValue(e);this._updatePointerValue(n,e),this._onStopDragging(n,e)}_onDocumentTouchMove(e){e.preventDefault()}},af=Hi(()=>({})),Uv=Hi(),qi=class extends Rn{constructor(e){super(),this._delegate=e,this._updateSliderVars=Rs((n,r)=>{this.el?.style.setProperty("--slider-fill",n+"%"),this.el?.style.setProperty("--slider-pointer",r+"%")})}onSetup(){this._media=Ie();let e=new mr;e.attach(this),this.$state.focused=e.focused.bind(e),Br(af)||Mn(af,{default:"value"}),Mn(Uv,{_orientation:this.$props.orientation,_disabled:this._delegate._isDisabled,_preview:ee(null)}),R(this._watchValue.bind(this)),R(this._watchDisabled.bind(this)),this._setupAttrs(),new NS(this._delegate,this._media).attach(this)}onAttach(e){Ue(e,"role","slider"),Ue(e,"tabindex","0"),Ue(e,"autocomplete","off"),G?this._watchCSSVars():R(this._watchCSSVars.bind(this))}_watchValue(){let{dragging:e,value:n,min:r,max:i}=this.$state;U(e)||n.set(VY(r(),i(),n(),this._delegate._getStep()))}_watchDisabled(){if(!this._delegate._isDisabled())return;let{dragging:e,pointing:n}=this.$state;e.set(!1),n.set(!1)}_getARIADisabled(){return $c(this._delegate._isDisabled())}_setupAttrs(){let{orientation:e}=this.$props,{dragging:n,active:r,pointing:i}=this.$state;this.setAttributes({"data-dragging":n,"data-pointing":i,"data-active":r,"aria-disabled":this._getARIADisabled.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this._delegate._getARIAValueNow,"aria-valuetext":this._delegate._getARIAValueText,"aria-orientation":e})}_watchCSSVars(){let{fillPercent:e,pointerPercent:n}=this.$state;this._updateSliderVars(An(e(),3),An(n(),3))}};qi.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};Mo=class extends ce{constructor(){super(),new qi({_getStep:this.$props.step,_getKeyStep:this.$props.keyStep,_roundValue:Math.round,_isDisabled:this.$props.disabled,_getARIAValueNow:this._getARIAValueNow.bind(this),_getARIAValueText:this._getARIAValueText.bind(this)})}onSetup(){R(this._watchValue.bind(this)),R(this._watchMinMax.bind(this))}_getARIAValueNow(){let{value:e}=this.$state;return Math.round(e())}_getARIAValueText(){let{value:e,max:n}=this.$state;return An(e()/n()*100,2)+"%"}_watchValue(){let{value:e}=this.$props;this.$state.value.set(e())}_watchMinMax(){let{min:e,max:n}=this.$props;this.$state.min.set(e()),this.$state.max.set(n())}};Mo.props={...qi.props,min:0,max:100,value:0};Mo.state=Bv;Po=new Map,Ky=new Map,Mv=class t{constructor(e,n,r){this.$src=e,this.$crossOrigin=n,this._media=r,this.$images=ee([]),R(this._onLoadCues.bind(this))}static create(e,n){let r=Ie();return new t(e,n,r)}_onLoadCues(){let{canLoad:e}=this._media.$state;if(!e())return;let n=this.$src(),r=new AbortController;if(n){if(ne(n)&&Po.has(n)){let i=Po.get(n);if(Po.delete(n),Po.set(n,i),Po.size>30){let o=Po.keys().next().value;Po.delete(o)}this.$images.set(Po.get(n))}else if(ne(n)){let i=this.$crossOrigin(),o=n+"::"+i;if(!Ky.has(o)){let s=new Promise(async(a,l)=>{try{let c=await fetch(n,{signal:r.signal,credentials:Zy(i)});if(c.headers.get("content-type")==="application/json"){let d=await c.json();if(xt(d))if(d[0]&&"text"in d[0])a(this._processVTTCues(d));else{for(let p=0;p<d.length;p++){let f=d[p];Eo(Ap(f),!1),Eo("url"in f&&ne(f.url),!1),Eo("startTime"in f&&Rt(f.startTime),!1)}a(d)}else a(this._processStoryboard(d));return}Promise.resolve().then(()=>(qp(),Wp)).then(async({parseResponse:d})=>{try{let{cues:p}=await d(c);a(this._processVTTCues(p))}catch(p){l(p)}})}catch(c){l(c)}}).then(a=>(r.signal.aborted||Po.set(o,a),a)).catch(a=>{r.signal.aborted||this._onError(n,a)}).finally(()=>{ne(o)&&Ky.delete(o)});Ky.set(o,s)}Ky.get(o)?.then(s=>{r.signal.aborted||this.$images.set(s||[])})}else if(xt(n))try{this.$images.set(this._processImages(n))}catch(i){this._onError(n,i)}else try{this.$images.set(this._processStoryboard(n))}catch(i){this._onError(n,i)}return()=>{r.abort(),this.$images.set([])}}}_processImages(e){let n=this._resolveBaseUrl();return e.map((r,i)=>(Eo(r.url&&ne(r.url),!1),Eo("startTime"in r&&Rt(r.startTime),!1),{...r,url:ne(r.url)?this._resolveURL(r.url,n):r.url}))}_processStoryboard(e){Eo(ne(e.url),!1),Eo(xt(e.tiles)&&e.tiles?.length,!1);let n=new URL(e.url),r=[],i="tile_width"in e?e.tile_width:e.tileWidth,o="tile_height"in e?e.tile_height:e.tileHeight;for(let s of e.tiles)r.push({url:n,startTime:"start"in s?s.start:s.startTime,width:i,height:o,coords:{x:s.x,y:s.y}});return r}_processVTTCues(e){for(let i=0;i<e.length;i++){let o=e[i];Eo("startTime"in o&&Rt(o.startTime),!1),Eo("text"in o&&ne(o.text),!1)}let n=[],r=this._resolveBaseUrl();for(let i of e){let[o,s]=i.text.split("#"),a=this._resolveData(s);n.push({url:this._resolveURL(o,r),startTime:i.startTime,endTime:i.endTime,width:a?.w,height:a?.h,coords:a&&Rt(a.x)&&Rt(a.y)?{x:a.x,y:a.y}:void 0})}return n}_resolveBaseUrl(){let e=U(this.$src);return!ne(e)||!/^https?:/.test(e)?location.href:e}_resolveURL(e,n){return/^https?:/.test(e)?new URL(e):new URL(e,n)}_resolveData(e){if(!e)return{};let[n,r]=e.split("="),i=r?.split(","),o={};if(!n||!i)return null;for(let s=0;s<n.length;s++){let a=+i[s];isNaN(a)||(o[n[s]]=a)}return o}_onError(e,n){}},Kc=class extends ce{constructor(){super(...arguments),this._styleResets=[]}onSetup(){this._media=Ie(),this._loader=Mv.create(this.$props.src,this.$state.crossOrigin),this._watchCrossOrigin(),this.setAttributes({"data-loading":this._isLoading.bind(this),"data-error":this._hasError.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":Gn(this.$state.hidden)})}onConnect(e){R(this._watchImg.bind(this)),R(this._watchHidden.bind(this)),R(this._watchCrossOrigin.bind(this)),R(this._onLoadStart.bind(this)),R(this._onFindActiveThumbnail.bind(this)),R(this._resize.bind(this))}_watchImg(){let e=this.$state.img();e&&(z(e,"load",this._onLoaded.bind(this)),z(e,"error",this._onError.bind(this)))}_watchCrossOrigin(){let{crossOrigin:e}=this.$props,{crossOrigin:n}=this.$state,{crossOrigin:r}=this._media.$state,i=e()!==null?e():r();n.set(i===!0?"anonymous":i)}_onLoadStart(){let{src:e,loading:n,error:r}=this.$state;return e()&&(n.set(!0),r.set(null)),()=>{this._resetStyles(),n.set(!1),r.set(null)}}_onLoaded(){let{loading:e,error:n}=this.$state;this._resize(),e.set(!1),n.set(null)}_onError(e){let{loading:n,error:r}=this.$state;n.set(!1),r.set(e)}_isLoading(){let{loading:e,hidden:n}=this.$state;return!n()&&e()}_hasError(){let{error:e}=this.$state;return!Ui(e())}_watchHidden(){let{hidden:e}=this.$state,{duration:n}=this._media.$state,r=this._loader.$images();e.set(this._hasError()||!Number.isFinite(n())||r.length===0)}_getTime(){return this.$props.time()}_onFindActiveThumbnail(){let e=this._loader.$images();if(!e.length)return;let n=this._getTime(),{src:r,activeThumbnail:i}=this.$state,o=-1,s=null;for(let a=e.length-1;a>=0;a--){let l=e[a];if(n>=l.startTime&&(!l.endTime||n<l.endTime)){o=a;break}}e[o]&&(s=e[o]),i.set(s),r.set(s?.url.href||"")}_resize(){if(!this.scope||this.$state.hidden())return;let e=this.el,n=this.$state.img(),r=this.$state.activeThumbnail();if(!n||!r||!e)return;let i=r.width??n.naturalWidth,o=r?.height??n.naturalHeight,{maxWidth:s,maxHeight:a,minWidth:l,minHeight:c,width:u,height:d}=getComputedStyle(this.el);l==="100%"&&(l=parseFloat(u)+""),c==="100%"&&(c=parseFloat(d)+"");let p=Math.max(parseInt(l)/i,parseInt(c)/o),f=Math.min(Math.max(parseInt(l),parseInt(s))/i,Math.max(parseInt(c),parseInt(a))/o),h=!isNaN(f)&&f<1?f:p>1?p:1;this._style(e,"--thumbnail-width",`${i*h}px`),this._style(e,"--thumbnail-height",`${o*h}px`),this._style(n,"width",`${n.naturalWidth*h}px`),this._style(n,"height",`${n.naturalHeight*h}px`),this._style(n,"transform",r.coords?`translate(-${r.coords.x*h}px, -${r.coords.y*h}px)`:""),this._style(n,"max-width","none")}_style(e,n,r){e.style.setProperty(n,r),this._styleResets.push(()=>e.style.removeProperty(n))}_resetStyles(){for(let e of this._styleResets)e();this._styleResets=[]}};Kc.props={src:null,time:0,crossOrigin:null};Kc.state=new hi({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});Iv=class extends Kc{onAttach(e){this._slider=Aa(Mo.state)}_getTime(){let{duration:e,clipStartTime:n}=this._media.$state;return n()+this._slider.pointerRate()*e()}},BY=Object.defineProperty,UY=Object.getOwnPropertyDescriptor,HY=(t,e,n,r)=>{for(var i=r>1?void 0:r?UY(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&BY(e,n,i),i},Ba=class extends ce{get video(){return this.$state.video()}onSetup(){this._media=Ie(),this._slider=Aa(Mo.state),this._watchCrossOrigin(),this.setAttributes({"data-loading":this._isLoading.bind(this),"data-hidden":this.$state.hidden,"data-error":this._hasError.bind(this),"aria-hidden":Gn(this.$state.hidden)})}onAttach(e){R(this._watchVideo.bind(this)),R(this._watchSrc.bind(this)),R(this._watchCrossOrigin.bind(this)),R(this._watchHidden.bind(this)),R(this._onSrcChange.bind(this)),R(this._onUpdateTime.bind(this))}_watchVideo(){let e=this.$state.video();e&&(e.readyState>=2&&this._onCanPlay(),z(e,"canplay",this._onCanPlay.bind(this)),z(e,"error",this._onError.bind(this)))}_watchSrc(){let{src:e}=this.$state,{canLoad:n}=this._media.$state;e.set(n()?this.$props.src():null)}_watchCrossOrigin(){let{crossOrigin:e}=this.$props,{crossOrigin:n}=this.$state,{crossOrigin:r}=this._media.$state,i=e()!==null?e():r();n.set(i===!0?"anonymous":i)}_isLoading(){let{canPlay:e,hidden:n}=this.$state;return!e()&&!n()}_hasError(){let{error:e}=this.$state;return!Ui(e)}_watchHidden(){let{src:e,hidden:n}=this.$state,{canLoad:r,duration:i}=this._media.$state;n.set(r()&&(!e()||this._hasError()||!Number.isFinite(i())))}_onSrcChange(){let{src:e,canPlay:n,error:r}=this.$state;e(),n.set(!1),r.set(null)}_onCanPlay(e){let{canPlay:n,error:r}=this.$state;n.set(!0),r.set(null),this.dispatch("can-play",{trigger:e})}_onError(e){let{canPlay:n,error:r}=this.$state;n.set(!1),r.set(e),this.dispatch("error",{trigger:e})}_onUpdateTime(){let{video:e,canPlay:n}=this.$state,{duration:r}=this._media.$state,{pointerRate:i}=this._slider,o=e();n()&&o&&Number.isFinite(r())&&Number.isFinite(i())&&(o.currentTime=i()*r())}};Ba.props={src:null,crossOrigin:null};Ba.state=new hi({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});HY([we],Ba.prototype,"video",1);jY=Object.defineProperty,WY=Object.getOwnPropertyDescriptor,qY=(t,e,n,r)=>{for(var i=r>1?void 0:r?WY(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&jY(e,n,i),i},Gc=class extends ce{onSetup(){this._slider=Aa(Mo.state),this._format=ct(af),this._text=Bi(this.getValueText.bind(this))}getValueText(){let{type:e,format:n,decimalPlaces:r,padHours:i,padMinutes:o,showHours:s,showMs:a}=this.$props,{value:l,pointerValue:c,min:u,max:d}=this._slider,p=n()??this._format.default,f=e()==="current"?l():c();if(p==="percent"){let h=d()-u(),g=f/h*100;return(this._format.percent??An)(g,r())+"\uFE6A"}else return p==="time"?(this._format.time??Ns)(f,{padHrs:i(),padMins:o(),showHrs:s(),showMs:a()}):this._format.value?.(f)??f.toFixed(2)}};Gc.props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};qY([ut],Gc.prototype,"getValueText",1);cf=class extends ce{constructor(){super(...arguments),this._updatePlacement=Rs(()=>{let{_disabled:e,_orientation:n}=this._slider;if(e())return;let r=this.el,{offset:i,noClamp:o}=this.$props;eE(r,{clamp:!o(),offset:i(),orientation:n()})})}onSetup(){this._slider=ct(Uv);let{active:e}=Aa(Mo.state);this.setAttributes({"data-visible":e})}onAttach(e){Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){let{_preview:n}=this._slider;n.set(e),he(()=>n.set(null)),R(this._updatePlacement.bind(this));let r=new ResizeObserver(this._updatePlacement.bind(this));r.observe(e),he(()=>r.disconnect())}};cf.props={offset:0,noClamp:!1};uf=class extends ce{constructor(){super(...arguments),this._throttleVolumeChange=Yf(this._onVolumeChange.bind(this),25)}onSetup(){this._media=Ie(),Mn(af,{default:"percent"}),new qi({_getStep:this.$props.step,_getKeyStep:this.$props.keyStep,_isDisabled:this.$props.disabled,_roundValue:Math.round,_getARIAValueNow:this._getARIAValueNow.bind(this),_getARIAValueText:this._getARIAValueText.bind(this),_onDragValueChange:this._onDragValueChange.bind(this),_onValueChange:this._onValueChange.bind(this)}).attach(this),R(this._watchVolume.bind(this))}onAttach(e){e.setAttribute("data-media-volume-slider",""),Ue(e,"aria-label","Volume");let{canSetVolume:n}=this._media.$state;this.setAttributes({"data-supported":n,"aria-hidden":Gn(()=>!n())})}_getARIAValueNow(){let{value:e}=this.$state;return Math.round(e())}_getARIAValueText(){let{value:e,max:n}=this.$state;return An(e()/n()*100,2)+"%"}_watchVolume(){let{muted:e,volume:n}=this._media.$state,r=e()?0:n()*100;this.$state.value.set(r),this.dispatch("value-change",{detail:r})}_onVolumeChange(e){if(!e.trigger)return;let n=An(e.detail/100,3);this._media.remote.changeVolume(n,e)}_onValueChange(e){this._throttleVolumeChange(e)}_onDragValueChange(e){this._throttleVolumeChange(e)}};uf.props={...qi.props,keyStep:5,shiftKeyMultiplier:2};uf.state=Bv;Qc=class extends ce{constructor(){super(),this._chapter=ee(null),this._playingBeforeDragStart=!1;let{noSwipeGesture:e}=this.$props;new qi({_swipeGesture:()=>!e(),_getStep:this._getStep.bind(this),_getKeyStep:this._getKeyStep.bind(this),_isDisabled:this._isDisabled.bind(this),_roundValue:this._roundValue,_getARIAValueNow:this._getARIAValueNow.bind(this),_getARIAValueText:this._getARIAValueText.bind(this),_onDragStart:this._onDragStart.bind(this),_onDragValueChange:this._onDragValueChange.bind(this),_onDragEnd:this._onDragEnd.bind(this),_onValueChange:this._onValueChange.bind(this)})}onSetup(){this._media=Ie(),Mn(af,{default:"time",value:this._formatValue.bind(this),time:this._formatTime.bind(this)}),this.setAttributes({"data-chapters":this._hasChapters.bind(this)}),this.setStyles({"--slider-progress":this._calcBufferedPercent.bind(this)}),R(this._watchCurrentTime.bind(this)),R(this._watchSeekingThrottle.bind(this))}onAttach(e){e.setAttribute("data-media-time-slider",""),Ue(e,"aria-label","Seek")}onConnect(e){R(this._watchPreviewing.bind(this)),eu(this._media.textTracks,"chapters",this._chapter.set)}_calcBufferedPercent(){let{bufferedEnd:e,duration:n}=this._media.$state;return An(Math.min(e()/Math.max(n(),1),1)*100,3)+"%"}_hasChapters(){let{duration:e}=this._media.$state;return this._chapter()?.cues.length&&Number.isFinite(e())&&e()>0}_watchSeekingThrottle(){this._dispatchSeeking=Yf(this._seeking.bind(this),this.$props.seekingRequestThrottle())}_watchCurrentTime(){let{currentTime:e}=this._media.$state,{value:n,dragging:r}=this.$state,i=this._timeToPercent(e());U(r)||(n.set(i),this.dispatch("value-change",{detail:i}))}_watchPreviewing(){let e=this._media.player.el,{_preview:n}=ct(Uv);e&&n()&&fe(e,"data-preview",this.$state.active())}_seeking(e,n){this._media.remote.seeking(e,n)}_seek(e,n,r){this._dispatchSeeking.cancel();let{live:i}=this._media.$state;if(i()&&n>=99){this._media.remote.seekToLiveEdge(r);return}this._media.remote.seek(e,r)}_onDragStart(e){let{pauseWhileDragging:n}=this.$props;if(n()){let{paused:r}=this._media.$state;this._playingBeforeDragStart=!r(),this._media.remote.pause(e)}}_onDragValueChange(e){this._dispatchSeeking(this._percentToTime(e.detail),e)}_onDragEnd(e){let n=e.detail;this._seek(this._percentToTime(n),n,e);let{pauseWhileDragging:r}=this.$props;r()&&this._playingBeforeDragStart&&(this._media.remote.play(e),this._playingBeforeDragStart=!1)}_onValueChange(e){let{dragging:n}=this.$state;n()||!e.trigger||this._onDragEnd(e)}_getStep(){let e=this.$props.step()/this._media.$state.duration()*100;return Number.isFinite(e)?e:1}_getKeyStep(){let e=this.$props.keyStep()/this._media.$state.duration()*100;return Number.isFinite(e)?e:1}_roundValue(e){return An(e,3)}_isDisabled(){let{canSeek:e}=this._media.$state;return this.$props.disabled()||!e()}_getARIAValueNow(){let{value:e}=this.$state;return Math.round(e())}_getARIAValueText(){let e=this._percentToTime(this.$state.value()),{duration:n}=this._media.$state;return Number.isFinite(e)?`${lf(e)} out of ${lf(n())}`:"live"}_percentToTime(e){let{duration:n}=this._media.$state;return An(e/100*n(),5)}_timeToPercent(e){let{liveEdge:n,duration:r}=this._media.$state,i=Math.max(0,Math.min(1,n()?1:Math.min(e,r())/r()));return Number.isNaN(i)?0:Number.isFinite(i)?i*100:100}_formatValue(e){let n=this._percentToTime(e),{live:r,duration:i}=this._media.$state;return Number.isFinite(n)?(r()?n-i():n).toFixed(0):"LIVE"}_formatTime(e,n){let r=this._percentToTime(e),{live:i,duration:o}=this._media.$state,s=i()?r-o():r;return Number.isFinite(r)?`${s<0?"-":""}${Ns(Math.abs(s),n)}`:"LIVE"}};Qc.props={...qi.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};Qc.state=Bv;YY=Object.defineProperty,KY=Object.getOwnPropertyDescriptor,Hv=(t,e,n,r)=>{for(var i=r>1?void 0:r?KY(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&YY(e,n,i),i},Io=class extends ce{constructor(){super(...arguments),this._titleRef=null,this._refs=[],this._$track=ee(null),this._$cues=ee([]),this._activeIndex=ee(-1),this._activePointerIndex=ee(-1),this._bufferedIndex=0,this._updateBufferedPercent=Rs(e=>{let n,r=this._$cues(),{clipStartTime:i}=this._media.$state,o=i(),s=this._getEndTime(r);for(let a=this._bufferedIndex;a<this._refs.length;a++)if(n=this._calcPercent(r[a],e,o,s),this._refs[a]?.style.setProperty("--chapter-progress",n+"%"),n<100){this._bufferedIndex=a;break}}),this._bufferedPercent=Bi(this._calcMediaBufferedPercent.bind(this)),this._onCuesChange=QS(()=>{let e=U(this._$track);!this.scope||!e||!e.cues.length||(this._$cues.set(this._fillGaps(e.cues)),this._activeIndex.set(0),this._bufferedIndex=0)},150,!0)}get cues(){return this._$cues()}get activeCue(){return this._$cues()[this._activeIndex()]||null}get activePointerCue(){return this._$cues()[this._activePointerIndex()]||null}onSetup(){this._media=Ie(),this._sliderState=Aa(Qc.state)}onAttach(e){eu(this._media.textTracks,"chapters",this._setTrack.bind(this)),R(this._onTrackChange.bind(this))}onConnect(){he(()=>this._reset.bind(this))}onDestroy(){this._setTrack(null)}setRefs(e){if(this._refs=e,this._updateScope?.dispose(),this._refs.length===1){let n=this._refs[0];n.style.width="100%",n.style.setProperty("--chapter-fill","var(--slider-fill)"),n.style.setProperty("--chapter-progress","var(--slider-progress)")}else this._refs.length>0&&Yt(()=>this._watch(),this._updateScope=Cn())}_setTrack(e){U(this._$track)!==e&&(this._reset(),this._$track.set(e))}_reset(){this._refs=[],this._$cues.set([]),this._activeIndex.set(-1),this._activePointerIndex.set(-1),this._bufferedIndex=0,this._updateScope?.dispose()}_watch(){this._refs.length&&(R(this._watchContainerWidths.bind(this)),R(this._watchFillPercent.bind(this)),R(this._watchPointerPercent.bind(this)),R(this._watchBufferedPercent.bind(this)))}_watchContainerWidths(){let e=this._$cues();if(!e.length)return;let n,{clipStartTime:r,clipEndTime:i}=this._media.$state,o=r(),s=i()||e[e.length-1].endTime,a=s-o,l=100;for(let c=0;c<e.length;c++)if(n=e[c],this._refs[c]){let u=c===e.length-1?l:An((n.endTime-Math.max(o,n.startTime))/a*100,3);this._refs[c].style.width=u+"%",l-=u}}_watchFillPercent(){let{liveEdge:e,clipStartTime:n,duration:r}=this._media.$state,{fillPercent:i,value:o}=this._sliderState,s=this._$cues(),a=e(),l=U(this._activeIndex),c=s[l],u=a?this._$cues.length-1:this._findActiveChapterIndex(c&&c.startTime/r()*100<=U(o)?l:0,i());a||!c?this._updateFillPercents(0,s.length,"100%"):u>l?this._updateFillPercents(l,u,"100%"):u<l&&this._updateFillPercents(u+1,l+1,"0%");let d=a?"100%":this._calcPercent(s[u],i(),n(),this._getEndTime(s))+"%";this._updateFillPercent(this._refs[u],d),this._activeIndex.set(u)}_watchPointerPercent(){let{pointing:e,pointerPercent:n}=this._sliderState;if(!e()){this._activePointerIndex.set(-1);return}let r=this._findActiveChapterIndex(0,n());this._activePointerIndex.set(r)}_updateFillPercents(e,n,r){for(let i=e;i<n;i++)this._updateFillPercent(this._refs[i],r)}_updateFillPercent(e,n){e&&e.style.setProperty("--chapter-fill",n)}_findActiveChapterIndex(e,n){let r=0,i=this._$cues();if(n===0)return 0;if(n===100)return i.length-1;let{clipStartTime:o}=this._media.$state,s=o(),a=this._getEndTime(i);for(let l=e;l<i.length;l++)if(r=this._calcPercent(i[l],n,s,a),r>=0&&r<100)return l;return 0}_watchBufferedPercent(){this._updateBufferedPercent(this._bufferedPercent())}_calcMediaBufferedPercent(){let{bufferedEnd:e,duration:n}=this._media.$state;return An(Math.min(e()/Math.max(n(),1),1),3)*100}_getEndTime(e){let{clipEndTime:n}=this._media.$state,r=n();return r>0?r:e[e.length-1]?.endTime||0}_calcPercent(e,n,r,i){if(this._$cues().length===0)return 0;let s=i-r,a=Math.max(0,e.startTime-r),l=Math.min(i,e.endTime)-r,c=a/s,u=c*100,d=Math.min(1,c+(l-a)/s)*100;return Math.max(0,An(n>=d?100:(n-u)/(d-u)*100,3))}_fillGaps(e){let n=[],{clipStartTime:r,clipEndTime:i,duration:o}=this._media.$state,s=r(),a=i()||1/0;e=e.filter(u=>u.startTime<=a&&u.endTime>=s);let l=e[0];l&&l.startTime>s&&n.push(new window.VTTCue(s,l.startTime,""));for(let u=0;u<e.length-1;u++){let d=e[u],p=e[u+1];if(n.push(d),p){let f=p.startTime-d.endTime;f>0&&n.push(new window.VTTCue(d.endTime,d.endTime+f,""))}}let c=e[e.length-1];if(c){n.push(c);let u=o();u>=0&&u-c.endTime>1&&n.push(new window.VTTCue(c.endTime,o(),""))}return n}_onTrackChange(){if(!this.scope)return;let{disabled:e}=this.$props;if(e()){this._$cues.set([]),this._activeIndex.set(0),this._bufferedIndex=0;return}let n=this._$track();if(n){let r=this._onCuesChange.bind(this);r(),he(z(n,"add-cue",r)),he(z(n,"remove-cue",r)),R(this._watchMediaDuration.bind(this))}return this._titleRef=this._findChapterTitleRef(),this._titleRef&&R(this._onChapterTitleChange.bind(this)),()=>{this._titleRef&&(this._titleRef.textContent="",this._titleRef=null)}}_watchMediaDuration(){this._media.$state.duration(),this._onCuesChange()}_onChapterTitleChange(){let e=this.activePointerCue||this.activeCue;this._titleRef&&(this._titleRef.textContent=e?.text||"")}_findParentSlider(){let e=this.el;for(;e&&e.getAttribute("role")!=="slider";)e=e.parentElement;return e}_findChapterTitleRef(){let e=this._findParentSlider();return e?e.querySelector('[data-part="chapter-title"]'):null}};Io.props={disabled:!1};Hv([we],Io.prototype,"cues",1);Hv([we],Io.prototype,"activeCue",1);Hv([we],Io.prototype,"activePointerCue",1);Hv([ut],Io.prototype,"setRefs",1);an=Hi(),GY=["a[href]","[tabindex]","input","select","button"].map(t=>`${t}:not([aria-hidden='true'])`).join(","),dD=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]),VS=class{constructor(e){this._delegate=e,this._index=0,this._el=null,this._elements=[]}get _items(){return this._elements}_attachMenu(e){return z(e,"focus",this._onFocus.bind(this)),this._el=e,he(()=>{this._el=null}),this}_listen(){this._el&&(this._update(),z(this._el,"keyup",this._onKeyUp.bind(this)),z(this._el,"keydown",this._onKeyDown.bind(this)),he(()=>{this._index=0,this._elements=[]}))}_update(){this._index=0,this._elements=this._getFocusableElements()}_scroll(e=this._findActiveIndex()){let n=this._elements[e],r=this._delegate._getScrollContainer();n&&r&&requestAnimationFrame(()=>{r.scrollTop=n.offsetTop-r.offsetHeight/2+n.offsetHeight/2})}_focusAt(e){this._index=e,this._elements[e]?.focus(),this._scroll(e)}_findActiveIndex(){return this._elements.findIndex(e=>e.getAttribute("aria-checked")==="true")}_onFocus(){this._update(),setTimeout(()=>{let e=this._findActiveIndex();this._focusAt(e>=0?e:0)},100)}_onKeyUp(e){dD.has(e.key)&&(e.stopPropagation(),e.preventDefault())}_onKeyDown(e){if(dD.has(e.key))switch(e.stopPropagation(),e.preventDefault(),e.key){case"Escape":this._delegate._closeMenu(e);break;case"Tab":this._focusAt(this._nextIndex(e.shiftKey?-1:1));break;case"ArrowUp":this._focusAt(this._nextIndex(-1));break;case"ArrowDown":this._focusAt(this._nextIndex(1));break;case"Home":case"PageUp":this._focusAt(0);break;case"End":case"PageDown":this._focusAt(this._elements.length-1);break}}_nextIndex(e){let n=this._index;do n=(n+e+this._elements.length)%this._elements.length;while(this._elements[n]?.offsetParent===null);return n}_getFocusableElements(){if(!this._el)return[];let e=this._el.querySelectorAll(GY),n=[],r=i=>i.getAttribute("role")==="menu";for(let i of e)i instanceof HTMLElement&&i.offsetParent!==null&&ID(this._el,i,r)&&n.push(i);return n}},QY=Object.defineProperty,XY=Object.getOwnPropertyDescriptor,Kf=(t,e,n,r)=>{for(var i=r>1?void 0:r?XY(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&QY(e,n,i),i},ZY=0,Lo=class extends ce{constructor(){super(),this._expanded=ee(!1),this._disabled=ee(!1),this._trigger=ee(null),this._content=ee(null),this._isTriggerDisabled=ee(!1),this._submenus=new Set,this._menuObserver=null,this._removeSubmenuBind=this._removeSubmenu.bind(this),this._onSubmenuOpenBind=this._onSubmenuOpen.bind(this),this._onSubmenuCloseBind=this._onSubmenuClose.bind(this),this._onResize=Rs(()=>{let n=U(this._content);if(!n||G)return;let r=0,i=getComputedStyle(n),o=[...n.children];for(let s of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])r+=parseFloat(i[s])||0;for(let s of o)if(s instanceof HTMLElement&&s.style.display==="contents")o.push(...s.children);else if(s.nodeType===3)r+=parseFloat(getComputedStyle(s).fontSize);else if(s instanceof HTMLElement){let a=getComputedStyle(s);if(a.display==="none")continue;r+=s.offsetHeight+(parseFloat(a.marginTop)||0)+(parseFloat(a.marginBottom)||0)}on(n,"--menu-height",r+"px")});let{showDelay:e}=this.$props;this._popper=new vv({_trigger:this._trigger,_content:this._content,_showDelay:e,_listen:(n,r,i)=>{Os(n,s=>{this._expanded()?i(s):r(s)});let o=this._getCloseTarget();o&&Os(o,s=>{s.stopPropagation(),i(s)})},_onChange:this._onExpandedChange.bind(this)})}get triggerElement(){return this._trigger()}get contentElement(){return this._content()}get isSubmenu(){return!!this._parentMenu}onSetup(){this._media=Ie();let e=++ZY;this._menuId=`media-menu-${e}`,this._menuButtonId=`media-menu-button-${e}`,this._focus=new VS({_getScrollContainer:this._findScrollContainer.bind(this),_closeMenu:this.close.bind(this)}),Br(an)&&(this._parentMenu=ct(an)),this.setAttributes({"data-open":this._expanded,"data-submenu":this.isSubmenu,"data-disabled":this._isDisabled.bind(this)}),Mn(an,{_button:this._trigger,_expanded:this._expanded,_hint:ee(""),_disable:this._disable.bind(this),_attachMenuButton:this._attachMenuButton.bind(this),_attachMenuItems:this._attachMenuItems.bind(this),_attachObserver:this._attachObserver.bind(this),_disableMenuButton:this._disableMenuButton.bind(this),_addSubmenu:this._addSubmenu.bind(this)})}onAttach(e){e.style.setProperty("display","contents"),this._focus._attachMenu(e)}onConnect(e){R(this._watchExpanded.bind(this)),this.isSubmenu&&this._parentMenu?._addSubmenu(this)}onDestroy(){this._trigger.set(null),this._content.set(null),this._menuObserver=null}_watchExpanded(){let e=this._isExpanded();this.isSubmenu||this._onResize(),this._updateMenuItemsHidden(e),e&&(R(()=>{let{height:n}=this._media.$state,r=this._content();r&&on(r,"--player-height",n()+"px")}),this._focus._listen(),this.listen("pointerup",this._onPointerUp.bind(this)),z(window,"pointerup",this._onWindowPointerUp.bind(this)))}_attachMenuButton(e){let n=e.el,r=this.isSubmenu,i=Gn(this._isDisabled.bind(this));Ue(n,"tabindex",r?"-1":"0"),Ue(n,"role",r?"menuitem":"button"),fe(n,"id",this._menuButtonId),fe(n,"aria-haspopup","menu"),fe(n,"aria-expanded","false"),fe(n,"data-submenu",this.isSubmenu),this.isSubmenu||this._stopClickPropagation(n);let o=()=>{fe(n,"data-open",this._expanded()),fe(n,"aria-disabled",i())};G?o():R(o),this._trigger.set(n),he(()=>{this._trigger.set(null)})}_attachMenuItems(e){let n=e.el;n.style.setProperty("display","none"),fe(n,"id",this._menuId),Ue(n,"role","menu"),Ue(n,"tabindex","-1"),fe(n,"data-submenu",this.isSubmenu),this._content.set(n),he(()=>this._content.set(null));let r=()=>fe(n,"data-open",this._expanded());if(G?r():R(r),this._focus._attachMenu(n),this._updateMenuItemsHidden(!1),!this.isSubmenu){let i=this._onResizeTransition.bind(this);e.listen("transitionstart",i),e.listen("transitionend",i),e.listen("animationend",this._onResize),e.listen("vds-menu-resize",this._onResize)}}_attachObserver(e){this._menuObserver=e}_stopClickPropagation(e){z(e,"click",n=>n.stopPropagation()),z(e,"pointerup",n=>n.stopPropagation())}_updateMenuItemsHidden(e){let n=U(this._content);n&&fe(n,"aria-hidden",$c(!e))}_disableMenuButton(e){this._isTriggerDisabled.set(e)}_onExpandedChange(e,n){if(n?.stopPropagation(),this._expanded()===e)return;if(this._isDisabled()){e&&this._popper.hide(n);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let r=this._trigger(),i=this._content();if(r&&(fe(r,"aria-controls",e&&this._menuId),fe(r,"aria-expanded",$c(e))),i&&fe(i,"aria-labelledby",e&&this._menuButtonId),this._expanded.set(e),this._toggleMediaControls(n),mi(),_o(n)){e?i?.focus():r?.focus();for(let o of[this.el,i])o&&o.setAttribute("data-keyboard","")}else for(let o of[this.el,i])o&&o.removeAttribute("data-keyboard");this.dispatch(e?"open":"close",{trigger:n}),e?(!this.isSubmenu&&this._media.activeMenu!==this&&(this._media.activeMenu?.close(n),this._media.activeMenu=this),this._menuObserver?._onOpen?.(n)):(this.isSubmenu?setTimeout(()=>{for(let o of this._submenus)o.close(n)},300):this._media.activeMenu=null,this._menuObserver?._onClose?.(n)),e&&!_o(n)&&requestAnimationFrame(()=>{this._focus._update(),setTimeout(()=>{this._focus._scroll()},100)})}_isExpanded(){return!this._isDisabled()&&this._expanded()}_isDisabled(){return this._disabled()||this._isTriggerDisabled()}_disable(e){this._disabled.set(e)}_onPointerUp(e){e.stopPropagation()}_onWindowPointerUp(e){if(!(!(e.target instanceof Node)||this._content()?.contains(e.target))){if(this.isSubmenu)return setTimeout(this.close.bind(this,e),800);this.close(e)}}_getCloseTarget(){let e=this.el?.querySelector('[data-part="close-target"]');return this.el&&e&&ID(this.el,e,n=>n.getAttribute("role")==="menu")?e:null}_findScrollContainer(){if(this.isSubmenu){let e=this.el;for(;e&&e.tagName!=="media-menu"&&e.hasAttribute("data-submenu");)e=e.parentNode;return e}else return U(this._content)||null}_toggleMediaControls(e){this.isSubmenu||(this._expanded()?this._media.remote.pauseControls(e):this._media.remote.resumeControls(e))}_addSubmenu(e){this._submenus.add(e),z(e,"open",this._onSubmenuOpenBind),z(e,"close",this._onSubmenuCloseBind),he(this._removeSubmenuBind)}_removeSubmenu(e){this._submenus.delete(e)}_onSubmenuOpen(e){this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(let n of this._submenus)if(n!==e.target)for(let r of[n.el,n.triggerElement])r?.setAttribute("aria-hidden","true")}_onSubmenuClose(){this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(let e of this._submenus)for(let n of[e.el,e.triggerElement])n?.setAttribute("aria-hidden","false")}_onResizeTransition(e){let n=this._content();if(n&&e.propertyName==="height"){let r=e.type==="transitionstart";fe(n,"data-resizing",r)}}open(e){U(this._expanded)||(this._popper.show(e),mi())}close(e){U(this._expanded)&&(this._popper.hide(e),mi())}};Lo.props={showDelay:0};Kf([we],Lo.prototype,"triggerElement",1);Kf([we],Lo.prototype,"contentElement",1);Kf([we],Lo.prototype,"isSubmenu",1);Kf([ut],Lo.prototype,"open",1);Kf([ut],Lo.prototype,"close",1);JY=Object.defineProperty,eK=Object.getOwnPropertyDescriptor,tK=(t,e,n,r)=>{for(var i=r>1?void 0:r?eK(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&JY(e,n,i),i},Ua=class extends ce{constructor(){super(),this._hintEl=ee(null),new mr}get expanded(){return this._menu?._expanded()??!1}onSetup(){this._menu=ct(an)}onAttach(e){this._menu._attachMenuButton(this),R(this._watchDisabled.bind(this)),Ue(e,"type","button")}onConnect(e){R(this._watchHintEl.bind(this)),this._onMutation();let n=new MutationObserver(this._onMutation.bind(this));n.observe(e,{attributeFilter:["data-part"],childList:!0,subtree:!0}),he(()=>n.disconnect()),Os(e,r=>{this.dispatch("select",{trigger:r})})}_watchDisabled(){this._menu._disableMenuButton(this.$props.disabled())}_watchHintEl(){let e=this._hintEl();e&&R(()=>{let n=this._menu._hint();n&&(e.textContent=n)})}_onMutation(){let e=this.el?.querySelector('[data-part="hint"]');this._hintEl.set(e??null)}};Ua.props={disabled:!1};tK([we],Ua.prototype,"expanded",1);Lv=class extends Ua{},Av=class extends ce{constructor(){super(...arguments),this._target=null}onSetup(){this._media=Ie(),Mn(Jp,{_attach:this._attachElement.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){}onDestroy(){this._target?.remove(),this._target=null}_attachElement(e){this._portal(!1),this._target=e,tv(()=>{tv(()=>{this.connectScope&&R(this._watchDisabled.bind(this))})})}_watchDisabled(){let{fullscreen:e}=this._media.$state,{disabled:n}=this.$props,r=n();this._portal(r==="fullscreen"?!e():!r)}_portal(e){if(!this._target)return;let n=this._getContainer(this.$props.container());if(!n)return;let r=this._target.parentElement===n;fe(this._target,"data-portal",e),e?r||(this._target.remove(),n.append(this._target)):r&&this._target.parentElement===n&&(this._target.remove(),this.el?.append(this._target))}_getContainer(e){return e instanceof HTMLElement?e:e?document.querySelector(e):document.body}};Av.props={container:null,disabled:!1};Jp=Hi(),df=class extends ce{constructor(){super(),new mr;let{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){if(this._menu=ct(an),this._menu._attachMenuItems(this),Br(Jp)){let n=ct(Jp);n&&(Mn(Jp,null),n._attach(e),he(()=>n._attach(null)))}}onConnect(e){R(this._watchPlacement.bind(this))}_watchPlacement(){if(!this.el)return;let e=this.$props.placement();if(e){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:n,alignOffset:r}=this.$props;return LD(this.el,this._getButton(),e,{offsetVarName:"media-menu",xOffset:r(),yOffset:n()})}else this.el.removeAttribute("style"),this.el.style.display="none"}_getButton(){return this._menu._button()}};df.props={placement:null,offset:0,alignOffset:0};zS=Hi(),Ds=class extends Rn{constructor(){super(...arguments),this._group=new Set,this._value=ee(""),this._controller=null,this._onChangeBind=this._onChange.bind(this)}get _values(){return Array.from(this._group).map(e=>e._value())}get value(){return this._value()}set value(e){this._onChange(e)}onSetup(){Mn(zS,{add:this._addRadio.bind(this),remove:this._removeRadio.bind(this)})}onAttach(e){Br(an)||Ue(e,"role","radiogroup"),this.setAttributes({value:this._value})}onDestroy(){this._group.clear()}_addRadio(e){this._group.has(e)||(this._group.add(e),e._onCheck=this._onChangeBind,e._check(e._value()===this._value()))}_removeRadio(e){e._onCheck=null,this._group.delete(e)}_onChange(e,n){let r=U(this._value);if(!e||e===r)return;let i=this._findRadio(r),o=this._findRadio(e);i?._check(!1,n),o?._check(!0,n),this._value.set(e),this._onValueChange?.(e,n)}_findRadio(e){for(let n of this._group)if(e===U(n._value))return n;return null}},nK=Object.defineProperty,rK=Object.getOwnPropertyDescriptor,GD=(t,e,n,r)=>{for(var i=r>1?void 0:r?rK(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&nK(e,n,i),i},Xc=class extends ce{get values(){return this._controller._values}get value(){return this._controller.value}set value(e){this._controller.value=e}constructor(){super(),this._controller=new Ds,this._controller._onValueChange=this._onValueChange.bind(this)}onSetup(){G?this._watchValue():R(this._watchValue.bind(this))}_watchValue(){this._controller.value=this.$props.value()}_onValueChange(e,n){let r=this.createEvent("change",{detail:e,trigger:n});this.dispatch(r)}};Xc.props={value:""};GD([we],Xc.prototype,"values",1);GD([we],Xc.prototype,"value",1);iK=Object.defineProperty,oK=Object.getOwnPropertyDescriptor,sK=(t,e,n,r)=>{for(var i=r>1?void 0:r?oK(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&iK(e,n,i),i},Zc=class extends ce{constructor(){super(),this._checked=ee(!1),this._controller={_value:this.$props.value,_check:this._check.bind(this),_onCheck:null},new mr}get checked(){return this._checked()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this._checked,"aria-checked":Gn(this._checked)})}onAttach(e){let n=Br(an);Ue(e,"tabindex",n?"-1":"0"),Ue(e,"role",n?"menuitemradio":"radio"),R(this._watchValue.bind(this))}onConnect(e){this._addToGroup(),Os(e,this._onPress.bind(this)),he(this._onDisconnect.bind(this))}_onDisconnect(){Yt(()=>{ct(zS).remove(this._controller)},this.connectScope)}_addToGroup(){ct(zS).add(this._controller)}_watchValue(){let{value:e}=this.$props,n=e();U(this._checked)&&this._controller._onCheck?.(n)}_onPress(e){U(this._checked)||(this._onChange(!0,e),this._onSelect(e),this._controller._onCheck?.(U(this.$props.value),e))}_check(e,n){U(this._checked)!==e&&this._onChange(e,n)}_onChange(e,n){this._checked.set(e),this.dispatch("change",{detail:e,trigger:n})}_onSelect(e){this.dispatch("select",{trigger:e})}};Zc.props={value:""};sK([we],Zc.prototype,"checked",1);aK=Object.defineProperty,lK=Object.getOwnPropertyDescriptor,tE=(t,e,n,r)=>{for(var i=r>1?void 0:r?lK(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&aK(e,n,i),i},Ha=class extends ce{constructor(){super(),this._index=ee(0),this._track=ee(null),this._cues=ee([]),this._controller=new Ds,this._controller._onValueChange=this._onValueChange.bind(this)}get value(){return this._controller.value}get disabled(){return!this._cues()?.length}onSetup(){this._media=Ie(),Br(an)&&(this._menu=ct(an));let{thumbnails:e}=this.$props;this.setAttributes({"data-thumbnails":()=>!!e()})}onAttach(e){this._menu?._attachObserver({_onOpen:this._onOpen.bind(this)})}getOptions(){let{clipStartTime:e,clipEndTime:n}=this._media.$state,r=e(),i=n()||1/0;return this._cues().map((o,s)=>({cue:o,value:s.toString(),label:o.text,startTime:Ns(Math.max(0,o.startTime-r)),duration:lf(Math.min(i,o.endTime)-Math.max(r,o.startTime))}))}_onOpen(){U(()=>this._watchCurrentTime())}onConnect(e){R(this._watchValue.bind(this)),R(this._watchCurrentTime.bind(this)),R(this._watchControllerDisabled.bind(this)),R(this._watchTrack.bind(this)),eu(this._media.textTracks,"chapters",this._track.set)}_watchTrack(){let e=this._track();if(!e)return;let n=this._onCuesChange.bind(this,e);return n(),z(e,"add-cue",n),z(e,"remove-cue",n),()=>{this._cues.set([])}}_onCuesChange(e){let{clipStartTime:n,clipEndTime:r}=this._media.$state,i=n(),o=r()||1/0;this._cues.set([...e.cues].filter(s=>s.startTime<=o&&s.endTime>=i))}_watchValue(){this._controller.value=this._getValue()}_watchCurrentTime(){if(!this._menu?._expanded())return;if(!this._track()){this._index.set(-1);return}let{realCurrentTime:n,clipStartTime:r,clipEndTime:i}=this._media.$state,o=r(),s=i()||1/0,a=n(),l=this._cues().findIndex(c=>Jy(c,a));if(this._index.set(l),l>=0){let c=this._cues()[l],u=this.el.querySelector("[aria-checked='true']"),d=Math.max(o,c.startTime),p=Math.min(s,c.endTime)-d,f=Math.max(0,a-d)/p*100;u&&on(u,"--progress",An(f,3)+"%")}}_watchControllerDisabled(){this._menu?._disable(this.disabled)}_getValue(){return this._index().toString()}_onValueChange(e,n){if(this.disabled||!n)return;let r=+e,i=this._cues(),{clipStartTime:o}=this._media.$state;Rt(r)&&i?.[r]&&(this._index.set(r),this._media.remote.seek(i[r].startTime-o(),n),this.dispatch("change",{detail:i[r],trigger:n}))}};Ha.props={thumbnails:null};tE([we],Ha.prototype,"value",1);tE([we],Ha.prototype,"disabled",1);tE([ut],Ha.prototype,"getOptions",1);cK=Object.defineProperty,uK=Object.getOwnPropertyDescriptor,nE=(t,e,n,r)=>{for(var i=r>1?void 0:r?uK(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&cK(e,n,i),i},ja=class extends ce{get value(){return this._controller.value}get disabled(){let{audioTracks:e}=this._media.$state;return e().length<=1}constructor(){super(),this._controller=new Ds,this._controller._onValueChange=this._onValueChange.bind(this)}onSetup(){this._media=Ie(),Br(an)&&(this._menu=ct(an))}onConnect(e){R(this._watchValue.bind(this)),R(this._watchControllerDisabled.bind(this)),R(this._watchHintText.bind(this))}getOptions(){let{audioTracks:e}=this._media.$state;return e().map(n=>({track:n,label:n.label,value:n.label.toLowerCase()}))}_watchValue(){this._controller.value=this._getValue()}_watchHintText(){let{emptyLabel:e}=this.$props,{audioTrack:n}=this._media.$state,r=n();this._menu?._hint.set(r?.label??e())}_watchControllerDisabled(){this._menu?._disable(this.disabled)}_getValue(){let{audioTrack:e}=this._media.$state,n=e();return n?n.label.toLowerCase():""}_onValueChange(e,n){if(this.disabled)return;let r=this._media.audioTracks.toArray().findIndex(i=>i.label.toLowerCase()===e);if(r>=0){let i=this._media.audioTracks[r];this._media.remote.changeAudioTrack(r,n),this.dispatch("change",{detail:i,trigger:n})}}};ja.props={emptyLabel:"Default"};nE([we],ja.prototype,"value",1);nE([we],ja.prototype,"disabled",1);nE([ut],ja.prototype,"getOptions",1);dK=Object.defineProperty,pK=Object.getOwnPropertyDescriptor,rE=(t,e,n,r)=>{for(var i=r>1?void 0:r?pK(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&dK(e,n,i),i},Wa=class extends ce{get value(){return this._controller.value}get disabled(){let{hasCaptions:e}=this._media.$state;return!e()}constructor(){super(),this._controller=new Ds,this._controller._onValueChange=this._onValueChange.bind(this)}onSetup(){this._media=Ie(),Br(an)&&(this._menu=ct(an))}onConnect(e){super.onConnect?.(e),R(this._watchValue.bind(this)),R(this._watchControllerDisabled.bind(this)),R(this._watchHintText.bind(this))}getOptions(){let{offLabel:e}=this.$props,{textTracks:n}=this._media.$state;return[{value:"off",label:e},...n().filter(Mt).map(r=>({track:r,label:r.label,value:this._getTrackValue(r)}))]}_watchValue(){this._controller.value=this._getValue()}_watchHintText(){let{offLabel:e}=this.$props,{textTrack:n}=this._media.$state,r=n();this._menu?._hint.set(r&&Mt(r)&&r.mode==="showing"?r.label:e())}_watchControllerDisabled(){this._menu?._disable(this.disabled)}_getValue(){let{textTrack:e}=this._media.$state,n=e();return n&&Mt(n)&&n.mode==="showing"?this._getTrackValue(n):"off"}_onValueChange(e,n){if(this.disabled)return;if(e==="off"){let i=this._media.textTracks.selected;if(i){let o=this._media.textTracks.toArray().indexOf(i);this._media.remote.changeTextTrackMode(o,"disabled",n),this.dispatch("change",{detail:null,trigger:n})}return}let r=this._media.textTracks.toArray().findIndex(i=>this._getTrackValue(i)===e);if(r>=0){let i=this._media.textTracks[r];this._media.remote.changeTextTrackMode(r,"showing",n),this.dispatch("change",{detail:i,trigger:n})}}_getTrackValue(e){return e.id+":"+e.kind+"-"+e.label.toLowerCase()}};Wa.props={offLabel:"Off"};rE([we],Wa.prototype,"value",1);rE([we],Wa.prototype,"disabled",1);rE([ut],Wa.prototype,"getOptions",1);fK=Object.defineProperty,hK=Object.getOwnPropertyDescriptor,iE=(t,e,n,r)=>{for(var i=r>1?void 0:r?hK(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&fK(e,n,i),i},QD=[.25,.5,.75,1,1.25,1.5,1.75,2],qa=class extends ce{get value(){return this._controller.value}get disabled(){let{rates:e}=this.$props,{canSetPlaybackRate:n}=this._media.$state;return!n()||e().length===0}constructor(){super(),this._controller=new Ds,this._controller._onValueChange=this._onValueChange.bind(this)}onSetup(){this._media=Ie(),Br(an)&&(this._menu=ct(an))}onConnect(e){R(this._watchValue.bind(this)),R(this._watchHintText.bind(this)),R(this._watchControllerDisabled.bind(this))}getOptions(){let{rates:e,normalLabel:n}=this.$props;return e().map(r=>({label:r===1?n:r+"\xD7",value:r.toString()}))}_watchValue(){this._controller.value=this._getValue()}_watchHintText(){let{normalLabel:e}=this.$props,{playbackRate:n}=this._media.$state,r=n();this._menu?._hint.set(r===1?e():r+"\xD7")}_watchControllerDisabled(){this._menu?._disable(this.disabled)}_getValue(){let{playbackRate:e}=this._media.$state;return e().toString()}_onValueChange(e,n){if(this.disabled)return;let r=+e;this._media.remote.changePlaybackRate(r,n),this.dispatch("change",{detail:r,trigger:n})}};qa.props={normalLabel:"Normal",rates:QD};iE([we],qa.prototype,"value",1);iE([we],qa.prototype,"disabled",1);iE([ut],qa.prototype,"getOptions",1);mK=Object.defineProperty,gK=Object.getOwnPropertyDescriptor,oE=(t,e,n,r)=>{for(var i=r>1?void 0:r?gK(e,n):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&mK(e,n,i),i},Ya=class extends ce{constructor(){super(),this._sortedQualities=Bi(()=>{let{qualities:e}=this._media.$state;return[...e()].sort((n,r)=>r.height===n.height?r.bitrate-n.bitrate:r.height-n.height)}),this._controller=new Ds,this._controller._onValueChange=this._onValueChange.bind(this)}get value(){return this._controller.value}get disabled(){let{canSetQuality:e,qualities:n}=this._media.$state;return!e()||n().length===0}onSetup(){this._media=Ie(),Br(an)&&(this._menu=ct(an))}onConnect(e){R(this._watchValue.bind(this)),R(this._watchControllerDisabled.bind(this)),R(this._watchHintText.bind(this))}getOptions(){let{autoLabel:e,hideBitrate:n}=this.$props;return[{value:"auto",label:e},...this._sortedQualities().map(r=>{let i=r.bitrate>=0?`${An(r.bitrate/1e6,2)} Mbps`:null;return{quality:r,label:r.height+"p",value:this._getQualityId(r),bitrate:()=>n()?null:i}})]}_watchValue(){this._controller.value=this._getValue()}_watchHintText(){let{autoLabel:e}=this.$props,{autoQuality:n,quality:r}=this._media.$state,i=r()?r().height+"p":"";this._menu?._hint.set(n()?e()+(i?` (${i})`:""):i)}_watchControllerDisabled(){this._menu?._disable(this.disabled)}_onValueChange(e,n){if(this.disabled)return;if(e==="auto"){this._media.remote.changeQuality(-1,n),this.dispatch("change",{detail:"auto",trigger:n});return}let{qualities:r}=this._media.$state,i=U(r).findIndex(o=>this._getQualityId(o)===e);if(i>=0){let o=U(r)[i];this._media.remote.changeQuality(i,n),this.dispatch("change",{detail:o,trigger:n})}}_getValue(){let{quality:e,autoQuality:n}=this._media.$state;if(n())return"auto";let r=e();return r?this._getQualityId(r):"auto"}_getQualityId(e){return e.height+"_"+e.bitrate}};Ya.props={autoLabel:"Auto",hideBitrate:!1};oE([we],Ya.prototype,"value",1);oE([we],Ya.prototype,"disabled",1);oE([ut],Ya.prototype,"getOptions",1);$v=class extends ce{constructor(){super(...arguments),this._provider=null,this._presses=0,this._pressTimerId=-1}onSetup(){this._media=Ie();let{event:e,action:n}=this.$props;this.setAttributes({event:e,action:n})}onAttach(e){e.setAttribute("data-media-gesture",""),e.style.setProperty("pointer-events","none")}onConnect(e){this._provider=this._media.player.el?.querySelector("[data-media-provider]"),R(this._attachListener.bind(this))}_attachListener(){let e=this.$props.event(),n=this.$props.disabled();!this._provider||!e||n||(/^dbl/.test(e)&&(e=e.split(/^dbl/)[1]),(e==="pointerup"||e==="pointerdown")&&this._media.$state.pointer()==="coarse"&&(e=e==="pointerup"?"touchend":"touchstart"),z(this._provider,e,this._acceptEvent.bind(this),{passive:!1}))}_acceptEvent(e){if(this.$props.disabled()||$p(e)&&(e.button!==0||this._media.activeMenu)||Lc(e)&&this._media.activeMenu||GS(e)||!this._inBounds(e))return;if(e.MEDIA_GESTURE=!0,e.preventDefault(),!U(this.$props.event)?.startsWith("dbl"))this._presses===0&&setTimeout(()=>{this._presses===1&&this._handleEvent(e)},250);else if(this._presses===1){queueMicrotask(()=>this._handleEvent(e)),clearTimeout(this._pressTimerId),this._presses=0;return}this._presses===0&&(this._pressTimerId=window.setTimeout(()=>{this._presses=0},275)),this._presses++}_handleEvent(e){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this._isTopLayer()&&this._performAction(U(this.$props.action),e),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}_inBounds(e){if(!this.el)return!1;if($p(e)||xT(e)||Lc(e)){let n=Lc(e)?e.changedTouches[0]??e.touches[0]:void 0,r=n?.clientX??e.clientX,i=n?.clientY??e.clientY,o=this.el.getBoundingClientRect(),s=i>=o.top&&i<=o.bottom&&r>=o.left&&r<=o.right;return e.type.includes("leave")?!s:s}return!0}_isTopLayer(){let e=this._media.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(e).sort((n,r)=>+getComputedStyle(r).zIndex-+getComputedStyle(n).zIndex)[0]===this.el}_performAction(e,n){if(!e)return;let r=new le("will-trigger",{detail:e,cancelable:!0,trigger:n});if(this.dispatchEvent(r),r.defaultPrevented)return;let[i,o]=e.replace(/:([a-z])/,"-$1").split(":");e.includes(":fullscreen")?this._media.remote.toggleFullscreen("prefer-media",n):e.includes("seek:")?this._media.remote.seek(U(this._media.$state.currentTime)+(+o||0),n):this._media.remote[wy(i)](n),this.dispatch("trigger",{detail:e,trigger:n})}};$v.props={disabled:!1,event:void 0,action:void 0};BS=class{constructor(e){this._renderer=e,this.priority=10,this._track=null,this._disposal=Fp()}attach(){}canRender(){return!0}detach(){this._disposal.empty(),this._renderer.reset(),this._track=null}changeTrack(e){!e||this._track===e||(this._disposal.empty(),e.readyState<2?(this._renderer.reset(),this._disposal.add(z(e,"load",()=>this._changeTrack(e),{once:!0}))):this._changeTrack(e),this._disposal.add(z(e,"add-cue",n=>{this._renderer.addCue(n.detail)}),z(e,"remove-cue",n=>{this._renderer.removeCue(n.detail)})),this._track=e)}_changeTrack(e){this._renderer.changeTrack({cues:[...e.cues],regions:[...e.regions]})}},Ov=class extends ce{onSetup(){this._media=Ie(),this.setAttributes({"aria-hidden":Gn(this._isHidden.bind(this))})}onAttach(e){e.style.setProperty("pointer-events","none")}onConnect(e){if(this._renderer){R(this._watchViewType.bind(this));return}Promise.resolve().then(()=>(qp(),Wp)).then(n=>{this.connectScope&&Yt(()=>{this._lib=n;let{CaptionsRenderer:r}=this._lib;this._renderer=new r(e),this._textRenderer=new BS(this._renderer),R(this._watchViewType.bind(this))},this.connectScope)})}onDestroy(){this._textRenderer&&(this._textRenderer.detach(),this._media.textRenderers.remove(this._textRenderer)),this._renderer?.destroy()}_isHidden(){let{textTrack:e,remotePlaybackState:n}=this._media.$state,r=e();return this._media.$iosControls()||n()==="connected"||!r||!Mt(r)}_watchViewType(){let{viewType:e}=this._media.$state;return e()==="audio"?this._setupAudioView():this._setupVideoView()}_setupAudioView(){return R(this._onTrackChange.bind(this)),()=>{this.el.textContent=""}}_onTrackChange(){if(this._isHidden())return;let{textTrack:e}=this._media.$state;this._onCueChange(),z(e(),"cue-change",this._onCueChange.bind(this)),R(this._onUpdateTimedNodes.bind(this))}_onCueChange(){this.el.textContent="";let{realCurrentTime:e,textTrack:n}=this._media.$state,r=U(e),i=U(n).activeCues,{renderVTTCueString:o}=this._lib;for(let s of i){let a=document.createElement("div");a.setAttribute("data-part","cue"),a.innerHTML=o(s,r),this.el.append(a)}}_onUpdateTimedNodes(){let{realCurrentTime:e}=this._media.$state,{updateTimedVTTCueNodes:n}=this._lib;n(this.el,e())}_setupVideoView(){return R(this._watchTextDirection.bind(this)),R(this._watchMediaTime.bind(this)),this._media.textRenderers.add(this._textRenderer),()=>{this.el.textContent="",this._textRenderer.detach(),this._media.textRenderers.remove(this._textRenderer)}}_watchTextDirection(){this._renderer.dir=this.$props.textDir()}_watchMediaTime(){if(this._isHidden())return;let{realCurrentTime:e}=this._media.$state;this._renderer.currentTime=e()}};Ov.props={textDir:"ltr"};pf=class extends ce{constructor(){super(...arguments),this._prevSrc=""}onSetup(){this._media=Ie(),this._watchSrc(),this._watchAlt(),this._watchCrossOrigin(),this._watchHidden()}onAttach(e){e.style.setProperty("pointer-events","none"),R(this._watchImg.bind(this)),R(this._watchSrc.bind(this)),R(this._watchAlt.bind(this)),R(this._watchCrossOrigin.bind(this)),R(this._watchHidden.bind(this));let{started:n}=this._media.$state;this.setAttributes({"data-visible":()=>!n()&&!this.$state.hidden(),"data-loading":this._isLoading.bind(this),"data-error":this._hasError.bind(this),"data-hidden":this.$state.hidden})}onConnect(e){R(this._onPreconnect.bind(this)),R(this._onLoadStart.bind(this))}_hasError(){let{error:e}=this.$state;return!Ui(e())}_onPreconnect(){let{canLoadPoster:e,poster:n}=this._media.$state;!e()&&n()&&gi(n(),"preconnect")}_watchHidden(){let{src:e}=this.$props,{$iosControls:n}=this._media,{poster:r}=this._media.$state;this.el&&fe(this.el,"display",n()?"none":null),this.$state.hidden.set(this._hasError()||!(e()||r())||n())}_isLoading(){let{loading:e,hidden:n}=this.$state;return!n()&&e()}_watchImg(){let e=this.$state.img();e&&(z(e,"load",this._onLoad.bind(this)),z(e,"error",this._onError.bind(this)))}_watchSrc(){let{poster:e}=this._media.$props,{canLoadPoster:n,providedPoster:r,inferredPoster:i}=this._media.$state,o=this.$props.src()||"",s=o||e()||i();this._prevSrc===r()&&r.set(o),this.$state.src.set(n()&&s.length?s:null),this._prevSrc=o}_watchAlt(){let{src:e}=this.$props,{alt:n}=this.$state,{poster:r}=this._media.$state;n.set(e()||r()?this.$props.alt():null)}_watchCrossOrigin(){let{crossOrigin:e}=this.$props,{crossOrigin:n}=this.$state,{crossOrigin:r,poster:i}=this._media.$state,o=e()!==null?e():r();n.set(/ytimg\.com|vimeo/.test(i()||"")?null:o===!0?"anonymous":o)}_onLoadStart(){let{loading:e,error:n}=this.$state,{canLoadPoster:r,poster:i}=this._media.$state;e.set(r()&&!!i()),n.set(null)}_onLoad(){let{loading:e,error:n}=this.$state;e.set(!1),n.set(null)}_onError(e){let{loading:n,error:r}=this.$state;n.set(!1),r.set(e)}};pf.props={src:null,alt:null,crossOrigin:null};pf.state=new hi({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});ff=class extends ce{constructor(){super(...arguments),this._invert=ee(null)}onSetup(){this._media=Ie(),this._watchTime();let{type:e}=this.$props;this.setAttributes({"data-type":e,"data-remainder":this._shouldInvert.bind(this)})}onAttach(e){e.hasAttribute("role")||R(this._watchRole.bind(this)),R(this._watchTime.bind(this))}onConnect(e){R(()=>{if(!this.$props.toggle()){this._invert.set(null);return}Os(e,this._onToggle.bind(this))})}_watchTime(){let{type:e,padHours:n,padMinutes:r,showHours:i}=this.$props,o=this._getSeconds(e()),s=this._media.$state.duration(),a=this._shouldInvert();if(!Number.isFinite(o+s)){this.$state.timeText.set("LIVE");return}let l=a?Math.max(0,s-o):o,c=Ns(l,{padHrs:n(),padMins:r(),showHrs:i()});this.$state.timeText.set((a?"-":"")+c)}_watchRole(){if(!this.el)return;let{toggle:e}=this.$props;fe(this.el,"role",e()?"timer":null),fe(this.el,"tabindex",e()?0:null)}_getSeconds(e){let{bufferedEnd:n,duration:r,currentTime:i}=this._media.$state;switch(e){case"buffered":return n();case"duration":return r();default:return i()}}_shouldInvert(){return this.$props.remainder()&&this._invert()!==!1}_onToggle(e){if(e.preventDefault(),this._invert()===null){this._invert.set(!this.$props.remainder());return}this._invert.set(n=>!n)}};ff.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1};ff.state=new hi({timeText:""});yK=Hi(),vK={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]},US=class extends ce{onSetup(){this._media=Ie(),Mn(yK,{...this.$props,previewTime:ee(0)})}};US.props=vK;Ka=class extends CY{},Dv=class extends Yc{},hf=class extends gv{},mf=class extends yv{},Fv=class extends sf{},gf=class extends Tv{},yf=class extends Sv{},vf=class extends Rv{},wf=class extends Ev{},bf=class extends Pv{},xf=class extends kv{},_f=class extends xv{},kf=class extends _v{},Tf=class extends Cv{},Sf=class extends wv{},Ef=class extends bv{},Pf=class extends of{},Cf=class extends Mo{},Rf=class extends Qc{},Mf=class extends uf{},If=class extends Iv{},Lf=class extends Gc{},Af=class extends Ba{},$f=class extends cf{},Of=class extends Io{},Df=class extends Lo{},Ff=class extends Ua{},Nf=class extends df{},Vf=class extends Lv{},zf=class extends Xc{},Bf=class extends Zc{},Uf=class extends Ov{},Hf=class extends $v{},Nv=class extends pf{},Jc=class extends Kc{},jf=class extends ff{},XD=Qe.forwardRef((t,e)=>{let{children:n,...r}=t,i=Qe.Children.toArray(n),o=i.find(bK);if(o){let s=o.props.children,a=i.map(l=>l===o?Qe.Children.count(s)>1?Qe.Children.only(null):Qe.isValidElement(s)?s.props.children:null:l);return Qe.createElement(HS,{...r,ref:e},Qe.isValidElement(s)?Qe.cloneElement(s,void 0,a):null)}return Qe.createElement(HS,{...r,ref:e},n)});XD.displayName="Slot";HS=Qe.forwardRef((t,e)=>{let{children:n,...r}=t;return Qe.isValidElement(n)?Qe.cloneElement(n,{...xK(r,n.props),ref:e?Se(e,n.ref):n.ref}):Qe.Children.count(n)>1?Qe.Children.only(null):null});HS.displayName="SlotClone";wK=({children:t})=>Qe.createElement(Qe.Fragment,null,t);_K=["button","div","span","img","video","audio"],ae=_K.reduce((t,e)=>{let n=Qe.forwardRef((r,i)=>{let{asChild:o,...s}=r;return Qe.createElement(o?XD:e,{...s,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});pD=Ka.state.record,kK=Object.keys(pD).reduce((t,e)=>({...t,[e](){return pD[e]}}),{})});var mF={};At(mF,{default:()=>CG});var CG,gF=nt(()=>{"use strict";"use client";CG='<path fill-rule="evenodd" clip-rule="evenodd" d="M6 7C5.63181 7 5.33333 7.29848 5.33333 7.66667V14.8667C5.33333 14.9403 5.39361 14.9999 5.46724 15.0009C10.8844 15.0719 15.2614 19.449 15.3325 24.8661C15.3334 24.9397 15.393 25 15.4667 25H26C26.3682 25 26.6667 24.7015 26.6667 24.3333V7.66667C26.6667 7.29848 26.3682 7 26 7H6ZM17.0119 22.2294C17.0263 22.29 17.0802 22.3333 17.1425 22.3333H23.3333C23.7015 22.3333 24 22.0349 24 21.6667V10.3333C24 9.96514 23.7015 9.66667 23.3333 9.66667H8.66667C8.29848 9.66667 8 9.96514 8 10.3333V13.1909C8 13.2531 8.04332 13.3071 8.10392 13.3214C12.5063 14.3618 15.9715 17.827 17.0119 22.2294Z" fill="currentColor"/> <path d="M13.2 25C13.2736 25 13.3334 24.9398 13.3322 24.8661C13.2615 20.5544 9.77889 17.0718 5.46718 17.0011C5.39356 16.9999 5.33333 17.0597 5.33333 17.1333V18.8667C5.33333 18.9403 5.39348 18.9999 5.4671 19.0015C8.67465 19.0716 11.2617 21.6587 11.3319 24.8662C11.3335 24.9399 11.393 25 11.4667 25H13.2Z" fill="currentColor"/> <path d="M5.33333 21.1333C5.33333 21.0597 5.39332 20.9998 5.46692 21.0022C7.57033 21.0712 9.26217 22.763 9.33114 24.8664C9.33356 24.94 9.27364 25 9.2 25H6C5.63181 25 5.33333 24.7015 5.33333 24.3333V21.1333Z" fill="currentColor"/>'});var eV=Jt((Ixe,J2)=>{"use strict";var Hee={aa:{name:"Afar",nativeName:"Afaraf"},ab:{name:"Abkhaz",nativeName:"\u0430\u04A7\u0441\u0443\u0430 \u0431\u044B\u0437\u0448\u04D9\u0430"},ae:{name:"Avestan",nativeName:"avesta"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},am:{name:"Amharic",nativeName:"\u12A0\u121B\u122D\u129B"},an:{name:"Aragonese",nativeName:"aragon\xE9s"},ar:{name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"},as:{name:"Assamese",nativeName:"\u0985\u09B8\u09AE\u09C0\u09AF\u09BC\u09BE"},av:{name:"Avaric",nativeName:"\u0430\u0432\u0430\u0440 \u043C\u0430\u0446\u04C0"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"az\u0259rbaycan dili"},ba:{name:"Bashkir",nativeName:"\u0431\u0430\u0448\u04A1\u043E\u0440\u0442 \u0442\u0435\u043B\u0435"},be:{name:"Belarusian",nativeName:"\u0431\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044F \u043C\u043E\u0432\u0430"},bg:{name:"Bulgarian",nativeName:"\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438 \u0435\u0437\u0438\u043A"},bi:{name:"Bislama",nativeName:"Bislama"},bm:{name:"Bambara",nativeName:"bamanankan"},bn:{name:"Bengali",nativeName:"\u09AC\u09BE\u0982\u09B2\u09BE"},bo:{name:"Tibetan",nativeName:"\u0F56\u0F7C\u0F51\u0F0B\u0F61\u0F72\u0F42"},br:{name:"Breton",nativeName:"brezhoneg"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},ca:{name:"Catalan",nativeName:"Catal\xE0"},ce:{name:"Chechen",nativeName:"\u043D\u043E\u0445\u0447\u0438\u0439\u043D \u043C\u043E\u0442\u0442"},ch:{name:"Chamorro",nativeName:"Chamoru"},co:{name:"Corsican",nativeName:"corsu"},cr:{name:"Cree",nativeName:"\u14C0\u1426\u1403\u152D\u140D\u140F\u1423"},cs:{name:"Czech",nativeName:"\u010Ce\u0161tina"},cu:{name:"Old Church Slavonic",nativeName:"\u0469\u0437\u044B\u043A\u044A \u0441\u043B\u043E\u0432\u0463\u043D\u044C\u0441\u043A\u044A"},cv:{name:"Chuvash",nativeName:"\u0447\u04D1\u0432\u0430\u0448 \u0447\u04D7\u043B\u0445\u0438"},cy:{name:"Welsh",nativeName:"Cymraeg"},da:{name:"Danish",nativeName:"Dansk"},de:{name:"German",nativeName:"Deutsch"},dv:{name:"Divehi",nativeName:"\u078B\u07A8\u0788\u07AC\u0780\u07A8"},dz:{name:"Dzongkha",nativeName:"\u0F62\u0FAB\u0F7C\u0F44\u0F0B\u0F41"},ee:{name:"Ewe",nativeName:"E\u028Begbe"},el:{name:"Greek",nativeName:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},es:{name:"Spanish",nativeName:"Espa\xF1ol"},et:{name:"Estonian",nativeName:"eesti"},eu:{name:"Basque",nativeName:"euskara"},fa:{name:"Persian",nativeName:"\u0641\u0627\u0631\u0633\u06CC"},ff:{name:"Fula",nativeName:"Fulfulde"},fi:{name:"Finnish",nativeName:"suomi"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fo:{name:"Faroese",nativeName:"F\xF8royskt"},fr:{name:"French",nativeName:"Fran\xE7ais"},fy:{name:"Western Frisian",nativeName:"Frysk"},ga:{name:"Irish",nativeName:"Gaeilge"},gd:{name:"Scottish Gaelic",nativeName:"G\xE0idhlig"},gl:{name:"Galician",nativeName:"galego"},gn:{name:"Guaran\xED",nativeName:"Ava\xF1e'\u1EBD"},gu:{name:"Gujarati",nativeName:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0"},gv:{name:"Manx",nativeName:"Gaelg"},ha:{name:"Hausa",nativeName:"\u0647\u064E\u0648\u064F\u0633\u064E"},he:{name:"Hebrew",nativeName:"\u05E2\u05D1\u05E8\u05D9\u05EA"},hi:{name:"Hindi",nativeName:"\u0939\u093F\u0928\u094D\u0926\u0940"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hr:{name:"Croatian",nativeName:"Hrvatski"},ht:{name:"Haitian",nativeName:"Krey\xF2l ayisyen"},hu:{name:"Hungarian",nativeName:"magyar"},hy:{name:"Armenian",nativeName:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},hz:{name:"Herero",nativeName:"Otjiherero"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Interlingue"},ig:{name:"Igbo",nativeName:"As\u1EE5s\u1EE5 Igbo"},ii:{name:"Nuosu",nativeName:"\uA188\uA320\uA4BF Nuosuhxop"},ik:{name:"Inupiaq",nativeName:"I\xF1upiaq"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"\xCDslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"\u1403\u14C4\u1483\u144E\u1450\u1466"},ja:{name:"Japanese",nativeName:"\u65E5\u672C\u8A9E"},jv:{name:"Javanese",nativeName:"basa Jawa"},ka:{name:"Georgian",nativeName:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8"},kg:{name:"Kongo",nativeName:"Kikongo"},ki:{name:"Kikuyu",nativeName:"G\u0129k\u0169y\u0169"},kj:{name:"Kwanyama",nativeName:"Kuanyama"},kk:{name:"Kazakh",nativeName:"\u049B\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456"},kl:{name:"Kalaallisut",nativeName:"kalaallisut"},km:{name:"Khmer",nativeName:"\u1781\u17C1\u1798\u179A\u1797\u17B6\u179F\u17B6"},kn:{name:"Kannada",nativeName:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1"},ko:{name:"Korean",nativeName:"\uD55C\uAD6D\uC5B4"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"\u0915\u0936\u094D\u092E\u0940\u0930\u0940"},ku:{name:"Kurdish",nativeName:"Kurd\xEE"},kv:{name:"Komi",nativeName:"\u043A\u043E\u043C\u0438 \u043A\u044B\u0432"},kw:{name:"Cornish",nativeName:"Kernewek"},ky:{name:"Kyrgyz",nativeName:"\u041A\u044B\u0440\u0433\u044B\u0437\u0447\u0430"},la:{name:"Latin",nativeName:"latine"},lb:{name:"Luxembourgish",nativeName:"L\xEBtzebuergesch"},lg:{name:"Ganda",nativeName:"Luganda"},li:{name:"Limburgish",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Ling\xE1la"},lo:{name:"Lao",nativeName:"\u0E9E\u0EB2\u0EAA\u0EB2\u0EA5\u0EB2\u0EA7"},lt:{name:"Lithuanian",nativeName:"lietuvi\u0173 kalba"},lu:{name:"Luba-Katanga",nativeName:"Kiluba"},lv:{name:"Latvian",nativeName:"latvie\u0161u valoda"},mg:{name:"Malagasy",nativeName:"fiteny malagasy"},mh:{name:"Marshallese",nativeName:"Kajin M\u0327aje\u013C"},mi:{name:"M\u0101ori",nativeName:"te reo M\u0101ori"},mk:{name:"Macedonian",nativeName:"\u043C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438 \u0458\u0430\u0437\u0438\u043A"},ml:{name:"Malayalam",nativeName:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02"},mn:{name:"Mongolian",nativeName:"\u041C\u043E\u043D\u0433\u043E\u043B \u0445\u044D\u043B"},mr:{name:"Marathi",nativeName:"\u092E\u0930\u093E\u0920\u0940"},ms:{name:"Malay",nativeName:"Bahasa Melayu"},mt:{name:"Maltese",nativeName:"Malti"},my:{name:"Burmese",nativeName:"\u1017\u1019\u102C\u1005\u102C"},na:{name:"Nauru",nativeName:"Dorerin Naoero"},nb:{name:"Norwegian Bokm\xE5l",nativeName:"Norsk bokm\xE5l"},nd:{name:"Northern Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"\u0928\u0947\u092A\u093E\u0932\u0940"},ng:{name:"Ndonga",nativeName:"Owambo"},nl:{name:"Dutch",nativeName:"Nederlands"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},nr:{name:"Southern Ndebele",nativeName:"isiNdebele"},nv:{name:"Navajo",nativeName:"Din\xE9 bizaad"},ny:{name:"Chichewa",nativeName:"chiChe\u0175a"},oc:{name:"Occitan",nativeName:"occitan"},oj:{name:"Ojibwe",nativeName:"\u140A\u14C2\u1511\u14C8\u142F\u14A7\u140E\u14D0"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"\u0B13\u0B21\u0B3C\u0B3F\u0B06"},os:{name:"Ossetian",nativeName:"\u0438\u0440\u043E\u043D \xE6\u0432\u0437\u0430\u0433"},pa:{name:"Panjabi",nativeName:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40"},pi:{name:"P\u0101li",nativeName:"\u092A\u093E\u0934\u093F"},pl:{name:"Polish",nativeName:"Polski"},ps:{name:"Pashto",nativeName:"\u067E\u069A\u062A\u0648"},pt:{name:"Portuguese",nativeName:"Portugu\xEAs"},qu:{name:"Quechua",nativeName:"Runa Simi"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"Ikirundi"},ro:{name:"Romanian",nativeName:"Rom\xE2n\u0103"},ru:{name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},sa:{name:"Sanskrit",nativeName:"\u0938\u0902\u0938\u094D\u0915\u0943\u0924\u092E\u094D"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"\u0938\u093F\u0928\u094D\u0927\u0940"},se:{name:"Northern Sami",nativeName:"Davvis\xE1megiella"},sg:{name:"Sango",nativeName:"y\xE2ng\xE2 t\xEE s\xE4ng\xF6"},si:{name:"Sinhala",nativeName:"\u0DC3\u0DD2\u0D82\u0DC4\u0DBD"},sk:{name:"Slovak",nativeName:"Sloven\u010Dina"},sl:{name:"Slovenian",nativeName:"sloven\u0161\u010Dina"},sm:{name:"Samoan",nativeName:"gagana fa'a Samoa"},sn:{name:"Shona",nativeName:"chiShona"},so:{name:"Somali",nativeName:"Soomaaliga"},sq:{name:"Albanian",nativeName:"Shqip"},sr:{name:"Serbian",nativeName:"\u0441\u0440\u043F\u0441\u043A\u0438 \u0458\u0435\u0437\u0438\u043A"},ss:{name:"Swati",nativeName:"SiSwati"},st:{name:"Southern Sotho",nativeName:"Sesotho"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sv:{name:"Swedish",nativeName:"Svenska"},sw:{name:"Swahili",nativeName:"Kiswahili"},ta:{name:"Tamil",nativeName:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD"},te:{name:"Telugu",nativeName:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41"},tg:{name:"Tajik",nativeName:"\u0442\u043E\u04B7\u0438\u043A\u04E3"},th:{name:"Thai",nativeName:"\u0E44\u0E17\u0E22"},ti:{name:"Tigrinya",nativeName:"\u1275\u130D\u122D\u129B"},tk:{name:"Turkmen",nativeName:"T\xFCrkmen\xE7e"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"T\xFCrk\xE7e"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"\u0442\u0430\u0442\u0430\u0440 \u0442\u0435\u043B\u0435"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uyghur",nativeName:"\u0626\u06C7\u064A\u063A\u06C7\u0631\u0686\u06D5\u200E"},uk:{name:"Ukrainian",nativeName:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},ur:{name:"Urdu",nativeName:"\u0627\u0631\u062F\u0648"},uz:{name:"Uzbek",nativeName:"\u040E\u0437\u0431\u0435\u043A"},ve:{name:"Venda",nativeName:"Tshiven\u1E13a"},vi:{name:"Vietnamese",nativeName:"Ti\u1EBFng Vi\u1EC7t"},vo:{name:"Volap\xFCk",nativeName:"Volap\xFCk"},wa:{name:"Walloon",nativeName:"walon"},wo:{name:"Wolof",nativeName:"Wollof"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"\u05D9\u05D9\u05B4\u05D3\u05D9\u05E9"},yo:{name:"Yoruba",nativeName:"Yor\xF9b\xE1"},za:{name:"Zhuang",nativeName:"Sa\u026F cue\u014B\u0185"},zh:{name:"Chinese",nativeName:"\u4E2D\u6587"},zu:{name:"Zulu",nativeName:"isiZulu"}};J2.exports=Hee});var LE=Jt((Lxe,oV)=>{"use strict";var ah=eV(),tV={},Lw={},nV=[],rV=[],iV=[];for(let t in ah){let{name:e,nativeName:n}=ah[t];tV[t]=Lw[e.toLowerCase()]=Lw[n.toLowerCase()]={code:t,name:e,nativeName:n},nV.push(t),rV.push(e),iV.push(n)}oV.exports=class Iw{static getLanguages(e=[]){return e.map(n=>Iw.validate(n)?Object.assign({},tV[n]):{code:n,name:"",nativeName:""})}static getName(e){return Iw.validate(e)?ah[e].name:""}static getAllNames(){return rV.slice()}static getNativeName(e){return Iw.validate(e)?ah[e].nativeName:""}static getAllNativeNames(){return iV.slice()}static getCode(e){return e=e.toLowerCase(),Lw.hasOwnProperty(e)?Lw[e].code:""}static getAllCodes(){return nV.slice()}static validate(e){return ah.hasOwnProperty(e)}}});var nz=Jt(Jw=>{"use strict";var Hte=H(),jte=Symbol.for("react.element"),Wte=Symbol.for("react.fragment"),qte=Object.prototype.hasOwnProperty,Yte=Hte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kte={key:!0,ref:!0,__self:!0,__source:!0};function tz(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)qte.call(e,r)&&!Kte.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jte,type:t,key:o,ref:s,props:i,_owner:Yte.current}}Jw.Fragment=Wte;Jw.jsx=tz;Jw.jsxs=tz});var X=Jt((Nke,rz)=>{"use strict";rz.exports=nz()});var qB=Jt((R$e,WB)=>{"use strict";var Dx=Object.prototype.hasOwnProperty,jB=Object.prototype.toString,NB=Object.defineProperty,VB=Object.getOwnPropertyDescriptor,zB=function(e){return typeof Array.isArray=="function"?Array.isArray(e):jB.call(e)==="[object Array]"},BB=function(e){if(!e||jB.call(e)!=="[object Object]")return!1;var n=Dx.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Dx.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Dx.call(e,i)},UB=function(e,n){NB&&n.name==="__proto__"?NB(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},HB=function(e,n){if(n==="__proto__")if(Dx.call(e,n)){if(VB)return VB(e,n).value}else return;return e[n]};WB.exports=function t(){var e,n,r,i,o,s,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=HB(a,n),i=HB(e,n),a!==i&&(u&&i&&(BB(i)||(o=zB(i)))?(o?(o=!1,s=r&&zB(r)?r:[]):s=r&&BB(r)?r:{},UB(a,{name:n,newValue:t(u,s,i)})):typeof i<"u"&&UB(a,{name:n,newValue:i}));return a}});var cU={};At(cU,{SRTParser:()=>Bx,default:()=>Rae});function Rae(){return new Bx}var Pae,Cae,Bx,uU=nt(()=>{"use strict";nm();Pae=/,/g,Cae="-->",Bx=class extends id{parse(e,n){if(e==="")this.a&&(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null),this.c=rd.None;else if(this.c===rd.Cue)this.a.text+=(this.a.text?`
`:"")+e;else if(e.includes(Cae)){let r=this.o(e,n);r&&(this.a=new aa(r[0],r[1],r[2].join(" ")),this.a.id=this.l,this.c=rd.Cue)}this.l=e}o(e,n){return super.o(e.replace(Pae,"."),n)}}});var a1={};At(a1,{ParseErrorBuilder:()=>Mae});var Mae,l1=nt(()=>{"use strict";nm();Mae={p(){return new _r({code:Ri.BadSignature,reason:"missing WEBVTT file header",line:1})},q(t,e){return new _r({code:Ri.BadTimestamp,reason:`cue start timestamp \`${t}\` is invalid on line ${e}`,line:e})},r(t,e){return new _r({code:Ri.BadTimestamp,reason:`cue end timestamp \`${t}\` is invalid on line ${e}`,line:e})},s(t,e,n){return new _r({code:Ri.BadTimestamp,reason:`cue end timestamp \`${e}\` is greater than start \`${t}\` on line ${n}`,line:n})},w(t,e,n){return new _r({code:Ri.BadSettingValue,reason:`invalid value for cue setting \`${t}\` on line ${n} (value: ${e})`,line:n})},v(t,e,n){return new _r({code:Ri.UnknownSetting,reason:`unknown cue setting \`${t}\` on line ${n} (value: ${e})`,line:n})},u(t,e,n){return new _r({code:Ri.BadSettingValue,reason:`invalid value for region setting \`${t}\` on line ${n} (value: ${e})`,line:n})},t(t,e,n){return new _r({code:Ri.UnknownSetting,reason:`unknown region setting \`${t}\` on line ${n} (value: ${e})`,line:n})},T(t,e){return new _r({code:Ri.BadFormat,reason:`format missing for \`${t}\` block on line ${e}`,line:e})}}});var gU={};At(gU,{SSAParser:()=>jx,default:()=>Iae});function u1(t){let e=parseInt(t.replace("&H",""),16);if(e>=0){let r=(e>>24&255^255)/255,i=e>>16&255,o=e>>8&255;return"rgba("+[e&255,o,i,r].join(",")+")"}return null}function d1(t,e,n){let r=Math.ceil(2*Math.PI*t),i="";for(let o=0;o<r;o++){let s=2*Math.PI*o/r;i+=t*Math.cos(s)+"px "+e*Math.sin(s)+"px 0 "+n+(o==r-1?"":",")}return i}function Iae(){return new jx}var Ux,dU,pU,Hx,fU,hU,mU,c1,jx,yU=nt(()=>{"use strict";nm();Ux=/^Format:[\s\t]*/,dU=/^Style:[\s\t]*/,pU=/^Dialogue:[\s\t]*/,Hx=/[\s\t]*,[\s\t]*/,fU=/\{[^}]+\}/g,hU=/\\N/g,mU=/^\[(.*)[\s\t]?Styles\]$/,c1=/^\[(.*)[\s\t]?Events\]$/,jx=class{constructor(){T(this,"f");T(this,"O",0);T(this,"a",null);T(this,"j",[]);T(this,"k",[]);T(this,"N",null);T(this,"d");T(this,"P",{})}async init(e){this.f=e,e.errors&&(this.d=(await Promise.resolve().then(()=>(l1(),a1))).ParseErrorBuilder)}parse(e,n){if(this.O)switch(this.O){case 1:if(e==="")this.O=0;else if(dU.test(e))if(this.N){let r=e.replace(dU,"").split(Hx);this.S(r)}else this.e(this.d?.T("Style",n));else Ux.test(e)?this.N=e.replace(Ux,"").split(Hx):c1.test(e)&&(this.N=null,this.O=2);break;case 2:if(e==="")this.Q();else if(pU.test(e))if(this.Q(),this.N){let r=e.replace(pU,"").split(Hx),i=this.U(r,n);i&&(this.a=i)}else this.e(this.d?.T("Dialogue",n));else this.a?this.a.text+=`
`+e.replace(fU,"").replace(hU,`
`):Ux.test(e)?this.N=e.replace(Ux,"").split(Hx):mU.test(e)?(this.N=null,this.O=1):c1.test(e)&&(this.N=null)}else e===""||(mU.test(e)?(this.N=null,this.O=1):c1.test(e)&&(this.N=null,this.O=2))}done(){return{metadata:{},cues:this.j,regions:[],errors:this.k}}Q(){this.a&&(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null)}S(e){let n="Default",r={},i,o="center",s="bottom",a,l=1.2,c,u,d=3,p=[];for(let f=0;f<this.N.length;f++){let h=this.N[f],g=e[f];switch(h){case"Name":n=g;break;case"Fontname":r["font-family"]=g;break;case"Fontsize":r["font-size"]=`calc(${g} / var(--overlay-height))`;break;case"PrimaryColour":let w=u1(g);w&&(r["--cue-color"]=w);break;case"BorderStyle":d=parseInt(g,10);break;case"BackColour":u=u1(g);break;case"OutlineColour":let m=u1(g);m&&(c=m);break;case"Bold":parseInt(g)&&(r["font-weight"]="bold");break;case"Italic":parseInt(g)&&(r["font-style"]="italic");break;case"Underline":parseInt(g)&&(r["text-decoration"]="underline");break;case"StrikeOut":parseInt(g)&&(r["text-decoration"]="line-through");break;case"Spacing":r["letter-spacing"]=g+"px";break;case"AlphaLevel":r.opacity=parseFloat(g);break;case"ScaleX":p.push(`scaleX(${parseFloat(g)/100})`);break;case"ScaleY":p.push(`scaleY(${parseFloat(g)/100})`);break;case"Angle":p.push(`rotate(${g}deg)`);break;case"Shadow":l=parseInt(g,10)*1.2;break;case"MarginL":r["--cue-width"]="auto",r["--cue-left"]=parseFloat(g)+"px";break;case"MarginR":r["--cue-width"]="auto",r["--cue-right"]=parseFloat(g)+"px";break;case"MarginV":a=parseFloat(g);break;case"Outline":i=parseInt(g,10);break;case"Alignment":let y=parseInt(g,10);switch(y>=4&&(s=y>=7?"top":"center"),y%3){case 1:o="start";break;case 2:o="center";break;case 3:o="end";break}}}if(r.R=s,r["--cue-white-space"]="normal",r["--cue-line-height"]="normal",r["--cue-text-align"]=o,s==="center"?(r["--cue-top"]="50%",p.push("translateY(-50%)")):r[`--cue-${s}`]=(a||0)+"px",d===1&&(r["--cue-padding-y"]="0"),(d===1||u)&&(r["--cue-bg-color"]=d===1?"none":u),d===3&&c&&(r["--cue-outline"]=`${i}px solid ${c}`),d===1&&typeof i=="number"){let f=u??"#000";r["--cue-text-shadow"]=[c&&d1(i*1.2,l*1.2,c),c?d1(i*(i/2),l*(i/2),f):d1(i,l,f)].filter(Boolean).join(", ")}p.length&&(r["--cue-transform"]=p.join(" ")),this.P[n]=r}U(e,n){let r=this.V(e),i=this.o(r.Start,r.End,n);if(!i)return;let o=new aa(i[0],i[1],""),s={...this.P[r.Style]||{}},a=r.Name?`<v ${r.Name}>`:"",l=s.R,c=r.MarginL&&parseFloat(r.MarginL),u=r.MarginR&&parseFloat(r.MarginR),d=r.MarginV&&parseFloat(r.MarginV);return c&&(s["--cue-width"]="auto",s["--cue-left"]=c+"px"),u&&(s["--cue-width"]="auto",s["--cue-right"]=u+"px"),d&&l!=="center"&&(s[`--cue-${l}`]=d+"px"),o.text=a+e.slice(this.N.length-1).join(", ").replace(fU,"").replace(hU,`
`),delete s.R,Object.keys(s).length&&(o.style=s),o}V(e){let n={};for(let r=0;r<this.N.length;r++)n[this.N[r]]=e[r];return n}o(e,n,r){let i=_l(e),o=_l(n);if(i!==null&&o!==null&&o>i)return[i,o];i===null&&this.e(this.d?.q(e,r)),o===null&&this.e(this.d?.r(n,r)),i!=null&&o!==null&&o>i&&this.e(this.d?.s(i,o,r))}e(e){if(e){if(this.k.push(e),this.f.strict)throw this.f.cancel(),e;this.f.onError?.(e)}}}});async function p1(t,e){let n=new ReadableStream({start(r){let i=t.split(Lae);for(let o of i)r.enqueue(o);r.close()}});return xU(n,e)}async function xU(t,e){let n=e?.type??"vtt",r;if(typeof n=="string")switch(n){case"srt":r=(await Promise.resolve().then(()=>(uU(),cU))).default;break;case"ssa":case"ass":r=(await Promise.resolve().then(()=>(yU(),gU))).default;break;default:r=(await Promise.resolve().then(function(){return Qae})).default}else r=n;let i,o=t.getReader(),s=r(),a=!!e?.strict||!!e?.errors;await s.init({strict:!1,...e,errors:a,type:n,cancel(){o.cancel(),i=s.done(!0)}});let l=1;for(;;){let{value:c,done:u}=await o.read();if(u){s.parse("",l),i=s.done(!1);break}s.parse(c,l),l++}return i}function Oae(t){let e=parseInt(t,10);return Number.isNaN(e)?null:e}function im(t){let e=parseInt(t.replace($ae,""),10);return!Number.isNaN(e)&&e>=0&&e<=100?e:null}function wU(t){if(!t.includes(vU))return null;let[e,n]=t.split(vU).map(im);return e!==null&&n!==null?[e,n]:null}function Dae(t){let e=parseFloat(t);return Number.isNaN(e)?null:e}function _l(t){let e=t.match(Kae);if(!e)return null;let n=e[1]?parseInt(e[1],10):0,r=parseInt(e[2],10),i=parseInt(e[3],10),o=e[4]?parseInt(e[4].padEnd(3,"0"),10):0,s=n*3600+r*60+i+o/1e3;return n<0||r<0||i<0||o<0||r>59||i>59?null:s}function Gae(){return new id}var Ri,_r,Lae,Aae,aa,Wx,vU,$ae,Fae,bU,Nae,od,Vae,zae,Bae,Uae,rm,Hae,jae,Wae,qae,Yae,Kae,rd,id,Qae,Xae,DOe,FOe,NOe,nm=nt(()=>{"use strict";Ri={LoadFail:0,BadSignature:1,BadTimestamp:2,BadSettingValue:3,BadFormat:4,UnknownSetting:5},_r=class extends Error{constructor(n){super(n.reason);T(this,"code");T(this,"line");this.code=n.code,this.line=n.line}},Lae=/\r?\n|\r/gm;Aae=window.VTTCue,aa=class extends Aae{constructor(){super(...arguments);T(this,"region",null);T(this,"vertical","");T(this,"snapToLines",!0);T(this,"line","auto");T(this,"lineAlign","start");T(this,"position","auto");T(this,"positionAlign","auto");T(this,"size",100);T(this,"align","center");T(this,"style")}},Wx=class{constructor(){T(this,"id","");T(this,"width",100);T(this,"lines",3);T(this,"regionAnchorX",0);T(this,"regionAnchorY",100);T(this,"viewportAnchorX",0);T(this,"viewportAnchorY",100);T(this,"scroll","")}},vU=",",$ae="%";Fae="WEBVTT",bU=",",Nae="%",od=/[:=]/,Vae=/^[\s\t]*(region|vertical|line|position|size|align)[:=]/,zae="NOTE",Bae="REGION",Uae=/^REGION:?[\s\t]+/,rm=/[\s\t]+/,Hae="-->",jae=/[\s\t]*-->[\s\t]+/,Wae=/start|center|end|left|right/,qae=/start|center|end/,Yae=/line-(?:left|right)|center|auto/,Kae=/^(?:(\d{1,2}):)?(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/,rd=(t=>(t[t.None=0]="None",t[t.Header=1]="Header",t[t.Cue=2]="Cue",t[t.Region=3]="Region",t[t.Note=4]="Note",t))(rd||{}),id=class{constructor(){T(this,"f");T(this,"c",0);T(this,"g",{});T(this,"h",{});T(this,"j",[]);T(this,"a",null);T(this,"b",null);T(this,"k",[]);T(this,"d");T(this,"l","")}async init(e){this.f=e,e.strict&&(this.c=1),e.errors&&(this.d=(await Promise.resolve().then(()=>(l1(),a1))).ParseErrorBuilder)}parse(e,n){if(e==="")this.a?(this.j.push(this.a),this.f.onCue?.(this.a),this.a=null):this.b?(this.h[this.b.id]=this.b,this.f.onRegion?.(this.b),this.b=null):this.c===1&&(this.i(e,n),this.f.onHeaderMetadata?.(this.g)),this.c=0;else if(this.c)switch(this.c){case 1:this.i(e,n);break;case 2:if(this.a){let r=this.a.text.length>0;!r&&Vae.test(e)?this.m(e.split(rm),n):this.a.text+=(r?`
`:"")+e}break;case 3:this.n(e.split(rm),n);break}else if(e.startsWith(zae))this.c=4;else if(e.startsWith(Bae))this.c=3,this.b=new Wx,this.n(e.replace(Uae,"").split(rm),n);else if(e.includes(Hae)){let r=this.o(e,n);r&&(this.a=new aa(r[0],r[1],""),this.a.id=this.l,this.m(r[2],n)),this.c=2}else n===1&&this.i(e,n);this.l=e}done(){return{metadata:this.g,cues:this.j,regions:Object.values(this.h),errors:this.k}}i(e,n){if(n>1){if(od.test(e)){let[r,i]=e.split(od);r&&(this.g[r]=(i||"").replace(rm,""))}}else e.startsWith(Fae)?this.c=1:this.e(this.d?.p())}o(e,n){let[r,i=""]=e.split(jae),[o,...s]=i.split(rm),a=_l(r),l=_l(o);if(a!==null&&l!==null&&l>a)return[a,l,s];a===null&&this.e(this.d?.q(r,n)),l===null&&this.e(this.d?.r(o,n)),a!=null&&l!==null&&l>a&&this.e(this.d?.s(a,l,n))}n(e,n){let r;for(let i=0;i<e.length;i++)if(od.test(e[i])){r=!1;let[o,s]=e[i].split(od);switch(o){case"id":this.b.id=s;break;case"width":let a=im(s);a!==null?this.b.width=a:r=!0;break;case"lines":let l=Oae(s);l!==null?this.b.lines=l:r=!0;break;case"regionanchor":let c=wU(s);c!==null?(this.b.regionAnchorX=c[0],this.b.regionAnchorY=c[1]):r=!0;break;case"viewportanchor":let u=wU(s);u!==null?(this.b.viewportAnchorX=u[0],this.b.viewportAnchorY=u[1]):r=!0;break;case"scroll":s==="up"?this.b.scroll="up":r=!0;break;default:this.e(this.d?.t(o,s,n))}r&&this.e(this.d?.u(o,s,n))}}m(e,n){let r;for(let i=0;i<e.length;i++)if(r=!1,od.test(e[i])){let[o,s]=e[i].split(od);switch(o){case"region":let a=this.h[s];a&&(this.a.region=a);break;case"vertical":s==="lr"||s==="rl"?(this.a.vertical=s,this.a.region=null):r=!0;break;case"line":let[l,c]=s.split(bU);if(l.includes(Nae)){let h=im(l);h!==null?(this.a.line=h,this.a.snapToLines=!1):r=!0}else{let h=Dae(l);h!==null?this.a.line=h:r=!0}qae.test(c)?this.a.lineAlign=c:c&&(r=!0),this.a.line!=="auto"&&(this.a.region=null);break;case"position":let[u,d]=s.split(bU),p=im(u);p!==null?this.a.position=p:r=!0,d&&Yae.test(d)?this.a.positionAlign=d:d&&(r=!0);break;case"size":let f=im(s);f!==null?(this.a.size=f,f<100&&(this.a.region=null)):r=!0;break;case"align":Wae.test(s)?this.a.align=s:r=!0;break;default:this.e(this.d?.v(o,s,n))}r&&this.e(this.d?.w(o,s,n))}}e(e){if(e){if(this.k.push(e),this.f.strict)throw this.f.cancel(),e;this.f.onError?.(e)}}};Qae=Object.freeze({__proto__:null,VTTBlock:rd,VTTParser:id,default:Gae,parseVTTTimestamp:_l}),Xae={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span",timestamp:"span"},DOe=new Set(Object.keys(Xae)),FOe=Symbol(0),NOe=Symbol(0)});var pce={};At(pce,{default:()=>g_});module.exports=Vj(pce);var wR=require("obsidian");function w_(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}function fm(t,e){let n={...t};for(let r of e)delete n[r];return n}var b_={bilibili:"https://www.bilibili.com",youtube:"https://www.youtube.com",vimeo:"https://www.vimeo.com",coursera:"https://www.coursera.org"},hm={bilibili:"bilibili",youtube:"YouTube",generic:"Website",vimeo:"Vimeo",coursera:"Coursera"},vR=t=>fm(t,["generic"]);var zj={bilibili:'<path fill-rule="evenodd" clip-rule="evenodd" d="M 20.736 14.88 C 18.513 12.735 18.513 9.173 20.736 7.028 C 22.849 4.99 26.197 4.99 28.311 7.028 L 40.096 18.397 C 40.43 18.72 40.715 19.075 40.949 19.453 L 58.772 19.453 C 59.006 19.075 59.291 18.72 59.625 18.397 L 71.41 7.028 C 73.523 4.99 76.871 4.99 78.984 7.028 C 81.208 9.173 81.208 12.735 78.984 14.88 L 74.244 19.453 L 77.778 19.453 C 90.051 19.453 100 29.402 100 41.675 L 100 72.262 C 100 84.534 90.051 94.484 77.778 94.484 L 22.222 94.484 C 9.949 94.484 0 84.534 0 72.262 L 0 41.675 C 0 29.402 9.949 19.453 22.222 19.453 L 25.477 19.453 L 20.736 14.88 Z M 22.222 30.172 C 16.086 30.172 11.111 35.146 11.111 41.283 L 11.111 72.654 C 11.111 78.79 16.086 83.765 22.222 83.765 L 77.778 83.765 C 83.914 83.765 88.889 78.79 88.889 72.654 L 88.889 41.283 C 88.889 35.146 83.914 30.172 77.778 30.172 L 22.222 30.172 Z M 27.778 51.805 C 27.778 48.737 30.265 46.25 33.333 46.25 C 36.402 46.25 38.889 48.737 38.889 51.805 L 38.889 56.772 C 38.889 59.84 36.402 62.328 33.333 62.328 C 30.265 62.328 27.778 59.84 27.778 56.772 L 27.778 51.805 Z M 66.667 46.25 C 63.598 46.25 61.111 48.737 61.111 51.805 L 61.111 56.772 C 61.111 59.84 63.598 62.328 66.667 62.328 C 69.735 62.328 72.222 59.84 72.222 56.772 L 72.222 51.805 C 72.222 48.737 69.735 46.25 66.667 46.25 Z" fill="currentColor"/>',vimeo:'<path d="M 99.952 26.773 C 99.508 36.508 92.705 49.844 79.555 66.768 C 65.962 84.445 54.458 93.287 45.044 93.287 C 39.218 93.287 34.286 87.905 30.254 77.134 C 27.566 67.263 24.872 57.4 22.185 47.53 C 19.194 36.765 15.986 31.377 12.552 31.377 C 11.806 31.377 9.182 32.952 4.701 36.09 L 0 30.027 C 4.932 25.692 9.799 21.352 14.59 17.005 C 21.175 11.321 26.113 8.324 29.412 8.022 C 37.193 7.276 41.983 12.6 43.783 23.988 C 45.725 36.283 47.069 43.929 47.822 46.919 C 50.066 57.117 52.535 62.21 55.229 62.21 C 57.325 62.21 60.47 58.898 64.663 52.287 C 68.849 45.671 71.093 40.636 71.395 37.183 C 71.993 31.473 69.749 28.612 64.663 28.612 C 62.264 28.612 59.795 29.158 57.261 30.252 C 62.174 14.15 71.562 6.324 85.426 6.768 C 95.701 7.07 100.544 13.739 99.952 26.773" fill="currentColor"/>',coursera:'<path d="M 2.8 50.013 C 2.8 22.278 25.472 0.001 53.82 0.001 C 71.135 -0.12 87.347 8.489 96.943 22.903 L 75.688 35.232 C 70.696 28.099 62.527 23.863 53.82 23.893 C 39.244 23.893 27.298 36.043 27.298 50.013 C 27.298 63.983 39.244 76.133 53.82 76.133 C 62.954 76.192 71.463 71.505 76.294 63.754 L 97.339 76.306 C 87.854 91.149 71.422 100.093 53.808 99.999 C 25.472 100.024 2.8 77.321 2.8 50.013 Z" fill="currentColor" />',youtube:null};Object.entries(zj).forEach(([t,e])=>{e&&(0,wR.addIcon)(t,e)});var y_=require("obsidian");function yt(t,e){let n=Object.keys(e).map(r=>Bj(t,r,e[r]));return n.length===1?n[0]:function(){n.forEach(r=>r())}}function Bj(t,e,n){let r=t[e],i=t.hasOwnProperty(e),o=n(r);return r&&Object.setPrototypeOf(o,r),Object.setPrototypeOf(s,o),t[e]=s,a;function s(...l){return o===r&&t[e]===s&&a(),o.apply(this,l)}function a(){t[e]===s&&(i?t[e]=r:delete t[e]),o!==r&&(o=r,Object.setPrototypeOf(s,r||Function))}}var Pr=require("obsidian");var xR=require("obsidian");var xd={video:["mp4","webm","ogv","mov","mkv"],audio:["mp3","wav","m4a","3gp","flac","ogg","oga","opus"]},Zo=t=>[...xd[t]],x_={video:new Set(xd.video),audio:new Set(xd.audio)};function $t(t){t=t.replace(/^\./,"").toLowerCase();for(let e of Uj)if(x_[e].has(t))return e;return null}function __(t){return x_.video.has(t)||x_.audio.has(t)}var bR=[...xd.video,...xd.audio],Uj=["video","audio"];function Te(t){return t?.file instanceof xR.TFile}function Mi(t,e){if(!t)return null;let n=$t(t.extension);return n?{type:n,file:t,hash:e}:null}function Et(t){if(Te(t))return`file:${t.file.path}`;let e=t.jsonState.source;if(e.includes("youtube.com")||e.includes("youtu.be")){let n=new URL(e),r=n.searchParams.get("v")||n.pathname.split("/").pop();if(r)return`url:https://www.youtube.com/watch?v=${r}`}return`url:${e}`}var CR=require("obsidian");function _R(t,e){let n=e.getCursor("to");console.debug("insert to cursor [to]",n.ch,n.line),e.replaceRange(t,n,n),e.setCursor(e.offsetToPos(e.posToOffset(n)+t.length))}function kR(t,e){let n=e.getCursor("from");console.debug("insert before cursor [from]",n.ch,n.line),e.replaceRange(t,n,n)}var kd=require("obsidian");var _d={main:/^(?<start>[\w:.]*)(?:,(?<end>[\w:.]+))?$/,npt_sec:/^\d+(?:\.\d+)?$/,npt_mmss:/^(?<mm>[0-5]\d):(?<ss>[0-5]\d(?:\.\d+)?)$/,npt_hhmmss:/^(?<hh>\d+):(?<mm>[0-5]\d):(?<ss>[0-5]\d(?:\.\d+)?)$/,npt_time:/^(?:npt:)?([\d.:]+)$/},Er=({start:t,end:e})=>t>=0&&e<0;function Dn(t){if(!t)return null;let n=new URLSearchParams(t.replace(/^#+/,"")).get("t");if(!n)return null;let r=n.match(_d.main);if(!r)return null;let{start:i,end:o}=r.groups;return Hj(i,o)}var Hj=(t,e)=>{let n=t||null,r=e??null,i,o;if(n&&r)i=mm(n),o=r==="e"?1/0:mm(r);else if(n)i=mm(n),o=-1;else if(r)i=-1,o=mm(r);else throw console.error("Missing startTime and endTime",t,e),new Error("Missing startTime and endTime");return i===null||o===null?null:{start:i,end:o}};function mm(t){let e=t.match(_d.npt_time);if(!e)return null;let n=e[1],r=n.match(_d.npt_sec);if(r)return Number(r[0]);let i=n.match(_d.npt_mmss);if(i){let{mm:s,ss:a}=i.groups;return Number(s)*60+Number(a)}let o=n.match(_d.npt_hhmmss);if(o){let{hh:s,mm:a,ss:l}=o.groups;return Number(s)*60*60+Number(a)*60+Number(l)}return null}function Jo(t){return t===0?"00:00":kd.moment.utc(kd.moment.duration({seconds:t}).as("milliseconds")).format("HH:mm:ss").replace(/^00:/,"")}function ER(t){return t===0?"DT0S":kd.moment.duration(t,"seconds").toISOString()}var TR=(t,e=2)=>{let n,r;return Number.isInteger(t)?n=t.toString():[n,r]=t.toFixed(e).split("."),n.length===1&&(n="0"+n),r?n+"."+r:n};function Td(t){return t.replace(/t=[^&]+/,"")}function k_(t,e){if(t=Td(t.trim().replace(/^#/,"")),!e)return t;let n=T_(e);return t?`${t}&${n}`:n??""}function PR(t,e){let n=Number.isNaN(t)?-1:t,r=Number.isNaN(e)?-1:e;return{start:n,end:r}}function T_(t){let{start:e,end:n}=t,r={get start(){return SR(e)},get end(){return SR(n)}};return Er(t)?`t=${r.start}`:e<0&&n>0?Number.isFinite(n)?`t=,${r.end}`:null:e>0&&n>0?`t=${r.start},${r.end}`:null}function SR(t){if(Number.isNaN(t)||t<0)throw new Error("durationInSecond must be positive");if(t===1/0)return"e";let e=kd.moment.duration(t,"seconds"),n=e.hours(),r=e.minutes(),i=e.seconds()+e.milliseconds()/1e3;if(n>0)return[n,...[r,i].map(o=>TR(o))].join(":");if(r>0)return[r,i].map(o=>TR(o)).join(":");if(i>0)return i.toFixed(2);throw new Error("durationInSecond must be positive")}function Il({timestamp:t,screenshot:e},{template:n,editor:r,insertBefore:i}){console.debug("insert timestamp",{timestamp:t,screenshot:e,template:n});let o=n.replace("{{TIMESTAMP}}",t);e&&(o=o.replace("{{SCREENSHOT}}",e)),console.debug("content to insert",o);try{console.debug(`inserting timestamp ${i?"before":"after"} cursor`),i?kR(o,r):_R(o,r)}catch(s){new CR.Notice("Failed to insert timestamp, see console for details"),console.error("Failed to insert timestamp",s)}}function es(t,e,{app:{fileManager:n},settings:{timestampOffset:r},duration:i=1/0}){t+=r,t<0?t=0:t>i&&(t=i);let o=Jo(t),s=t>0?{start:t,end:-1}:void 0,a=s?`#${T_(s)}`:"";if(Te(e)){let{file:l}=e;return c=>n.generateMarkdownLink(l,c,a,o).replace(/^!/,"")}else{let l=e.print(s);return()=>`[${o}](${l}${a})`}}var gm=class extends Pr.Component{constructor(n){super();this.plugin=n;T(this,"_recording",null);T(this,"_recordedEditors",new Map)}onload(){this.rec||console.info("recorder not found, skip patching for recorder note"),this.patch(),this.addCommand()}get app(){return this.plugin.app}get rec(){return this.app.internalPlugins.plugins["audio-recorder"]}get settings(){return this.plugin.settings.getState()}onunload(){this._recordedEditors.clear()}async onRecordingSaved(n){if(!this._recording)return;let{start:r}=this._recording;this._recording=null;let i=Mi(n,"");if(!i){new Pr.Notice("Failed to get media info from the saved file: "+n.path);return}for(let o of this._recordedEditors){let s=o[0],a=()=>{},l=o[1];if(!s.containerEl.isConnected){if(!l){new Pr.Notice("One of the note with timestamp is closed, the timestamp will not be updated");continue}if(s=qj(l,this.app),!s){let c=this.app.workspace.getLeaf("tab");if(await c.openFile(l,{state:{mode:"source"}}),!(c.view instanceof Pr.MarkdownView)){new Pr.Notice("Failed to open note for timestamp update: "+l.path);continue}s=c.view.editor,a=()=>c.detach()}}try{let c=s.getValue().replaceAll(jj(r),(u,d)=>{let p=parseInt(d,10);return es(p/1e3,i,{app:this.app,settings:this.plugin.settings.getState()})(l?.path??"")});s.setValue(c)}catch(c){console.error("failed to insert timestamp",c)}finally{a()}}this._recordedEditors.clear()}patch(){if(!this.rec.instance)return;let n=this.rec.instance,r=this,{vault:i,workspace:o}=this.app;this.register(yt(n,{saveRecording(s){return function(...a){o.getLeaf("split").setViewState({type:"empty",active:!0});let l=s.apply(this,a),c=()=>i.off("create",d),u=window.setTimeout(c,3e5),d=p=>{p instanceof Pr.TFile?r.onRecordingSaved(p):console.error("unexpected folder"),c(),window.clearTimeout(u)};return i.on("create",d),l}},startRecording(s){return function(...a){let l=s.apply(this,a),c=this.recorder;if(r._recording={start:Date.now()},console.debug("recording start called",r._recording.start),c&&c instanceof MediaRecorder){c.addEventListener("start",()=>{r._recording={start:Date.now()},console.debug("recording started in MediaRecorder",r._recording.start)},{once:!0});let u=()=>{r._recording&&(r._recording.end=Date.now(),console.debug("recording stopped in MediaRecorder",r._recording.end)),c.removeEventListener("stop",u),c.removeEventListener("error",u)};c.addEventListener("stop",u,{once:!0}),c.addEventListener("error",u,{once:!0})}return l}}}))}addCommand(){this.plugin.addCommand({id:"take-rec-timestamp",name:"Take timestamp on current recording",editorCheckCallback:(n,r,i)=>{if(!this._recording)return!1;if(n)return!0;let{start:o,notified:s}=this._recording;!s&&!i.file&&(new Pr.Notice("You've taken a timestamp for the recording, probably in canvas node, keep editor in foreground and in live preview mode. Otherwise, the dummy timestamp cannot be updated when recording is saved."),this._recording.notified=!0);let a=Wj(o,Date.now()-o);Il({timestamp:a},{editor:r,template:this.settings.timestampTemplate,insertBefore:this.settings.insertBefore}),this._recordedEditors.set(r,i.file)}})}};function jj(t){return new RegExp(`%%REC_${t}_(?<offset>\\d+)%%`,"g")}function Wj(t,e){return`%%REC_${t}_${e}%%`}function qj(t,e){let n=null;return e.workspace.iterateAllLeaves(r=>{r.view instanceof Pr.MarkdownView&&t.path===r.view.file?.path&&r.view.getMode()==="source"&&(n=r.view)}),n?.editor}var bM=I(Sd()),$m=require("obsidian");var Rd=class{constructor(t,e,n,r,i,o){T(this,"type",3);T(this,"name","");T(this,"prefix","");T(this,"value","");T(this,"suffix","");T(this,"modifier",3);this.type=t,this.name=e,this.prefix=n,this.value=r,this.suffix=i,this.modifier=o}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},Yj=/[$_\p{ID_Start}]/u,Kj=/[$_\u200C\u200D\p{ID_Continue}]/u,E_=".*";function Gj(t,e){return(e?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(t)}function $R(t,e=!1){let n=[],r=0;for(;r<t.length;){let i=t[r],o=function(s){if(!e)throw new TypeError(s);n.push({type:"INVALID_CHAR",index:r,value:t[r++]})};if(i==="*"){n.push({type:"ASTERISK",index:r,value:t[r++]});continue}if(i==="+"||i==="?"){n.push({type:"OTHER_MODIFIER",index:r,value:t[r++]});continue}if(i==="\\"){n.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(i==="{"){n.push({type:"OPEN",index:r,value:t[r++]});continue}if(i==="}"){n.push({type:"CLOSE",index:r,value:t[r++]});continue}if(i===":"){let s="",a=r+1;for(;a<t.length;){let l=t.substr(a,1);if(a===r+1&&Yj.test(l)||a!==r+1&&Kj.test(l)){s+=t[a++];continue}break}if(!s){o(`Missing parameter name at ${r}`);continue}n.push({type:"NAME",index:r,value:s}),r=a;continue}if(i==="("){let s=1,a="",l=r+1,c=!1;if(t[l]==="?"){o(`Pattern cannot start with "?" at ${l}`);continue}for(;l<t.length;){if(!Gj(t[l],!1)){o(`Invalid character '${t[l]}' at ${l}.`),c=!0;break}if(t[l]==="\\"){a+=t[l++]+t[l++];continue}if(t[l]===")"){if(s--,s===0){l++;break}}else if(t[l]==="("&&(s++,t[l+1]!=="?")){o(`Capturing groups are not allowed at ${l}`),c=!0;break}a+=t[l++]}if(c)continue;if(s){o(`Unbalanced pattern at ${r}`);continue}if(!a){o(`Missing pattern at ${r}`);continue}n.push({type:"REGEX",index:r,value:a}),r=l;continue}n.push({type:"CHAR",index:r,value:t[r++]})}return n.push({type:"END",index:r,value:""}),n}function OR(t,e={}){let n=$R(t);e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./");let r=`[^${Cr(e.delimiter)}]+?`,i=[],o=0,s=0,a="",l=new Set,c=v=>{if(s<n.length&&n[s].type===v)return n[s++].value},u=()=>c("OTHER_MODIFIER")??c("ASTERISK"),d=v=>{let b=c(v);if(b!==void 0)return b;let{type:k,index:_}=n[s];throw new TypeError(`Unexpected ${k} at ${_}, expected ${v}`)},p=()=>{let v="",b;for(;b=c("CHAR")??c("ESCAPED_CHAR");)v+=b;return v},f=v=>v,h=e.encodePart||f,g="",w=v=>{g+=v},m=()=>{g.length&&(i.push(new Rd(3,"","",h(g),"",3)),g="")},y=(v,b,k,_,S)=>{let C=3;switch(S){case"?":C=1;break;case"*":C=0;break;case"+":C=2;break}if(!b&&!k&&C===3){w(v);return}if(m(),!b&&!k){if(!v)return;i.push(new Rd(3,"","",h(v),"",C));return}let M;k?k==="*"?M=E_:M=k:M=r;let x=2;M===r?(x=1,M=""):M===E_&&(x=0,M="");let $;if(b?$=b:k&&($=o++),l.has($))throw new TypeError(`Duplicate name '${$}'.`);l.add($),i.push(new Rd(x,$,h(v),M,h(_),C))};for(;s<n.length;){let v=c("CHAR"),b=c("NAME"),k=c("REGEX");if(!b&&!k&&(k=c("ASTERISK")),b||k){let S=v??"";e.prefixes.indexOf(S)===-1&&(w(S),S=""),m();let C=u();y(S,b,k,"",C);continue}let _=v??c("ESCAPED_CHAR");if(_){w(_);continue}if(c("OPEN")){let S=p(),C=c("NAME"),M=c("REGEX");!C&&!M&&(M=c("ASTERISK"));let x=p();d("CLOSE");let $=u();y(S,C,M,x,$);continue}m(),d("END")}return i}function Cr(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function MR(t){return t&&t.ignoreCase?"ui":"u"}function Qj(t,e,n){return DR(OR(t,n),e,n)}function Al(t){switch(t){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function DR(t,e,n={}){n.delimiter??(n.delimiter="/#?"),n.prefixes??(n.prefixes="./"),n.sensitive??(n.sensitive=!1),n.strict??(n.strict=!1),n.end??(n.end=!0),n.start??(n.start=!0),n.endsWith="";let r=n.start?"^":"";for(let a of t){if(a.type===3){a.modifier===3?r+=Cr(a.value):r+=`(?:${Cr(a.value)})${Al(a.modifier)}`;continue}e&&e.push(a.name);let l=`[^${Cr(n.delimiter)}]+?`,c=a.value;if(a.type===1?c=l:a.type===0&&(c=E_),!a.prefix.length&&!a.suffix.length){a.modifier===3||a.modifier===1?r+=`(${c})${Al(a.modifier)}`:r+=`((?:${c})${Al(a.modifier)})`;continue}if(a.modifier===3||a.modifier===1){r+=`(?:${Cr(a.prefix)}(${c})${Cr(a.suffix)})`,r+=Al(a.modifier);continue}r+=`(?:${Cr(a.prefix)}`,r+=`((?:${c})(?:`,r+=Cr(a.suffix),r+=Cr(a.prefix),r+=`(?:${c}))*)${Cr(a.suffix)})`,a.modifier===0&&(r+="?")}let i=`[${Cr(n.endsWith)}]|$`,o=`[${Cr(n.delimiter)}]`;if(n.end)return n.strict||(r+=`${o}?`),n.endsWith.length?r+=`(?=${i})`:r+="$",new RegExp(r,MR(n));n.strict||(r+=`(?:${o}(?=${i}))?`);let s=!1;if(t.length){let a=t[t.length-1];a.type===3&&a.modifier===3&&(s=n.delimiter.indexOf(a)>-1)}return s||(r+=`(?=${o}|${i})`),new RegExp(r,MR(n))}var ns={delimiter:"",prefixes:"",sensitive:!0,strict:!0},Xj={delimiter:".",prefixes:"",sensitive:!0,strict:!0},Zj={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function Jj(t,e){return t.length?t[0]==="/"?!0:!e||t.length<2?!1:(t[0]=="\\"||t[0]=="{")&&t[1]=="/":!1}function FR(t,e){return t.startsWith(e)?t.substring(e.length,t.length):t}function e6(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}function NR(t){return!t||t.length<2?!1:t[0]==="["||(t[0]==="\\"||t[0]==="{")&&t[1]==="["}var VR=["ftp","file","http","https","ws","wss"];function zR(t){if(!t)return!0;for(let e of VR)if(t.test(e))return!0;return!1}function t6(t,e){if(t=FR(t,"#"),e||t==="")return t;let n=new URL("https://example.com");return n.hash=t,n.hash?n.hash.substring(1,n.hash.length):""}function n6(t,e){if(t=FR(t,"?"),e||t==="")return t;let n=new URL("https://example.com");return n.search=t,n.search?n.search.substring(1,n.search.length):""}function r6(t,e){return e||t===""?t:NR(t)?HR(t):UR(t)}function i6(t,e){if(e||t==="")return t;let n=new URL("https://example.com");return n.password=t,n.password}function o6(t,e){if(e||t==="")return t;let n=new URL("https://example.com");return n.username=t,n.username}function s6(t,e,n){if(n||t==="")return t;if(e&&!VR.includes(e))return new URL(`${e}:${t}`).pathname;let r=t[0]=="/";return t=new URL(r?t:"/-"+t,"https://example.com").pathname,r||(t=t.substring(2,t.length)),t}function a6(t,e,n){return BR(e)===t&&(t=""),n||t===""?t:jR(t)}function l6(t,e){return t=e6(t,":"),e||t===""?t:R_(t)}function BR(t){switch(t){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function R_(t){if(t==="")return t;if(/^[-+.A-Za-z0-9]*$/.test(t))return t.toLowerCase();throw new TypeError(`Invalid protocol '${t}'.`)}function c6(t){if(t==="")return t;let e=new URL("https://example.com");return e.username=t,e.username}function u6(t){if(t==="")return t;let e=new URL("https://example.com");return e.password=t,e.password}function UR(t){if(t==="")return t;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(t))throw new TypeError(`Invalid hostname '${t}'`);let e=new URL("https://example.com");return e.hostname=t,e.hostname}function HR(t){if(t==="")return t;if(/[^0-9a-fA-F[\]:]/g.test(t))throw new TypeError(`Invalid IPv6 hostname '${t}'`);return t.toLowerCase()}function jR(t){if(t===""||/^[0-9]*$/.test(t)&&parseInt(t)<=65535)return t;throw new TypeError(`Invalid port '${t}'.`)}function d6(t){if(t==="")return t;let e=new URL("https://example.com");return e.pathname=t[0]!=="/"?"/-"+t:t,t[0]!=="/"?e.pathname.substring(2,e.pathname.length):e.pathname}function p6(t){return t===""?t:new URL(`data:${t}`).pathname}function f6(t){if(t==="")return t;let e=new URL("https://example.com");return e.search=t,e.search.substring(1,e.search.length)}function h6(t){if(t==="")return t;let e=new URL("https://example.com");return e.hash=t,e.hash.substring(1,e.hash.length)}var $l,_n,Ht,Ye,pa,Ol,tr,Dl,Fl,Nl,vt,Ot,xm,WR,Md,P_,fa,Pd,Vl,vm,Fn,Rr,Id,C_,_m,qR,zl,wm,km,YR,Tm,KR,Bl,bm,rs,Ll,lo,da,Sm,GR,Em,QR,Pm,XR,Cm,ZR,Mr,Ii,Rm,JR,LR,m6=(LR=class{constructor(t){Z(this,vt);Z(this,xm);Z(this,Md);Z(this,fa);Z(this,Vl);Z(this,Fn);Z(this,Id);Z(this,_m);Z(this,zl);Z(this,km);Z(this,Tm);Z(this,Bl);Z(this,rs);Z(this,lo);Z(this,Sm);Z(this,Em);Z(this,Pm);Z(this,Cm);Z(this,Mr);Z(this,Rm);Z(this,$l,void 0);Z(this,_n,[]);Z(this,Ht,{});Z(this,Ye,0);Z(this,pa,1);Z(this,Ol,0);Z(this,tr,0);Z(this,Dl,0);Z(this,Fl,0);Z(this,Nl,!1);Ve(this,$l,t)}get result(){return A(this,Ht)}parse(){for(Ve(this,_n,$R(A(this,$l),!0));A(this,Ye)<A(this,_n).length;Ve(this,Ye,A(this,Ye)+A(this,pa))){if(Ve(this,pa,1),A(this,_n)[A(this,Ye)].type==="END"){if(A(this,tr)===0){V(this,Md,P_).call(this),V(this,lo,da).call(this)?V(this,vt,Ot).call(this,9,1):V(this,rs,Ll).call(this)?V(this,vt,Ot).call(this,8,1):V(this,vt,Ot).call(this,7,0);continue}else if(A(this,tr)===2){V(this,fa,Pd).call(this,5);continue}V(this,vt,Ot).call(this,10,0);break}if(A(this,Dl)>0)if(V(this,Em,QR).call(this))Ve(this,Dl,A(this,Dl)-1);else continue;if(V(this,Sm,GR).call(this)){Ve(this,Dl,A(this,Dl)+1);continue}switch(A(this,tr)){case 0:V(this,Id,C_).call(this)&&V(this,fa,Pd).call(this,1);break;case 1:if(V(this,Id,C_).call(this)){V(this,Rm,JR).call(this);let t=7,e=1;V(this,_m,qR).call(this)?(t=2,e=3):A(this,Nl)&&(t=2),V(this,vt,Ot).call(this,t,e)}break;case 2:V(this,zl,wm).call(this)?V(this,fa,Pd).call(this,3):(V(this,Bl,bm).call(this)||V(this,rs,Ll).call(this)||V(this,lo,da).call(this))&&V(this,fa,Pd).call(this,5);break;case 3:V(this,km,YR).call(this)?V(this,vt,Ot).call(this,4,1):V(this,zl,wm).call(this)&&V(this,vt,Ot).call(this,5,1);break;case 4:V(this,zl,wm).call(this)&&V(this,vt,Ot).call(this,5,1);break;case 5:V(this,Pm,XR).call(this)?Ve(this,Fl,A(this,Fl)+1):V(this,Cm,ZR).call(this)&&Ve(this,Fl,A(this,Fl)-1),V(this,Tm,KR).call(this)&&!A(this,Fl)?V(this,vt,Ot).call(this,6,1):V(this,Bl,bm).call(this)?V(this,vt,Ot).call(this,7,0):V(this,rs,Ll).call(this)?V(this,vt,Ot).call(this,8,1):V(this,lo,da).call(this)&&V(this,vt,Ot).call(this,9,1);break;case 6:V(this,Bl,bm).call(this)?V(this,vt,Ot).call(this,7,0):V(this,rs,Ll).call(this)?V(this,vt,Ot).call(this,8,1):V(this,lo,da).call(this)&&V(this,vt,Ot).call(this,9,1);break;case 7:V(this,rs,Ll).call(this)?V(this,vt,Ot).call(this,8,1):V(this,lo,da).call(this)&&V(this,vt,Ot).call(this,9,1);break;case 8:V(this,lo,da).call(this)&&V(this,vt,Ot).call(this,9,1);break;case 9:break;case 10:break}}A(this,Ht).hostname!==void 0&&A(this,Ht).port===void 0&&(A(this,Ht).port="")}},$l=new WeakMap,_n=new WeakMap,Ht=new WeakMap,Ye=new WeakMap,pa=new WeakMap,Ol=new WeakMap,tr=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,Nl=new WeakMap,vt=new WeakSet,Ot=function(t,e){var n,r,i;switch(A(this,tr)){case 0:break;case 1:A(this,Ht).protocol=V(this,Mr,Ii).call(this);break;case 2:break;case 3:A(this,Ht).username=V(this,Mr,Ii).call(this);break;case 4:A(this,Ht).password=V(this,Mr,Ii).call(this);break;case 5:A(this,Ht).hostname=V(this,Mr,Ii).call(this);break;case 6:A(this,Ht).port=V(this,Mr,Ii).call(this);break;case 7:A(this,Ht).pathname=V(this,Mr,Ii).call(this);break;case 8:A(this,Ht).search=V(this,Mr,Ii).call(this);break;case 9:A(this,Ht).hash=V(this,Mr,Ii).call(this);break;case 10:break}A(this,tr)!==0&&t!==10&&([1,2,3,4].includes(A(this,tr))&&[6,7,8,9].includes(t)&&((n=A(this,Ht)).hostname??(n.hostname="")),[1,2,3,4,5,6].includes(A(this,tr))&&[8,9].includes(t)&&((r=A(this,Ht)).pathname??(r.pathname=A(this,Nl)?"/":"")),[1,2,3,4,5,6,7].includes(A(this,tr))&&t===9&&((i=A(this,Ht)).search??(i.search=""))),V(this,xm,WR).call(this,t,e)},xm=new WeakSet,WR=function(t,e){Ve(this,tr,t),Ve(this,Ol,A(this,Ye)+e),Ve(this,Ye,A(this,Ye)+e),Ve(this,pa,0)},Md=new WeakSet,P_=function(){Ve(this,Ye,A(this,Ol)),Ve(this,pa,0)},fa=new WeakSet,Pd=function(t){V(this,Md,P_).call(this),Ve(this,tr,t)},Vl=new WeakSet,vm=function(t){return t<0&&(t=A(this,_n).length-t),t<A(this,_n).length?A(this,_n)[t]:A(this,_n)[A(this,_n).length-1]},Fn=new WeakSet,Rr=function(t,e){let n=V(this,Vl,vm).call(this,t);return n.value===e&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")},Id=new WeakSet,C_=function(){return V(this,Fn,Rr).call(this,A(this,Ye),":")},_m=new WeakSet,qR=function(){return V(this,Fn,Rr).call(this,A(this,Ye)+1,"/")&&V(this,Fn,Rr).call(this,A(this,Ye)+2,"/")},zl=new WeakSet,wm=function(){return V(this,Fn,Rr).call(this,A(this,Ye),"@")},km=new WeakSet,YR=function(){return V(this,Fn,Rr).call(this,A(this,Ye),":")},Tm=new WeakSet,KR=function(){return V(this,Fn,Rr).call(this,A(this,Ye),":")},Bl=new WeakSet,bm=function(){return V(this,Fn,Rr).call(this,A(this,Ye),"/")},rs=new WeakSet,Ll=function(){if(V(this,Fn,Rr).call(this,A(this,Ye),"?"))return!0;if(A(this,_n)[A(this,Ye)].value!=="?")return!1;let t=V(this,Vl,vm).call(this,A(this,Ye)-1);return t.type!=="NAME"&&t.type!=="REGEX"&&t.type!=="CLOSE"&&t.type!=="ASTERISK"},lo=new WeakSet,da=function(){return V(this,Fn,Rr).call(this,A(this,Ye),"#")},Sm=new WeakSet,GR=function(){return A(this,_n)[A(this,Ye)].type=="OPEN"},Em=new WeakSet,QR=function(){return A(this,_n)[A(this,Ye)].type=="CLOSE"},Pm=new WeakSet,XR=function(){return V(this,Fn,Rr).call(this,A(this,Ye),"[")},Cm=new WeakSet,ZR=function(){return V(this,Fn,Rr).call(this,A(this,Ye),"]")},Mr=new WeakSet,Ii=function(){let t=A(this,_n)[A(this,Ye)],e=V(this,Vl,vm).call(this,A(this,Ol)).index;return A(this,$l).substring(e,t.index)},Rm=new WeakSet,JR=function(){let t={};Object.assign(t,ns),t.encodePart=R_;let e=Qj(V(this,Mr,Ii).call(this),void 0,t);Ve(this,Nl,zR(e))},LR),S_=["protocol","username","password","hostname","port","pathname","search","hash"],ts="*";function IR(t,e){if(typeof t!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(t,e);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}function ao(t,e){return e?Cd(t):t}function Ed(t,e,n){let r;if(typeof e.baseURL=="string")try{r=new URL(e.baseURL),e.protocol===void 0&&(t.protocol=ao(r.protocol.substring(0,r.protocol.length-1),n)),!n&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&(t.username=ao(r.username,n)),!n&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&e.password===void 0&&(t.password=ao(r.password,n)),e.protocol===void 0&&e.hostname===void 0&&(t.hostname=ao(r.hostname,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&(t.port=ao(r.port,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&(t.pathname=ao(r.pathname,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&(t.search=ao(r.search.substring(1,r.search.length),n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&e.hash===void 0&&(t.hash=ao(r.hash.substring(1,r.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${e.baseURL}'.`)}if(typeof e.protocol=="string"&&(t.protocol=l6(e.protocol,n)),typeof e.username=="string"&&(t.username=o6(e.username,n)),typeof e.password=="string"&&(t.password=i6(e.password,n)),typeof e.hostname=="string"&&(t.hostname=r6(e.hostname,n)),typeof e.port=="string"&&(t.port=a6(e.port,t.protocol,n)),typeof e.pathname=="string"){if(t.pathname=e.pathname,r&&!Jj(t.pathname,n)){let i=r.pathname.lastIndexOf("/");i>=0&&(t.pathname=ao(r.pathname.substring(0,i+1),n)+t.pathname)}t.pathname=s6(t.pathname,t.protocol,n)}return typeof e.search=="string"&&(t.search=n6(e.search,n)),typeof e.hash=="string"&&(t.hash=t6(e.hash,n)),t}function Cd(t){return t.replace(/([+*?:{}()\\])/g,"\\$1")}function g6(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function y6(t,e){e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./"),e.sensitive??(e.sensitive=!1),e.strict??(e.strict=!1),e.end??(e.end=!0),e.start??(e.start=!0),e.endsWith="";let n=".*",r=`[^${g6(e.delimiter)}]+?`,i=/[$_\u200C\u200D\p{ID_Continue}]/u,o="";for(let s=0;s<t.length;++s){let a=t[s];if(a.type===3){if(a.modifier===3){o+=Cd(a.value);continue}o+=`{${Cd(a.value)}}${Al(a.modifier)}`;continue}let l=a.hasCustomName(),c=!!a.suffix.length||!!a.prefix.length&&(a.prefix.length!==1||!e.prefixes.includes(a.prefix)),u=s>0?t[s-1]:null,d=s<t.length-1?t[s+1]:null;if(!c&&l&&a.type===1&&a.modifier===3&&d&&!d.prefix.length&&!d.suffix.length)if(d.type===3){let p=d.value.length>0?d.value[0]:"";c=i.test(p)}else c=!d.hasCustomName();if(!c&&!a.prefix.length&&u&&u.type===3){let p=u.value[u.value.length-1];c=e.prefixes.includes(p)}c&&(o+="{"),o+=Cd(a.prefix),l&&(o+=`:${a.name}`),a.type===2?o+=`(${a.value})`:a.type===1?l||(o+=`(${r})`):a.type===0&&(!l&&(!u||u.type===3||u.modifier!==3||c||a.prefix!=="")?o+="*":o+=`(${n})`),a.type===1&&l&&a.suffix.length&&i.test(a.suffix[0])&&(o+="\\"),o+=Cd(a.suffix),c&&(o+="}"),a.modifier!==3&&(o+=Al(a.modifier))}return o}var Li,ha,Ul,jt,ii,Hl,AR,Mm=(AR=class{constructor(t={},e,n){Z(this,Li,void 0);Z(this,ha,{});Z(this,Ul,{});Z(this,jt,{});Z(this,ii,{});Z(this,Hl,!1);try{let r;if(typeof e=="string"?r=e:n=e,typeof t=="string"){let a=new m6(t);if(a.parse(),t=a.result,r===void 0&&typeof t.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");t.baseURL=r}else{if(!t||typeof t!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(r)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let i={ignoreCase:n.ignoreCase===!0};Ve(this,Li,Ed({pathname:ts,protocol:ts,username:ts,password:ts,hostname:ts,port:ts,search:ts,hash:ts},t,!0)),BR(A(this,Li).protocol)===A(this,Li).port&&(A(this,Li).port="");let s;for(s of S_){if(!(s in A(this,Li)))continue;let a={},l=A(this,Li)[s];switch(A(this,Ul)[s]=[],s){case"protocol":Object.assign(a,ns),a.encodePart=R_;break;case"username":Object.assign(a,ns),a.encodePart=c6;break;case"password":Object.assign(a,ns),a.encodePart=u6;break;case"hostname":Object.assign(a,Xj),NR(l)?a.encodePart=HR:a.encodePart=UR;break;case"port":Object.assign(a,ns),a.encodePart=jR;break;case"pathname":zR(A(this,ha).protocol)?(Object.assign(a,Zj,i),a.encodePart=d6):(Object.assign(a,ns,i),a.encodePart=p6);break;case"search":Object.assign(a,ns,i),a.encodePart=f6;break;case"hash":Object.assign(a,ns,i),a.encodePart=h6;break}try{A(this,ii)[s]=OR(l,a),A(this,ha)[s]=DR(A(this,ii)[s],A(this,Ul)[s],a),A(this,jt)[s]=y6(A(this,ii)[s],a),Ve(this,Hl,A(this,Hl)||A(this,ii)[s].some(c=>c.type===2))}catch{throw new TypeError(`invalid ${s} pattern '${A(this,Li)[s]}'.`)}}}catch(r){throw new TypeError(`Failed to construct 'URLPattern': ${r.message}`)}}test(t={},e){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return!1;try{typeof t=="object"?n=Ed(n,t,!1):n=Ed(n,IR(t,e),!1)}catch{return!1}let r;for(r of S_)if(!A(this,ha)[r].exec(n[r]))return!1;return!0}exec(t={},e){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return;try{typeof t=="object"?n=Ed(n,t,!1):n=Ed(n,IR(t,e),!1)}catch{return null}let r={};e?r.inputs=[t,e]:r.inputs=[t];let i;for(i of S_){let o=A(this,ha)[i].exec(n[i]);if(!o)return null;let s={};for(let[a,l]of A(this,Ul)[i].entries())if(typeof l=="string"||typeof l=="number"){let c=o[a+1];s[l]=c}r[i]={input:n[i]??"",groups:s}}return r}static compareComponent(t,e,n){let r=(a,l)=>{for(let c of["type","modifier","prefix","value","suffix"]){if(a[c]<l[c])return-1;if(a[c]!==l[c])return 1}return 0},i=new Rd(3,"","","","",3),o=new Rd(0,"","","","",3),s=(a,l)=>{let c=0;for(;c<Math.min(a.length,l.length);++c){let u=r(a[c],l[c]);if(u)return u}return a.length===l.length?0:r(a[c]??i,l[c]??i)};return!A(e,jt)[t]&&!A(n,jt)[t]?0:A(e,jt)[t]&&!A(n,jt)[t]?s(A(e,ii)[t],[o]):!A(e,jt)[t]&&A(n,jt)[t]?s([o],A(n,ii)[t]):s(A(e,ii)[t],A(n,ii)[t])}get protocol(){return A(this,jt).protocol}get username(){return A(this,jt).username}get password(){return A(this,jt).password}get hostname(){return A(this,jt).hostname}get port(){return A(this,jt).port}get pathname(){return A(this,jt).pathname}get search(){return A(this,jt).search}get hash(){return A(this,jt).hash}get hasRegExpGroups(){return A(this,Hl)}},Li=new WeakMap,ha=new WeakMap,Ul=new WeakMap,jt=new WeakMap,ii=new WeakMap,Hl=new WeakMap,AR);globalThis.URLPattern||(globalThis.URLPattern=Mm);var nr={video:"yn-url-video",audio:"yn-url-audio"},v6=new Set(Object.values(nr));function w6(t){return v6.has(t)}var ma="yn-embed",Ir="yn-webpage",Nn={video:"yn-file-video",audio:"yn-file-audio"},b6=new Set(Object.values(Nn));function x6(t){return b6.has(t)}function _6(t){return w6(t)||ma===t||Ir===t}function M_(t){return x6(t)||_6(t)}var eM=new Set([nr.video,Nn.video,Ir]);var wM=require("url"),Lm=require("obsidian");var tM=require("obsidian"),k6=tM.Platform.isWin?require("path/win32"):require("path/posix"),en=k6;function is(t){return oi(t).href}function oi(t){let e=new URL(t);return e.hash="",e}function rr(t){try{return new URL(t)}catch{return null}}function Ai(t){let e=new URL(t.href),n=Td(e.hash);return e.hash===n?t:e}function rM(t){return t.hostname==="b23.tv"?!1:t.hostname!=="bilibili.com"&&!t.hostname.endsWith(".bilibili.com")?null:t.pathname.startsWith("/video/")||t.pathname.startsWith("/bangumi/play/")?t.pathname.split("/").filter(Boolean).slice(-1)[0]:null}var iM=t=>rM(t)===null?null:"bilibili",oM=t=>{let e=rM(t);if(e===null)throw new Error("Invalid bilibili url");let n=Dn(t.hash),r=T6(t),i=oi(t);i.hostname==="bilibili.com"&&(i.hostname="www.bilibili.com"),i.searchParams.forEach((a,l,c)=>{l==="p"&&a!=="1"||c.delete(l)}),i.searchParams.sort();let o=i.searchParams.get("p")??"1",s=new URL(i);return!n&&r>0&&(n={start:r,end:-1}),n&&Er(n)&&(s=nM(s,n)),s=Ai(s),{source:s,cleaned:i,tempFrag:n,print:a=>nM(s,a).href,id:`${o}@${e}`||void 0}};function nM(t,e){let n=new URL(t.href);return n.searchParams.set("t",String(e.start)),n}function T6(t){let e=t.searchParams.get("t"),n=e?Number(e):NaN;return Number.isNaN(n)?NaN:n}var sM=t=>t.hostname==="www.coursera.org"?"coursera":null,aM=t=>{let e=oi(t);e.search="";let n=new URL(t);return{cleaned:e,source:Ai(n),tempFrag:Dn(t.hash)}};var lM=require("obsidian");var cM=t=>({type:"generic",cleaned:oi(t),source:Ai(t.protocol==="file:"?S6(t):t),tempFrag:Dn(t.hash)});function S6(t){let e=new URL(lM.Platform.resourcePathPrefix+t.href.substring(8));return e.search=Date.now().toString(),e}var uM=t=>t.hostname!=="vimeo.com"||!t.pathname.substring(1).match(/^\d+$/)?null:"vimeo",dM=t=>{let e=t.pathname.substring(1);if(!e.match(/^\d+$/))throw new Error("Invalid vimeo url");let n=oi(t);n.search="";let r=new URL(t);return{cleaned:n,source:Ai(r),tempFrag:Dn(t.hash),id:e}};function hM(t){let e=t.pathname.split("/");if(t.hostname==="youtu.be"&&e.length===2)return e[1];if(t.hostname==="www.youtube.com"||t.hostname==="youtube.com"){if(e.length===2&&e[1]==="watch")return t.searchParams.get("v");let n=["shorts","embed","v"];if(e.length===3&&n.includes(e[1]))return e[2]}return null}var mM=t=>hM(t)?"youtube":null,gM=t=>{let e=Dn(t.hash),n=I_(t.searchParams.get("t")),r=I_(t.searchParams.get("start")),i=I_(t.searchParams.get("end")),o=hM(t);if(!o)throw new Error("Invalid youtube url");let s=oi("https://www.youtube.com/watch");s.search=new URLSearchParams({v:o}).toString();let a=new URL(s);return t.searchParams.has("list")&&a.searchParams.set("list",t.searchParams.get("list")),e||(r>0&&i>0?e=PR(r,i):r>0?e={start:r,end:1/0}:i>0?e={start:0,end:i}:n>0&&(e={start:n,end:-1})),e&&(a=pM(a,e)),a=Ai(a),{source:a,cleaned:s,tempFrag:e,print:l=>pM(a,l).href,id:o}};function pM(t,e){let n=new URL(t),r=fM(e.start),i=fM(e.end);return Er(e)||e.start>0&&e.end>0&&r===i?n.searchParams.set("t",r):(e.start>0&&n.searchParams.set("start",r),e.end>0&&n.searchParams.set("end",i)),n}function fM(t){return t.toFixed(0)}function I_(t){if(!t)return NaN;let e=Number(t);if(!Number.isNaN(e))return e;let n=/^(?:(?<h>\d+)h)?(?:(?<m>\d+)m)?(?:(?<s>\d+)s)?$/,r=t.match(n);if(!r)return NaN;let{h:i,m:o,s}=r.groups,a=i?Number(i):0,l=o?Number(o):0,c=s?Number(s):0;return a*3600+l*60+c}function yM(t){let e=E6.reduce((r,i)=>r??i(t),null)??"generic",n=P6[e](t);return{type:e,resolved:n}}var E6=[iM,mM,uM,sM],P6={bilibili:oM,youtube:gM,vimeo:dM,coursera:aM,generic:cM};function vM(t,{getUrlMapping:e},n){if(!t)return null;if(t.protocol!=="yn:")return o(t);let[,,r]=t.pathname.split("/"),i=e(r);if(!i)return null;return o(t.href.replace(`yn://${r}/`,i.replace(/\/*$/,"/")),t);function o(s,a){let l=wt.create(s,a);if(!l)return null;if(!l.isFileUrl)return l;let c=l.getVaultFile(n.vault);return c?$t(c.extension)===null?null:Mi(c,l.hash):l.inferredType===null?null:l}}var C6=new Set(["https:","http:","file:"]),$i,Im=class Im extends URL{constructor(n,r){super(n);Z(this,$i,void 0);T(this,"type");T(this,"ynUrl");if(this.ynUrl=r?new URL(r):null,!C6.has(this.protocol))throw new Error("Unsupported protocol: "+this.protocol);let{type:i,resolved:o}=yM(this);Ve(this,$i,o),this.type=i}static create(n,r){try{return new Im(n,r)}catch{return null}}get inferredType(){let n=this.pathname.split(".").pop();return n?$t(n):null}get isFileUrl(){return this.protocol==="file:"}get filePath(){if(this.isFileUrl)try{return(0,wM.fileURLToPath)(this)}catch(n){return console.error("Failed to convert file url to path",n,this.href),null}return null}getVaultFile(n){if(!(n.adapter instanceof Lm.FileSystemAdapter))return null;let r=this.filePath,i=n.adapter.getBasePath();if(!r)return null;let o=en.relative(i,r);if(/^\.\.[/\\]/.test(o)||en.isAbsolute(o))return null;let s=(0,Lm.normalizePath)(o);return n.getFileByPath(s)}compare(n){return!!n&&this.jsonState.source===n.jsonState.source}print(n){return this.ynUrl?is(this.ynUrl.href):n?A(this,$i).print?A(this,$i).print(n):this.jsonState.source:this.jsonState.source}get tempFrag(){return Dn(this.hash)}setTempFrag(n){let r=this.clone(),i=Td(this.hash);return n?r.hash=k_(i,n):r.hash=i,r}clone(){return new Im(this,this.ynUrl??void 0)}get readableHref(){return decodeURI(this.href)}get source(){return A(this,$i).source}get cleaned(){return A(this,$i).cleaned}get id(){return A(this,$i).id}get jsonState(){return{source:is(this.ynUrl??this.cleaned),hash:k_(this.hash,A(this,$i).tempFrag)}}};$i=new WeakMap;var wt=Im;var Ld,L_,Am=class extends $m.Component{constructor(n){super();this.plugin=n;Z(this,Ld);T(this,"matcher");V(this,Ld,L_).call(this)}onload(){let n=(0,$m.debounce)(()=>V(this,Ld,L_).call(this),500,!0);this.register(this.plugin.settings.subscribe((r,i)=>{r.linkHandler!==i.linkHandler&&n()}))}getPreferred(n,r){let i=this.getSupported(n),o=null;for(let s of i)for(let a of this.matcher.get(s)){if(!a.test(n))continue;let l=R6(a);(!o||l>o.specifity)&&(o={type:s,specifity:l})}return o?.type??(r?null:i[0])}setPreferred(n,r){this.plugin.settings.getState().setLinkHandler(n,r)}getSupported(n){if(!(n instanceof wt))return[Nn[n.type]];if(n.type==="generic")switch(n.inferredType){case"video":return[nr.video,Ir];case"audio":return[nr.audio,Ir];default:return[Ir,nr.video,nr.audio]}switch(n.type){case"youtube":case"vimeo":return[Ir,ma];case"bilibili":case"coursera":return[Ir];default:(0,bM.assertNever)(n.type)}}};Ld=new WeakSet,L_=function(){this.matcher=new Map(Object.entries(this.plugin.settings.getState().linkHandler).map(([n,r])=>[n,r.map(i=>new Mm(i))]))};function R6(t){return["protocol","username","password","hostname","port","pathname","search","hash"].reduce((e,n)=>{let r=t[n];return e+(r!=="*"?1:0)},0)}var Pt=require("obsidian");function jl(t,e){let n="target"in t?t.target:t;if(!n.instanceOf?.(HTMLElement))return;let r=n.getBoundingClientRect();return e.setParentElement(n).showAtPosition({x:r.x,y:r.bottom,width:r.width,overlap:!0,left:!0},n.doc)}var A_="yn-port-ready",xM="__YN_PORT_MESSAGE__",Wl=t=>`persist:yn-player-${t}`;var _M=require("obsidian");function Ad(t){let e=require("@electron/remote"),n=Wl(t);return n?e.session.fromPartition(n):(console.log("No partition, skip modifying session"),null)}var M6;function ga(){return _M.Platform.isDesktopApp?M6??(M6=require("fs/promises")):null}async function kM(t){let e=ga();if(!e)throw new Error("fs not available");return await e.readFile(t,"utf-8")}function TM(t){return require("@electron/remote").webContents.fromId(t)}function Om(){return require("@electron/remote").dialog}function SM(t){return require("@electron/remote").require(t)}function EM(){return require("@electron/remote").app.getPath("userData")}var os=class extends Pt.Modal{constructor(n){super(n);T(this,"navEl",this.contentEl.insertAdjacentElement("beforebegin",createDiv({cls:"yn-login-nav"})));T(this,"webview",createEl("webview",{attr:{partition:this.partition,allowpopups:""}}));T(this,"backButton",new Pt.ButtonComponent(this.navEl).setIcon("arrow-left").setTooltip("Back").setClass("yn-login-back").setDisabled(!0).onClick(()=>{try{this.webview.goBack()}catch(n){new Pt.Notice("Failed to go back, see console for details"),console.error("err go back",n)}}));T(this,"forwardButton",new Pt.ButtonComponent(this.navEl).setIcon("arrow-right").setTooltip("Forward").setClass("yn-login-forward").setDisabled(!0).onClick(()=>{try{this.webview.goForward()}catch(n){new Pt.Notice("Failed to go forward, see console for details"),console.error("err go forward",n)}}));T(this,"refreshButton",new Pt.ButtonComponent(this.navEl).setIcon("rotate-ccw").setTooltip("Refresh").setClass("yn-login-refresh").setDisabled(!0).onClick(()=>{try{this.webview.reload()}catch(n){new Pt.Notice("Failed to refresh, see console for details"),console.error("err refresh",n)}}));T(this,"addressBarForm",this.navEl.createEl("form"));T(this,"addressBar",new Pt.TextComponent(this.addressBarForm).then(n=>{n.inputEl.type="url",n.inputEl.placeholder="https://example.com",n.inputEl.classList.add("yn-login-address")}));T(this,"addressSubmit",new Pt.ButtonComponent(this.addressBarForm).setIcon("arrow-right-circle").then(n=>n.buttonEl.type="submit"));T(this,"moreOptionsButton",new Pt.ButtonComponent(this.navEl).setIcon("more-horizontal").setTooltip("More options").setClass("yn-login-more").onClick(n=>{let r=new Pt.Menu;this.onMoreOptions(r),jl(n,r)}));T(this,"callbacks",[]);T(this,"handledWebcontents",new Set);this.containerEl.addClasses(["yn-login-modal"]),this.titleEl.style.display="none",this.buildWelcome()}get partition(){return Wl(this.app.appId)}buildWelcome(){this.contentEl.empty(),this.contentEl.createEl("h1").setText("Login");let n=this.contentEl.createEl("main");n.createEl("p").setText("You can login to sites, change preferences and more, just as you would in a browser."),n.createEl("p").setText("To open a website, you can:");let r=n.createEl("ul");r.createEl("li").setText("Enter the site address in the address bar");let i=r.createEl("li");i.setText("Select from a list of "),new Pt.DropdownComponent(i).addOptions({...vR(hm),".":"supported websites..."}).setValue(".").onChange(o=>{o in b_&&this.setUrl(b_[o])})}getSession(){return Ad(this.app.appId)}onMoreOptions(n){n.addItem(r=>r.setTitle("Clear cache").setSection("clear").setIcon("trash").onClick(async()=>{if(window.confirm("Are you sure you want to clear the website cache? All login sessions and preferences will be lost."))try{await this.getSession()?.clearCache(),new Pt.Notice("Cache cleared")}catch(o){new Pt.Notice("Failed to clear cache, see console for details"),console.error("err clear cache",o)}}))}setUrl(n){this.initWebview(),this.webview.src=n,this.addressBar.setValue(n)}register(n){this.callbacks.push(n)}registerWebviewEvent(n,r){this.webview.addEventListener(n,r),this.register(()=>this.webview.removeEventListener(n,r))}onClose(){for(let n of this.callbacks)n();this.containerEl.empty()}initWebview(){this.webview.isConnected||(this.registerWebviewEvent("will-navigate",()=>{this.addressBar.setValue(this.webview.getURL())}),this.contentEl.empty(),this.contentEl.appendChild(this.webview),this.backButton.setDisabled(!1),this.forwardButton.setDisabled(!1),this.refreshButton.setDisabled(!1),this.registerWebviewEvent("dom-ready",()=>{if(this.handledWebcontents.has(this.webview.getWebContentsId()))return;let n=this.webview.getWebContentsId();this.handledWebcontents.add(n),TM(n)?.setWindowOpenHandler(({url:i,disposition:o})=>((o==="new-window"||o==="foreground-tab"||o==="default")&&this.setUrl(i),{action:"deny"}))}))}onOpen(){this.addressBarForm.onsubmit=n=>{n.preventDefault();let r=this.addressBar.getValue();r&&this.setUrl(r)}}};function PM(){this.addCommand({id:"login",name:"Login website",callback:()=>{new os(this.app).open()}})}var m4=require("obsidian");var qu=require("obsidian");var Dm=require("obsidian"),ql=class t extends Dm.Modal{constructor(n,r,i){super(n);this.onSubmit=r;this.onExit=i;this.containerEl.addClass("yn-playback-prompt"),this.onSubmit=r}static run(){return new Promise(n=>{new t(app,i=>n(Number(i)),()=>n(null)).open()})}onOpen(){let{contentEl:n,titleEl:r}=this;r.setText("Playback Speed");let i=n.createEl("form",{},o=>{o.createEl("input",{type:"number",placeholder:"Enter a number between 0 and 10",attr:{min:.1,max:10,step:.1,width:100,required:!0,name:"playback-speed"}}),o.createEl("button",{attr:{type:"submit"},text:"Submit"})});i.oninvalid=o=>{o.preventDefault(),new Dm.Notice("Invalid playback rate")},i.onsubmit=o=>{o.preventDefault();let s=new FormData(i);this.onSubmit(s.get("playback-speed").toString()),this.close()}}onClose(){let{contentEl:n}=this;n.empty(),this.onExit()}};var Lr=[.25,.5,.75,1,1.25,1.5,2,3,5,10];function CM(t,e){let n=e.state.playbackRate,r=!Lr.includes(n),i=t.setTitle(I6(n)).setIcon("gauge").setSection("yn-player").setSubmenu();Lr.forEach(o=>i.addItem(s=>s.setTitle(`${o}x`).setChecked(o===n).onClick(()=>{e.playbackRate=o}))),i.addItem(o=>o.setTitle(L6(n)).setChecked(r).onClick(async()=>{let s=await ql.run();s&&(e.playbackRate=s)}))}function I6(t){let e=new DocumentFragment;return e.appendText("Speed "),e.createEl("code",{text:`(${t}x)`}),e}function L6(t){let e=new DocumentFragment;return e.appendText("Custom"),Lr.includes(t)?e.appendText("..."):(e.appendText(" "),e.createEl("code",{text:`(${t}x)`})),e}var fx=require("obsidian");var Wu=require("obsidian");var RM=require("obsidian");function Yl(t){let e=RM.Keymap.isModEvent(t);return ss(e)}function ss(t){return t===!0?"tab":t}var ox=require("obsidian"),r4=I(Tc());var Qr=I(H());var c$={},l$=t=>{let e,n=new Set,r=(u,d)=>{let p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){let f=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(h=>h(e,f))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(c$.env?c$.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},Sc=t=>t?l$(t):l$;var b$=I(H(),1),x$=I(y$(),1),w$={},{useDebugValue:f9}=b$.default,{useSyncExternalStoreWithSelector:h9}=x$.default,v$=!1,m9=t=>t;function Ep(t,e=m9,n){(w$.env?w$.env.MODE:void 0)!=="production"&&n&&!v$&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),v$=!0);let r=h9(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return f9(r),r}function sy(t){let e=new URLSearchParams(t.replace(/^#+/,"")),n=!e.has("noctrl")&&!e.has("controls")?void 0:e.has("controls");return{loop:e.has("loop")?!0:void 0,muted:e.has("mute")?!0:void 0,autoplay:e.has("play")?!0:void 0,controls:n,volume:g9(e.get("vol")),tempFragment:Dn(t)}}function g9(t){if(!t)return;let e=parseInt(t,10);if(!isNaN(e)&&e>=0&&e<=100)return e/100}var _$=()=>({emit(t,...e){for(let n=this.events[t]||[],r=0,i=n.length;r<i;r++)n[r](...e)},events:{},on(t,e){var n;return((n=this.events)[t]||(n[t]=[])).push(e),()=>{this.events[t]=this.events[t]?.filter(r=>e!==r)}}});function ay(){let t=_$();return t.once=function(n,r){let i=this.on(n,(...o)=>{i(),r(...o)});return i},t}function k$(t){let e=t;return typeof e.id=="string"&&typeof e.invoke=="string"}function T$(t,...e){return{id:y9(),invoke:t,args:e}}function S$(t){return typeof t.id=="string"}function E$(t){return typeof t.send=="string"}function P$(t,e){return{send:t,payload:e}}function y9(){return Math.random().toString(36).substring(2,9)}var ly=class extends Error{constructor(e){super(`no handler for ${e}`)}};var cy=class{constructor(){T(this,"port",null);T(this,"actions",Object.create(null));T(this,"emitter",ay());T(this,"methods",new Proxy({},{get:(e,n)=>{if(typeof n=="symbol")throw new Error("Remote invoke does not support symbol property");return e[n]??(e[n]=(...r)=>this.invoke(n.toString(),r))}}))}load(e){this.port&&this.port.close(),this.port=e;let n=({data:r})=>{this.onMessage(r)};e.addEventListener("message",n),e.start(),e.postMessage(A_)}unload(){this.port?.close(),this.emitter.events={}}onMessage(e){e===A_?this.emitter.emit("ready"):k$(e)?this.response(e):S$(e)?this.emitter.emit("resp",e.id,e.payload,e.error):E$(e)&&this.emitter.emit(`send:${e.send}`,{type:e.send,payload:e.payload})}invoke(e,n,{transfer:r,timeout:i=1e3}={}){if(!this.port)throw new Error("port not loaded");let o=T$(e,...n);return this.port.postMessage(o,{transfer:r}),new Promise((s,a)=>{let l=-1,c=this.emitter.on("resp",(u,d,p)=>{if(u===o.id)if(c(),window.clearTimeout(l),p){let{message:f,stack:h}=p,g=new Error(f);g.stack=h,a(g)}else s(d)});i>0&&i<1/0&&(l=window.setTimeout(()=>{c(),console.error(`${e} timeout after ${i}ms`),a(new xo(i))},i))})}handle(e,n){return this.actions[e]=n,()=>{this.actions[e]===n&&delete this.actions[e]}}send(e,n,r){if(!this.port)throw new Error("port not loaded");let i=P$(e,n);this.port.postMessage(i,{transfer:r})}on(e,n){return this.emitter.on(`send:${e}`,n)}once(e,n){return this.emitter.once(`send:${e}`,n)}onReady(e,{once:n=!1}={}){return n?this.emitter.once("ready",e):this.emitter.on("ready",e)}async response({id:e,invoke:n,args:r=[]}){if(!this.port)throw new Error("port not loaded");let i={id:e,payload:null};try{let o=this.actions[n];if(!o)throw new ly(n);let s=await o(...r);s===void 0?this.port.postMessage(i):(i.payload=await s.value,this.port.postMessage(i,{transfer:s.transfer}))}catch(o){console.error("port messaging error",o),o instanceof Error?i.error={message:o.message,stack:o.stack}:i.error={message:String(o)},this.port.postMessage(i)}}},xo=class extends Error{constructor(e){super(`timeout after ${e}ms`)}};var v9=()=>{},Pp=v9;In();In();Yn();Yn();var ie=I(H(),1);var O=I(H(),1);In();Yn();var eF=I(bo(),1);function Yi(){return _y(Wf)}var TK=ve(_f,{domEventsRegex:/^onMedia/}),tF=O.forwardRef(({children:t,...e},n)=>O.createElement(TK,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));tF.displayName="AirPlayButton";var SK=ve(xf,{domEventsRegex:/^onMedia/}),jv=O.forwardRef(({children:t,...e},n)=>O.createElement(SK,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));jv.displayName="PlayButton";var EK=ve(gf,{domEventsRegex:/^onMedia/}),sE=O.forwardRef(({children:t,...e},n)=>O.createElement(EK,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));sE.displayName="CaptionButton";var PK=ve(yf,{domEventsRegex:/^onMedia/}),Wv=O.forwardRef(({children:t,...e},n)=>O.createElement(PK,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));Wv.displayName="FullscreenButton";var CK=ve(wf,{domEventsRegex:/^onMedia/}),qv=O.forwardRef(({children:t,...e},n)=>O.createElement(CK,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));qv.displayName="MuteButton";var RK=ve(bf,{domEventsRegex:/^onMedia/}),aE=O.forwardRef(({children:t,...e},n)=>O.createElement(RK,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));aE.displayName="PIPButton";var MK=ve(Tf,{domEventsRegex:/^onMedia/}),Gf=O.forwardRef(({children:t,...e},n)=>O.createElement(MK,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));Gf.displayName="SeekButton";var IK=ve(vf,{domEventsRegex:/^onMedia/}),nF=O.forwardRef(({children:t,...e},n)=>O.createElement(IK,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));nF.displayName="LiveButton";var lE=ve(Lf),LK=ve(Cf,{events:["onDragStart","onDragEnd","onDragValueChange","onValueChange","onPointerValueChange"]}),AK=O.forwardRef(({children:t,...e},n)=>O.createElement(LK,{...e,ref:n},r=>O.createElement(ae.div,{...r},t)));AK.displayName="Slider";var $K=O.forwardRef((t,e)=>O.createElement(ae.div,{...t,ref:e}));$K.displayName="SliderThumb";var OK=O.forwardRef((t,e)=>O.createElement(ae.div,{...t,ref:e}));OK.displayName="SliderTrack";var DK=O.forwardRef((t,e)=>O.createElement(ae.div,{...t,ref:e}));DK.displayName="SliderTrackFill";var FK=ve($f),NK=O.forwardRef(({children:t,...e},n)=>O.createElement(FK,{...e},r=>O.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));NK.displayName="SliderPreview";var VK=O.forwardRef(({children:t,...e},n)=>O.createElement(lE,{...e},(r,i)=>{let o=Me(()=>i.getValueText(),i);return O.createElement(ae.div,{...r,ref:n},o,t)}));VK.displayName="SliderValue";var zK=ve(Mf,{domEventsRegex:/^onMedia/}),BK=O.forwardRef(({children:t,...e},n)=>O.createElement(zK,{...e,ref:n},r=>O.createElement(ae.div,{...r},t)));BK.displayName="VolumeSlider";var UK=O.forwardRef(({children:t,...e},n)=>O.createElement(lE,{...e},(r,i)=>{let o=Me(()=>i.getValueText(),i);return O.createElement(ae.div,{...r,ref:Se(r.ref,n)},o,t)}));UK.displayName="SliderValue";function HK(t=0,e=0,n=""){return G?{startTime:t,endTime:e,text:n,addEventListener:Wn,removeEventListener:Wn,dispatchEvent:Wn}:new window.VTTCue(t,e,n)}var jK=ve(Jc),rF=O.forwardRef(({children:t,...e},n)=>O.createElement(jK,{...e},r=>O.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));rF.displayName="Thumbnail";var iF=O.forwardRef(({children:t,...e},n)=>{let{src:r,img:i,crossOrigin:o}=Cs(Jc.state),s=Me(r),a=Me(o);return O.createElement(ae.img,{crossOrigin:a,...e,src:s,ref:Se(i.set,n)},t)});iF.displayName="ThumbnailImg";var Yv=Object.freeze({__proto__:null,Img:iF,Root:rF}),Kv=O.createContext({$chapters:ee(null)});Kv.displayName="TimeSliderContext";var WK=ve(Rf,{domEventsRegex:/^onMedia/}),qK=O.forwardRef(({children:t,...e},n)=>{let r=O.useMemo(()=>ee(null),[]);return O.createElement(Kv.Provider,{value:{$chapters:r}},O.createElement(WK,{...e,ref:n},i=>O.createElement(ae.div,{...i},t)))});qK.displayName="TimeSlider";var YK=ve(Of),KK=O.forwardRef(({children:t,...e},n)=>O.createElement(YK,{...e},(r,i)=>O.createElement(ae.div,{...r,ref:Se(r.ref,n)},O.createElement(oF,{instance:i},t))));KK.displayName="SliderChapters";function oF({instance:t,children:e}){let n=Me(()=>t.cues,t),r=O.useRef([]),i=O.useRef(),{$chapters:o}=O.useContext(Kv);return i.current||(i.current=HK()),O.useEffect(()=>(o.set(t),()=>void o.set(null)),[t]),O.useEffect(()=>{t.setRefs(r.current)},[n]),e(n.length?n:[i.current],s=>{if(!s){r.current.length=0;return}r.current.push(s)})}oF.displayName="SliderChapterTracks";var GK=O.forwardRef(({children:t,...e},n)=>{let{$chapters:r}=O.useContext(Kv),[i,o]=O.useState();return O.useEffect(()=>R(()=>{let s=r(),a=s?.activePointerCue||s?.activeCue;o(a?.text||"")}),[]),O.createElement(ae.div,{...e,ref:n},i,t)});GK.displayName="SliderChapterTitle";var QK=O.forwardRef(({children:t,...e},n)=>O.createElement(lE,{...e},(r,i)=>{let o=Me(()=>i.getValueText(),i);return O.createElement(ae.div,{...r,ref:Se(r.ref,n)},o,t)}));QK.displayName="SliderValue";var XK=O.forwardRef((t,e)=>O.createElement(ae.div,{...t,ref:e}));XK.displayName="SliderProgress";var ZK=ve(If),JK=O.forwardRef(({children:t,...e},n)=>O.createElement(ZK,{...e},r=>O.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));JK.displayName="SliderThumbnail";var eG=ve(Af,{events:["onCanPlay","onError"]}),tG=O.forwardRef(({children:t,...e},n)=>O.createElement(eG,{...e},(r,i)=>O.createElement(sF,{...r,instance:i,ref:Se(r.ref,n)},t)));tG.displayName="SliderVideo";var sF=O.forwardRef(({instance:t,children:e,...n},r)=>{let{canLoad:i}=Cs(Ga),{src:o,video:s,crossOrigin:a}=t.$state,l=Me(o),c=Me(i),u=Me(a);return O.createElement(ae.video,{style:{maxWidth:"unset"},...n,src:l||void 0,muted:!0,playsInline:!0,preload:c?"auto":"none",crossOrigin:u||void 0,ref:Se(s.set,r)},e)});sF.displayName="SliderVideoProvider";var nG=ve(zf,{events:["onChange"]}),rG=O.forwardRef(({children:t,...e},n)=>O.createElement(nG,{...e,ref:n},r=>O.createElement(ae.div,{...r},t)));rG.displayName="RadioGroup";var iG=ve(Bf,{events:["onChange","onSelect"]}),oG=O.forwardRef(({children:t,...e},n)=>O.createElement(iG,{...e},r=>O.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));oG.displayName="RadioItem";var sG=typeof document>"u",aG=ve(Df,{events:["onOpen","onClose"],domEventsRegex:/^onMedia/}),lG=O.forwardRef(({children:t,...e},n)=>O.createElement(aG,{...e,ref:n},(r,i)=>O.createElement(ae.div,{...r,style:{display:i.isSubmenu?void 0:"contents",...r.style}},t)));lG.displayName="Menu";var cG=ve(Ff,{events:["onSelect"]}),uG=O.forwardRef(({children:t,...e},n)=>O.createElement(cG,{...e},r=>O.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));uG.displayName="MenuButton";var dG=O.forwardRef(({disabled:t=!1,children:e,...n},r)=>{let i=je("fullscreen");return sG||!(t==="fullscreen"?!i:!t)?e:(0,eF.createPortal)(O.createElement(ae.div,{...n,style:{display:"contents",...n.style},ref:r},e),document.body)});dG.displayName="MenuPortal";var pG=ve(Nf),fG=O.forwardRef(({children:t,...e},n)=>O.createElement(pG,{...e},r=>O.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));fG.displayName="MenuItems";var hG=ve(Vf),mG=O.forwardRef(({children:t,...e},n)=>O.createElement(hG,{...e},r=>O.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));mG.displayName="MenuItem";var gG=ve(Hf,{events:["onWillTrigger","onTrigger"]}),Wr=O.forwardRef(({children:t,...e},n)=>O.createElement(gG,{...e,ref:n},r=>O.createElement(ae.div,{...r},t)));Wr.displayName="Gesture";var yG=ve(jf),Qf=O.forwardRef(({children:t,...e},n)=>O.createElement(yG,{...e},(r,i)=>O.createElement(aF,{...r,instance:i,ref:Se(r.ref,n)},t)));Qf.displayName="Time";var aF=O.forwardRef(({instance:t,children:e,...n},r)=>{let{timeText:i}=t.$state,o=Me(i);return O.createElement(ae.div,{...n,ref:r},o,e)});aF.displayName="TimeText";function qr(){return Yi()?.player||null}function cE({off:t=!0}={}){let e=Yi(),{textTracks:n,textTrack:r}=e.$state,i=Me(n);return Me(r),O.useMemo(()=>{let o=i.filter(Mt),s=o.map(a=>({track:a,label:a.label,value:JD(a),get selected(){return r()===a},select(l){let c=n().indexOf(a);c>=0&&e.remote.changeTextTrackMode(c,"showing",l)}}));return t&&s.unshift({track:null,label:ne(t)?t:"Off",value:"off",get selected(){return!r()},select(a){e.remote.toggleCaptions(a)}}),Object.defineProperty(s,"disabled",{get(){return!o.length}}),Object.defineProperty(s,"selectedTrack",{get(){return r()}}),Object.defineProperty(s,"selectedValue",{get(){let a=r();return a?JD(a):"off"}}),s},[i])}function JD(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}var Gv=I(H(),1),uE=Gv.forwardRef((t,e)=>{let{width:n,height:r,size:i=null,paths:o,...s}=t;return Gv.createElement("svg",{viewBox:"0 0 32 32",...s,width:n??i,height:r??i,fill:"none","aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",ref:e,dangerouslySetInnerHTML:{__html:o}})});uE.displayName="VidstackIcon";var xe=I(H(),1);In();Yn();var vG=ve(hf),lF=xe.forwardRef(({children:t,...e},n)=>xe.createElement(vG,{...e},r=>xe.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));lF.displayName="Controls";var wG=ve(mf),cF=xe.forwardRef(({children:t,...e},n)=>xe.createElement(wG,{...e},r=>xe.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));cF.displayName="ControlsGroup";var $o=Object.freeze({__proto__:null,Group:cF,Root:lF}),bG=ve(Sf);function xG({children:t,...e}){return xe.createElement(bG,{...e},t)}xG.displayName="Tooltip";var _G=ve(Ef),kG=xe.forwardRef(({children:t,...e},n)=>xe.createElement(_G,{...e},r=>xe.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));kG.displayName="TooltipTrigger";var TG=ve(Pf),SG=xe.forwardRef(({children:t,...e},n)=>xe.createElement(TG,{...e},r=>xe.createElement(ae.div,{...r,ref:Se(r.ref,n)},t)));SG.displayName="TooltipContent";var EG=ve(kf,{domEventsRegex:/^onMedia/}),uF=xe.forwardRef(({children:t,...e},n)=>xe.createElement(EG,{...e},r=>xe.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));uF.displayName="GoogleCastButton";var dF=xe.forwardRef(({children:t,...e},n)=>{let r=je("title");return xe.createElement(ae.span,{...e,ref:n},r,t)});dF.displayName="Title";function pF(t){let[e,n]=xe.useState([]);return xe.useEffect(()=>{if(!t){n([]);return}function r(){n(t.activeCues)}return r(),z(t,"cue-change",r)},[t]),e}function fF(t){let e=Yi(),[n,r]=xe.useState(null);return xe.useEffect(()=>eu(e.textTracks,t,r),[t]),n}function Qv(){let t=fF("chapters");return pF(t)[0]?.text||""}var hF=xe.forwardRef(({children:t,...e},n)=>{let r=Qv();return xe.createElement(ae.span,{...e,ref:n},r,t)});hF.displayName="ChapterTitle";var PG=ve(Uf),Xv=xe.forwardRef(({children:t,...e},n)=>xe.createElement(PG,{...e,ref:n},r=>xe.createElement(ae.div,{...r},t)));Xv.displayName="Captions";var Ype=xe.forwardRef(({size:t=96,children:e,...n},r)=>xe.createElement("svg",{width:t,height:t,fill:"none",viewBox:"0 0 120 120","aria-hidden":"true","data-part":"root",...n,ref:r},e)),Kpe=xe.forwardRef(({width:t=8,children:e,...n},r)=>xe.createElement("circle",{cx:"60",cy:"60",r:"54",stroke:"currentColor",strokeWidth:t,"data-part":"track",...n,ref:r},e)),Gpe=xe.forwardRef(({width:t=8,fillPercent:e=50,children:n,...r},i)=>xe.createElement("circle",{cx:"60",cy:"60",r:"54",stroke:"currentColor",pathLength:"100",strokeWidth:t,strokeDasharray:100,strokeDashoffset:100-e,"data-part":"track-fill",...r,ref:i},n));var Zv=I(H(),1);Yn();function Jv(t){let e=Yi(),n=Zv.useRef();return n.current||(n.current=new Wc),Zv.useEffect(()=>{let r=t&&"current"in t?t.current:t,i=r instanceof Ka,o=i?r:e?.player;n.current.setPlayer(o??null),n.current.setTarget(r??null)},[e,t&&"current"in t?t.current:t]),n.current}var Cfe=I(bo(),1);var RG=["onAbort","onAudioTrackChange","onAudioTracksChange","onAutoPlay","onAutoPlayChange","onAutoPlayFail","onCanLoad","onCanPlay","onCanPlayThrough","onControlsChange","onDestroy","onDurationChange","onEmptied","onEnd","onEnded","onError","onFindMediaPlayer","onFullscreenChange","onFullscreenError","onLiveChange","onLiveEdgeChange","onLoadedData","onLoadedMetadata","onLoadStart","onLoopChange","onOrientationChange","onPause","onPictureInPictureChange","onPictureInPictureError","onPlay","onPlayFail","onPlaying","onPlaysInlineChange","onPosterChange","onProgress","onProviderChange","onProviderLoaderChange","onProviderSetup","onQualitiesChange","onQualityChange","onRateChange","onReplay","onSeeked","onSeeking","onSourceChange","onSourceChange","onStalled","onStarted","onStreamTypeChange","onSuspend","onTextTrackChange","onTextTracksChange","onTimeUpdate","onTitleChange","onVdsLog","onVideoPresentationChange","onVolumeChange","onWaiting"],MG=ve(Ka,{events:RG,eventsRegex:/^onHls/,domEventsRegex:/^onMedia/}),dE=ie.forwardRef(({aspectRatio:t,children:e,...n},r)=>ie.createElement(MG,{...n,src:n.src,ref:r,style:{aspectRatio:t,...n.style}},i=>ie.createElement(ae.div,{...i},e)));dE.displayName="MediaPlayer";var IG=ve(Dv),pE=ie.forwardRef(({loaders:t=[],children:e,mediaProps:n,buildMediaEl:r,...i},o)=>{let s=ie.useMemo(()=>t.map(a=>new a),t);return ie.createElement(IG,{...i,loaders:s,ref:o},(a,l)=>ie.createElement("div",{...a},ie.createElement(yF,{...n,provider:l,buildMediaEl:r}),e))});pE.displayName="MediaProvider";function yF({provider:t,buildMediaEl:e,...n}){let{controls:r,crossOrigin:i,poster:o,remotePlaybackInfo:s}=Cs(Ga),{loader:a}=t.$state,{$iosControls:l,$provider:c,$providerSetup:u}=Yi(),d=Me(r),p=Me(l),f=d||p,h=Me(i),g=Me(o),w=Me(a),m=Me(c),y=Me(u),v=Me(s),b=w?.mediaType(),k=w?.name==="youtube",_=w?.name==="vimeo",S=k||_,C=w?.name==="remotion",M=w?.name==="google-cast",[x,$]=ie.useState("");return ie.useEffect(()=>{!M||x||Promise.resolve().then(()=>(gF(),mF)).then(L=>{$(L.default)})},[M]),M?ie.createElement("div",{className:"vds-google-cast",ref:L=>{t.load(L)}},ie.createElement(uE,{paths:x}),v?.deviceName?ie.createElement("span",{className:"vds-google-cast-info"},"Google Cast on"," ",ie.createElement("span",{className:"vds-google-cast-device-name"},v.deviceName)):null):C?ie.createElement("div",{"data-remotion-canvas":!0},ie.createElement("div",{"data-remotion-container":!0,ref:L=>{t.load(L)}},ZD(m)&&y?ie.createElement(m.render):null)):e?.(w,t)??(S?ie.createElement(ie.Fragment,null,ie.createElement("iframe",{className:k?"vds-youtube":"vds-vimeo",suppressHydrationWarning:!0,tabIndex:f?void 0:-1,"aria-hidden":"true","data-no-controls":f?void 0:"",ref(L){t.load(L)}}),f?null:ie.createElement("div",{className:"vds-blocker"})):b?ie.createElement(b==="audio"?"audio":"video",{...n,controls:f?!0:null,crossOrigin:typeof h=="boolean"?"":h,poster:b==="video"&&f&&g?g:null,preload:"none","aria-hidden":"true",suppressHydrationWarning:!0,ref(L){t.load(L)}}):null)}yF.displayName="MediaOutlet";function LG(t){let e=Yi(),n=ie.useMemo(()=>new gn(t),Object.values(t));return ie.useEffect(()=>(e.textTracks.add(n),()=>void e.textTracks.remove(n)),[n]),n}function AG({lang:t,...e}){return LG({language:t,...e}),null}AG.displayName="Track";var $G=ve(Fv),OG=ie.forwardRef(({children:t,...e},n)=>ie.createElement($G,{...e},r=>ie.createElement(ae.button,{...r,ref:Se(r.ref,n)},t)));OG.displayName="ToggleButton";var DG=ve(Nv),FG=ie.forwardRef(({children:t,...e},n)=>ie.createElement(DG,{...e},(r,i)=>ie.createElement(vF,{...r,instance:i,ref:Se(r.ref,n)},t)));FG.displayName="Poster";var vF=ie.forwardRef(({instance:t,children:e,...n},r)=>{let{src:i,img:o,alt:s,crossOrigin:a,loading:l,hidden:c}=t.$state,u=Me(i),d=Me(s),p=Me(a),f=Me(l),h=Me(c);return ie.createElement(ae.img,{...n,src:u||"",alt:d||void 0,crossOrigin:p||void 0,ref:Se(o.set,r),style:{display:f||h?"none":void 0}},e)});vF.displayName="PosterImg";var NG=ie.forwardRef(({children:t,...e},n)=>ie.createElement(ae.div,{translate:"yes","aria-live":"off","aria-atomic":"true",...e,ref:n},t));NG.displayName="Caption";var VG=ie.forwardRef((t,e)=>{let n=je("textTrack"),[r,i]=ie.useState();return ie.useEffect(()=>{if(!n)return;function o(){i(n?.activeCues[0])}return n.addEventListener("cue-change",o),()=>{n.removeEventListener("cue-change",o),i(void 0)}},[n]),ie.createElement(ae.span,{...t,"data-part":"cue",dangerouslySetInnerHTML:{__html:r?.text||""},ref:e})});VG.displayName="CaptionText";function ew(){let[t,e]=ie.useState(null),n=Yi();return ie.useEffect(()=>{if(n)return R(()=>{e(n.$provider())})},[]),t}function wF({clamp:t=!1,offset:e=0,orientation:n="horizontal"}={}){let[r,i]=ie.useState(null),[o,s]=ie.useState(null),[a,l]=ie.useState(0),[c,u]=ie.useState(!1);return ie.useEffect(()=>{if(!r)return;let d=ee(!1);function p(f){r&&l(zG(r,f,n))}return R(()=>{if(!d()){z(r,"pointerenter",()=>{u(!0),o?.setAttribute("data-visible","")}),z(r,"pointerdown",f=>{d.set(!0),p(f)}),z(r,"pointerleave",()=>{u(!1),o?.removeAttribute("data-visible")}),z(r,"pointermove",f=>{p(f)});return}o?.setAttribute("data-dragging",""),z(document,"pointerup",f=>{d.set(!1),o?.removeAttribute("data-dragging"),p(f)}),z(document,"pointermove",f=>{p(f)}),z(document,"touchmove",f=>f.preventDefault(),{passive:!1})})},[r]),ie.useEffect(()=>{o&&o.style.setProperty("--slider-pointer",a+"%")},[o,a]),ie.useEffect(()=>{if(!o)return;let d=()=>{eE(o,{offset:e,clamp:t,orientation:n})};d();let p=new ResizeObserver(d);return p.observe(o),()=>p.disconnect()},[o,t,e,n]),{previewRootRef:i,previewRef:s,previewValue:a,isPreviewVisible:c}}function zG(t,e,n){let r,i=t.getBoundingClientRect();if(n==="vertical"){let{bottom:o,height:s}=i;r=(o-e.clientY)/s}else{let{left:o,width:s}=i;r=(e.clientX-o)/s}return BG(Math.max(0,Math.min(100,100*r)))}function BG(t){return Number(t.toFixed(3))}var bF='"use strict";var Z=()=>({emit(e,...t){for(let n=this.events[e]||[],i=0,r=n.length;i<r;i++)n[i](...t)},events:{},on(e,t){return(this.events[e]||=[]).push(t),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}});function ee(){let e=Z();return e.once=function(n,i){let r=this.on(n,(...s)=>{r(),i(...s)});return r},e}function te(e){let t=e;return typeof t.id=="string"&&typeof t.invoke=="string"}function ne(e,...t){return{id:De(),invoke:e,args:t}}function re(e){return typeof e.id=="string"}function ie(e){return typeof e.send=="string"}function se(e,t){return{send:e,payload:t}}function De(){return Math.random().toString(36).substring(2,9)}var k=class extends Error{constructor(t){super(`no handler for ${t}`)}};var N="yn-port-ready",oe="__YN_PORT_MESSAGE__";var R=class{port=null;load(t){this.port&&this.port.close(),this.port=t;let n=({data:i})=>{this.onMessage(i)};t.addEventListener("message",n),t.start(),t.postMessage(N)}unload(){this.port?.close(),this.emitter.events={}}actions=Object.create(null);emitter=ee();onMessage(t){t===N?this.emitter.emit("ready"):te(t)?this.response(t):re(t)?this.emitter.emit("resp",t.id,t.payload,t.error):ie(t)&&this.emitter.emit(`send:${t.send}`,{type:t.send,payload:t.payload})}methods=new Proxy({},{get:(t,n)=>{if(typeof n=="symbol")throw new Error("Remote invoke does not support symbol property");return t[n]??=(...i)=>this.invoke(n.toString(),i)}});invoke(t,n,{transfer:i,timeout:r=1e3}={}){if(!this.port)throw new Error("port not loaded");let s=ne(t,...n);return this.port.postMessage(s,{transfer:i}),new Promise((o,a)=>{let l=-1,u=this.emitter.on("resp",(c,m,y)=>{if(c===s.id)if(u(),window.clearTimeout(l),y){let{message:K,stack:z}=y,x=new Error(K);x.stack=z,a(x)}else o(m)});r>0&&r<1/0&&(l=window.setTimeout(()=>{u(),a(new T(r))},r))})}handle(t,n){return this.actions[t]=n,()=>{this.actions[t]===n&&delete this.actions[t]}}send(t,n,i){if(!this.port)throw new Error("port not loaded");let r=se(t,n);this.port.postMessage(r,{transfer:i})}on(t,n){return this.emitter.on(`send:${t}`,n)}once(t,n){return this.emitter.once(`send:${t}`,n)}onReady(t,{once:n=!1}={}){return n?this.emitter.once("ready",t):this.emitter.on("ready",t)}async response({id:t,invoke:n,args:i=[]}){if(!this.port)throw new Error("port not loaded");let r={id:t,payload:null};try{let s=this.actions[n];if(!s)throw new k(n);let o=await s(...i);o===void 0?this.port.postMessage(r):(r.payload=await o.value,this.port.postMessage(r,{transfer:o.transfer}))}catch(s){s instanceof Error?r.error={message:s.message,stack:s.stack}:r.error={message:String(s)},this.port.postMessage(r)}}},T=class extends Error{constructor(t){super(`timeout after ${t}ms`)}};async function q(){let e=await new Promise((n,i)=>{function r({data:o,ports:a}){o===oe&&(n(a[0]),window.removeEventListener("message",r),window.clearTimeout(s))}window.addEventListener("message",r);let s=setTimeout(()=>{i("failed to get port: timeout "+5e3),window.removeEventListener("message",r)},5e3)}),t=new R;return t.load(e),t}var L=class{#e=[];#t=!1;async load(){if(!this.#t){this.#t=!0,await this.onload();for(let t of this.#n)await t.load()}}async onload(){}async unload(){if(!this.#t)return;this.#t=!1;let t;for(;t=this.#e.pop();)await t();let n;for(;n=this.#n.pop();)await n.unload();await this.onunload()}async onunload(){}register(t){this.#e.push(t)}registerInterval(t,n){let i=setInterval(t,n);this.register(()=>clearInterval(i))}registerDomEvent(t,n,i,r){t.addEventListener(n,i,r),this.register(()=>t.removeEventListener(n,i,r))}#n=[];async addChild(t){return this.#n.push(t),this.#t&&await t.load(),t}async removeChild(t){let n=this.#n.indexOf(t);return n!==-1&&(this.#n.splice(n,1),t.unload()),t}};function d(e){let t=[];for(let n=0;n<e.length;n++)t.push([e.start(n),e.end(n)]);return{type:"TimeRanges",value:t}}function le(e){let t=e.media,n=e.controller;e.registerDomEvent(t,"abort",i),e.registerDomEvent(t,"emptied",r),e.registerDomEvent(t,"error",s),e.registerDomEvent(t,"volumechange",o),e.registerDomEvent(t,"durationchange",a),e.registerDomEvent(t,"progress",l),e.registerDomEvent(t,"stalled",u),e.registerDomEvent(t,"suspend",c),e.registerDomEvent(t,"ratechange",m),e.registerDomEvent(t,"seeked",y),e.registerDomEvent(t,"seeking",K),e.registerDomEvent(t,"ended",z),e.registerDomEvent(t,"waiting",x),t instanceof HTMLVideoElement&&(e.registerDomEvent(t,"enterpictureinpicture",()=>n.send("enterpictureinpicture",void 0)),e.registerDomEvent(t,"leavepictureinpicture",()=>n.send("leavepictureinpicture",void 0)));function i(){n.send("abort",void 0)}function r(){n.send("emptied",void 0)}function s(){t.error&&n.send("error",{code:t.error.code,message:t.error.message})}function o(){n.send("volumechange",{muted:t.muted,volume:t.volume})}function a(){n.send("durationchange",{played:d(t.played),duration:t.duration})}function l(){n.send("progress",{buffered:d(t.buffered),seekable:d(t.seekable)})}function u(){n.send("stalled",{readyState:t.readyState})}function c(){n.send("suspend",void 0)}function m(){n.send("ratechange",{rate:t.playbackRate})}function y(){n.send("seeked",{current:t.currentTime,played:d(t.played),duration:t.duration,ended:t.ended})}function K(){n.send("seeking",{current:t.currentTime})}function z(){n.send("ended",{controls:t.controls,current:t.currentTime,played:d(t.played),duration:t.duration,ended:t.ended})}function x(){n.send("waiting",{readyState:t.readyState})}}var F=class{value;next;constructor(t){this.value=t}},M=class{#e;#t;#n;constructor(){this.clear()}enqueue(t){let n=new F(t);this.#e?(this.#t.next=n,this.#t=n):(this.#e=n,this.#t=n),this.#n++}dequeue(){let t=this.#e;if(t)return this.#e=this.#e.next,this.#n--,t.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#n=0}get size(){return this.#n}*[Symbol.iterator](){let t=this.#e;for(;t;)yield t.value,t=t.next}*drain(){for(;this.#e;)yield this.dequeue()}};var ue={bind(e,t,n){return e.bind(n)}};function U(e){if(!((Number.isInteger(e)||e===Number.POSITIVE_INFINITY)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let t=new M,n=0,i=()=>{n--,t.size>0&&t.dequeue()()},r=async(a,l,u)=>{n++;let c=(async()=>a(...u))();l(c);try{await c}catch{}i()},s=(a,l,u)=>{t.enqueue(ue.bind(r.bind(void 0,a,l,u))),(async()=>(await Promise.resolve(),n<e&&t.size>0&&t.dequeue()()))()},o=(a,...l)=>new Promise(u=>{s(a,u,l)});return Object.defineProperties(o,{activeCount:{get:()=>n},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}}}),o}async function de(e,t,n){let i=document.createElement("canvas"),{videoWidth:r,videoHeight:s}=e;if(!r||!s)throw new Error("Cannot screenshot video without width or height");Object.assign(i,{width:r,height:s});let o=i.getContext("2d",{alpha:!1});if(!o)throw new Error("Canvas context creation failed");o.drawImage(e,0,0,r,s);let a=await new Promise((u,c)=>{try{i.toBlob(m=>{m?u(m):c(new Error("Canvas to blob failed"))},t,n)}catch(m){c(m)}}),l=await a.arrayBuffer();return{time:e.currentTime,blob:{arrayBuffer:l,type:a.type}}}var ce=["currentTime","playbackRate","volume","muted"],pe=["paused","played","networkState","duration","buffered","seekable","readyState","ended","autoplay","error"],fe=["play","pause"],me="yn-mounted";function P(e){return e[0].toUpperCase()+e.slice(1)}function V(e){return e instanceof TimeRanges?d(e):e}function ge(){let e=this.media,t=this.controller,n=this.stateRef;pe.forEach(r=>{this.register(t.handle(`get${P(r)}`,()=>({value:V(e[r])})))}),this.register(t.handle("getTrack",async r=>({value:await this.getTrack(r)}))),this.register(t.handle("pictureInPictureEnabled",()=>({value:document.pictureInPictureElement===e}))),this.register(t.handle("requestPictureInPicture",()=>{e instanceof HTMLVideoElement&&e.requestPictureInPicture()})),this.register(t.handle("exitPictureInPicture",()=>{document.exitPictureInPicture()})),ce.forEach(r=>{this.register(t.handle(`get${P(r)}`,()=>({value:V(e[r])}))),r==="currentTime"?this.register(t.handle(`set${P(r)}`,s=>{n.prevSeek={value:e.currentTime,time:Date.now()},e[r]=s})):this.register(t.handle(`set${P(r)}`,s=>{e[r]=s}))}),fe.forEach(r=>{this.register(t.handle(r,async(...s)=>({value:await e[r](...s)})))}),this.register(t.handle("screenshot",async(r,s)=>{if(!(e instanceof HTMLVideoElement))throw new Error("Cannot take screenshot of non-video element");let o=await de(e,r,s);return{value:o,transfer:[o.blob.arrayBuffer]}}));let i=U(4);return this.register(t.handle("fetch",async(r,{gzip:s=!1,...o}={})=>{let a=await i(()=>window.fetch(r,o)),l=await a.blob(),u={type:l.type,respHeaders:Object.fromEntries(a.headers)};if(!s){let y=await l.arrayBuffer();return{value:{ab:y,gzip:!1,...u},transfer:[y]}}let c=l.stream(),m=await Oe(c.pipeThrough(new CompressionStream("gzip")));return{value:{ab:m,gzip:!0,...u},transfer:[m]}})),n}async function Oe(e){let t=e.getReader(),n=[];for(;;){let{done:s,value:o}=await t.read();if(s)break;n.push(o)}let i=n.reduce((s,o)=>s+o.byteLength,0),r=new Uint8Array(i);for(let s=0,o=0;s<n.length;s++)r.set(n[s],o),o+=n[s].byteLength;return r.buffer}function he(e){let t=e.media,n=e.controller;e.registerDomEvent(t,"loadstart",o),e.registerDomEvent(t,"loadeddata",l),e.registerDomEvent(t,"loadedmetadata",a),e.registerDomEvent(t,"canplay",u),e.registerDomEvent(t,"canplaythrough",c),t.readyState>=0&&o(),t.readyState>=1&&a(),t.readyState>=2&&l(),t.readyState>=3&&u(),t.readyState>=4&&c(),e.registerDomEvent(t,"play",s),e.registerDomEvent(t,"pause",i),e.registerDomEvent(t,"playing",r),t.readyState>=3&&!t.paused?(s(),r()):i();function i(){n.send("pause",{readyState:t.readyState})}function r(){n.send("playing",void 0)}function s(){n.send("play",void 0)}function o(){n.send("loadstart",{networkState:t.networkState})}function a(){n.send("loadedmetadata",void 0)}function l(){n.send("loadeddata",void 0)}function u(){n.send("canplay",{buffered:d(t.buffered),seekable:d(t.seekable),duration:t.duration})}function c(){n.send("canplaythrough",{buffered:d(t.buffered),seekable:d(t.seekable),duration:t.duration})}}var g=Symbol(0),C=!1,ye=!1,$=null,b=null,f=null,p=0,E=[],j={};var w=0,Te=1,S=2,B=3;function Ie(){C=!0,queueMicrotask(He)}function He(){if(!E.length){C=!1;return}ye=!0;for(let e=0;e<E.length;e++)E[e].$st!==w&&_e(E[e]);E=[],C=!1,ye=!1}function _e(e){let t=[e];for(;e=e[g];)e.$e&&e.$st!==w&&t.push(e);for(let n=t.length-1;n>=0;n--)J(t[n])}function G(e=!0){if(this.$st===B)return;let t=e?this.$ps||this[g]:this,n=this.$ns,i=null;for(;n&&n[g]===this;)G.call(n,!0),ve(n),i=n.$ns,n.$ns=null,n=i;e&&ve(this),n&&(n.$ps=e?this.$ps:this),t&&(t.$ns=n)}function ve(e){e.$st=B,e.$d&&Me(e),e.$s&&A(e,0),e.$ps&&(e.$ps.$ns=null),e[g]=null,e.$s=null,e.$o=null,e.$ps=null,e.$cx=j,e.$eh=null}function Me(e){try{if(Array.isArray(e.$d))for(let t=e.$d.length-1;t>=0;t--){let n=e.$d[t];n.call(n)}else e.$d.call(e.$d);e.$d=null}catch(t){Pe(e,t)}}function Ke(e,t,n){let i=$,r=b;$=e,b=n;try{return t.call(e)}finally{$=i,b=r}}function Pe(e,t){if(!e||!e.$eh)throw t;let n=0,i=e.$eh.length,r=Ee(t);for(n=0;n<i;n++)try{e.$eh[n](r);break}catch(s){r=Ee(s)}if(n===i)throw r}function Ee(e){return e instanceof Error?e:Error(JSON.stringify(e))}function ze(){return this.$st===B?this.$v:(b&&!this.$e&&(!f&&b.$s&&b.$s[p]==this?p++:f?f.push(this):f=[this]),this.$c&&J(this),this.$v)}function Ne(e){let t=Ue(e)?e(this.$v):e;if(this.$ch(this.$v,t)&&(this.$v=t,this.$o))for(let n=0;n<this.$o.length;n++)Se(this.$o[n],S);return this.$v}var $e=function(){this[g]=null,this.$ns=null,this.$ps=null,$&&$.append(this)},v=$e.prototype;v.$cx=j;v.$eh=null;v.$c=null;v.$d=null;v.append=function(e){if(e[g]=this,e.$ps=this,this.$ns)if(e.$ns){let t=e.$ns;for(;t.$ns;)t=t.$ns;t.$ns=this.$ns,this.$ns.$ps=t}else e.$ns=this.$ns,this.$ns.$ps=e;this.$ns=e,e.$cx=e.$cx===j?this.$cx:{...this.$cx,...e.$cx},this.$eh&&(e.$eh=e.$eh?[...e.$eh,...this.$eh]:this.$eh)};v.dispose=function(){G.call(this)};var qe=function(t,n,i){$e.call(this),this.$st=n?S:w,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=t,n&&(this.$c=n),i&&i.dirty&&(this.$ch=i.dirty)},Y=qe.prototype;Object.setPrototypeOf(Y,v);Y.$ch=Fe;Y.call=ze;function Fe(e,t){return e!==t}function Ue(e){return typeof e=="function"}function J(e){if(e.$st===Te)for(let t=0;t<e.$s.length&&(J(e.$s[t]),e.$st!==S);t++);e.$st===S?Ve(e):e.$st=w}function be(e){e.$ns&&e.$ns[g]===e&&G.call(e,!1),e.$d&&Me(e),e.$eh=e[g]?e[g].$eh:null}function Ve(e){let t=f,n=p;f=null,p=0;try{be(e);let i=Ke(e,e.$c,e);if(f){if(e.$s&&A(e,p),e.$s&&p>0){e.$s.length=p+f.length;for(let s=0;s<f.length;s++)e.$s[p+s]=f[s]}else e.$s=f;let r;for(let s=p;s<e.$s.length;s++)r=e.$s[s],r.$o?r.$o.push(e):r.$o=[e]}else e.$s&&p<e.$s.length&&(A(e,p),e.$s.length=p);!e.$e&&e.$i?Ne.call(e,i):(e.$v=i,e.$i=!0)}catch(i){Pe(e,i),e.$st===S&&(be(e),e.$s&&A(e,0));return}f=t,p=n,e.$st=w}function Se(e,t){if(!(e.$st>=t)&&(e.$e&&e.$st===w&&(E.push(e),C||Ie()),e.$st=t,e.$o))for(let n=0;n<e.$o.length;n++)Se(e.$o[n],Te)}function A(e,t){let n,i;for(let r=t;r<e.$s.length;r++)n=e.$s[r],n.$o&&(i=n.$o.indexOf(e),n.$o[i]=n.$o[n.$o.length-1],n.$o.pop())}function xe(...e){}function O(e){return typeof e>"u"}function Q(e){return typeof e=="number"&&!Number.isNaN(e)}var we,We=Event,ke=Symbol("DOM_EVENT"),W=class extends We{constructor(t,...n){super(t,n[0]),this[we]=!0,this.triggers=new D,this.detail=n[0]?.detail;let i=n[0]?.trigger;i&&this.triggers.add(i)}static{we=ke}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}},D=class{constructor(){this.chain=[]}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(t){this.chain.push(t),Re(t)&&this.chain.push(...t.triggers)}remove(t){return this.chain.splice(this.chain.indexOf(t),1)[0]}has(t){return this.chain.some(n=>n===t)}hasType(t){return!!this.findType(t)}findType(t){return this.chain.find(n=>n.type===t)}walk(t){for(let n of this.chain){let i=t(n);if(i)return[n,i]}}[Symbol.iterator](){return this.chain.values()}};function Re(e){return!!e?.[ke]}var pn=typeof window<"u"?"requestIdleCallback"in window?window.requestIdleCallback:e=>window.setTimeout(e,1):xe;var I=class{constructor(t){this._callback=t}_id;_start(){O(this._id)&&this._loop()}_stop(){Q(this._id)&&window.cancelAnimationFrame(this._id),this._id=void 0}_loop(){this._id=window.requestAnimationFrame(()=>{O(this._id)||(this._callback(),this._loop())})}};function Le(e){let t=e.media,n=e.controller,i=new I(a);e.register(()=>i._stop());let r,s=t.currentTime;function o(){r!==t.paused&&(r=t.paused,t.paused?t.addEventListener("timeupdate",a):t.removeEventListener("timeupdate",a))}o(),t.addEventListener("ended",()=>{i._stop(),o()}),t.addEventListener("pause",()=>{i._stop(),o()}),t.addEventListener("playing",()=>{i._start(),o()});function a(){s!==t.currentTime&&(s=t.currentTime,n.send("timeupdate",{current:s,played:d(t.played)}))}}function H(e,t=document.body,n=1e4){return new Promise((i,r)=>{let s=t.querySelector(e);if(s){i(s);return}let o=new MutationObserver(()=>{let l=t.querySelector(e);l&&(o.disconnect(),i(l),window.clearTimeout(a))}),a=window.setTimeout(()=>{o.disconnect(),r(new Error(`timeout waiting for ${e}`))},n);o.observe(t,{childList:!0,subtree:!0})})}var je=[".dplayer",".video-js",".jwplayer","[data-player]"],h=class extends L{constructor(n,i){super();this.controller=n;this.#e=i,this.register(()=>n.unload())}#e;eval(n){return this.#e?window.eval(this.#e.createScript(n)):window.eval(n)}parseHTML(n){return this.#e?new DOMParser().parseFromString(this.#e.createHTML(n),"text/html"):new DOMParser().parseFromString(n,"text/html")}parseXML(n){return this.#e?new DOMParser().parseFromString(this.#e.createHTML(n),"text/xml"):new DOMParser().parseFromString(n,"text/xml")}async getTrack(n){return null}getStyle(){return Ye}#t=null;stateRef={prevSeek:null};findMedia(){return H("video, audio")}async load(){let n=this.getStyle();n&&this.injectStyle(n),await super.load();let i=this.media.controls===!0;i&&(this.media.controls=!1),this.register(this.controller.on("yn-toggle-controls",({payload:r})=>{document.body.classList.toggle("yn-show-controls",r)})),i&&this.register(this.controller.on("yn-toggle-controls",({payload:r})=>{this.media.controls=r})),this.register(this.controller.on("yn-toggle-webfs",({payload:r})=>{document.body.classList.toggle("yn-fs-enable",r)})),document.body.classList.add("yn-play-ready"),this.controller.send("yn-play-ready",void 0)}get media(){if(!this.#t)throw new Error("Get media before load");return this.#t}async onload(){this.#t=await this.findMedia(),await Promise.all([this.enterWebFullscreen(),this.hookMediaEl()])}enterWebFullscreen(){document.body.classList.add("yn-fs-enable");let n=this.media.closest(je.join(", "))??this.media;n.classList.add("yn-player"),this.assignParentClass(n),window.dispatchEvent(new Event("resize"))}assignParentClass(n){for(let i of Be(n))i.classList.add("yn-parent"),getComputedStyle(i).position=="fixed"&&i.classList.add("yn-absolute")}injectStyle(n){let i=document.createElement("style");i.textContent=n,document.head.appendChild(i),this.register(()=>i.remove())}async untilMediaReady(n="canplay",i=5e3){if(this.media.readyState>=Ge[n])return;let r=-1;await new Promise((s,o)=>{this.registerDomEvent(this.media,n,s,{once:!0}),r=window.setTimeout(()=>{o(new T(i))},i)}),window.clearTimeout(r)}rehookMediaEl(n){this.#t=n,this.hookMediaEl()}async hookMediaEl(){he(this),Le(this),le(this),ge.call(this),this.controller.send(me,void 0)}};function*Be(e,t=!1){for(t&&(yield e);e.parentElement&&e.parentElement!==document.body;)e=e.parentElement,yield e}var Ge={loadedmetadata:HTMLMediaElement.HAVE_METADATA,loadeddata:HTMLMediaElement.HAVE_CURRENT_DATA,canplay:HTMLMediaElement.HAVE_FUTURE_DATA,canplaythrough:HTMLMediaElement.HAVE_ENOUGH_DATA},Ye=`\nbody.yn-fs-enable .yn-player {\n  position: fixed !important;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100vw !important;\n  height: 100vh !important;\n  max-width: none !important;\n  max-height: none !important;\n  min-width: 0 !important;\n  min-height: 0 !important;\n  margin: 0 !important;\n  padding: 0 !important;\n  z-index: 2147483647 !important; /* Ensure it\'s on top of other elements */\n  background-color: #000 !important;\n  transform: none !important;\n}\nbody.yn-fs-enable .yn-parent {\n  overflow: visible !important;\n  z-index: auto !important;\n  transform: none !important;\n  -webkit-transform-style: flat !important;\n  transition: none !important;\n  contain: none !important;\n}\nbody.yn-fs-enable .yn-absolute {\n  position: absolute !important;\n}\nbody.yn-fs-enable {\n  overflow: hidden !important;\n  zoom: 100% !important;\n}\nbody.yn-fs-enable .yn-parent video {\n  object-fit: contain !important;\n}\n`.trim();var Je={waitForSelector:H,MediaPlugin:h},Ae=(e=>function(n){if(n in e)return e[n];throw new Error(`Module not found: ${n.toString()}`)})({"youtube-notes":Je});var X=window.trustedTypes?.createPolicy("yn",{createScript:e=>e,createHTML:e=>e});async function Ce(e,t){if(!e)return new h(t);let n=`(function anonymous(require,module,exports){${e}\n})`,i=X?window.eval(X.createScript(n)):window.eval(n),r={},s={exports:r};i(Ae,s,r),r=s.exports||r;let o=r.default||s.exports;if(!o)throw new Error("Failed to load plugin. No exports detected.");let a=new o(t,X);if(!(a instanceof h))throw new Error("Failed to load plugin. plugin not extends MediaPlugin");return a}var _;q().then(e=>{e.handle("loadPlugin",async t=>{_&&_.unload(),_=await Ce(t,e),_.load()})});\n';var Oo=Symbol(0),nw=!1,xF=!1,Qa=null,ru=null,Yr=null,gr=0,nu=[],hE={},HG=()=>{},iu=0,EF=1,Xf=2,iw=3;function jG(){nw=!0,queueMicrotask(WG)}function WG(){if(!nu.length){nw=!1;return}xF=!0;for(let t=0;t<nu.length;t++)nu[t].$st!==iu&&qG(nu[t]);nu=[],nw=!1,xF=!1}function qG(t){let e=[t];for(;t=t[Oo];)t.$e&&t.$st!==iu&&e.push(t);for(let n=e.length-1;n>=0;n--)yE(e[n])}function PF(t){if(!t||!Qa)return t||HG;let e=Qa;return e.$d?Array.isArray(e.$d)?e.$d.push(t):e.$d=[e.$d,t]:e.$d=t,function(){e.$st!==iw&&(t.call(null),IF(e.$d)?e.$d=null:Array.isArray(e.$d)&&e.$d.splice(e.$d.indexOf(t),1))}}function mE(t=!0){if(this.$st===iw)return;let e=t?this.$ps||this[Oo]:this,n=this.$ns,r=null;for(;n&&n[Oo]===this;)mE.call(n,!0),_F(n),r=n.$ns,n.$ns=null,n=r;t&&_F(this),n&&(n.$ps=t?this.$ps:this),e&&(e.$ns=n)}function _F(t){t.$st=iw,t.$d&&CF(t),t.$s&&tw(t,0),t.$ps&&(t.$ps.$ns=null),t[Oo]=null,t.$s=null,t.$o=null,t.$ps=null,t.$cx=hE,t.$eh=null}function CF(t){try{if(Array.isArray(t.$d))for(let e=t.$d.length-1;e>=0;e--){let n=t.$d[e];n.call(n)}else t.$d.call(t.$d);t.$d=null}catch(e){RF(t,e)}}function YG(t,e,n){let r=Qa,i=ru;Qa=t,ru=n;try{return e.call(t)}finally{Qa=r,ru=i}}function RF(t,e){if(!t||!t.$eh)throw e;let n=0,r=t.$eh.length,i=kF(e);for(n=0;n<r;n++)try{t.$eh[n](i);break}catch(o){i=kF(o)}if(n===r)throw i}function kF(t){return t instanceof Error?t:Error(JSON.stringify(t))}function KG(){return this.$st===iw?this.$v:(ru&&!this.$e&&(!Yr&&ru.$s&&ru.$s[gr]==this?gr++:Yr?Yr.push(this):Yr=[this]),this.$c&&yE(this),this.$v)}function GG(t){let e=IF(t)?t(this.$v):t;if(this.$ch(this.$v,e)&&(this.$v=e,this.$o))for(let n=0;n<this.$o.length;n++)LF(this.$o[n],Xf);return this.$v}var MF=function(){this[Oo]=null,this.$ns=null,this.$ps=null,Qa&&Qa.append(this)},Xa=MF.prototype;Xa.$cx=hE;Xa.$eh=null;Xa.$c=null;Xa.$d=null;Xa.append=function(t){if(t[Oo]=this,t.$ps=this,this.$ns)if(t.$ns){let e=t.$ns;for(;e.$ns;)e=e.$ns;e.$ns=this.$ns,this.$ns.$ps=e}else t.$ns=this.$ns,this.$ns.$ps=t;this.$ns=t,t.$cx=t.$cx===hE?this.$cx:{...this.$cx,...t.$cx},this.$eh&&(t.$eh=t.$eh?[...t.$eh,...this.$eh]:this.$eh)};Xa.dispose=function(){mE.call(this)};var QG=function(e,n,r){MF.call(this),this.$st=n?Xf:iu,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=e,n&&(this.$c=n),r&&r.dirty&&(this.$ch=r.dirty)},gE=QG.prototype;Object.setPrototypeOf(gE,Xa);gE.$ch=XG;gE.call=KG;function XG(t,e){return t!==e}function IF(t){return typeof t=="function"}function yE(t){if(t.$st===EF)for(let e=0;e<t.$s.length&&(yE(t.$s[e]),t.$st!==Xf);e++);t.$st===Xf?ZG(t):t.$st=iu}function TF(t){t.$ns&&t.$ns[Oo]===t&&mE.call(t,!1),t.$d&&CF(t),t.$eh=t[Oo]?t[Oo].$eh:null}function ZG(t){let e=Yr,n=gr;Yr=null,gr=0;try{TF(t);let r=YG(t,t.$c,t);if(Yr){if(t.$s&&tw(t,gr),t.$s&&gr>0){t.$s.length=gr+Yr.length;for(let o=0;o<Yr.length;o++)t.$s[gr+o]=Yr[o]}else t.$s=Yr;let i;for(let o=gr;o<t.$s.length;o++)i=t.$s[o],i.$o?i.$o.push(t):i.$o=[t]}else t.$s&&gr<t.$s.length&&(tw(t,gr),t.$s.length=gr);!t.$e&&t.$i?GG.call(t,r):(t.$v=r,t.$i=!0)}catch(r){RF(t,r),t.$st===Xf&&(TF(t),t.$s&&tw(t,0));return}Yr=e,gr=n,t.$st=iu}function LF(t,e){if(!(t.$st>=e)&&(t.$e&&t.$st===iu&&(nu.push(t),nw||jG()),t.$st=e,t.$o))for(let n=0;n<t.$o.length;n++)LF(t.$o[n],EF)}function tw(t,e){let n,r;for(let i=e;i<t.$s.length;i++)n=t.$s[i],n.$o&&(r=n.$o.indexOf(t),n.$o[r]=n.$o[n.$o.length-1],n.$o.pop())}function AF(...t){}function Zf(t){return typeof t=="string"}var SF,JG=Event,$F=Symbol("DOM_EVENT"),fE=class extends JG{constructor(e,...n){super(e,n[0]),this[SF]=!0,this.triggers=new rw,this.detail=n[0]?.detail;let r=n[0]?.trigger;r&&this.triggers.add(r)}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}};SF=$F;var rw=class{constructor(){this.chain=[]}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(e){this.chain.push(e),OF(e)&&this.chain.push(...e.triggers)}remove(e){return this.chain.splice(this.chain.indexOf(e),1)[0]}has(e){return this.chain.some(n=>n===e)}hasType(e){return!!this.findType(e)}findType(e){return this.chain.find(n=>n.type===e)}walk(e){for(let n of this.chain){let r=e(n);if(r)return[n,r]}}[Symbol.iterator](){return this.chain.values()}};function OF(t){return!!t?.[$F]}function eQ(){let t=new Set;return{add(...e){for(let n of e)t.add(n)},empty(){for(let e of t)e();t.clear()}}}function DF(){let t=eQ();return PF(t.empty),t}var vhe=typeof window<"u"?"requestIdleCallback"in window?window.requestIdleCallback:t=>window.setTimeout(t,1):AF;var Vs=require("obsidian");var FF='"use strict";var c=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var h=(s,e)=>{for(var t in e)c(s,t,{get:e[t],enumerable:!0})},w=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of f(e))!y.call(s,r)&&r!==t&&c(s,r,{get:()=>e[r],enumerable:!(i=b(e,r))||i.enumerable});return s};var g=s=>w(c({},"__esModule",{value:!0}),s);var x={};h(x,{default:()=>l});module.exports=g(x);var a=class extends Error{constructor(e,t){super(`${e} (code: ${t})`)}};var p=(s=>{if(!s)throw new Error("env var BILI_REQ_STORE not inited");return s})(process.env.BILI_REQ_STORE);var d=()=>require("youtube-notes");var{waitForSelector:u,MediaPlugin:k}=d(),T=`\n#bilibili-player .bpx-player-control-wrap {\n    opacity: 0 !important;\n}\n.yn-show-controls #bilibili-player .bpx-player-control-wrap {\n    opacity: 100 !important;\n}\n`,l=class extends k{#e=new Map;findMedia(){return u("#bilibili-player video")}getStyle(){return T}async getTracks(){let e=window[p];try{let t=await e.getRequest(),i=JSON.parse(t);if(i.code!==0)throw new a(i.message,i.code);return i.data.subtitle.subtitles.map(r=>{let o=r.lan.startsWith("ai-")?r.lan.substring(3):r.lan,n={wid:r.id.toString(),kind:"subtitles",label:r.lan_doc,language:o};return this.#e.set(n.wid,{url:r.subtitle_url}),n})}catch{return[]}}async getTrack(e){let t=this.#e.get(e);if(!t)return null;let i=await fetch(t.url);if(!i.ok)throw new Error("Failed to fetch subtitle, "+i.statusText);let r=await i.json(),o={Kind:"subtitles",ID:e};return{cues:r.body.map((n,m)=>({id:`${n.sid??m}`,startTime:n.from,endTime:n.to,text:n.content})),metadata:o}}async onload(){this.register(this.controller.handle("bili_getManifest",()=>({value:window.player.getManifest()}))),await super.onload(),this.revertAutoSeek(),Promise.all([this.toggleDanmaku(!1)]),await this.untilWebFullscreen(),await this.getTracks().then(e=>{e.length>0&&this.controller.send("yn-text-tracks",{tracks:e})})}get player(){return this.media.closest("#bilibili-player")}async toggleDanmaku(e){if(window.player){e===void 0&&(e=!window.player.danmaku.isOpen()),e?window.player.danmaku.open():window.player.danmaku.close();return}let t=await u(".bui-danmaku-switch",this.player);if(!t)return;let i=t.querySelector("input.bui-danmaku-switch-input");if(i){if(e===void 0){i.click();return}e!==this.isDanmakuOn(t)&&i.click()}}isDanmakuOn(e){return e.querySelector(".bui-danmaku-switch-off")?.offsetHeight===0}isWebFullscreen(){return this.player.classList.contains("mode-webscreen")}enterWebFullscreen(){this.isWebFullscreen()||u(".bpx-player-ctrl-web",this.player).then(e=>{e.click()})}revertAutoSeek(){let t=this.player.querySelector(".bpx-player-toast-auto");if(!t)return;let i=()=>{this.stateRef.prevSeek&&this.stateRef.prevSeek.time>Date.now()-5e3?this.media.currentTime=this.stateRef.prevSeek.value:this.media.currentTime=0},r=new MutationObserver(o=>{o.find(n=>n.type==="childList"&&n.addedNodes.length>0)?.addedNodes.forEach(n=>{n.textContent?.includes("\\u5DF2\\u4E3A\\u60A8\\u5B9A\\u4F4D\\u81F3")&&(n.style.opacity="0",i())})});r.observe(t,{childList:!0,subtree:!0}),this.register(()=>r.disconnect())}async untilWebFullscreen(){let e=this.player;this.isWebFullscreen()||await new Promise(t=>{let i=new MutationObserver(r=>{r.find(n=>n.type==="attributes"&&n.attributeName==="class"&&e?.classList.contains("mode-webscreen"))&&(i.disconnect(),t(void 0))});i.observe(e,{attributes:!0}),setTimeout(()=>{i.disconnect(),t(void 0)},6e3)})}};\n';var NF=`"use strict";var n=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var u=(r,e)=>{for(var o in e)n(r,o,{get:e[o],enumerable:!0})},y=(r,e,o,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of p(e))!d.call(r,t)&&t!==o&&n(r,t,{get:()=>e[t],enumerable:!(a=l(e,t))||a.enumerable});return r};var c=r=>y(n({},"__esModule",{value:!0}),r);var v={};u(v,{default:()=>i});module.exports=c(v);var s=()=>require("youtube-notes");var m=\`
body:not(.yn-show-controls) .vp-player-ui-overlays {
  opacity: 0 !important;
}
\`,{waitForSelector:M,MediaPlugin:b}=s(),i=class extends b{findMedia(){return M("#main [data-player] .vp-video video")}getStyle(){return super.getStyle()+\`
\`+m}};
`;var VF=`"use strict";var u=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var E=(n,t)=>{for(var e in t)u(n,e,{get:t[e],enumerable:!0})},k=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of v(t))!T.call(n,o)&&o!==e&&u(n,o,{get:()=>t[o],enumerable:!(i=f(t,o))||i.enumerable});return n};var x=n=>k(u({},"__esModule",{value:!0}),n);var S={};E(S,{default:()=>d});module.exports=x(S);var p=()=>require("youtube-notes");var M=\`
body:not(.yn-player-ready) #movie_player, 
ytd-watch-flexy[theater] #movie_player {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  max-width: none !important;
  max-height: none !important;
  min-width: 0 !important;
  min-height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  z-index: 2147483647 !important; /* Ensure it's on top of other elements */
  background-color: #000 !important;
  transform: none !important;
}
.yn-parent {
  overflow: visible !important;
  z-index: auto !important;
  transform: none !important;
  -webkit-transform-style: flat !important;
  transition: none !important;
  contain: none !important;
}
.yn-absolute {
  position: absolute !important;
}
html, body {
  overflow: hidden !important;
  zoom: 100% !important;
}
.yn-parent video {
  object-fit: contain !important;
}
ytd-app .html5-endscreen {
  opacity: 0 !important;
}
body:not(.yn-show-controls) ytd-app .ytp-chrome-bottom {
  opacity: 0 !important;
}
\`.trim(),P=\`
/* \\u9996\\u9875\\u9876\\u90E8\\u6A2A\\u5E45\\u5E7F\\u544A */
#masthead-ad, 
/* \\u9996\\u9875\\u89C6\\u9891\\u6392\\u7248\\u5E7F\\u544A */
ytd-rich-item-renderer.style-scope.ytd-rich-grid-row #content:has(.ytd-display-ad-renderer), 
/* \\u64AD\\u653E\\u5668\\u5E95\\u90E8\\u5E7F\\u544A */
.video-ads.ytp-ad-module, 
/* \\u64AD\\u653E\\u9875\\u4F1A\\u5458\\u4FC3\\u9500\\u5E7F\\u544A */
tp-yt-paper-dialog:has(yt-mealbar-promo-renderer), 
/* \\u64AD\\u653E\\u9875\\u53F3\\u4E0A\\u65B9\\u63A8\\u8350\\u5E7F\\u544A */
ytd-engagement-panel-section-list-renderer[target-id="engagement-panel-ads"], 
/* \\u64AD\\u653E\\u9875\\u8BC4\\u8BBA\\u533A\\u53F3\\u4FA7\\u63A8\\u5E7F\\u5E7F\\u544A */
#related #player-ads, 
/* \\u64AD\\u653E\\u9875\\u8BC4\\u8BBA\\u533A\\u53F3\\u4FA7\\u89C6\\u9891\\u6392\\u7248\\u5E7F\\u544A */
#related ytd-ad-slot-renderer, 
/* \\u641C\\u7D22\\u9875\\u5E7F\\u544A */
ytd-ad-slot-renderer, 
/* \\u64AD\\u653E\\u9875\\u4F1A\\u5458\\u63A8\\u8350\\u5E7F\\u544A */
yt-mealbar-promo-renderer, 
/* M\\u64AD\\u653E\\u9875\\u7B2C\\u4E09\\u65B9\\u63A8\\u8350\\u5E7F */
ad-slot-renderer, 
/* M\\u53EF\\u8DF3\\u8FC7\\u7684\\u89C6\\u9891\\u5E7F\\u544A\\u94FE\\u63A5 */
ytm-companion-ad-renderer {
  opacity: 0 !important;
}
\`.trim(),{waitForSelector:c,MediaPlugin:A}=p(),a=class extends A{async findMedia(){let t=await c("ytd-app #movie_player video");if(this.app=t.closest("ytd-app"),this.moviePlayer=t.closest("#movie_player"),!this.app||!this.moviePlayer)throw new Error("Failed to find media");return this.watchIfDetached(),t}captionSrc=new Map;getTracks(){let t=window.ytInitialPlayerResponse?.captions?.playerCaptionsTracklistRenderer?.captionTracks;return Array.isArray(t)?t.map((e,i)=>{let o=e,r=o.vssId||\`tract\${i}\`;return this.captionSrc.set(r,{url:o.baseUrl}),{wid:r,kind:"subtitles",language:o.languageCode,label:o.name?.simpleText||o.trackName}}):[]}async getTrack(t){let e=this.captionSrc.get(t);if(!e)return null;let i=await fetch(e.url);if(!i.ok)return null;let o=await i.text(),s=[...this.parseXML(o).getElementsByTagName("text")],h={Kind:"subtitles",ID:t};return{cues:s.map((l,y)=>{let m=parseFloat(l.getAttribute("start")),g=parseFloat(l.getAttribute("dur")),b=m+g,w=this.parseHTML(l.textContent).documentElement.textContent??l.textContent??"";return{id:y.toString(),startTime:m,endTime:b,text:w}}),metadata:h}}watchIfDetached(){let t=this.moviePlayer,e=new MutationObserver(async()=>{if(this.media.isConnected)return;let i=await this.findMedia();i&&this.rehookMediaEl(i)});e.observe(t,{childList:!0,subtree:!0}),this.register(()=>e.disconnect())}getStyle(){return M+\`
\`+P}async onload(){await super.onload();let t=this.getTracks();t.length>0&&this.controller.send("yn-text-tracks",{tracks:t}),this.disableAutoPlay(),c("ytd-consent-bump-v2-lightbox",this.app).then(()=>{this.controller.send("yn-open-browser",{message:"Seems like YouTube is showing a consent popup that block playback. To continue playback, you should handle it in dedicated login browser. ",url:"https://youtube.com"})})}app;moviePlayer;async disableAutoPlay(){let e=await c('button.ytp-button[data-tooltip-target-id="ytp-autonav-toggle-button"]',this.app);if(!e)throw new Error("Autoplay button not found");let i=e.querySelector(".ytp-autonav-toggle-button");if(!i)throw new Error("Autoplay button label not found");let o=()=>i.getAttribute("aria-checked")==="true";o()&&(e.click(),await new Promise(r=>{let s=new MutationObserver(()=>{o()||(s.disconnect(),r())});s.observe(i,{attributes:!0})}))}enterWebFullscreen(){this.assignParentClass(this.moviePlayer),(async()=>{let t=await c("#movie_player .ytp-size-button"),e=0;for(;!this.isCinematicsMode()&&e++<5;)t.click(),await C(500);e>=5,window.dispatchEvent(new Event("resize"))})()}isCinematicsMode(){return this.media.offsetWidth===window.innerWidth}};function C(n){return new Promise(t=>setTimeout(t,n))}var d=class extends a{actualDuration=parseInt(ytInitialPlayerResponse?.videoDetails?.lengthSeconds,10);_runningAd=Number.isNaN(this.actualDuration)?null:!1;#t=null;get runningAd(){return this._runningAd}set runningAd(t){if(this._runningAd=t,t===!1)window.clearInterval(this.#t?.id??-1),this.#t=null;else if(t===!0&&!this.#t){let e={id:window.setTimeout(()=>{e.retry++>=2?(this._runningAd=!1,window.clearInterval(e.id),this.#t=null):this.adContinue()},500),retry:0};this.#t=e}}adContinue(){let t=this.moviePlayer.querySelector(".ytp-play-button")??this.moviePlayer;t.click(),L.call(t)}async onload(){if(await super.onload(),this.runningAd!==null){let t=this.media,e=()=>{if(Math.abs(t.duration-this.actualDuration)<=1){this.runningAd=!1;return}this.runningAd=!0,window.location.href.includes("https://m.youtube.com/")&&(t.muted=!0),t.currentTime=t.duration,this.adContinue()};e(),this.media.addEventListener("durationchange",e)}}};function L(){let n=new Touch({identifier:Date.now(),target:this,clientX:12,clientY:34,radiusX:56,radiusY:78,rotationAngle:0,force:1}),t=new TouchEvent("touchstart",{bubbles:!0,cancelable:!0,view:window,touches:[n],targetTouches:[n],changedTouches:[n]});this.dispatchEvent(t);let e=new TouchEvent("touchend",{bubbles:!0,cancelable:!0,view:window,touches:[],targetTouches:[],changedTouches:[n]});this.dispatchEvent(e)}
`;var zF={bilibili:FF,youtube:VF,vimeo:NF,coursera:void 0,generic:void 0};var BF="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var ow=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=BF[n[t]&63];return e};var Jf=ow(12);function ou(t){return t.replaceAll("process.env.BILI_REQ_STORE",JSON.stringify(Jf))}var UF={generic:t=>t,bilibili:t=>t.replaceAll(/[-_]哔哩哔哩.+$|[-_]bilibili.+$|-(?:番剧|电影|纪录片|国创|电视剧|综艺)-.+/g,""),youtube:t=>t.replace(/^\(\d+\) /,"").replace(/ - YouTube$/,""),vimeo:t=>t.replace(/ on Vimeo$/,""),coursera:t=>t.replace(/ \| Coursera$/,"")};function HF(t){return`webpage::${btoa(t)}`}function jF(t){return atob(t.replace(/^webpage::/,""))}function WF(t){return typeof t=="string"&&t.startsWith("webpage::")}function qF(t){return t.type==="TimeRanges"}var sw=class{constructor(e){this.ranges=e}get length(){return this.ranges.length}start(e){return this.ranges[e][0]}end(e){return this.ranges[e][1]}};function yi(t){return qF(t)?new sw(t.value):t}var{onDispose:vE,peek:iQ}=Ms,aw=class{constructor(e,n){this._provider=e;this._ctx=n;T(this,"_disposal",DF());T(this,"_waiting",!1);T(this,"_attachedLoadStart",!1);T(this,"_attachedCanPlay",!1);T(this,"_handlers");T(this,"_handleDevEvent");this._attachInitialListeners(),vE(this._media.on("timeupdate",this._onTimeUpdate.bind(this))),vE(this._onDispose.bind(this))}get _webview(){return this._provider.webview}get _media(){return this._provider.media}get _notify(){return this._ctx.delegate._notify}_onDispose(){this._attachedLoadStart=!1,this._attachedCanPlay=!1,this._disposal.empty()}_attachInitialListeners(){this._attachEventListener("loadstart",this._onLoadStart),this._attachEventListener("abort",this._onAbort),this._attachEventListener("emptied",this._onEmptied),this._attachEventListener("error",this._onError),this._attachEventListener("volumechange",this._onVolumeChange)}_attachLoadStartListeners(){this._attachedLoadStart||(this._disposal.add(this._attachEventListener("loadeddata",this._onLoadedData),this._attachEventListener("loadedmetadata",this._onLoadedMetadata),this._attachEventListener("canplay",this._onCanPlay),this._attachEventListener("canplaythrough",this._onCanPlayThrough),this._attachEventListener("durationchange",this._onDurationChange),this._attachEventListener("play",this._onPlay),this._attachEventListener("progress",this._onProgress),this._attachEventListener("stalled",this._onStalled),this._attachEventListener("suspend",this._onSuspend)),this._attachedLoadStart=!0)}_attachCanPlayListeners(){this._attachedCanPlay||(this._disposal.add(this._attachEventListener("pause",this._onPause),this._attachEventListener("playing",this._onPlaying),this._attachEventListener("ratechange",this._onRateChange),this._attachEventListener("seeked",this._onSeeked),this._attachEventListener("seeking",this._onSeeking),this._attachEventListener("ended",this._onEnded),this._attachEventListener("waiting",this._onWaiting)),this._attachedCanPlay=!0)}_attachEventListener(e,n){let r=n.bind(this),i=this._media.on(e,r);return vE(i)}_onDevEvent(e){}_updateCurrentTime(e,n,r){let i={currentTime:Math.min(e,this._ctx.$state.seekableEnd()),played:n};this._notify("time-update",i,r&&new Event(r.type))}_onLoadStart(e){if(e.payload.networkState===3){this._onAbort(e);return}this._attachLoadStartListeners(),this._notify("load-start",void 0,new Event(e.type))}_onAbort(e){this._notify("abort",void 0,new Event(e.type))}_onEmptied({type:e}){this._notify("emptied",void 0,new Event(e))}_onLoadedData(e){this._notify("loaded-data",void 0,new Event(e.type))}_onLoadedMetadata(e){this._attachCanPlayListeners(),this._notify("loaded-metadata",void 0,new Event(e.type))}_getCanPlayDetail({duration:e,buffered:n,seekable:r}){return{provider:iQ(this._ctx.$provider),duration:e,buffered:n,seekable:r}}_onPlay(e){this._ctx.$state.canPlay()&&this._notify("play",void 0,new Event(e.type))}_onPause({type:e,payload:n}){n.readyState===1&&!this._waiting||(this._waiting=!1,this._notify("pause",void 0,new Event(e)))}_onCanPlay({type:e,payload:n}){let r=yi(n.buffered),i=yi(n.seekable);this._ctx.delegate._ready(this._getCanPlayDetail({duration:n.duration,buffered:r,seekable:i}),new Event(e))}_onCanPlayThrough({type:e,payload:n}){if(this._ctx.$state.started())return;let r=yi(n.buffered),i=yi(n.seekable);this._notify("can-play-through",this._getCanPlayDetail({duration:n.duration,buffered:r,seekable:i}),new Event(e))}_onPlaying({type:e}){this._waiting=!1,this._notify("playing",void 0,new Event(e))}_onStalled({type:e,payload:n}){this._notify("stalled",void 0,new Event(e)),n.readyState<3&&(this._waiting=!0,this._notify("waiting",void 0,new Event(e)))}_onWaiting({type:e,payload:n}){n.readyState<3&&(this._waiting=!0,this._notify("waiting",void 0,new Event(e)))}_onEnded(e){let{payload:n}=e,r=yi(n.played);this._updateCurrentTime(n.duration,r,e),this._notify("end",void 0,new Event(e.type))}_onTimeUpdate(e){let{payload:n}=e,r=yi(n.played);this._updateCurrentTime(n.current,r,e)}_onDurationChange(e){let{payload:n}=e,r=yi(n.played);this._ctx.$state.ended()&&this._updateCurrentTime(n.duration,r,e),this._notify("duration-change",n.duration,new Event(e.type))}_onVolumeChange({type:e,payload:n}){let r={volume:n.volume,muted:n.muted};this._notify("volume-change",r,new Event(e))}_onSeeked(e){let{payload:n}=e,r=yi(n.played);this._updateCurrentTime(n.current,r,e),this._notify("seeked",n.current,new Event(e.type))}_onSeeking({type:e,payload:n}){this._notify("seeking",n.current,new Event(e))}_onProgress({type:e,payload:n}){let r={buffered:yi(n.buffered),seekable:yi(n.seekable)};this._notify("progress",r,new Event(e))}_onSuspend({type:e}){this._notify("suspend",void 0,new Event(e))}_onRateChange({type:e,payload:n}){this._notify("rate-change",n.rate,new Event(e))}_onError({type:e,payload:n}){let r={message:n.message,code:n.code};this._notify("error",r,new ErrorEvent(e,{error:n}))}};async function YF(t,e){return await e.executeJavaScript(`(async function(){${t}})()`)}function KF(t){switch(t.code){case-202:return"SSL certificate isn't trusted by the browser. If the website is self-hosted, double check the SSL certificate and test it with a browser. ";default:return t.message}}var eh=class extends Error{constructor(n){super(`${n.errorCode}: ${n.errorDescription}`);T(this,"code");T(this,"description");T(this,"url");this.code=n.errorCode,this.url=n.validatedURL,this.description=n.errorDescription}};var{onDispose:GF}=Ms,th,lw=class{constructor(e,n,r){this._video=e;this._media=n;this.userGesture=r;Z(this,th,!1);T(this,"_onChange",(e,n)=>{this._media.delegate._notify("picture-in-picture-change",e,n)});GF(e.on("enterpictureinpicture",i=>this._onChange(!0,new Event(i.type)))),GF(e.on("leavepictureinpicture",i=>this._onChange(!1,new Event(i.type))))}async updateActive(){let e=await this._video.methods.pictureInPictureEnabled();return Ve(this,th,e),e}get active(){return this.updateActive(),A(this,th)}get supported(){return!!document.pictureInPictureEnabled}async enter(){await this.userGesture(),await this._video.methods.requestPictureInPicture()}async exit(){await this._video.methods.exitPictureInPicture()}};th=new WeakMap;var{createScope:oQ,onDispose:cw,scoped:sQ}=Ms,Za,nh,yn=class{constructor(e,n){this._webview=e;this._ctx=n;T(this,"scope",oQ());T(this,"$$PROVIDER_TYPE","WEBVIEW");T(this,"_currentSrc",null);T(this,"_port",new cy);T(this,"pictureInPicture");Z(this,Za,null);T(this,"onDomReady",async e=>{let n=this._webview;new aw(this,this._ctx),Ms.effect(()=>{this._ctx.$state.autoPlay()&&this.userGesture()}),this._updateTitle(e),await YF(bF.replaceAll(`"${xM}"`,JSON.stringify(A(this,nh))),n),await this.loadPlugin(this.currentWebHost)});Z(this,nh,ow());sQ(()=>{this.pictureInPicture=new lw(this._port,n,()=>this.userGesture(!0))},this.scope)}setup(){cw(()=>{this._webview.src=""}),aQ(),this.type==="webview"&&this._ctx.delegate._notify("provider-setup",this),this.registerTitleChange(),cw(()=>{this._webview.removeEventListener("dom-ready",this.onDomReady)}),cw(this._port.on("yn-open-browser",({payload:{url:e,message:n=""}})=>{XF({message:n+`Open ${e} in login browser?`,cancelText:"No",onConfirm:()=>{let r=new os(app);r.open(),r.setUrl(e)}})}))}get type(){return"webview"}get webview(){return this._webview}get media(){return this._port}get currentSrc(){return this._currentSrc}get currentWebHost(){return this._currentSrc?.host??"generic"}setPlaybackRate(e){this._port.methods.setPlaybackRate(e)}async userGesture(e=!1){if(!e&&A(this,Za)){await A(this,Za);return}await Ve(this,Za,this.webview.executeJavaScript("1",!0).finally(()=>{Ve(this,Za,null)}))}async play(){this.webview.isConnected&&(await this.userGesture(),await this._port.methods.play())}async pause(){this.webview.isConnected&&(await this.userGesture(),await this._port.methods.pause())}setMuted(e){this._port.methods.setMuted(e)}setVolume(e){this._port.methods.setVolume(e)}setCurrentTime(e){this._ctx.$state.ended.set(!1),this._port.methods.setCurrentTime(e)}get _notify(){return this._ctx.delegate._notify}async _updateTitle(e,n){let r=e=typeof e=="string"?new Event(e):e,i=n??this._webview.getTitle(),o=UF[this.currentWebHost](i),s=this._ctx.$state.title();o!==s&&this._notify("title-change",o,r)}loadPlugin(e){return new Promise((n,r)=>{let i=this._webview,o=this.media.onReady(async()=>{window.clearTimeout(s),await this.media.methods.loadPlugin(ou(zF[e])),n()},{once:!0}),s=setTimeout(()=>{o(),r(new xo(5e3))},5e3),{port1:a,port2:l}=new MessageChannel;this._port.load(a),i.contentWindow.postMessage(A(this,nh),"*",[l])})}handlePlayReady(){let e=new Promise((s,a)=>{let l=()=>{this.webview.removeEventListener("did-stop-loading",c),this.webview.removeEventListener("did-finish-load",c),this.webview.removeEventListener("did-fail-load",u)},c=()=>{s(),l()},u=d=>{a(new eh(d)),l()};this.webview.addEventListener("did-stop-loading",c),this.webview.addEventListener("did-finish-load",c),this.webview.addEventListener("did-fail-load",u)}),n,r=s=>new Promise((a,l)=>{n=window.setTimeout(()=>l(new xo(s)),s)}),i=new Promise(s=>{this._port.once("yn-play-ready",()=>{s(),window.clearTimeout(n)})}),o=1e4;e.then(()=>Promise.race([i,r(o)])).then(()=>{this.togglePlayReady(!0)}).catch(s=>{if(s instanceof xo)lQ(o);else if(s instanceof eh){let a=KF(s);new Vs.Notice(createFragment(l=>{l.appendText(`Failed to load webpage: ${a}`),l.createEl("p",{text:"Click to copy "},c=>c.createEl("a",{href:s.url,text:s.url.length>50?`${s.url.substring(0,50)}...`:s.url},u=>{u.addEventListener("click",d=>{d.preventDefault(),navigator.clipboard.writeText(s.url),new Vs.Notice("URL copied to clipboard.")})}))}))}else throw s}).finally(()=>{this.togglePlayReady(!0)})}registerTitleChange(){let e=this._webview,n=r=>{this._updateTitle(r,r.title)};e.addEventListener("page-title-updated",n),cw(()=>{e.removeEventListener("page-title-updated",n)})}togglePlayReady(e){typeof e>"u"&&(e=!("playReady"in this._webview.dataset)),e?this._webview.dataset.playReady="":delete this._webview.dataset.playReady}untilPluginReady(){let e=this._webview;return this.togglePlayReady(!1),e.removeEventListener("dom-ready",this.onDomReady),this.handlePlayReady(),new Promise((n,r)=>{let i=o=>{this.onDomReady(o).then(n).catch(r),e.removeEventListener("dom-ready",i),e.addEventListener("dom-ready",this.onDomReady)};e.addEventListener("dom-ready",i)})}async loadSource({src:e,type:n}){if(!Zf(e))throw new Error("Webview provider only supports string src.");let r=wt.create(jF(e)),i=this._webview;if(this._currentSrc={src:r?.source.href??"",type:n,host:r?.type??"generic"},!r){i.src="";return}let o=!i.src||is(r.source)!==is(i.src);i.src=r.href,o&&await this.untilPluginReady()}};Za=new WeakMap,nh=new WeakMap;function aQ(){let t="yn:webview-login-notified";localStorage.getItem(t)||(new Vs.Notice(createFragment(n=>{n.appendText("You're using a webpage media player."),n.createEl("p",{text:"If you are requested to login, you can open a browser to login from:"},r=>{r.createEl("br"),r.appendText('- the "Login" command'),r.createEl("br"),r.appendText("- the entry in settings tab")}),n.appendText("Click to dismiss this notice.")}),0),localStorage.setItem(t,"1"))}function lQ(t){let e="yn:webview-timeout-ignore";if(localStorage.getItem(e))return;let r=(t/1e3).toFixed(1);XF({message:`Webpage not fully loaded within ${r}s. You can still try to play.`,onCancel(){console.log("ignore webview timeout notice"),localStorage.setItem(e,"1")},cancelText:"Don't show again",timeout:5e3})}function XF({message:t,cancelText:e="Ignore",confirmText:n="OK",onConfirm:r,onCancel:i,timeout:o}){let s=new Vs.Notice(createFragment(a=>{a.createDiv({text:t}),a.createDiv({},l=>{l.style.display="flex",l.style.justifyContent="flex-end",l.style.gap="1em",l.style.marginTop="1em";let c=new Vs.ButtonComponent(l).setButtonText(n);r&&c.onClick(async()=>{await r(),s.hide()});let u=new Vs.ButtonComponent(l).setButtonText(e);i&&u.onClick(async()=>{await i(),s.hide()})})}),o);return s}var cQ=typeof global=="object"&&global&&global.Object===Object&&global,uw=cQ;var uQ=typeof self=="object"&&self&&self.Object===Object&&self,dQ=uw||uQ||Function("return this")(),Gt=dQ;var pQ=Gt.Symbol,Kr=pQ;var ZF=Object.prototype,fQ=ZF.hasOwnProperty,hQ=ZF.toString,rh=Kr?Kr.toStringTag:void 0;function mQ(t){var e=fQ.call(t,rh),n=t[rh];try{t[rh]=void 0;var r=!0}catch{}var i=hQ.call(t);return r&&(e?t[rh]=n:delete t[rh]),i}var JF=mQ;var gQ=Object.prototype,yQ=gQ.toString;function vQ(t){return yQ.call(t)}var eN=vQ;var wQ="[object Null]",bQ="[object Undefined]",tN=Kr?Kr.toStringTag:void 0;function xQ(t){return t==null?t===void 0?bQ:wQ:tN&&tN in Object(t)?JF(t):eN(t)}var vi=xQ;function _Q(t){return t!=null&&typeof t=="object"}var wi=_Q;var kQ="[object Symbol]";function TQ(t){return typeof t=="symbol"||wi(t)&&vi(t)==kQ}var su=TQ;function SQ(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var nN=SQ;var EQ=Array.isArray,ln=EQ;var PQ=1/0,rN=Kr?Kr.prototype:void 0,iN=rN?rN.toString:void 0;function oN(t){if(typeof t=="string")return t;if(ln(t))return nN(t,oN)+"";if(su(t))return iN?iN.call(t):"";var e=t+"";return e=="0"&&1/t==-PQ?"-0":e}var sN=oN;function CQ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var au=CQ;function RQ(t){return t}var aN=RQ;var MQ="[object AsyncFunction]",IQ="[object Function]",LQ="[object GeneratorFunction]",AQ="[object Proxy]";function $Q(t){if(!au(t))return!1;var e=vi(t);return e==IQ||e==LQ||e==MQ||e==AQ}var dw=$Q;var OQ=Gt["__core-js_shared__"],pw=OQ;var lN=function(){var t=/[^.]+$/.exec(pw&&pw.keys&&pw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function DQ(t){return!!lN&&lN in t}var cN=DQ;var FQ=Function.prototype,NQ=FQ.toString;function VQ(t){if(t!=null){try{return NQ.call(t)}catch{}try{return t+""}catch{}}return""}var Do=VQ;var zQ=/[\\^$.*+?()[\]{}|]/g,BQ=/^\[object .+?Constructor\]$/,UQ=Function.prototype,HQ=Object.prototype,jQ=UQ.toString,WQ=HQ.hasOwnProperty,qQ=RegExp("^"+jQ.call(WQ).replace(zQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function YQ(t){if(!au(t)||cN(t))return!1;var e=dw(t)?qQ:BQ;return e.test(Do(t))}var uN=YQ;function KQ(t,e){return t?.[e]}var dN=KQ;function GQ(t,e){var n=dN(t,e);return uN(n)?n:void 0}var Qn=GQ;var QQ=Qn(Gt,"WeakMap"),fw=QQ;var XQ=function(){try{var t=Qn(Object,"defineProperty");return t({},"",{}),t}catch{}}(),wE=XQ;var ZQ=9007199254740991,JQ=/^(?:0|[1-9]\d*)$/;function eX(t,e){var n=typeof t;return e=e??ZQ,!!e&&(n=="number"||n!="symbol"&&JQ.test(t))&&t>-1&&t%1==0&&t<e}var hw=eX;function tX(t,e,n){e=="__proto__"&&wE?wE(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var pN=tX;function nX(t,e){return t===e||t!==t&&e!==e}var mw=nX;var rX=9007199254740991;function iX(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=rX}var lu=iX;function oX(t){return t!=null&&lu(t.length)&&!dw(t)}var fN=oX;var sX=Object.prototype;function aX(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||sX;return t===n}var hN=aX;function lX(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var mN=lX;var cX="[object Arguments]";function uX(t){return wi(t)&&vi(t)==cX}var bE=uX;var gN=Object.prototype,dX=gN.hasOwnProperty,pX=gN.propertyIsEnumerable,fX=bE(function(){return arguments}())?bE:function(t){return wi(t)&&dX.call(t,"callee")&&!pX.call(t,"callee")},gw=fX;function hX(){return!1}var yN=hX;var bN=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vN=bN&&typeof module=="object"&&module&&!module.nodeType&&module,mX=vN&&vN.exports===bN,wN=mX?Gt.Buffer:void 0,gX=wN?wN.isBuffer:void 0,yX=gX||yN,ih=yX;var vX="[object Arguments]",wX="[object Array]",bX="[object Boolean]",xX="[object Date]",_X="[object Error]",kX="[object Function]",TX="[object Map]",SX="[object Number]",EX="[object Object]",PX="[object RegExp]",CX="[object Set]",RX="[object String]",MX="[object WeakMap]",IX="[object ArrayBuffer]",LX="[object DataView]",AX="[object Float32Array]",$X="[object Float64Array]",OX="[object Int8Array]",DX="[object Int16Array]",FX="[object Int32Array]",NX="[object Uint8Array]",VX="[object Uint8ClampedArray]",zX="[object Uint16Array]",BX="[object Uint32Array]",Xe={};Xe[AX]=Xe[$X]=Xe[OX]=Xe[DX]=Xe[FX]=Xe[NX]=Xe[VX]=Xe[zX]=Xe[BX]=!0;Xe[vX]=Xe[wX]=Xe[IX]=Xe[bX]=Xe[LX]=Xe[xX]=Xe[_X]=Xe[kX]=Xe[TX]=Xe[SX]=Xe[EX]=Xe[PX]=Xe[CX]=Xe[RX]=Xe[MX]=!1;function UX(t){return wi(t)&&lu(t.length)&&!!Xe[vi(t)]}var xN=UX;function HX(t){return function(e){return t(e)}}var _N=HX;var kN=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oh=kN&&typeof module=="object"&&module&&!module.nodeType&&module,jX=oh&&oh.exports===kN,xE=jX&&uw.process,WX=function(){try{var t=oh&&oh.require&&oh.require("util").types;return t||xE&&xE.binding&&xE.binding("util")}catch{}}(),_E=WX;var TN=_E&&_E.isTypedArray,qX=TN?_N(TN):xN,yw=qX;var YX=Object.prototype,KX=YX.hasOwnProperty;function GX(t,e){var n=ln(t),r=!n&&gw(t),i=!n&&!r&&ih(t),o=!n&&!r&&!i&&yw(t),s=n||r||i||o,a=s?mN(t.length,String):[],l=a.length;for(var c in t)(e||KX.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||hw(c,l)))&&a.push(c);return a}var SN=GX;function QX(t,e){return function(n){return t(e(n))}}var EN=QX;var XX=EN(Object.keys,Object),PN=XX;var ZX=Object.prototype,JX=ZX.hasOwnProperty;function eZ(t){if(!hN(t))return PN(t);var e=[];for(var n in Object(t))JX.call(t,n)&&n!="constructor"&&e.push(n);return e}var CN=eZ;function tZ(t){return fN(t)?SN(t):CN(t)}var cu=tZ;var nZ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rZ=/^\w*$/;function iZ(t,e){if(ln(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||su(t)?!0:rZ.test(t)||!nZ.test(t)||e!=null&&t in Object(e)}var uu=iZ;var oZ=Qn(Object,"create"),Fo=oZ;function sZ(){this.__data__=Fo?Fo(null):{},this.size=0}var RN=sZ;function aZ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var MN=aZ;var lZ="__lodash_hash_undefined__",cZ=Object.prototype,uZ=cZ.hasOwnProperty;function dZ(t){var e=this.__data__;if(Fo){var n=e[t];return n===lZ?void 0:n}return uZ.call(e,t)?e[t]:void 0}var IN=dZ;var pZ=Object.prototype,fZ=pZ.hasOwnProperty;function hZ(t){var e=this.__data__;return Fo?e[t]!==void 0:fZ.call(e,t)}var LN=hZ;var mZ="__lodash_hash_undefined__";function gZ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Fo&&e===void 0?mZ:e,this}var AN=gZ;function du(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}du.prototype.clear=RN;du.prototype.delete=MN;du.prototype.get=IN;du.prototype.has=LN;du.prototype.set=AN;var kE=du;function yZ(){this.__data__=[],this.size=0}var $N=yZ;function vZ(t,e){for(var n=t.length;n--;)if(mw(t[n][0],e))return n;return-1}var zs=vZ;var wZ=Array.prototype,bZ=wZ.splice;function xZ(t){var e=this.__data__,n=zs(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():bZ.call(e,n,1),--this.size,!0}var ON=xZ;function _Z(t){var e=this.__data__,n=zs(e,t);return n<0?void 0:e[n][1]}var DN=_Z;function kZ(t){return zs(this.__data__,t)>-1}var FN=kZ;function TZ(t,e){var n=this.__data__,r=zs(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var NN=TZ;function pu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pu.prototype.clear=$N;pu.prototype.delete=ON;pu.prototype.get=DN;pu.prototype.has=FN;pu.prototype.set=NN;var Bs=pu;var SZ=Qn(Gt,"Map"),Us=SZ;function EZ(){this.size=0,this.__data__={hash:new kE,map:new(Us||Bs),string:new kE}}var VN=EZ;function PZ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var zN=PZ;function CZ(t,e){var n=t.__data__;return zN(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Hs=CZ;function RZ(t){var e=Hs(this,t).delete(t);return this.size-=e?1:0,e}var BN=RZ;function MZ(t){return Hs(this,t).get(t)}var UN=MZ;function IZ(t){return Hs(this,t).has(t)}var HN=IZ;function LZ(t,e){var n=Hs(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var jN=LZ;function fu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fu.prototype.clear=VN;fu.prototype.delete=BN;fu.prototype.get=UN;fu.prototype.has=HN;fu.prototype.set=jN;var Ja=fu;var AZ="Expected a function";function TE(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(AZ);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(TE.Cache||Ja),n}TE.Cache=Ja;var WN=TE;var $Z=500;function OZ(t){var e=WN(t,function(r){return n.size===$Z&&n.clear(),r}),n=e.cache;return e}var qN=OZ;var DZ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,FZ=/\\(\\)?/g,NZ=qN(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(DZ,function(n,r,i,o){e.push(i?o.replace(FZ,"$1"):r||n)}),e}),YN=NZ;function VZ(t){return t==null?"":sN(t)}var hu=VZ;function zZ(t,e){return ln(t)?t:uu(t,e)?[t]:YN(hu(t))}var vw=zZ;var BZ=1/0;function UZ(t){if(typeof t=="string"||su(t))return t;var e=t+"";return e=="0"&&1/t==-BZ?"-0":e}var js=UZ;function HZ(t,e){e=vw(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[js(e[n++])];return n&&n==r?t:void 0}var ww=HZ;function jZ(t,e,n){var r=t==null?void 0:ww(t,e);return r===void 0?n:r}var KN=jZ;function WZ(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var GN=WZ;function qZ(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var QN=qZ;function YZ(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:QN(t,e,n)}var XN=YZ;var KZ="\\ud800-\\udfff",GZ="\\u0300-\\u036f",QZ="\\ufe20-\\ufe2f",XZ="\\u20d0-\\u20ff",ZZ=GZ+QZ+XZ,JZ="\\ufe0e\\ufe0f",eJ="\\u200d",tJ=RegExp("["+eJ+KZ+ZZ+JZ+"]");function nJ(t){return tJ.test(t)}var bw=nJ;function rJ(t){return t.split("")}var ZN=rJ;var JN="\\ud800-\\udfff",iJ="\\u0300-\\u036f",oJ="\\ufe20-\\ufe2f",sJ="\\u20d0-\\u20ff",aJ=iJ+oJ+sJ,lJ="\\ufe0e\\ufe0f",cJ="["+JN+"]",SE="["+aJ+"]",EE="\\ud83c[\\udffb-\\udfff]",uJ="(?:"+SE+"|"+EE+")",e2="[^"+JN+"]",t2="(?:\\ud83c[\\udde6-\\uddff]){2}",n2="[\\ud800-\\udbff][\\udc00-\\udfff]",dJ="\\u200d",r2=uJ+"?",i2="["+lJ+"]?",pJ="(?:"+dJ+"(?:"+[e2,t2,n2].join("|")+")"+i2+r2+")*",fJ=i2+r2+pJ,hJ="(?:"+[e2+SE+"?",SE,t2,n2,cJ].join("|")+")",mJ=RegExp(EE+"(?="+EE+")|"+hJ+fJ,"g");function gJ(t){return t.match(mJ)||[]}var o2=gJ;function yJ(t){return bw(t)?o2(t):ZN(t)}var s2=yJ;function vJ(t){return function(e){e=hu(e);var n=bw(e)?s2(e):void 0,r=n?n[0]:e.charAt(0),i=n?XN(n,1).join(""):e.slice(1);return r[t]()+i}}var a2=vJ;var wJ=a2("toUpperCase"),sh=wJ;function bJ(){this.__data__=new Bs,this.size=0}var l2=bJ;function xJ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var c2=xJ;function _J(t){return this.__data__.get(t)}var u2=_J;function kJ(t){return this.__data__.has(t)}var d2=kJ;var TJ=200;function SJ(t,e){var n=this.__data__;if(n instanceof Bs){var r=n.__data__;if(!Us||r.length<TJ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ja(r)}return n.set(t,e),this.size=n.size,this}var p2=SJ;function mu(t){var e=this.__data__=new Bs(t);this.size=e.size}mu.prototype.clear=l2;mu.prototype.delete=c2;mu.prototype.get=u2;mu.prototype.has=d2;mu.prototype.set=p2;var gu=mu;function EJ(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var f2=EJ;function PJ(){return[]}var h2=PJ;var CJ=Object.prototype,RJ=CJ.propertyIsEnumerable,m2=Object.getOwnPropertySymbols,MJ=m2?function(t){return t==null?[]:(t=Object(t),f2(m2(t),function(e){return RJ.call(t,e)}))}:h2,g2=MJ;function IJ(t,e,n){var r=e(t);return ln(t)?r:GN(r,n(t))}var y2=IJ;function LJ(t){return y2(t,cu,g2)}var PE=LJ;var AJ=Qn(Gt,"DataView"),xw=AJ;var $J=Qn(Gt,"Promise"),_w=$J;var OJ=Qn(Gt,"Set"),kw=OJ;var v2="[object Map]",DJ="[object Object]",w2="[object Promise]",b2="[object Set]",x2="[object WeakMap]",_2="[object DataView]",FJ=Do(xw),NJ=Do(Us),VJ=Do(_w),zJ=Do(kw),BJ=Do(fw),el=vi;(xw&&el(new xw(new ArrayBuffer(1)))!=_2||Us&&el(new Us)!=v2||_w&&el(_w.resolve())!=w2||kw&&el(new kw)!=b2||fw&&el(new fw)!=x2)&&(el=function(t){var e=vi(t),n=e==DJ?t.constructor:void 0,r=n?Do(n):"";if(r)switch(r){case FJ:return _2;case NJ:return v2;case VJ:return w2;case zJ:return b2;case BJ:return x2}return e});var CE=el;var UJ=Gt.Uint8Array,RE=UJ;var HJ="__lodash_hash_undefined__";function jJ(t){return this.__data__.set(t,HJ),this}var k2=jJ;function WJ(t){return this.__data__.has(t)}var T2=WJ;function Tw(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ja;++e<n;)this.add(t[e])}Tw.prototype.add=Tw.prototype.push=k2;Tw.prototype.has=T2;var S2=Tw;function qJ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var E2=qJ;function YJ(t,e){return t.has(e)}var P2=YJ;var KJ=1,GJ=2;function QJ(t,e,n,r,i,o){var s=n&KJ,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var d=-1,p=!0,f=n&GJ?new S2:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var h=t[d],g=e[d];if(r)var w=s?r(g,h,d,e,t,o):r(h,g,d,t,e,o);if(w!==void 0){if(w)continue;p=!1;break}if(f){if(!E2(e,function(m,y){if(!P2(f,y)&&(h===m||i(h,m,n,r,o)))return f.push(y)})){p=!1;break}}else if(!(h===g||i(h,g,n,r,o))){p=!1;break}}return o.delete(t),o.delete(e),p}var Sw=QJ;function XJ(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var C2=XJ;function ZJ(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var R2=ZJ;var JJ=1,eee=2,tee="[object Boolean]",nee="[object Date]",ree="[object Error]",iee="[object Map]",oee="[object Number]",see="[object RegExp]",aee="[object Set]",lee="[object String]",cee="[object Symbol]",uee="[object ArrayBuffer]",dee="[object DataView]",M2=Kr?Kr.prototype:void 0,ME=M2?M2.valueOf:void 0;function pee(t,e,n,r,i,o,s){switch(n){case dee:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case uee:return!(t.byteLength!=e.byteLength||!o(new RE(t),new RE(e)));case tee:case nee:case oee:return mw(+t,+e);case ree:return t.name==e.name&&t.message==e.message;case see:case lee:return t==e+"";case iee:var a=C2;case aee:var l=r&JJ;if(a||(a=R2),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=eee,s.set(t,e);var u=Sw(a(t),a(e),r,i,o,s);return s.delete(t),u;case cee:if(ME)return ME.call(t)==ME.call(e)}return!1}var I2=pee;var fee=1,hee=Object.prototype,mee=hee.hasOwnProperty;function gee(t,e,n,r,i,o){var s=n&fee,a=PE(t),l=a.length,c=PE(e),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var p=a[d];if(!(s?p in e:mee.call(e,p)))return!1}var f=o.get(t),h=o.get(e);if(f&&h)return f==e&&h==t;var g=!0;o.set(t,e),o.set(e,t);for(var w=s;++d<l;){p=a[d];var m=t[p],y=e[p];if(r)var v=s?r(y,m,p,e,t,o):r(m,y,p,t,e,o);if(!(v===void 0?m===y||i(m,y,n,r,o):v)){g=!1;break}w||(w=p=="constructor")}if(g&&!w){var b=t.constructor,k=e.constructor;b!=k&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof k=="function"&&k instanceof k)&&(g=!1)}return o.delete(t),o.delete(e),g}var L2=gee;var yee=1,A2="[object Arguments]",$2="[object Array]",Ew="[object Object]",vee=Object.prototype,O2=vee.hasOwnProperty;function wee(t,e,n,r,i,o){var s=ln(t),a=ln(e),l=s?$2:CE(t),c=a?$2:CE(e);l=l==A2?Ew:l,c=c==A2?Ew:c;var u=l==Ew,d=c==Ew,p=l==c;if(p&&ih(t)){if(!ih(e))return!1;s=!0,u=!1}if(p&&!u)return o||(o=new gu),s||yw(t)?Sw(t,e,n,r,i,o):I2(t,e,l,n,r,i,o);if(!(n&yee)){var f=u&&O2.call(t,"__wrapped__"),h=d&&O2.call(e,"__wrapped__");if(f||h){var g=f?t.value():t,w=h?e.value():e;return o||(o=new gu),i(g,w,n,r,o)}}return p?(o||(o=new gu),L2(t,e,n,r,i,o)):!1}var D2=wee;function F2(t,e,n,r,i){return t===e?!0:t==null||e==null||!wi(t)&&!wi(e)?t!==t&&e!==e:D2(t,e,n,r,F2,i)}var Pw=F2;var bee=1,xee=2;function _ee(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var l=a[0],c=t[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new gu;if(r)var p=r(c,u,l,t,e,d);if(!(p===void 0?Pw(u,c,bee|xee,r,d):p))return!1}}return!0}var N2=_ee;function kee(t){return t===t&&!au(t)}var Cw=kee;function Tee(t){for(var e=cu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Cw(i)]}return e}var V2=Tee;function See(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Rw=See;function Eee(t){var e=V2(t);return e.length==1&&e[0][2]?Rw(e[0][0],e[0][1]):function(n){return n===t||N2(n,t,e)}}var z2=Eee;function Pee(t,e){return t!=null&&e in Object(t)}var B2=Pee;function Cee(t,e,n){e=vw(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=js(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&lu(i)&&hw(s,i)&&(ln(t)||gw(t)))}var U2=Cee;function Ree(t,e){return t!=null&&U2(t,e,B2)}var H2=Ree;var Mee=1,Iee=2;function Lee(t,e){return uu(t)&&Cw(e)?Rw(js(t),e):function(n){var r=KN(n,t);return r===void 0&&r===e?H2(n,t):Pw(e,r,Mee|Iee)}}var j2=Lee;function Aee(t){return function(e){return e?.[t]}}var W2=Aee;function $ee(t){return function(e){return ww(e,t)}}var q2=$ee;function Oee(t){return uu(t)?W2(js(t)):q2(t)}var Y2=Oee;function Dee(t){return typeof t=="function"?t:t==null?aN:typeof t=="object"?ln(t)?j2(t[0],t[1]):z2(t):Y2(t)}var K2=Dee;function Fee(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(n(o[l],l,o)===!1)break}return e}}var G2=Fee;var Nee=G2(),Q2=Nee;function Vee(t,e){return t&&Q2(t,e,cu)}var X2=Vee;var Z2=/[\\^$.*+?()[\]{}|]/g,zee=RegExp(Z2.source);function Bee(t){return t=hu(t),t&&zee.test(t)?t.replace(Z2,"\\$&"):t}var Mw=Bee;function Uee(t,e){var n={};return e=K2(e,3),X2(t,function(r,i,o){pN(n,i,e(r,i,o))}),n}var IE=Uee;var yr=I(H());var cV=require("url"),uV=require("obsidian");function bi(t,e="/"){let n=t.split(e).pop(),r=n.split(".").pop(),i={name:n,path:t,parent:t.slice(0,-n.length-1)};return r===n?{extension:"",basename:n,...i}:{extension:r,basename:n.slice(0,-r.length-1),...i}}var $w=I(LE());function Aw(t,e){let n=new Map;for(let r of t){let i=e(r),o=n.get(i);o?o.push(r):n.set(i,[r])}return n}var aV={"de-AT":"\xD6sterreichisches Deutsch","de-CH":"Schweizer Hochdeutsch","en-AU":"Australian English","en-CA":"Canadian English","en-GB":"British English","en-US":"American English","es-ES":"espa\xF1ol de Espa\xF1a","es-MX":"espa\xF1ol de M\xE9xico","fr-CA":"fran\xE7ais canadien","fr-CH":"fran\xE7ais suisse","nl-BE":"Vlaams","pt-BR":"portugu\xEAs do Brasil","pt-PT":"portugu\xEAs europeu","ro-MD":"moldoveneasc\u0103","zh-Hans":"\u7B80\u4F53\u4E2D\u6587","zh-Hant":"\u7E41\u9AD4\u4E2D\u6587"},lV=()=>Aw(Object.entries(aV),([t])=>t.split("-")[0]),sV={"zh-Hans":["CN","SG","MY"],"zh-Hant":["TW","HK","MO"]};function yu(t,e=n=>n){if(!t?.trim())return"";t=t.trim();let n=t.split("-"),r=n[0].toLowerCase();if(n.length===1)return e($w.default.getNativeName(r));let i=n.slice(0,2).join("-");return e(aV[i]||`${$w.default.getNativeName(n[0])} - ${t}`)}function jee(t){return t.toLowerCase()==="hans"||sV["zh-Hans"].includes(t.toUpperCase())?"zh-Hans":t.toLowerCase()==="hant"||sV["zh-Hant"].includes(t.toUpperCase())?"zh-Hant":"zh"}function lh(t){if(!t)return!1;let e=t.split("-")[0].toLowerCase();return $w.default.validate(e)}function Ow(t){if(!lh(t))return null;let e=t.split("-"),n=e[0].toLowerCase();if(e.length===1)return n;let r=e[1];return n==="zh"?jee(r):`${n}-${e.slice(1).map((i,o)=>o===0?i.toUpperCase():i).join("-")}`}var Wee=new Set(["https:","http:","file:"]),ch={subtitles:{singular:"subtitle",plural:"subtitles"},captions:{singular:"caption",plural:"captions"}},dV=Object.keys(ch),qee="wid";function pV(t,e={}){let n=rr(t);if(!n||!Wee.has(n.protocol))return null;if(n.protocol==="file:")try{let r=(0,cV.fileURLToPath)(n),i=Ws(bi(r),{kind:e.kind,subpath:n.hash});return i||null}catch(r){return console.error("Failed to resolve file path",r,n.href),null}try{return Yee(n,e)}catch(r){return console.error("Invalid track URL",r,n.href),null}}function fV(t){let e=new URLSearchParams(t.replace(/^#/,"")),n=e.get("type")??void 0;(!n||!tl(n))&&(n=void 0);let r=e.get("kind")??void 0;return r!=="captions"&&r!=="subtitles"&&(r=void 0),{language:e.get("lang")??void 0,label:e.get("label")??void 0,type:n,kind:r,wid:e.get(qee)??void 0}}function Yee(t,{kind:e}){let n=fV(t.hash),{wid:r,kind:i=e??"subtitles",label:o}=n,{language:s,type:a}=n,{basename:l,extension:c}=bi(t.pathname,"/");if(tl(c)){let{language:u}=hV(l);return u&&(s??(s=u)),a??(a=c),{wid:r,language:s,label:o,type:a,kind:i,src:t}}if(!a)throw new Error("Cannot infer format from URL, provide format in hash: "+t.href);return{wid:r,language:s,label:o,type:a,kind:i,src:t}}function hV(t){let e=t.split("."),n=e.length>1?Ow(e.last()):null;return{basename:n?t.replace(new RegExp(`\\.?${e.last()}$`),""):t,language:n}}var mV=["vtt","srt","ass","ssa"],Kee=new Set(mV),Dw=()=>[...mV];function tl(t){return Kee.has(t)}function Gee(t){return tl(t.extension)}function Ws(t,{kind:e="subtitles",subpath:n="",alias:r}={}){if(!Gee(t))return null;let{basename:i,language:o}=hV(t.basename),s=fV(n);return{wid:s.wid,kind:s.kind??e,basename:i,label:r??s.label,language:s.language??o??void 0,src:t,type:s.type??t.extension}}function No({wid:t,src:e}){let n=e instanceof URL?"url":e instanceof uV.TFile?"file":"file-url",r=e instanceof URL?is(e):e.path;return{id:`${n}:${r}`,wid:t}}function gV(t){return t.startsWith("file:")}function Fw(t){return Array.from(new Set(t))}function yV(t,e){let n=Fw(t.reduce((i,o)=>{let s=Ow(o.language);return s&&i.push(s),i},[]));return e?n.find(i=>{if(i)return i===e})??n.find(i=>{if(!i)return;let o=i.split("-")[0],s=e.split("-")[0];return o===s}):n.filter(i=>!!i)[0]}function AE(){let t=Ze(r=>r.source?.url?`yn-last-track:${Et(r.source.url)}`:null),[e,n]=(0,yr.useState)(()=>t&&window?window.localStorage.getItem(t):null);return(0,yr.useEffect)(()=>{},[t]),[e===""?!1:e,(0,yr.useCallback)(r=>{t&&(r?window?.localStorage.setItem(t,r):window?.localStorage.setItem(t,""))},[t])]}function Qee(){let t=xi(n=>n.defaultLanguage),e=xi(n=>n.getDefaultLang);return(0,yr.useMemo)(()=>e(),[t])}function Xee(){let[t]=AE(),e=Qee(),n=xi(r=>r.enableSubtitle);return(0,yr.useCallback)((...r)=>{if(t===!1)return()=>!1;if(t){let i=Jee(t);return({id:o,wid:s})=>o===t||s===i}if(n){let i=yV(r,e);return i?({language:o})=>o===i:(o,s)=>s===0}return()=>!1},[e,n,t])}function vV(){let t=Ze(a=>a.textTracks.local),e=Ze(a=>a.textTracks.remote),n=Ze(a=>a.updateWebsiteTracks),r=ew(),i=Xee();(0,yr.useEffect)(()=>{if(!(r instanceof yn))return;let a=o.current;return r.media.on("yn-text-tracks",({payload:{tracks:l}})=>{a.set(l,r),n(l),l.length!==0&&console.debug("Remote tracks loaded",l)})},[r,n]);let o=(0,yr.useRef)();o.current??(o.current=new WeakMap);let s=qr();(0,yr.useEffect)(()=>{if(!s)return;let a=o.current.get(e),l=async(p,f)=>{let h=ete(p);if(!h)return fetch(p,f);if(!a)return new Response(null,{status:500});let g=await a.media.methods.getTrack(h);return g?new Response(JSON.stringify(g),{headers:{"Content-Type":"application/json"}}):new Response(null,{status:404})},c=i(...t,...e),u=t.map((p,f)=>{let{wid:h,src:g,...w}=p,m=No(p).id,y=c({id:m,language:w.language,wid:h},f);return new gn({...w,id:m,default:y})}),d=dh(e,t).map(({wid:p,...f},h)=>{let g=wV(p),w=c({id:g,language:f.language,wid:p},h+t.length),m=new gn({...f,id:g,type:"json",src:Zee(p),default:w});return m.customFetch=l,m});s.textTracks.clear(),s.textTracks._defaults={},[...u,...d].sort($E).forEach((p,f)=>{p.label=uh(p,f),s.textTracks.add(p)})},[i,s,t,e])}var Nw="webpage:";function wV(t){return Nw+t}function Zee(t){return`webview://${wV(t)}`}function Jee(t){return t.startsWith(Nw)?t.slice(Nw.length):null}function ete(t){return typeof t!="string"||!t.startsWith("webview://")?null:t.slice(`webview://${Nw}`.length)}function dh(t,e){return t.filter(n=>!e.some(({wid:r})=>r===n.wid))}function uh(t,e){return t.label||yu(t.language)||`${sh(t.kind)} ${e+1}`}function $E(t,e){if(t&&e){if(t.language&&e.language)return t.language.localeCompare(e.language);if(!t.language&&!e.language)return uh(t,-1).localeCompare(uh(e,-1));if(t.language&&!e.language)return-1;if(!t.language&&e.language)return 1}return t===null&&e!==null?1:t!==null&&e===null?-1:0}var bV={"application/prs.cww":["cww"],"application/prs.xsf+xml":["xsf"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["*xfdf"],"application/vnd.age":["age"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.autodesk.fbx":["fbx"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dcmp+xml":["dcmp"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["*fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.slides":["ggs"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.drawing":["gdraw"],"application/vnd.google-apps.form":["gform"],"application/vnd.google-apps.jam":["gjam"],"application/vnd.google-apps.map":["gmap"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.script":["gscript"],"application/vnd.google-apps.site":["gsite"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.gov.sk.xmldatacontainer+xml":["xdcf"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["*mpp","mpt"],"application/vnd.ms-visio.viewer":["vdx"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.nato.bindingdataobject+xml":["bdo"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.procrate.brushset":["brushset"],"application/vnd.procreate.brush":["brush"],"application/vnd.procreate.dream":["drm"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.pwg-xhtml-print+xml":["xhtm"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml","uo"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw","vsdx","vtx"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blender":["blend"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-compressed":["*rar"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-ipynb+json":["ipynb"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["*prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["*sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zip-compressed":["*zip"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["*aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-adobe-dng":["dng"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.bary":["bary"],"model/vnd.cld":["cld"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["*mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.pytha.pyox":["pyo","pyox"],"model/vnd.sap.vds":["vds"],"model/vnd.usda":["usda"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.familysearch.gedcom":["ged"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};Object.freeze(bV);var xV=bV;var _V={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/dicom":["dcm"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg","one","onea"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"application/zip+dotlottie":["lottie"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a","m4b"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/ief":["ief"],"image/jaii":["jaii"],"image/jais":["jais"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpg","jpeg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxl":["jxl"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/pjpeg":["jfif"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime","mht","mhtml"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step":["step","stp","stpnc","p21","210"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts","m2t","m2ts","mts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(_V);var kV=_V;var Gr=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},vu,ph,nl,OE=class{constructor(...e){vu.set(this,new Map),ph.set(this,new Map),nl.set(this,new Map);for(let n of e)this.define(n)}define(e,n=!1){for(let[r,i]of Object.entries(e)){r=r.toLowerCase(),i=i.map(a=>a.toLowerCase()),Gr(this,nl,"f").has(r)||Gr(this,nl,"f").set(r,new Set);let o=Gr(this,nl,"f").get(r),s=!0;for(let a of i){let l=a.startsWith("*");if(a=l?a.slice(1):a,o?.add(a),s&&Gr(this,ph,"f").set(r,a),s=!1,l)continue;let c=Gr(this,vu,"f").get(a);if(c&&c!=r&&!n)throw new Error(`"${r} -> ${a}" conflicts with "${c} -> ${a}". Pass \`force=true\` to override this definition.`);Gr(this,vu,"f").set(a,r)}}return this}getType(e){if(typeof e!="string")return null;let n=e.replace(/^.*[/\\]/s,"").toLowerCase(),r=n.replace(/^.*\./s,"").toLowerCase(),i=n.length<e.length;return!(r.length<n.length-1)&&i?null:Gr(this,vu,"f").get(r)??null}getExtension(e){return typeof e!="string"?null:(e=e?.split?.(";")[0],(e&&Gr(this,ph,"f").get(e.trim().toLowerCase()))??null)}getAllExtensions(e){return typeof e!="string"?null:Gr(this,nl,"f").get(e.toLowerCase())??null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(let e of Gr(this,nl,"f").values())Object.freeze(e);return this}_getTestState(){return{types:Gr(this,vu,"f"),extensions:Gr(this,ph,"f")}}};vu=new WeakMap,ph=new WeakMap,nl=new WeakMap;var DE=OE;var FE=new DE(kV,xV)._freeze();var vn=require("obsidian");var fh=require("obsidian");async function TV(t,e,n){let r=document.createElement("canvas"),{videoWidth:i,videoHeight:o}=t;if(!i||!o)throw new Error("Cannot screenshot video without width or height");Object.assign(r,{width:i,height:o});let s=r.getContext("2d",{alpha:!1});if(!s)throw new Error("Canvas context creation failed");s.drawImage(t,0,0,i,o);let a=await new Promise((c,u)=>{try{r.toBlob(d=>{d?c(d):u(new Error("Canvas to blob failed"))},e,n)}catch(d){u(d)}}),l=await a.arrayBuffer();return{time:t.currentTime,blob:{arrayBuffer:l,type:a.type}}}function rl(t){return tu(t)||t instanceof yn}async function hh(t,e,n){let r=fh.Platform.isSafari&&e==="image/webp"?"image/jpeg":e;try{if(tu(t))return await TV(t.video,r,n);if(t instanceof yn)return await t.media.methods.screenshot(r,n);throw new Error("Unsupported provider for screenshot")}catch(i){throw i?.name==="SecurityError"||i?.message?.match(/Tainted canvas/i)?new fh.Notice("Cannot take screenshot due to CORS restriction, you may try open media as webpage to bypass this"):new fh.Notice("Cannot take screenshot: "+(i instanceof Error?i.message:String(i))),i}}var il=require("obsidian");async function Vw(t,{plugin:e,sourcePath:n}){let{fileManager:r,vault:i}=e.app;if(!t){let s=`${Date.now()}.${Math.random().toString(36).substring(2)}`;t=(0,il.normalizePath)((await r.getAvailablePathForAttachment(s,n)).replace(s,""))}let o=i.getAbstractFileByPath(t);if(o instanceof il.TFolder)return o;if(o===null)return await i.createFolder(t).catch(s=>{throw new il.Notice(`Failed to create folder ${t}: ${s instanceof Error?s.message:s}`),s});throw new il.Notice(`Folder path occupied, check your preferences: ${o.path}`),new Error(`Folder occupied: ${o.path}`)}function zw(){return/[<>:"/\\|?*\u0000-\u001F]/g}function SV(){return/^(con|prn|aux|nul|com\d|lpt\d)$/i}var tte=100,nte=/^\.+(\\|\/)|^\.+$/,rte=/\.+$/;function NE(t,e={}){let n=/[\u0000-\u001F\u0080-\u009F]/g,r=/([<>:"/\\|?*\u0000-\u001F]){2,}/g;if(typeof t!="string")throw new TypeError("Expected a string");let i=e.replacement===void 0?"!":e.replacement;if(zw().test(i)&&n.test(i))throw new Error("Replacement string cannot contain reserved filename characters");i.length>0&&(t=t.replace(r,"$1")),t=t.normalize("NFD"),t=t.replace(nte,i),t=t.replace(zw(),i),t=t.replace(n,i),t=t.replace(rte,""),i.length>0&&(!(t[0]===".")&&t[0]==="."&&(t=i+t),t[t.length-1]==="."&&(t+=i)),t=SV().test(t)?t+i:t;let o=typeof e.maxLength=="number"?e.maxLength:tte;if(t.length>o){let s=t.lastIndexOf(".");if(s===-1)t=t.slice(0,o);else{let a=t.slice(0,s),l=t.slice(s);t=a.slice(0,Math.max(1,o-l.length))+l}}return t}function wu(t){return NE(t,{replacement:"_"}).replaceAll(/[[\]#^|]/g,"_")}function ite(t,e){if(e?.title)return e.title;if(t.isFileUrl){let{basename:n,extension:r}=bi(t.pathname);if(r)return n}return t.type!=="generic"&&t.id?`${t.type}: ${t.id}`:t.source.hostname+decodeURI(t.source.pathname).replaceAll("/","_")}function Vo(t,{state:e}={}){return Te(t)?t.file.basename:ite(t,e)}function Bw(t){let e=t.player;if(!e)return new vn.Notice("Player not initialized"),!1;let n=t.getMediaInfo();return n?!e?.provider||!rl(e.provider)?(new vn.Notice("Screenshot is not supported for this media"),!1):{media:n,provider:e.provider,state:e.state,app:t.plugin.app,settings:t.plugin.settings.getState()}:(new vn.Notice("No media is opened"),!1)}async function mh(t,{file:e,editor:n}){let r=Bw(t);if(!r)return!1;let{provider:i,state:o,media:s,app:{fileManager:a,vault:l},settings:{insertBefore:c,screenshotTemplate:u,screenshotEmbedTemplate:d,screenshotQuality:p,screenshotFormat:f,screenshotFolderPath:h}}=r,{blob:g,time:w}=await hh(i,f,p),m=es(w,s,r),y=FE.getExtension(g.type);if(!y)return new vn.Notice("Unknown mime type: "+g.type),!1;let v=Vo(s,{state:o}),b=wu(v)+ER(w),k=w>0?` - ${Jo(w)}`:"",_=await Vw(h,{plugin:t.plugin,sourcePath:e.path}),S=`${b}.${y}`,C=(0,vn.normalizePath)(`${_.path}/${S}`),M=!1,x=l.getAbstractFileByPath(C);if(x instanceof vn.TFile)await l.modifyBinary(x,g.arrayBuffer).catch($=>{throw new vn.Notice(`Failed to save screenshot to ${x}: ${$ instanceof Error?$.message:$}`),$});else if(x===null)M=!0,x=await l.createBinary(C,g.arrayBuffer).catch($=>{throw new vn.Notice(`Failed to create screenshot in ${x}: ${$ instanceof Error?$.message:$}`),$});else return new vn.Notice(`Screenshot file occupied by a folder: ${x.path}`),!1;new vn.Notice(`Screenshot ${M?"created in":"save to"} ${x.path}`);try{return Il({timestamp:m(e.path),screenshot:a.generateMarkdownLink(x,e.path,"",d.replaceAll("{{TITLE}}",v).replaceAll("{{DURATION}}",k)).replace(/^!/,"")},{editor:n,template:u,insertBefore:c}),!0}catch($){return new vn.Notice("Failed to insert screenshot, see console for details"),console.error("Failed to insert screenshot",$),!1}}async function gh(t){let{provider:e}=t,{blob:{arrayBuffer:n,type:r}}=await hh(e,"image/png",void 0),i;try{i=new ClipboardItem({[r]:new Blob([n],{type:r})})}catch(o){return new vn.Notice("Failed to copy screenshot, see console for details"),console.error("Failed to copy screenshot",o),!1}await navigator.clipboard.write([i]),new vn.Notice("Screenshot copied to clipboard")}var yh=require("obsidian");async function vh(t,{file:e,editor:n}){let r=t.player;if(!r)return new yh.Notice("Player not initialized"),!1;let i=t.getMediaInfo();if(!i)return new yh.Notice("No media is opened"),!1;let o=r.currentTime,s=es(o,i,{app:t.plugin.app,settings:t.plugin.settings.getState(),duration:r.state.duration});if(o<=0)return new yh.Notice("Playback not started yet"),!1;let{insertBefore:a,timestampTemplate:l}=t.plugin.settings.getState();try{return Il({timestamp:s(e.path)},{editor:n,template:l,insertBefore:a}),!0}catch(c){return new yh.Notice("Failed to insert timestamp, see console for details"),console.error("Failed to insert timestamp",c),!1}}var EV=require("obsidian");function VE(t){let e="yn:media-notetaking-notified";localStorage.getItem(e)||(new EV.Notice(createFragment(r=>{r.appendText(`You are taking ${t} from media player. By default, they will only be saved in the media note. `),r.createEl("p",{text:`To take ${t} or control playback from abritrary note, use command when focused on the note`}),r.createEl("p",{text:"PS: you can assign a hotkey to each command in the settings"}),r.appendText("Click to dismiss this notice.")}),0),localStorage.setItem(e,"1"))}function Uw(t){let e=rr(t);if(!e)return"";let{basename:n,extension:r}=bi(e.pathname);return r?decodeURI(n):""}function Hw(t){let{plugin:e}=t;t.addAction("star","Take timestamp in media note",()=>{let r=t.getMediaInfo();r&&(VE("timestamp"),e.mediaNote.getNote(r,t.player).then(i=>e.leafOpener.openNote(i)).then(i=>vh(t,i)))});let n=t.getViewType();eM.has(n)&&t.addAction("camera","Take screenshot in media",()=>{let r=t.getMediaInfo();r&&(VE("screenshot"),e.mediaNote.getNote(r,t.player).then(i=>e.leafOpener.openNote(i)).then(i=>mh(t,i)))})}function jw(t,e,n){let{player:r,source:i,toggleControls:o,controls:s,setTransform:a,transform:l,toggleWebFullscreen:c,disableWebFullscreen:u,textTracks:d}=t.store.getState();!r||!i||t.plugin.app.workspace.trigger("yn:media-menu",e,{source:i.url,viewType:i.viewType,tracks:{local:d.local,remote:dh(d.remote,d.local)},player:r,toggleControls:o,controls:s,setTransform:a,transform:l,plugin:t.plugin,disableWebFullscreen:u,toggleWebFullscreen:c,reload:()=>t.render()},n,t.leaf)}var wh={generic:"media",video:"video",audio:"audio"},PV=Object.values(wh);function Xn(t,e){if(!t||!e)return!1;let n=Et(t),r=Et(e);return n===r}var zE=new WeakSet;function CV(t){t.subscribe((e,n)=>{e.player!==n.player&&bh(e)}),t.subscribe((e,n)=>{let r=e.player;if(!r)return;let i=e.source,o=n.source;if(i===o)return;let s=i?.url,a=o?.url;s!==a&&(!s&&a!==void 0||s!==void 0&&!Xn(a,s))&&zE.delete(r)})}async function bh({player:t,hash:{tempFragment:e}}){if(!t||!e)return;let n=!zE.has(t);zE.add(t);let r=null,i=.25;if(Er(e)||t.currentTime<e.start||Math.abs(t.currentTime-e.end)<i?r=e.start:t.currentTime-i>e.end&&(r=e.end),r!==null){let o=r;t.currentTime=o,!t.state.canPlay&&["video/youtube"].includes(t.state.source.type)&&!t.state.autoPlay&&(await ote(t,"seeked"),await t.pause())}Er(e)&&t.state.canPlay&&!n&&await t.play(new Event("hashchange"))}function ote(t,e){return new Promise(n=>{let r=window.setTimeout(()=>{n(),i()},5e3),i=t.listen(e,()=>{n(),window.clearTimeout(r),i()})})}function RV(t,e){return ol(t,n=>n.subscribe(({textTrack:r})=>{if(!r)return;let i=()=>{let o=t.getState().source?.url;o&&e.trigger("yn:cue-change",o,r.id,r.activeCues.map(s=>s.id))};return i(),r.addEventListener("cue-change",i),()=>{r.removeEventListener("cue-change",i)}}))}function qs(t){let e=Sc((n,r,i)=>({player:null,setPlayer:o=>{n({player:o})},source:void 0,hash:{autoplay:void 0,controls:void 0,loop:void 0,muted:void 0,tempFragment:null,volume:void 0},setTextTracks(o){n(({textTracks:s})=>({textTracks:{...s,local:o}}))},async getPlayer(o=1e4){let{player:s}=r();return s||new Promise((a,l)=>{let c=i.subscribe(({player:d})=>{d&&(c(),a(d),window.clearTimeout(u))}),u=window.setTimeout(()=>{c(),l(new xo(o))},o)})},setSource(o,{hash:s,viewType:a,title:l,textTracks:c}){n(u=>({source:{...u.source,viewType:a,url:o},textTracks:{local:c??u.textTracks.local,remote:u.textTracks.remote},hash:{...u.hash,...sy(s||o.hash)},title:(l===!0?Uw(o.source.href):l)??u.title})),bh(r())},setHash(o){n(s=>({hash:{...s.hash,...sy(o)}})),bh(r())},async loadFile(o,{subpath:s}){let a=Mi(o,s??"");if(!a)throw new Error("Invalid media file: "+o.path);let l=await t.transcript.getTracks(a);n(({source:c,hash:u,textTracks:{remote:d}})=>({source:{...c,url:a,viewType:Nn[a.type]},textTracks:{local:l,remote:d},title:o.name,hash:s?{...u,...sy(s)}:u})),await bh(r())},title:"",transform:null,setTransform:o=>{n(o?s=>{let a={transform:{...s.transform,...o}};return a.transform.flipHorizontal&&a.transform.flipVertical&&a.transform.rotate==="180"&&(a.transform={...a.transform,flipHorizontal:!1,flipVertical:!1,rotate:void 0}),a}:{transform:null})},toggleControls(o){let{player:s}=r();n({controls:o}),s&&s.provider instanceof yn&&s.provider.media.send("yn-toggle-controls",!o)},toggleWebFullscreen(o){let{player:s}=r();n({disableWebFullscreen:!o}),s&&s.provider instanceof yn&&s.provider.media.send("yn-toggle-webfs",o)},textTracks:{local:[],remote:[]},updateWebsiteTracks:o=>n(({textTracks:s})=>({textTracks:{...s,remote:o}})),updateWebHost:o=>n({webHost:o==="generic"?void 0:o})}));return CV(e),RV(e,t.app.workspace),e}var cn=(0,Qr.createContext)(null);function Ze(t){let{store:e}=(0,Qr.useContext)(cn);return Ep(e,t)}function xi(t){let{plugin:{settings:e}}=(0,Qr.useContext)(cn);return Ep(e,t)}function Ww(){let{store:t}=(0,Qr.useContext)(cn);return t}function MV(){return(0,Qr.useContext)(cn).reload}function sl(t){let e=(0,Qr.useContext)(cn).plugin.app;return t?t(e):e}function bu(){return(0,Qr.useContext)(cn).plugin}function IV(){return(0,Qr.useContext)(cn).onScreenshot}function qw(){return(0,Qr.useContext)(cn).onPlaylistChange}var xu=()=>(0,Qr.useContext)(cn).embed;function ol(t,e){let n=Pp,r=[()=>n(),t.subscribe((i,o)=>{if(i.player===o.player||(n(),!i.player))return;let s=e(i.player);s?Array.isArray(s)?n=()=>s.forEach(a=>a()):n=s:n=Pp})];return()=>r.forEach(i=>i())}var DP=require("obsidian"),Q5=I(H());var DV=I(H());var xh=I(H());var LV=function(t){return typeof t=="function"};var ste=!1,AV=ste;function ate(t){AV&&(LV(t)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof t)));var e=(0,xh.useRef)(t);e.current=(0,xh.useMemo)(function(){return t},[t]);var n=(0,xh.useRef)();return n.current||(n.current=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.current.apply(this,r)}),n.current}var Yw=ate;var ku=I(H());var BE={">":"video","^":"audio",_:"subtitle","#":"generic","/":"chapter"};function $V(t){return!!t&&t in BE}function _u(t){return!!t.media}function OV(t,e,{fromIndex:n,reverse:r=!1}={}){if(r)for(let i=n??t.length-1;i>=0;i--){let o=t[i];if(o&&_u(o)&&e(o,i,t))return o}else for(let i=n??0;i<t.length;i++){let o=t[i];if(o&&_u(o)&&e(o,i,t))return o}return null}var UE=[];function Kw(){let t=Ze(i=>i.source?.url),e=bu(),[n,r]=(0,ku.useState)(()=>e.playlist.get(t));return(0,ku.useEffect)(()=>{function i(){r(e.playlist.get(t))}return i(),e.app.metadataCache.on("yn:playlist-change",i),()=>{e.app.metadataCache.off("yn:playlist-change",i)}},[t,e.playlist,e.app.metadataCache]),n.sort((i,o)=>i.file.stat.mtime-o.file.stat.mtime).last()}function Gw(){let{target:t,action:e}=Qw("next"),n=Kw()?.autoplay;return{onEnded:Yw(()=>{!n||!t||e()})}}function Qw(t){let e=qw(),n=Kw(),r=(0,ku.useMemo)(()=>{if(!n)return;let o=n.list[n.active];if(!(o&&_u(o)))return;let s=OV(n.list,a=>!Xn(o.media,a.media),{fromIndex:t==="next"?n.active+1:n.active-1,reverse:t==="previous"});if(s)return s},[n,t]),i=Yw(()=>{!r||!n||!e||e(r,n)});return{target:r,action:i}}function FV(){let t=qr(),e=Ww(),{onEnded:n}=Gw();(0,DV.useEffect)(()=>{if(t)return lte(t,e,n)},[t,e,n])}function lte(t,e,n){let r={currentTime:t.state.currentTime,paused:t.state.paused,loop:t.state.loop},i=!1,o=[t.subscribe(({currentTime:s,paused:a,loop:l})=>{let c=cte(e.getState().hash.tempFragment,t.state.duration);if(!c||Er(c))return;let{start:u,end:d}=c;if(r.paused!==a&&!a)s>d&&!l&&n?.(),(s>d||s<u)&&(i=!0,t.currentTime=u);else if(r.currentTime!==s){if(s<u)t.currentTime=u;else if(s>d)if(l)t.currentTime=u,a&&t.play();else{if(n?.(),i){i=!1;return}a||t.pause()}}Object.assign(r,{currentTime:s,paused:a,loop:l})})];return()=>o.forEach(s=>s())}function cte(t,e){if(!t)return null;if(Er(t))return t;let{start:n,end:r}=t;return e&&e<n?null:{start:n<0?0:n,end:r<0?1/0:r}}function NV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=NV(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function VV(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=NV(t))&&(r&&(r+=" "),r+=e);return r}var WE="-",ute=t=>{let e=pte(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{let a=s.split(WE);return a[0]===""&&a.length!==1&&a.shift(),UV(a,e)||dte(s)},getConflictingClassGroupIds:(s,a)=>{let l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},UV=(t,e)=>{if(t.length===0)return e.classGroupId;let n=t[0],r=e.nextPart.get(n),i=r?UV(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;let o=t.join(WE);return e.validators.find(({validator:s})=>s(o))?.classGroupId},zV=/^\[(.+)\]$/,dte=t=>{if(zV.test(t)){let e=zV.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},pte=t=>{let{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return hte(Object.entries(t.classGroups),n).forEach(([o,s])=>{jE(s,r,o,e)}),r},jE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){let o=i===""?e:BV(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(fte(i)){jE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{jE(s,BV(e,o),n,r)})})},BV=(t,e)=>{let n=t;return e.split(WE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},fte=t=>t.isThemeGetter,hte=(t,e)=>e?t.map(([n,r])=>{let i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[e+s,a])):o);return[n,i]}):t,mte=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map,i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},HV="!",gte=t=>{let{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=a=>{let l=[],c=0,u=0,d;for(let w=0;w<a.length;w++){let m=a[w];if(c===0){if(m===i&&(r||a.slice(w,w+o)===e)){l.push(a.slice(u,w)),u=w+o;continue}if(m==="/"){d=w;continue}}m==="["?c++:m==="]"&&c--}let p=l.length===0?a:a.substring(u),f=p.startsWith(HV),h=f?p.substring(1):p,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:s}):s},yte=t=>{if(t.length<=1)return t;let e=[],n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},vte=t=>({cache:mte(t.cacheSize),parseClassName:gte(t),...ute(t)}),wte=/\s+/,bte=(t,e)=>{let{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(wte),a="";for(let l=s.length-1;l>=0;l-=1){let c=s[l],{modifiers:u,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:f}=n(c),h=!!f,g=r(h?p.substring(0,f):p);if(!g){if(!h){a=c+(a.length>0?" "+a:a);continue}if(g=r(p),!g){a=c+(a.length>0?" "+a:a);continue}h=!1}let w=yte(u).join(":"),m=d?w+HV:w,y=m+g;if(o.includes(y))continue;o.push(y);let v=i(g,h);for(let b=0;b<v.length;++b){let k=v[b];o.push(m+k)}a=c+(a.length>0?" "+a:a)}return a};function xte(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jV(e))&&(r&&(r+=" "),r+=n);return r}var jV=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jV(t[r]))&&(n&&(n+=" "),n+=e);return n};function _te(t,...e){let n,r,i,o=s;function s(l){let c=e.reduce((u,d)=>d(u),t());return n=vte(c),r=n.cache.get,i=n.cache.set,o=a,a(l)}function a(l){let c=r(l);if(c)return c;let u=bte(l,n);return i(l,u),u}return function(){return o(xte.apply(null,arguments))}}var Je=t=>{let e=n=>n[t]||[];return e.isThemeGetter=!0,e},WV=/^\[(?:([a-z-]+):)?(.+)\]$/i,kte=/^\d+\/\d+$/,Tte=new Set(["px","full","screen"]),Ste=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ete=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pte=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Cte=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Rte=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zo=t=>Tu(t)||Tte.has(t)||kte.test(t),Ys=t=>Su(t,"length",Fte),Tu=t=>!!t&&!Number.isNaN(Number(t)),HE=t=>Su(t,"number",Tu),_h=t=>!!t&&Number.isInteger(Number(t)),Mte=t=>t.endsWith("%")&&Tu(t.slice(0,-1)),ye=t=>WV.test(t),Ks=t=>Ste.test(t),Ite=new Set(["length","size","percentage"]),Lte=t=>Su(t,Ite,qV),Ate=t=>Su(t,"position",qV),$te=new Set(["image","url"]),Ote=t=>Su(t,$te,Vte),Dte=t=>Su(t,"",Nte),kh=()=>!0,Su=(t,e,n)=>{let r=WV.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Fte=t=>Ete.test(t)&&!Pte.test(t),qV=()=>!1,Nte=t=>Cte.test(t),Vte=t=>Rte.test(t);var zte=()=>{let t=Je("colors"),e=Je("spacing"),n=Je("blur"),r=Je("brightness"),i=Je("borderColor"),o=Je("borderRadius"),s=Je("borderSpacing"),a=Je("borderWidth"),l=Je("contrast"),c=Je("grayscale"),u=Je("hueRotate"),d=Je("invert"),p=Je("gap"),f=Je("gradientColorStops"),h=Je("gradientColorStopPositions"),g=Je("inset"),w=Je("margin"),m=Je("opacity"),y=Je("padding"),v=Je("saturate"),b=Je("scale"),k=Je("sepia"),_=Je("skew"),S=Je("space"),C=Je("translate"),M=()=>["auto","contain","none"],x=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",ye,e],L=()=>[ye,e],F=()=>["",zo,Ys],N=()=>["auto",Tu,ye],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],se=()=>["","0",ye],E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],tt=()=>[Tu,ye];return{cacheSize:500,separator:":",theme:{colors:[kh],spacing:[zo,Ys],blur:["none","",Ks,ye],brightness:tt(),borderColor:[t],borderRadius:["none","","full",Ks,ye],borderSpacing:L(),borderWidth:F(),contrast:tt(),grayscale:se(),hueRotate:tt(),invert:se(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[Mte,Ys],inset:$(),margin:$(),opacity:tt(),padding:L(),saturate:tt(),scale:tt(),sepia:se(),skew:tt(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[Ks]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),ye]}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_h,ye]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:se()}],shrink:[{shrink:se()}],order:[{order:["first","last","none",_h,ye]}],"grid-cols":[{"grid-cols":[kh]}],"col-start-end":[{col:["auto",{span:["full",_h,ye]},ye]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[kh]}],"row-start-end":[{row:["auto",{span:[_h,ye]},ye]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,e]}],"min-w":[{"min-w":[ye,e,"min","max","fit"]}],"max-w":[{"max-w":[ye,e,"none","full","min","max","fit","prose",{screen:[Ks]},Ks]}],h:[{h:[ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ks,Ys]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",HE]}],"font-family":[{font:[kh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",Tu,HE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",zo,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",zo,Ys]}],"underline-offset":[{"underline-offset":["auto",zo,ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),Ate]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Lte]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ote]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:Y()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[zo,ye]}],"outline-w":[{outline:[zo,Ys]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[zo,Ys]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ks,Dte]}],"shadow-color":[{shadow:[kh]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ks,ye]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:tt()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:tt()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[_h,ye]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[zo,Ys,HE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}};var YV=_te(zte);function mt(...t){return YV(VV(t))}var KV=I(H());function GV(t){let e=qr();(0,KV.useEffect)(()=>{if(e)return e.listen("loaded-metadata",n=>{let r=n.target;if(!tu(r.provider)){t("unknown");return}let{videoHeight:i,videoWidth:o}=r.provider.video;t(i===0||o===0?"audio":"unknown")})},[e])}var QV=require("obsidian"),Th=I(H());function Xw(){let{controls:t}=qE(),e=Ze(i=>i.controls);return e===void 0&&t===void 0?!0:e||t}function qE(){let{volume:t,tempFragment:e,...n}=Ze(r=>r.hash);return n}function XV(){let t=qr(),{volume:e}=Ze(s=>s.hash),n=xi(s=>s.defaultVolume/100),r=e??n,i=(0,Th.useRef)(r);i.current=r;let o=(0,Th.useRef)(!1);(0,Th.useEffect)(()=>{let s=(0,QV.debounce)(()=>{o.current=!1},1e3,!0),a=c=>{c.target.provider?.setVolume(i.current),o.current=!0,s()};if(!t)return;let l=[t.listen("can-play-through",a),t.listen("can-play",a),t.listen("loaded-data",a),t.listen("loaded-metadata",a),t.subscribe(({volume:c})=>{!o.current||c===i.current||t.provider?.setVolume(i.current)})];return()=>l.forEach(c=>c())},[t])}var me=I(H());function We(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}var ZV=I(H(),1);function Bte(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function YE(...t){return e=>t.forEach(n=>Bte(n,e))}function Eu(...t){return(0,ZV.useCallback)(YE(...t),t)}var _i=I(H(),1);function Zw(t,e=[]){let n=[];function r(o,s){let a=(0,_i.createContext)(s),l=n.length;n=[...n,s];function c(d){let{scope:p,children:f,...h}=d,g=p?.[t][l]||a,w=(0,_i.useMemo)(()=>h,Object.values(h));return(0,_i.createElement)(g.Provider,{value:w},f)}function u(d,p){let f=p?.[t][l]||a,h=(0,_i.useContext)(f);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}let i=()=>{let o=n.map(s=>(0,_i.createContext)(s));return function(a){let l=a?.[t]||o;return(0,_i.useMemo)(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Ute(i,...e)]}function Ute(...t){let e=t[0];if(t.length===1)return e;let n=()=>{let r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){let s=r.reduce((a,{useScope:l,scopeName:c})=>{let d=l(o)[`__scope${c}`];return{...a,...d}},{});return(0,_i.useMemo)(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var dt=I(H(),1);var sz=I(H(),1),az=I(bo(),1);var Nt=I(H(),1);var ez=I(H(),1);function JV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function KE(...t){return e=>{let n=!1,r=t.map(i=>{let o=JV(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){let o=r[i];typeof o=="function"?o():JV(t[i],null)}}}}function gt(...t){return ez.useCallback(KE(...t),t)}var Pu=I(X(),1);function Sh(t){let e=Gte(t),n=Nt.forwardRef((r,i)=>{let{children:o,...s}=r,a=Nt.Children.toArray(o),l=a.find(Xte);if(l){let c=l.props.children,u=a.map(d=>d===l?Nt.Children.count(c)>1?Nt.Children.only(null):Nt.isValidElement(c)?c.props.children:null:d);return(0,Pu.jsx)(e,{...s,ref:i,children:Nt.isValidElement(c)?Nt.cloneElement(c,void 0,u):null})}return(0,Pu.jsx)(e,{...s,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function Gte(t){let e=Nt.forwardRef((n,r)=>{let{children:i,...o}=n;if(Nt.isValidElement(i)){let s=Jte(i),a=Zte(o,i.props);return i.type!==Nt.Fragment&&(a.ref=r?KE(r,s):s),Nt.cloneElement(i,a)}return Nt.Children.count(i)>1?Nt.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var iz=Symbol("radix.slottable");function Qte(t){let e=({children:n})=>(0,Pu.jsx)(Pu.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=iz,e}var oz=Qte("Slottable");function Xte(t){return Nt.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===iz}function Zte(t,e){let n={...e};for(let r in e){let i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function Jte(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var lz=I(X(),1),ene=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vt=ene.reduce((t,e)=>{let n=Sh(`Primitive.${e}`),r=sz.forwardRef((i,o)=>{let{asChild:s,...a}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),(0,lz.jsx)(l,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function cz(t,e){t&&az.flushSync(()=>t.dispatchEvent(e))}var Cu=I(H(),1);function vr(t){let e=Cu.useRef(t);return Cu.useEffect(()=>{e.current=t}),Cu.useMemo(()=>(...n)=>e.current?.(...n),[])}var uz=I(H(),1);function dz(t,e=globalThis?.document){let n=vr(t);uz.useEffect(()=>{let r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var QE=I(X(),1),tne="DismissableLayer",GE="dismissableLayer.update",nne="dismissableLayer.pointerDownOutside",rne="dismissableLayer.focusOutside",pz,hz=dt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),XE=dt.forwardRef((t,e)=>{let{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,c=dt.useContext(hz),[u,d]=dt.useState(null),p=u?.ownerDocument??globalThis?.document,[,f]=dt.useState({}),h=gt(e,S=>d(S)),g=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),m=g.indexOf(w),y=u?g.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,b=y>=m,k=sne(S=>{let C=S.target,M=[...c.branches].some(x=>x.contains(C));!b||M||(i?.(S),s?.(S),S.defaultPrevented||a?.())},p),_=ane(S=>{let C=S.target;[...c.branches].some(x=>x.contains(C))||(o?.(S),s?.(S),S.defaultPrevented||a?.())},p);return dz(S=>{y===c.layers.size-1&&(r?.(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},p),dt.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(pz=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),fz(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=pz)}},[u,p,n,c]),dt.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),fz())},[u,c]),dt.useEffect(()=>{let S=()=>f({});return document.addEventListener(GE,S),()=>document.removeEventListener(GE,S)},[]),(0,QE.jsx)(Vt.div,{...l,ref:h,style:{pointerEvents:v?b?"auto":"none":void 0,...t.style},onFocusCapture:We(t.onFocusCapture,_.onFocusCapture),onBlurCapture:We(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:We(t.onPointerDownCapture,k.onPointerDownCapture)})});XE.displayName=tne;var ine="DismissableLayerBranch",one=dt.forwardRef((t,e)=>{let n=dt.useContext(hz),r=dt.useRef(null),i=gt(e,r);return dt.useEffect(()=>{let o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),(0,QE.jsx)(Vt.div,{...t,ref:i})});one.displayName=ine;function sne(t,e=globalThis?.document){let n=vr(t),r=dt.useRef(!1),i=dt.useRef(()=>{});return dt.useEffect(()=>{let o=a=>{if(a.target&&!r.current){let c=function(){mz(nne,n,u,{discrete:!0})};var l=c;let u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function ane(t,e=globalThis?.document){let n=vr(t),r=dt.useRef(!1);return dt.useEffect(()=>{let i=o=>{o.target&&!r.current&&mz(rne,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fz(){let t=new CustomEvent(GE);document.dispatchEvent(t)}function mz(t,e,n,{discrete:r}){let i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?cz(i,o):i.dispatchEvent(o)}var ZE=I(H(),1);var gz=I(H(),1),wr=globalThis?.document?gz.useLayoutEffect:()=>{};var lne=ZE[" useId ".trim().toString()]||(()=>{}),cne=0;function yz(t){let[e,n]=ZE.useState(lne());return wr(()=>{t||n(r=>r??String(cne++))},[t]),t||(e?`radix-${e}`:"")}var xr=I(H());var vz=["top","right","bottom","left"];var br=Math.min,Qt=Math.max,Ph=Math.round,Ch=Math.floor,ki=t=>({x:t,y:t}),une={left:"right",right:"left",bottom:"top",top:"bottom"},dne={start:"end",end:"start"};function tb(t,e,n){return Qt(t,br(e,n))}function Ti(t,e){return typeof t=="function"?t(e):t}function Xr(t){return t.split("-")[0]}function al(t){return t.split("-")[1]}function nb(t){return t==="x"?"y":"x"}function rb(t){return t==="y"?"height":"width"}function Ki(t){return["top","bottom"].includes(Xr(t))?"y":"x"}function ib(t){return nb(Ki(t))}function wz(t,e,n){n===void 0&&(n=!1);let r=al(t),i=ib(t),o=rb(i),s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Eh(s)),[s,Eh(s)]}function bz(t){let e=Eh(t);return[eb(t),e,eb(e)]}function eb(t){return t.replace(/start|end/g,e=>dne[e])}function pne(t,e,n){let r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function xz(t,e,n,r){let i=al(t),o=pne(Xr(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(eb)))),o}function Eh(t){return t.replace(/left|right|bottom|top/g,e=>une[e])}function fne(t){return{top:0,right:0,bottom:0,left:0,...t}}function ob(t){return typeof t!="number"?fne(t):{top:t,right:t,bottom:t,left:t}}function Bo(t){let{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function _z(t,e,n){let{reference:r,floating:i}=t,o=Ki(e),s=ib(e),a=rb(s),l=Xr(e),c=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2,f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(al(e)){case"start":f[s]-=p*(n&&c?-1:1);break;case"end":f[s]+=p*(n&&c?-1:1);break}return f}var Sz=async(t,e,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e)),c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=_z(c,r,l),p=r,f={},h=0;for(let g=0;g<a.length;g++){let{name:w,fn:m}=a[g],{x:y,y:v,data:b,reset:k}=await m({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:f,rects:c,platform:s,elements:{reference:t,floating:e}});u=y??u,d=v??d,f={...f,[w]:{...f[w],...b}},k&&h<=50&&(h++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(c=k.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:d}=_z(c,p,l)),g=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:f}};async function Ru(t,e){var n;e===void 0&&(e={});let{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:f=0}=Ti(e,t),h=ob(f),w=a[p?d==="floating"?"reference":"floating":d],m=Bo(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},k=Bo(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:v,strategy:l}):y);return{top:(m.top-k.top+h.top)/b.y,bottom:(k.bottom-m.bottom+h.bottom)/b.y,left:(m.left-k.left+h.left)/b.x,right:(k.right-m.right+h.right)/b.x}}var Ez=t=>({name:"arrow",options:t,async fn(e){let{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Ti(t,e)||{};if(c==null)return{};let d=ob(u),p={x:n,y:r},f=ib(i),h=rb(f),g=await s.getDimensions(c),w=f==="y",m=w?"top":"left",y=w?"bottom":"right",v=w?"clientHeight":"clientWidth",b=o.reference[h]+o.reference[f]-p[f]-o.floating[h],k=p[f]-o.reference[f],_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c)),S=_?_[v]:0;(!S||!await(s.isElement==null?void 0:s.isElement(_)))&&(S=a.floating[v]||o.floating[h]);let C=b/2-k/2,M=S/2-g[h]/2-1,x=br(d[m],M),$=br(d[y],M),L=x,F=S-g[h]-$,N=S/2-g[h]/2+C,W=tb(L,N,F),Y=!l.arrow&&al(i)!=null&&N!==W&&o.reference[h]/2-(N<L?x:$)-g[h]/2<0,J=Y?N<L?N-L:N-F:0;return{[f]:p[f]+J,data:{[f]:W,centerOffset:N-W-J,...Y&&{alignmentOffset:J}},reset:Y}}});var Pz=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;let{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...w}=Ti(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};let m=Xr(i),y=Ki(a),v=Xr(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=p||(v||!g?[Eh(a)]:bz(a)),_=h!=="none";!p&&_&&k.push(...xz(a,g,h,b));let S=[a,...k],C=await Ru(e,w),M=[],x=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&M.push(C[m]),d){let N=wz(i,s,b);M.push(C[N[0]],C[N[1]])}if(x=[...x,{placement:i,overflows:M}],!M.every(N=>N<=0)){var $,L;let N=((($=o.flip)==null?void 0:$.index)||0)+1,W=S[N];if(W)return{data:{index:N,overflows:x},reset:{placement:W}};let Y=(L=x.filter(J=>J.overflows[0]<=0).sort((J,Q)=>J.overflows[1]-Q.overflows[1])[0])==null?void 0:L.placement;if(!Y)switch(f){case"bestFit":{var F;let J=(F=x.filter(Q=>{if(_){let se=Ki(Q.placement);return se===y||se==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(se=>se>0).reduce((se,E)=>se+E,0)]).sort((Q,se)=>Q[1]-se[1])[0])==null?void 0:F[0];J&&(Y=J);break}case"initialPlacement":Y=a;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}};function kz(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Tz(t){return vz.some(e=>t[e]>=0)}var Cz=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){let{rects:n}=e,{strategy:r="referenceHidden",...i}=Ti(t,e);switch(r){case"referenceHidden":{let o=await Ru(e,{...i,elementContext:"reference"}),s=kz(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Tz(s)}}}case"escaped":{let o=await Ru(e,{...i,altBoundary:!0}),s=kz(o,n.floating);return{data:{escapedOffsets:s,escaped:Tz(s)}}}default:return{}}}}};function Rz(t){let e=br(...t.map(o=>o.left)),n=br(...t.map(o=>o.top)),r=Qt(...t.map(o=>o.right)),i=Qt(...t.map(o=>o.bottom));return{x:e,y:n,width:r-e,height:i-n}}function hne(t){let e=t.slice().sort((i,o)=>i.y-o.y),n=[],r=null;for(let i=0;i<e.length;i++){let o=e[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>Bo(Rz(i)))}var Mz=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){let{placement:n,elements:r,rects:i,platform:o,strategy:s}=e,{padding:a=2,x:l,y:c}=Ti(t,e),u=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),d=hne(u),p=Bo(Rz(u)),f=ob(a);function h(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return d.find(w=>l>w.left-f.left&&l<w.right+f.right&&c>w.top-f.top&&c<w.bottom+f.bottom)||p;if(d.length>=2){if(Ki(n)==="y"){let x=d[0],$=d[d.length-1],L=Xr(n)==="top",F=x.top,N=$.bottom,W=L?x.left:$.left,Y=L?x.right:$.right,J=Y-W,Q=N-F;return{top:F,bottom:N,left:W,right:Y,width:J,height:Q,x:W,y:F}}let w=Xr(n)==="left",m=Qt(...d.map(x=>x.right)),y=br(...d.map(x=>x.left)),v=d.filter(x=>w?x.left===y:x.right===m),b=v[0].top,k=v[v.length-1].bottom,_=y,S=m,C=S-_,M=k-b;return{top:b,bottom:k,left:_,right:S,width:C,height:M,x:_,y:b}}return p}let g=await o.getElementRects({reference:{getBoundingClientRect:h},floating:r.floating,strategy:s});return i.reference.x!==g.reference.x||i.reference.y!==g.reference.y||i.reference.width!==g.reference.width||i.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}};async function mne(t,e){let{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Xr(n),a=al(n),l=Ki(n)==="y",c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=Ti(e,t),{mainAxis:p,crossAxis:f,alignmentAxis:h}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof h=="number"&&(f=a==="end"?h*-1:h),l?{x:f*u,y:p*c}:{x:p*c,y:f*u}}var Iz=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;let{x:i,y:o,placement:s,middlewareData:a}=e,l=await mne(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},Lz=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:w=>{let{x:m,y}=w;return{x:m,y}}},...l}=Ti(t,e),c={x:n,y:r},u=await Ru(e,l),d=Ki(Xr(i)),p=nb(d),f=c[p],h=c[d];if(o){let w=p==="y"?"top":"left",m=p==="y"?"bottom":"right",y=f+u[w],v=f-u[m];f=tb(y,f,v)}if(s){let w=d==="y"?"top":"left",m=d==="y"?"bottom":"right",y=h+u[w],v=h-u[m];h=tb(y,h,v)}let g=a.fn({...e,[p]:f,[d]:h});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[p]:o,[d]:s}}}}}},Az=function(t){return t===void 0&&(t={}),{options:t,fn(e){let{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ti(t,e),u={x:n,y:r},d=Ki(i),p=nb(d),f=u[p],h=u[d],g=Ti(a,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){let v=p==="y"?"height":"width",b=o.reference[p]-o.floating[v]+w.mainAxis,k=o.reference[p]+o.reference[v]-w.mainAxis;f<b?f=b:f>k&&(f=k)}if(c){var m,y;let v=p==="y"?"width":"height",b=["top","left"].includes(Xr(i)),k=o.reference[d]-o.floating[v]+(b&&((m=s.offset)==null?void 0:m[d])||0)+(b?0:w.crossAxis),_=o.reference[d]+o.reference[v]+(b?0:((y=s.offset)==null?void 0:y[d])||0)-(b?w.crossAxis:0);h<k?h=k:h>_&&(h=_)}return{[p]:f,[d]:h}}}},$z=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;let{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...c}=Ti(t,e),u=await Ru(e,c),d=Xr(i),p=al(i),f=Ki(i)==="y",{width:h,height:g}=o.floating,w,m;d==="top"||d==="bottom"?(w=d,m=p===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(m=d,w=p==="end"?"top":"bottom");let y=g-u.top-u.bottom,v=h-u.left-u.right,b=br(g-u[w],y),k=br(h-u[m],v),_=!e.middlewareData.shift,S=b,C=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=y),_&&!p){let x=Qt(u.left,0),$=Qt(u.right,0),L=Qt(u.top,0),F=Qt(u.bottom,0);f?C=h-2*(x!==0||$!==0?x+$:Qt(u.left,u.right)):S=g-2*(L!==0||F!==0?L+F:Qt(u.top,u.bottom))}await l({...e,availableWidth:C,availableHeight:S});let M=await s.getDimensions(a.floating);return h!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function sb(){return typeof window<"u"}function cl(t){return Dz(t)?(t.nodeName||"").toLowerCase():"#document"}function Zn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Si(t){var e;return(e=(Dz(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Dz(t){return sb()?t instanceof Node||t instanceof Zn(t).Node:!1}function Zr(t){return sb()?t instanceof Element||t instanceof Zn(t).Element:!1}function Ei(t){return sb()?t instanceof HTMLElement||t instanceof Zn(t).HTMLElement:!1}function Oz(t){return!sb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Zn(t).ShadowRoot}function Mu(t){let{overflow:e,overflowX:n,overflowY:r,display:i}=Jr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Fz(t){return["table","td","th"].includes(cl(t))}function Rh(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function ab(t){let e=lb(),n=Zr(t)?Jr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Nz(t){let e=Uo(t);for(;Ei(e)&&!ul(e);){if(ab(e))return e;if(Rh(e))return null;e=Uo(e)}return null}function lb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ul(t){return["html","body","#document"].includes(cl(t))}function Jr(t){return Zn(t).getComputedStyle(t)}function Mh(t){return Zr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Uo(t){if(cl(t)==="html")return t;let e=t.assignedSlot||t.parentNode||Oz(t)&&t.host||Si(t);return Oz(e)?e.host:e}function Vz(t){let e=Uo(t);return ul(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ei(e)&&Mu(e)?e:Vz(e)}function ll(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);let i=Vz(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Zn(i);if(o){let a=cb(s);return e.concat(s,s.visualViewport||[],Mu(i)?i:[],a&&n?ll(a):[])}return e.concat(i,ll(i,[],n))}function cb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Uz(t){let e=Jr(t),n=parseFloat(e.width)||0,r=parseFloat(e.height)||0,i=Ei(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=Ph(n)!==o||Ph(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function eP(t){return Zr(t)?t:t.contextElement}function Iu(t){let e=eP(t);if(!Ei(e))return ki(1);let n=e.getBoundingClientRect(),{width:r,height:i,$:o}=Uz(e),s=(o?Ph(n.width):n.width)/r,a=(o?Ph(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}var gne=ki(0);function Hz(t){let e=Zn(t);return!lb()||!e.visualViewport?gne:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yne(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Zn(t)?!1:e}function dl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);let i=t.getBoundingClientRect(),o=eP(t),s=ki(1);e&&(r?Zr(r)&&(s=Iu(r)):s=Iu(t));let a=yne(o,n,r)?Hz(o):ki(0),l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){let p=Zn(o),f=r&&Zr(r)?Zn(r):r,h=p,g=cb(h);for(;g&&r&&f!==h;){let w=Iu(g),m=g.getBoundingClientRect(),y=Jr(g),v=m.left+(g.clientLeft+parseFloat(y.paddingLeft))*w.x,b=m.top+(g.clientTop+parseFloat(y.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,d*=w.y,l+=v,c+=b,h=Zn(g),g=cb(h)}}return Bo({width:u,height:d,x:l,y:c})}function tP(t,e){let n=Mh(t).scrollLeft;return e?e.left+n:dl(Si(t)).left+n}function jz(t,e,n){n===void 0&&(n=!1);let r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:tP(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function vne(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t,o=i==="fixed",s=Si(r),a=e?Rh(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=ki(1),u=ki(0),d=Ei(r);if((d||!d&&!o)&&((cl(r)!=="body"||Mu(s))&&(l=Mh(r)),Ei(r))){let f=dl(r);c=Iu(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}let p=s&&!d&&!o?jz(s,l,!0):ki(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function wne(t){return Array.from(t.getClientRects())}function bne(t){let e=Si(t),n=Mh(t),r=t.ownerDocument.body,i=Qt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Qt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight),s=-n.scrollLeft+tP(t),a=-n.scrollTop;return Jr(r).direction==="rtl"&&(s+=Qt(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function xne(t,e){let n=Zn(t),r=Si(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;let c=lb();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function _ne(t,e){let n=dl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Ei(t)?Iu(t):ki(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function zz(t,e,n){let r;if(e==="viewport")r=xne(t,n);else if(e==="document")r=bne(Si(t));else if(Zr(e))r=_ne(e,n);else{let i=Hz(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Bo(r)}function Wz(t,e){let n=Uo(t);return n===e||!Zr(n)||ul(n)?!1:Jr(n).position==="fixed"||Wz(n,e)}function kne(t,e){let n=e.get(t);if(n)return n;let r=ll(t,[],!1).filter(a=>Zr(a)&&cl(a)!=="body"),i=null,o=Jr(t).position==="fixed",s=o?Uo(t):t;for(;Zr(s)&&!ul(s);){let a=Jr(s),l=ab(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Mu(s)&&!l&&Wz(t,s))?r=r.filter(u=>u!==s):i=a,s=Uo(s)}return e.set(t,r),r}function Tne(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t,s=[...n==="clippingAncestors"?Rh(e)?[]:kne(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{let d=zz(e,u,i);return c.top=Qt(d.top,c.top),c.right=br(d.right,c.right),c.bottom=br(d.bottom,c.bottom),c.left=Qt(d.left,c.left),c},zz(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Sne(t){let{width:e,height:n}=Uz(t);return{width:e,height:n}}function Ene(t,e,n){let r=Ei(e),i=Si(e),o=n==="fixed",s=dl(t,!0,o,e),a={scrollLeft:0,scrollTop:0},l=ki(0);if(r||!r&&!o)if((cl(e)!=="body"||Mu(i))&&(a=Mh(e)),r){let p=dl(e,!0,o,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=tP(i));let c=i&&!r&&!o?jz(i,a):ki(0),u=s.left+a.scrollLeft-l.x-c.x,d=s.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:s.width,height:s.height}}function JE(t){return Jr(t).position==="static"}function Bz(t,e){if(!Ei(t)||Jr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Si(t)===n&&(n=n.ownerDocument.body),n}function qz(t,e){let n=Zn(t);if(Rh(t))return n;if(!Ei(t)){let i=Uo(t);for(;i&&!ul(i);){if(Zr(i)&&!JE(i))return i;i=Uo(i)}return n}let r=Bz(t,e);for(;r&&Fz(r)&&JE(r);)r=Bz(r,e);return r&&ul(r)&&JE(r)&&!ab(r)?n:r||Nz(t)||n}var Pne=async function(t){let e=this.getOffsetParent||qz,n=this.getDimensions,r=await n(t.floating);return{reference:Ene(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Cne(t){return Jr(t).direction==="rtl"}var Yz={convertOffsetParentRelativeRectToViewportRelativeRect:vne,getDocumentElement:Si,getClippingRect:Tne,getOffsetParent:qz,getElementRects:Pne,getClientRects:wne,getDimensions:Sne,getScale:Iu,isElement:Zr,isRTL:Cne};function Kz(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Rne(t,e){let n=null,r,i=Si(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();let c=t.getBoundingClientRect(),{left:u,top:d,width:p,height:f}=c;if(a||e(),!p||!f)return;let h=Ch(d),g=Ch(i.clientWidth-(u+p)),w=Ch(i.clientHeight-(d+f)),m=Ch(u),v={rootMargin:-h+"px "+-g+"px "+-w+"px "+-m+"px",threshold:Qt(0,br(1,l))||1},b=!0;function k(_){let S=_[0].intersectionRatio;if(S!==l){if(!b)return s();S?s(!1,S):r=setTimeout(()=>{s(!1,1e-7)},1e3)}S===1&&!Kz(c,t.getBoundingClientRect())&&s(),b=!1}try{n=new IntersectionObserver(k,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,v)}n.observe(t)}return s(!0),o}function nP(t,e,n,r){r===void 0&&(r={});let{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=eP(t),u=i||o?[...c?ll(c):[],...ll(e)]:[];u.forEach(m=>{i&&m.addEventListener("scroll",n,{passive:!0}),o&&m.addEventListener("resize",n)});let d=c&&a?Rne(c,n):null,p=-1,f=null;s&&(f=new ResizeObserver(m=>{let[y]=m;y&&y.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=f)==null||v.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let h,g=l?dl(t):null;l&&w();function w(){let m=dl(t);g&&!Kz(g,m)&&n(),g=m,h=requestAnimationFrame(w)}return n(),()=>{var m;u.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),d?.(),(m=f)==null||m.disconnect(),f=null,l&&cancelAnimationFrame(h)}}var Gz=Iz;var Qz=Lz,Xz=Pz,Zz=$z,Jz=Cz,rP=Ez,e3=Mz,t3=Az,iP=(t,e,n)=>{let r=new Map,i={platform:Yz,...n},o={...i.platform,_c:r};return Sz(t,e,{...i,platform:o})};var It=I(H(),1),pb=I(H(),1),r3=I(bo(),1),ub=typeof document<"u"?pb.useLayoutEffect:pb.useEffect;function db(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!db(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){let o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!db(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function i3(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function n3(t,e){let n=i3(t);return Math.round(e*n)/n}function oP(t){let e=It.useRef(t);return ub(()=>{e.current=t}),e}function o3(t){t===void 0&&(t={});let{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=It.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,f]=It.useState(r);db(p,r)||f(r);let[h,g]=It.useState(null),[w,m]=It.useState(null),y=It.useCallback(Q=>{Q!==_.current&&(_.current=Q,g(Q))},[]),v=It.useCallback(Q=>{Q!==S.current&&(S.current=Q,m(Q))},[]),b=o||h,k=s||w,_=It.useRef(null),S=It.useRef(null),C=It.useRef(u),M=l!=null,x=oP(l),$=oP(i),L=oP(c),F=It.useCallback(()=>{if(!_.current||!S.current)return;let Q={placement:e,strategy:n,middleware:p};$.current&&(Q.platform=$.current),iP(_.current,S.current,Q).then(se=>{let E={...se,isPositioned:L.current!==!1};N.current&&!db(C.current,E)&&(C.current=E,r3.flushSync(()=>{d(E)}))})},[p,e,n,$,L]);ub(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(Q=>({...Q,isPositioned:!1})))},[c]);let N=It.useRef(!1);ub(()=>(N.current=!0,()=>{N.current=!1}),[]),ub(()=>{if(b&&(_.current=b),k&&(S.current=k),b&&k){if(x.current)return x.current(b,k,F);F()}},[b,k,F,x,M]);let W=It.useMemo(()=>({reference:_,floating:S,setReference:y,setFloating:v}),[y,v]),Y=It.useMemo(()=>({reference:b,floating:k}),[b,k]),J=It.useMemo(()=>{let Q={position:n,left:0,top:0};if(!Y.floating)return Q;let se=n3(Y.floating,u.x),E=n3(Y.floating,u.y);return a?{...Q,transform:"translate("+se+"px, "+E+"px)",...i3(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:se,top:E}},[n,a,Y.floating,u.x,u.y]);return It.useMemo(()=>({...u,update:F,refs:W,elements:Y,floatingStyles:J}),[u,F,W,Y,J])}var Mne=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){let{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?rP({element:r.current,padding:i}).fn(n):{}:r?rP({element:r,padding:i}).fn(n):{}}}},s3=(t,e)=>({...Gz(t),options:[t,e]}),a3=(t,e)=>({...Qz(t),options:[t,e]}),l3=(t,e)=>({...t3(t),options:[t,e]}),c3=(t,e)=>({...Xz(t),options:[t,e]}),u3=(t,e)=>({...Zz(t),options:[t,e]});var d3=(t,e)=>({...Jz(t),options:[t,e]}),p3=(t,e)=>({...e3(t),options:[t,e]}),f3=(t,e)=>({...Mne(t),options:[t,e]});function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ho.apply(null,arguments)}var Ih=I(H(),1);var Lu=I(H(),1),$ne=I(bo(),1);var pt=I(H(),1);var aP=(0,pt.forwardRef)((t,e)=>{let{children:n,...r}=t,i=pt.Children.toArray(n),o=i.find(Lne);if(o){let s=o.props.children,a=i.map(l=>l===o?pt.Children.count(s)>1?pt.Children.only(null):(0,pt.isValidElement)(s)?s.props.children:null:l);return(0,pt.createElement)(sP,Ho({},r,{ref:e}),(0,pt.isValidElement)(s)?(0,pt.cloneElement)(s,void 0,a):null)}return(0,pt.createElement)(sP,Ho({},r,{ref:e}),n)});aP.displayName="Slot";var sP=(0,pt.forwardRef)((t,e)=>{let{children:n,...r}=t;return(0,pt.isValidElement)(n)?(0,pt.cloneElement)(n,{...Ane(r,n.props),ref:e?YE(e,n.ref):n.ref}):pt.Children.count(n)>1?pt.Children.only(null):null});sP.displayName="SlotClone";var Ine=({children:t})=>(0,pt.createElement)(pt.Fragment,null,t);function Lne(t){return(0,pt.isValidElement)(t)&&t.type===Ine}function Ane(t,e){let n={...e};for(let r in e){let i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}var One=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],pl=One.reduce((t,e)=>{let n=(0,Lu.forwardRef)((r,i)=>{let{asChild:o,...s}=r,a=o?aP:e;return(0,Lu.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,Lu.createElement)(a,Ho({},s,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});var Dne=(0,Ih.forwardRef)((t,e)=>{let{children:n,width:r=10,height:i=5,...o}=t;return(0,Ih.createElement)(pl.svg,Ho({},o,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),t.asChild?n:(0,Ih.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),h3=Dne;var Au=I(H(),1);function m3(t){let e=(0,Au.useRef)(t);return(0,Au.useEffect)(()=>{e.current=t}),(0,Au.useMemo)(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}var g3=I(H(),1),Lh=globalThis?.document?g3.useLayoutEffect:()=>{};var y3=I(H(),1);function v3(t){let[e,n]=(0,y3.useState)(void 0);return Lh(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});let r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;let o=i[0],s,a;if("borderBoxSize"in o){let l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Gs=I(X());var lP="Popper",[w3,fb]=Zw(lP),[Nne,b3]=w3(lP),cP=t=>{let{__scopePopper:e,children:n}=t,[r,i]=xr.useState(null);return(0,Gs.jsx)(Nne,{scope:e,anchor:r,onAnchorChange:i,children:n})};cP.displayName=lP;var x3="PopperAnchor",uP=xr.forwardRef((t,e)=>{let{__scopePopper:n,virtualRef:r,...i}=t,o=b3(x3,n),s=xr.useRef(null),a=Eu(e,s);return xr.useEffect(()=>{o.onAnchorChange(r?.current||s.current)}),r?null:(0,Gs.jsx)(pl.div,{...i,ref:a})});uP.displayName=x3;var dP="PopperContent",[Vne,zne]=w3(dP),pP=xr.forwardRef((t,e)=>{let{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:h,inlineAlign:g=!1,...w}=t,m=b3(dP,n),[y,v]=xr.useState(null),b=Eu(e,ot=>v(ot)),[k,_]=xr.useState(null),S=v3(k),C=S?.width??0,M=S?.height??0,x=r+(o!=="center"?"-"+o:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],F=L.length>0,N={padding:$,boundary:L.filter(Une),altBoundary:F},{refs:W,floatingStyles:Y,placement:J,isPositioned:Q,middlewareData:se}=o3({strategy:"fixed",placement:x,whileElementsMounted:(...ot)=>nP(...ot,{animationFrame:f==="always"}),elements:{reference:m.anchor},middleware:[s3({mainAxis:i+M,alignmentAxis:s}),l&&a3({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?l3():void 0,...N}),l&&c3({...N}),u3({...N,apply:({elements:ot,rects:Qo,availableWidth:ni,availableHeight:io})=>{let{width:Xo,height:yd}=Qo.reference,Rl=ot.floating.style;Rl.setProperty("--radix-popper-available-width",`${ni}px`),Rl.setProperty("--radix-popper-available-height",`${io}px`),Rl.setProperty("--radix-popper-anchor-width",`${Xo}px`),Rl.setProperty("--radix-popper-anchor-height",`${yd}px`)}}),k&&f3({element:k,padding:a}),Hne({arrowWidth:C,arrowHeight:M}),p&&d3({strategy:"referenceHidden",...N}),g&&p3(g===!0?{}:g)]}),[E,tt]=k3(J),Tr=m3(h);Lh(()=>{Q&&Tr?.()},[Q,Tr]);let P=se.arrow?.x,xn=se.arrow?.y,ro=se.arrow?.centerOffset!==0,[gd,Cl]=xr.useState();return Lh(()=>{y&&Cl(window.getComputedStyle(y).zIndex)},[y]),(0,Gs.jsx)("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:Q?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:gd,"--radix-popper-transform-origin":[se.transformOrigin?.x,se.transformOrigin?.y].join(" ")},dir:t.dir,children:(0,Gs.jsx)(Vne,{scope:n,placedSide:E,onArrowChange:_,arrowX:P,arrowY:xn,shouldHideArrow:ro,children:(0,Gs.jsx)(pl.div,{"data-side":E,"data-align":tt,...w,ref:b,style:{...w.style,animation:Q?void 0:"none",visibility:se.hide?.referenceHidden?"hidden":void 0}})})})});pP.displayName=dP;var _3="PopperArrow",Bne={top:"bottom",right:"left",bottom:"top",left:"right"},fP=xr.forwardRef(function(e,n){let{__scopePopper:r,...i}=e,o=zne(_3,r),s=Bne[o.placedSide];return(0,Gs.jsx)("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:(0,Gs.jsx)(h3,{...i,ref:n,style:{...i.style,display:"block"}})})});fP.displayName=_3;function Une(t){return t!==null}var Hne=t=>({name:"transformOrigin",options:t,fn(e){let{placement:n,rects:r,middlewareData:i}=e,s=i.arrow?.centerOffset!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=k3(n),d={start:"0%",center:"50%",end:"100%"}[u],p=(i.arrow?.x??0)+a/2,f=(i.arrow?.y??0)+l/2,h="",g="";return c==="bottom"?(h=s?d:`${p}px`,g=`${-l}px`):c==="top"?(h=s?d:`${p}px`,g=`${r.floating.height+l}px`):c==="right"?(h=`${-l}px`,g=s?d:`${f}px`):c==="left"&&(h=`${r.floating.width+l}px`,g=s?d:`${f}px`),{data:{x:h,y:g}}}});function k3(t){let[e,n="center"]=t.split("-");return[e,n]}var hP=cP,mP=uP,gP=pP,yP=fP;var hb=I(H(),1),T3=I(bo(),1);var S3=I(X(),1),Wne="Portal",vP=hb.forwardRef((t,e)=>{let{container:n,...r}=t,[i,o]=hb.useState(!1);wr(()=>o(!0),[]);let s=n||i&&globalThis?.document?.body;return s?T3.default.createPortal((0,S3.jsx)(Vt.div,{...r,ref:e}),s):null});vP.displayName=Wne;var Jn=I(H(),1);var E3=I(H(),1);function qne(t,e){return E3.useReducer((n,r)=>e[n][r]??n,t)}var jo=t=>{let{present:e,children:n}=t,r=Yne(e),i=typeof n=="function"?n({present:r.isPresent}):Jn.Children.only(n),o=gt(r.ref,Kne(i));return typeof n=="function"||r.isPresent?Jn.cloneElement(i,{ref:o}):null};jo.displayName="Presence";function Yne(t){let[e,n]=Jn.useState(),r=Jn.useRef(null),i=Jn.useRef(t),o=Jn.useRef("none"),s=t?"mounted":"unmounted",[a,l]=qne(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Jn.useEffect(()=>{let c=mb(r.current);o.current=a==="mounted"?c:"none"},[a]),wr(()=>{let c=r.current,u=i.current;if(u!==t){let p=o.current,f=mb(c);t?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&p!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),wr(()=>{if(e){let c,u=e.ownerDocument.defaultView??window,d=f=>{let g=mb(r.current).includes(f.animationName);if(f.target===e&&g&&(l("ANIMATION_END"),!i.current)){let w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=f=>{f.target===e&&(o.current=mb(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:Jn.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function mb(t){return t?.animationName||"none"}function Kne(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ei=I(H(),1);var yb=I(H(),1);var Gne=ei[" useInsertionEffect ".trim().toString()]||wr;function gb({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){let[i,o,s]=Qne({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{let u=ei.useRef(t!==void 0);ei.useEffect(()=>{let d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}let c=ei.useCallback(u=>{if(a){let d=Xne(u)?u(t):u;d!==t&&s.current?.(d)}else o(u)},[a,t,o,s]);return[l,c]}function Qne({defaultProp:t,onChange:e}){let[n,r]=ei.useState(t),i=ei.useRef(n),o=ei.useRef(e);return Gne(()=>{o.current=e},[e]),ei.useEffect(()=>{i.current!==n&&(o.current?.(n),i.current=n)},[n,i]),[n,r,o]}function Xne(t){return typeof t=="function"}var K0e=Symbol("RADIX:SYNC_STATE");var P3=I(H(),1);var C3=I(X(),1),Zne=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Jne="VisuallyHidden",R3=P3.forwardRef((t,e)=>(0,C3.jsx)(Vt.span,{...t,ref:e,style:{...Zne,...t.style}}));R3.displayName=Jne;var M3=R3;var Lt=I(X()),[vb,tre]=Zw("Tooltip",[fb]),wb=fb(),I3="TooltipProvider",nre=700,wP="tooltip.open",[rre,xP]=vb(I3),_P=t=>{let{__scopeTooltip:e,delayDuration:n=nre,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=t,[s,a]=me.useState(!0),l=me.useRef(!1),c=me.useRef(0);return me.useEffect(()=>{let u=c.current;return()=>window.clearTimeout(u)},[]),(0,Lt.jsx)(rre,{scope:e,isOpenDelayed:s,delayDuration:n,onOpen:me.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:me.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:me.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:o})};_P.displayName=I3;var bb="Tooltip",[ire,Ah]=vb(bb),L3=t=>{let{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:o,disableHoverableContent:s,delayDuration:a}=t,l=xP(bb,t.__scopeTooltip),c=wb(e),[u,d]=me.useState(null),p=yz(),f=me.useRef(0),h=s??l.disableHoverableContent,g=a??l.delayDuration,w=me.useRef(!1),[m=!1,y]=gb({prop:r,defaultProp:i,onChange:S=>{S?(l.onOpen(),document.dispatchEvent(new CustomEvent(wP))):l.onClose(),o?.(S)}}),v=me.useMemo(()=>m?w.current?"delayed-open":"instant-open":"closed",[m]),b=me.useCallback(()=>{window.clearTimeout(f.current),w.current=!1,y(!0)},[y]),k=me.useCallback(()=>{window.clearTimeout(f.current),y(!1)},[y]),_=me.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{w.current=!0,y(!0)},g)},[g,y]);return me.useEffect(()=>()=>window.clearTimeout(f.current),[]),(0,Lt.jsx)(hP,{...c,children:(0,Lt.jsx)(ire,{scope:e,contentId:p,open:m,stateAttribute:v,trigger:u,onTriggerChange:d,onTriggerEnter:me.useCallback(()=>{l.isOpenDelayed?_():b()},[l.isOpenDelayed,_,b]),onTriggerLeave:me.useCallback(()=>{h?k():window.clearTimeout(f.current)},[k,h]),onOpen:b,onClose:k,disableHoverableContent:h,children:n})})};L3.displayName=bb;var bP="TooltipTrigger",A3=me.forwardRef((t,e)=>{let{__scopeTooltip:n,...r}=t,i=Ah(bP,n),o=xP(bP,n),s=wb(n),a=me.useRef(null),l=Eu(e,a,i.onTriggerChange),c=me.useRef(!1),u=me.useRef(!1),d=me.useCallback(()=>c.current=!1,[]);return me.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),(0,Lt.jsx)(mP,{asChild:!0,...s,children:(0,Lt.jsx)(pl.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:We(t.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:We(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:We(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:We(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:We(t.onBlur,i.onClose),onClick:We(t.onClick,i.onClose)})})});A3.displayName=bP;var kP="TooltipPortal",[ore,sre]=vb(kP,{forceMount:void 0}),$3=t=>{let{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,o=Ah(kP,e);return(0,Lt.jsx)(ore,{scope:e,forceMount:n,children:(0,Lt.jsx)(jo,{present:n||o.open,children:(0,Lt.jsx)(vP,{asChild:!0,container:i,children:r})})})};$3.displayName=kP;var $u="TooltipContent",O3=me.forwardRef((t,e)=>{let n=sre($u,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,s=Ah($u,t.__scopeTooltip);return(0,Lt.jsx)(jo,{present:r||s.open,children:s.disableHoverableContent?(0,Lt.jsx)(D3,{side:i,...o,ref:e}):(0,Lt.jsx)(are,{side:i,...o,ref:e})})}),are=me.forwardRef((t,e)=>{let n=Ah($u,t.__scopeTooltip),r=xP($u,t.__scopeTooltip),i=me.useRef(null),o=Eu(e,i),[s,a]=me.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,p=me.useCallback(()=>{a(null),d(!1)},[d]),f=me.useCallback((h,g)=>{let w=h.currentTarget,m={x:h.clientX,y:h.clientY},y=ure(m,w.getBoundingClientRect()),v=dre(m,y),b=pre(g.getBoundingClientRect()),k=hre([...v,...b]);a(k),d(!0)},[d]);return me.useEffect(()=>()=>p(),[p]),me.useEffect(()=>{if(l&&u){let h=w=>f(w,u),g=w=>f(w,l);return l.addEventListener("pointerleave",h),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",h),u.removeEventListener("pointerleave",g)}}},[l,u,f,p]),me.useEffect(()=>{if(s){let h=g=>{let w=g.target,m={x:g.clientX,y:g.clientY},y=l?.contains(w)||u?.contains(w),v=!fre(m,s);y?p():v&&(p(),c())};return document.addEventListener("pointermove",h),()=>document.removeEventListener("pointermove",h)}},[l,u,s,c,p]),(0,Lt.jsx)(D3,{...t,ref:o})}),[lre,cre]=vb(bb,{isInside:!1}),D3=me.forwardRef((t,e)=>{let{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:s,...a}=t,l=Ah($u,n),c=wb(n),{onClose:u}=l;return me.useEffect(()=>(document.addEventListener(wP,u),()=>document.removeEventListener(wP,u)),[u]),me.useEffect(()=>{if(l.trigger){let d=p=>{p.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),(0,Lt.jsx)(XE,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:(0,Lt.jsxs)(gP,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,Lt.jsx)(oz,{children:r}),(0,Lt.jsx)(lre,{scope:n,isInside:!0,children:(0,Lt.jsx)(M3,{id:l.contentId,role:"tooltip",children:i||r})})]})})});O3.displayName=$u;var F3="TooltipArrow",N3=me.forwardRef((t,e)=>{let{__scopeTooltip:n,...r}=t,i=wb(n);return cre(F3,n).isInside?null:(0,Lt.jsx)(yP,{...i,...r,ref:e})});N3.displayName=F3;function ure(t,e){let n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dre(t,e,n=5){let r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function pre(t){let{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function fre(t,e){let{x:n,y:r}=t,i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){let a=e[o].x,l=e[o].y,c=e[s].x,u=e[s].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function hre(t){let e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),mre(e)}function mre(t){if(t.length<=1)return t.slice();let e=[];for(let r=0;r<t.length;r++){let i=t[r];for(;e.length>=2;){let o=e[e.length-1],s=e[e.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();let n=[];for(let r=t.length-1;r>=0;r--){let i=t[r];for(;n.length>=2;){let o=n[n.length-1],s=n[n.length-2];if((o.x-s.x)*(i.y-s.y)>=(o.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var $h=_P;var kb=I(H());var z3=require("obsidian"),xb=I(H()),n5=I(X());function gre(t){let e=(0,xb.useRef)(null);return[(0,xb.useCallback)(r=>{e.current&&e.current.empty(),r&&(0,z3.setIcon)(r,t),e.current=r},[t])]}function et(t){return function(n){let[r]=gre(t);return(0,n5.jsx)("div",{ref:r,...n})}}var _b=et("play"),B3=et("pause"),vTe=et("volume"),U3=et("volume-1"),H3=et("volume-2"),j3=et("volume-x"),W3=et("maximize"),q3=et("minimize"),yre=et("picture-in-picture-2"),vre=et("picture-in-picture"),TP=et("subtitles"),wTe=et("check-circle"),bTe=et("circle"),Y3=et("fast-forward"),K3=et("rewind"),G3=et("edit"),Q3=et("image-down"),wre=et("pin"),X3=et("more-horizontal"),xTe=et("plus"),_Te=et("trash"),Z3=et("list-video"),J3=et("skip-forward"),e5=et("skip-back"),t5=et("copy");var ft=I(X()),Oh="group ring-mod-border-focus relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-2 aria-disabled:hidden";function Tb(){let t=je("paused");return(0,ft.jsx)(jv,{className:Oh,"aria-label":t?"Play":"Pause",children:t?(0,ft.jsx)(_b,{className:"w-7 h-7 translate-x-px"}):(0,ft.jsx)(B3,{className:"w-7 h-7"})})}function r5({seconds:t}){return(0,ft.jsx)(Gf,{className:Oh,seconds:t,"aria-label":`Fast forward ${t}s`,children:(0,ft.jsx)(Y3,{className:"w-7 h-7"})})}function i5({seconds:t}){return(0,ft.jsx)(Gf,{className:Oh,seconds:-t,"aria-label":`Rewind ${t}s`,children:(0,ft.jsx)(K3,{className:"w-7 h-7"})})}function Sb(){let t=je("volume"),e=je("muted");return(0,ft.jsx)(qv,{className:Oh,"aria-label":e?"Unmute":"Mute",children:e||t==0?(0,ft.jsx)(j3,{className:"w-7 h-7"}):t<.5?(0,ft.jsx)(U3,{className:"w-7 h-7"}):(0,ft.jsx)(H3,{className:"w-7 h-7"})})}function o5(){let t=je("fullscreen");return(0,ft.jsx)(Wv,{className:Oh,"aria-label":t?"Exit fullscreen":"Enter fullscreen",children:t?(0,ft.jsx)(q3,{className:"w-7 h-7"}):(0,ft.jsx)(W3,{className:"w-7 h-7"})})}function Eb(){return xu()?(0,ft.jsx)("button",{className:mt("yn-lp-edit","group ring-mod-border-focus relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-2 aria-disabled:hidden"),onClick:()=>{},[Gi]:!0,"aria-label":"Edit in editor",children:(0,ft.jsx)(G3,{className:"w-7 h-7"})}):null}function bre(){let t=ew(),[e,n]=(0,kb.useState)(()=>rl(t)),r=IV(),i=xi(s=>s.screenshotFormat),o=xi(s=>s.screenshotQuality);return(0,kb.useEffect)(()=>{n(rl(t))},[t]),!e||!r||!t?null:async()=>{r(await hh(t,i,o))}}function s5(){let t=bre();return t?(0,ft.jsx)("button",{className:"group ring-mod-border-focus relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-2 aria-disabled:hidden",onClick:t,"aria-label":"Capture screenshot",children:(0,ft.jsx)(Q3,{className:"w-7 h-7"})}):null}function Pb(){let{target:t,action:e}=Qw("next");return t?(0,ft.jsx)("button",{className:"group ring-mod-border-focus relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-2 aria-disabled:hidden",onClick:e,"aria-label":`Next: ${t.title}`,children:(0,ft.jsx)(J3,{className:"w-7 h-7"})}):null}function Cb(){let{target:t,action:e}=Qw("previous");if(t)return(0,ft.jsx)("button",{className:"group ring-mod-border-focus relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-2 aria-disabled:hidden",onClick:e,"aria-label":`Prev: ${t.title}`,children:(0,ft.jsx)(e5,{className:"w-7 h-7"})})}var Gi="data-lp-pass-through";var u5=require("obsidian"),d5=I(H());function l5(t,e,n){let r=xre(e);c5(t,r,n,new Map)}function c5(t,e,n,r){e.forEach(i=>{let o=n(t,i,r);if(o&&i.children.length>0){r.set(i.index,o);let s=o.setSubmenu();c5(s,i.children,n,r)}})}function xre(t){let e=[],n=t.map((r,i)=>({...r,index:i,children:[]}));return n.forEach(r=>{r.parent>=0?n[r.parent]?.children.push(r):e.push(r)}),e}var SP=I(X());function EP(){let t=cE(),e=je("textTracks"),[,n]=AE(),r=Rb(i=>(t.forEach(({label:o,select:s,selected:a,track:l},c)=>{i.addItem(u=>{u.setTitle(l?uh(l,c):o).setChecked(a).onClick(()=>{s(),n(l?.id??null)})})}),!0));return e.length===0?null:(0,SP.jsx)("button",{className:"group ring-mod-border-focus relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-2 aria-disabled:hidden",[Gi]:!0,onClick:r,"aria-label":"Select Caption",children:(0,SP.jsx)(TP,{className:"w-7 h-7"})})}var Dh=I(X());function Rb(t){let e=(0,d5.useRef)(null);return n=>{e.current?.close(),e.current=null;let r=new u5.Menu;t(r)?(jl(n.nativeEvent,r),n.nativeEvent.stopImmediatePropagation(),yt(r,{close:i=>function(...o){return e.current===this&&(e.current=null),i.call(this,...o)}}),e.current=r):r.close()}}function Mb(){let t=Kw(),e=qw(),n=Ze(o=>o.source?.url),r=sl(),i=Rb(o=>!e||!n||!t?!1:(o.addItem(s=>s.setTitle(t.title).setIcon("list-video").onClick(()=>{r.workspace.openLinkText(t.file.path,"","tab")})).addSeparator(),l5(o,t.list,(s,a,l)=>{if(a.type==="subtitle")return null;let c=null;if(_u(a)){let u=a.children.length>0;s.addItem(d=>{if(d.setTitle(a.title).onClick(()=>{e(a,t)}),Xn(n,a.media)){d.setChecked(!0);let p=f=>{if(f.parent<0)return;l.get(f.parent)?.setChecked(!0);let h=t.list[f.parent];h&&p(h)};p(a)}u||(c=d)}),u&&s.addItem(d=>{d.setTitle("  \u21B3"),c=d})}else s.addItem(u=>{u.setTitle(a.title).setIcon("hash"),c=u});return c}),!0));return!e||!n||!t?null:(0,Dh.jsx)("button",{className:"group ring-mod-border-focus relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-2 aria-disabled:hidden",[Gi]:!0,onClick:i,"aria-label":"Select Playlist",children:(0,Dh.jsx)(Z3,{className:"w-7 h-7"})})}function Ib(){let t=qr(),e=sl(l=>l.workspace),n=bu(),r=xu(),i=MV(),o=Ze(l=>l.source),s=Ww(),a=Rb(l=>{if(!t||!o)return!1;let{toggleControls:c,controls:u,setTransform:d,transform:p,disableWebFullscreen:f,toggleWebFullscreen:h,textTracks:g}=s.getState();return e.trigger("yn:media-menu",l,{player:t,reload:i,source:o.url,viewType:o.viewType,toggleControls:c,controls:u,setTransform:d,tracks:{local:g.local,remote:dh(g.remote,g.local)},transform:p,plugin:n,disableWebFullscreen:f,toggleWebFullscreen:h},r?"player-menu-embed":"player-menu-view"),!0});return!t||!o?null:(0,Dh.jsx)("button",{className:"group ring-mod-border-focus relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-2 aria-disabled:hidden",[Gi]:!0,onClick:a,"aria-label":"More options",children:(0,Dh.jsx)(X3,{className:"w-7 h-7"})})}var Nb=I(H());var Fe=I(H(),1);function Fh(t,[e,n]){return Math.min(n,Math.max(e,t))}var Wo=I(H(),1),f5=I(X(),1);function Ou(t,e=[]){let n=[];function r(o,s){let a=Wo.createContext(s),l=n.length;n=[...n,s];let c=d=>{let{scope:p,children:f,...h}=d,g=p?.[t]?.[l]||a,w=Wo.useMemo(()=>h,Object.values(h));return(0,f5.jsx)(g.Provider,{value:w,children:f})};c.displayName=o+"Provider";function u(d,p){let f=p?.[t]?.[l]||a,h=Wo.useContext(f);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[c,u]}let i=()=>{let o=n.map(s=>Wo.createContext(s));return function(a){let l=a?.[t]||o;return Wo.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,_re(i,...e)]}function _re(...t){let e=t[0];if(t.length===1)return e;let n=()=>{let r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){let s=r.reduce((a,{useScope:l,scopeName:c})=>{let d=l(o)[`__scope${c}`];return{...a,...d}},{});return Wo.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var Lb=I(H(),1),kre=I(X(),1),Tre=Lb.createContext(void 0);function Ab(t){let e=Lb.useContext(Tre);return t||e||"ltr"}var $b=I(H(),1);function h5(t){let e=$b.useRef({value:t,previous:t});return $b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var m5=I(H(),1);function g5(t){let[e,n]=m5.useState(void 0);return wr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});let r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;let o=i[0],s,a;if("borderBoxSize"in o){let l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Qs=I(H(),1);var Ob=I(X(),1),Sre=I(H(),1);var Ere=I(X(),1);function y5(t){let e=t+"CollectionProvider",[n,r]=Ou(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=g=>{let{scope:w,children:m}=g,y=Qs.default.useRef(null),v=Qs.default.useRef(new Map).current;return(0,Ob.jsx)(i,{scope:w,itemMap:v,collectionRef:y,children:m})};s.displayName=e;let a=t+"CollectionSlot",l=Sh(a),c=Qs.default.forwardRef((g,w)=>{let{scope:m,children:y}=g,v=o(a,m),b=gt(w,v.collectionRef);return(0,Ob.jsx)(l,{ref:b,children:y})});c.displayName=a;let u=t+"CollectionItemSlot",d="data-radix-collection-item",p=Sh(u),f=Qs.default.forwardRef((g,w)=>{let{scope:m,children:y,...v}=g,b=Qs.default.useRef(null),k=gt(w,b),_=o(u,m);return Qs.default.useEffect(()=>(_.itemMap.set(b,{ref:b,...v}),()=>void _.itemMap.delete(b))),(0,Ob.jsx)(p,{[d]:"",ref:k,children:y})});f.displayName=u;function h(g){let w=o(t+"CollectionConsumer",g);return Qs.default.useCallback(()=>{let y=w.collectionRef.current;if(!y)return[];let v=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(w.itemMap.values()).sort((_,S)=>v.indexOf(_.ref.current)-v.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:s,Slot:c,ItemSlot:f},h,r]}var zt=I(X(),1),v5=["PageUp","PageDown"],w5=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],b5={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Du="Slider",[PP,Pre,Cre]=y5(Du),[x5,_Se]=Ou(Du,[Cre]),[Rre,Db]=x5(Du),_5=Fe.forwardRef((t,e)=>{let{name:n,min:r=0,max:i=100,step:o=1,orientation:s="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:f=!1,form:h,...g}=t,w=Fe.useRef(new Set),m=Fe.useRef(0),v=s==="horizontal"?Mre:Ire,[b=[],k]=gb({prop:u,defaultProp:c,onChange:$=>{[...w.current][m.current]?.focus(),d($)}}),_=Fe.useRef(b);function S($){let L=Dre(b,$);x($,L)}function C($){x($,m.current)}function M(){let $=_.current[m.current];b[m.current]!==$&&p(b)}function x($,L,{commit:F}={commit:!1}){let N=zre(o),W=Bre(Math.round(($-r)/o)*o+r,N),Y=Fh(W,[r,i]);k((J=[])=>{let Q=$re(J,Y,L);if(Vre(Q,l*o)){m.current=Q.indexOf(Y);let se=String(Q)!==String(J);return se&&F&&p(Q),se?Q:J}else return J})}return(0,zt.jsx)(Rre,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:i,valueIndexToChangeRef:m,thumbs:w.current,values:b,orientation:s,form:h,children:(0,zt.jsx)(PP.Provider,{scope:t.__scopeSlider,children:(0,zt.jsx)(PP.Slot,{scope:t.__scopeSlider,children:(0,zt.jsx)(v,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:e,onPointerDown:We(g.onPointerDown,()=>{a||(_.current=b)}),min:r,max:i,inverted:f,onSlideStart:a?void 0:S,onSlideMove:a?void 0:C,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&x(r,0,{commit:!0}),onEndKeyDown:()=>!a&&x(i,b.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:L})=>{if(!a){let W=v5.includes($.key)||$.shiftKey&&w5.includes($.key)?10:1,Y=m.current,J=b[Y],Q=o*W*L;x(J+Q,Y,{commit:!0})}}})})})})});_5.displayName=Du;var[k5,T5]=x5(Du,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Mre=Fe.forwardRef((t,e)=>{let{min:n,max:r,dir:i,inverted:o,onSlideStart:s,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,p]=Fe.useState(null),f=gt(e,v=>p(v)),h=Fe.useRef(void 0),g=Ab(i),w=g==="ltr",m=w&&!o||!w&&o;function y(v){let b=h.current||d.getBoundingClientRect(),k=[0,b.width],S=MP(k,m?[n,r]:[r,n]);return h.current=b,S(v-b.left)}return(0,zt.jsx)(k5,{scope:t.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width",children:(0,zt.jsx)(S5,{dir:g,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{let b=y(v.clientX);s?.(b)},onSlideMove:v=>{let b=y(v.clientX);a?.(b)},onSlideEnd:()=>{h.current=void 0,l?.()},onStepKeyDown:v=>{let k=b5[m?"from-left":"from-right"].includes(v.key);c?.({event:v,direction:k?-1:1})}})})}),Ire=Fe.forwardRef((t,e)=>{let{min:n,max:r,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=Fe.useRef(null),d=gt(e,u),p=Fe.useRef(void 0),f=!i;function h(g){let w=p.current||u.current.getBoundingClientRect(),m=[0,w.height],v=MP(m,f?[r,n]:[n,r]);return p.current=w,v(g-w.top)}return(0,zt.jsx)(k5,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:(0,zt.jsx)(S5,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{let w=h(g.clientY);o?.(w)},onSlideMove:g=>{let w=h(g.clientY);s?.(w)},onSlideEnd:()=>{p.current=void 0,a?.()},onStepKeyDown:g=>{let m=b5[f?"from-bottom":"from-top"].includes(g.key);l?.({event:g,direction:m?-1:1})}})})}),S5=Fe.forwardRef((t,e)=>{let{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:s,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Db(Du,n);return(0,zt.jsx)(Vt.span,{...c,ref:e,onKeyDown:We(t.onKeyDown,d=>{d.key==="Home"?(s(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):v5.concat(w5).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:We(t.onPointerDown,d=>{let p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(p)?p.focus():r(d)}),onPointerMove:We(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:We(t.onPointerUp,d=>{let p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),o(d))})})}),E5="SliderTrack",P5=Fe.forwardRef((t,e)=>{let{__scopeSlider:n,...r}=t,i=Db(E5,n);return(0,zt.jsx)(Vt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});P5.displayName=E5;var CP="SliderRange",C5=Fe.forwardRef((t,e)=>{let{__scopeSlider:n,...r}=t,i=Db(CP,n),o=T5(CP,n),s=Fe.useRef(null),a=gt(e,s),l=i.values.length,c=i.values.map(p=>I5(p,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return(0,zt.jsx)(Vt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...t.style,[o.startEdge]:u+"%",[o.endEdge]:d+"%"}})});C5.displayName=CP;var RP="SliderThumb",R5=Fe.forwardRef((t,e)=>{let n=Pre(t.__scopeSlider),[r,i]=Fe.useState(null),o=gt(e,a=>i(a)),s=Fe.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return(0,zt.jsx)(Lre,{...t,ref:o,index:s})}),Lre=Fe.forwardRef((t,e)=>{let{__scopeSlider:n,index:r,name:i,...o}=t,s=Db(RP,n),a=T5(RP,n),[l,c]=Fe.useState(null),u=gt(e,y=>c(y)),d=l?s.form||!!l.closest("form"):!0,p=g5(l),f=s.values[r],h=f===void 0?0:I5(f,s.min,s.max),g=Ore(r,s.values.length),w=p?.[a.size],m=w?Fre(w,h,a.direction):0;return Fe.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),(0,zt.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${h}% + ${m}px)`},children:[(0,zt.jsx)(PP.ItemSlot,{scope:t.__scopeSlider,children:(0,zt.jsx)(Vt.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":s.min,"aria-valuenow":f,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...o,ref:u,style:f===void 0?{display:"none"}:t.style,onFocus:We(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),d&&(0,zt.jsx)(M5,{name:i??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:f},r)]})});R5.displayName=RP;var Are="RadioBubbleInput",M5=Fe.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{let i=Fe.useRef(null),o=gt(i,r),s=h5(e);return Fe.useEffect(()=>{let a=i.current;if(!a)return;let l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&u){let d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[s,e]),(0,zt.jsx)(Vt.input,{style:{display:"none"},...n,ref:o,defaultValue:e})});M5.displayName=Are;function $re(t=[],e,n){let r=[...t];return r[n]=e,r.sort((i,o)=>i-o)}function I5(t,e,n){let o=100/(n-e)*(t-e);return Fh(o,[0,100])}function Ore(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Dre(t,e){if(t.length===1)return 0;let n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Fre(t,e,n){let r=t/2,o=MP([0,50],[0,r]);return(r-o(e)*n)*n}function Nre(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Vre(t,e){if(e>0){let n=Nre(t);return Math.min(...n)>=e}return!0}function MP(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];let r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function zre(t){return(String(t).split(".")[1]||"").length}function Bre(t,e){let n=Math.pow(10,e);return Math.round(t*n)/n}var IP=_5,L5=P5,A5=C5,$5=R5;var O5=I(H());var Fu=I(X()),Fb=O5.forwardRef(({className:t,variant:e="regular",autoHidden:n,children:r,...i},o)=>(0,Fu.jsxs)(IP,{ref:o,className:mt("group relative flex w-full touch-none select-none items-center",t),...i,children:[(0,Fu.jsx)(L5,{className:"relative h-slider-track w-full grow overflow-hidden rounded-sm bg-slider-track",children:(0,Fu.jsx)(A5,{className:"absolute h-full bg-ia-accent rounded-sm will-change-[width]"})}),(0,Fu.jsx)($5,{className:mt("block rounded-slider-thumb border-width-slider-thumb border-slider-thumb bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mod-border-focus disabled:pointer-events-none disabled:opacity-50 transition-opacity  will-change-[left]",e==="regular"?"h-slider-thumb w-slider-thumb":"h-slider-thumb-sm w-slider-thumb-sm",n&&"opacity-0 group-hocus:opacity-100 focus:opacity-100")}),r]}));Fb.displayName=IP.displayName;var Xs=I(X());function Vb(){let t=je("volume"),e=je("canSetVolume"),n=Jv();return e?(0,Xs.jsx)(Fb,{className:"inline-flex h-10 w-full max-w-[80px] cursor-pointer items-center outline-none",value:[t*100],onValueChange:([r])=>{n.changeVolume(r/100)},"aria-label":"Volume",autoHidden:!0}):null}function zb({thumbnails:t}){let e=je("currentTime"),n=je("canSeek"),r=je("duration"),i=je("seeking"),o=Jv(),s=1/r*100,[a,l]=(0,Nb.useState)(0),{previewRootRef:c,previewRef:u,previewValue:d}=wF({clamp:!0,offset:6,orientation:"horizontal"}),p=d/100*r;return(0,Nb.useEffect)(()=>{i||l(e/r*100)},[e,r,i]),(0,Xs.jsx)(Fb,{className:"group relative inline-flex h-9 w-full cursor-pointer touch-none select-none items-center outline-none",value:[a],disabled:!n,step:Number.isFinite(s)?s:1,ref:c,onValueChange:([f])=>{l(f),o.seeking(f/100*r)},onValueCommit:([f])=>{o.seek(f/100*r)},autoHidden:!0,"aria-label":"Current Time",children:(0,Xs.jsxs)("div",{className:"flex flex-col items-center absolute opacity-0 data-[visible]:opacity-100 transition-opacity duration-200 will-change-[left] pointer-events-none",ref:u,children:[t?(0,Xs.jsx)(Yv.Root,{src:t,time:p,className:"block mb-2 h-[var(--thumbnail-height)] max-h-[160px] min-h-[80px] w-[var(--thumbnail-width)] min-w-[120px] max-w-[180px] overflow-hidden border border-white bg-black",children:(0,Xs.jsx)(Yv.Img,{})}):null,(0,Xs.jsx)("span",{className:"text-[13px]",children:Ns(p)})]})})}var Nu=I(X());function Bb(){return(0,Nu.jsxs)("div",{className:"ml-2.5 flex items-center text-sm font-medium",children:[(0,Nu.jsx)(Qf,{className:"time",type:"current"}),(0,Nu.jsx)("div",{className:"yn-1 text-white/80",children:"/"}),(0,Nu.jsx)(Qf,{className:"time",type:"duration"})]})}var Nh=I(X());function Ub(){let t=je("title").trim(),e=Qv().trim();return!t&&!e?null:(0,Nh.jsxs)("span",{className:"inline-block flex-1 overflow-hidden text-ellipsis whitespace-nowrap px-2 text-sm font-medium text-white/70",children:[(0,Nh.jsx)("span",{className:"mr-1",children:"|"}),(0,Nh.jsx)("span",{children:e||t})]})}var Le=I(X());function F5({thumbnails:t}){return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Hre,{}),(0,Le.jsx)($o.Root,{className:"opacity-100 absolute inset-0 z-10 flex h-full w-full flex-col bg-gradient-to-t from-black/10 to-transparent",children:(0,Le.jsxs)($h,{children:[(0,Le.jsx)("div",{className:"flex-1"}),(0,Le.jsx)($o.Group,{className:"flex w-full items-center px-2",children:(0,Le.jsx)(zb,{thumbnails:t})}),(0,Le.jsxs)($o.Group,{className:"-mt-0.5 flex w-full items-center px-2 pb-2",children:[(0,Le.jsx)(i5,{seconds:30}),(0,Le.jsx)(Tb,{}),(0,Le.jsx)(r5,{seconds:30}),(0,Le.jsx)(Cb,{}),(0,Le.jsx)(Pb,{}),(0,Le.jsx)(Sb,{}),(0,Le.jsx)(Vb,{}),(0,Le.jsx)(Bb,{}),(0,Le.jsx)(Ub,{}),(0,Le.jsx)("div",{className:"flex-1"}),(0,Le.jsx)(Eb,{}),(0,Le.jsx)(Mb,{}),(0,Le.jsx)(Ib,{})]})]})})]})}function Hre(){return(0,Le.jsxs)(Le.Fragment,{children:[(0,Le.jsx)(Wr,{className:"absolute inset-0 z-0 block h-full w-full",event:"pointerup",action:"toggle:paused"}),(0,Le.jsx)(Wr,{className:"absolute inset-0 z-0 block h-full w-full",event:"dblpointerup",action:"toggle:fullscreen"}),(0,Le.jsx)(Wr,{className:"absolute left-0 top-0 z-10 block h-full w-1/5",event:"dblpointerup",action:"seek:-10"}),(0,Le.jsx)(Wr,{className:"absolute right-0 top-0 z-10 block h-full w-1/5",event:"dblpointerup",action:"seek:10"})]})}var Ce=I(X());function N5({thumbnails:t}){return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(jre,{}),(0,Ce.jsx)(Xv,{className:"yn-captions media-preview:opacity-0 media-controls:bottom-[85px] media-captions:opacity-100 absolute inset-0 bottom-2 z-10 select-none break-words opacity-0 transition-[opacity,bottom] duration-300"}),(0,Ce.jsx)($o.Root,{className:"media-controls:opacity-100 not-media-can-load:opacity-100 absolute inset-0 z-10 flex h-full w-full flex-col bg-gradient-to-t from-black/10 to-transparent opacity-0 transition-opacity",children:(0,Ce.jsxs)($h,{children:[(0,Ce.jsx)("div",{className:"flex-1"}),(0,Ce.jsx)($o.Group,{className:"flex w-full items-center px-2",children:(0,Ce.jsx)(zb,{thumbnails:t})}),(0,Ce.jsxs)($o.Group,{className:"-mt-0.5 flex w-full items-center px-2 pb-2",children:[(0,Ce.jsx)(Tb,{}),(0,Ce.jsx)(Cb,{}),(0,Ce.jsx)(Pb,{}),(0,Ce.jsx)(Sb,{}),(0,Ce.jsx)(Vb,{}),(0,Ce.jsx)(Bb,{}),(0,Ce.jsx)(Ub,{}),(0,Ce.jsx)("div",{className:"flex-1"}),(0,Ce.jsx)(EP,{}),(0,Ce.jsx)(Mb,{}),(0,Ce.jsx)(s5,{}),(0,Ce.jsx)(o5,{}),(0,Ce.jsx)(Eb,{}),(0,Ce.jsx)(Ib,{})]})]})})]})}function jre(){return(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(Wr,{className:"absolute inset-0 z-0 block h-full w-full",event:"pointerup",action:"toggle:paused"}),(0,Ce.jsx)(Wr,{className:"absolute inset-0 z-0 block h-full w-full",event:"dblpointerup",action:"toggle:fullscreen"}),(0,Ce.jsx)(Wr,{className:"absolute left-0 top-0 z-10 block h-full w-1/5",event:"dblpointerup",action:"seek:-10"}),(0,Ce.jsx)(Wr,{className:"absolute right-0 top-0 z-10 block h-full w-1/5",event:"dblpointerup",action:"seek:10"})]})}var q5=I(H());var Vh=class{constructor(){T(this,"name","webview");T(this,"target")}canPlay({src:e}){return Zf(e)&&WF(e)}mediaType(){return"video"}async load(e){return new yn(this.target,e)}};function Hb(t){return{enable:`yn-enable-preload-${t}`,disable:`yn-disable-preload-${t}`,preload:`file:///yn-preload-${t}`}}function LP(t){return{enable:e=>t.ipcRenderer.invoke(t.channel.enable,e),disable:()=>t.ipcRenderer.invoke(t.channel.disable)}}var $n=I(H());function jb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}var V5=I(H());function z5(t,e){var n=(0,V5.useState)(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Wb=I(H());var Wre=typeof window<"u"?Wb.useLayoutEffect:Wb.useEffect,B5=new WeakMap;function zh(t,e){var n=z5(e||null,function(r){return t.forEach(function(i){return jb(i,r)})});return Wre(function(){var r=B5.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||jb(a,null)}),o.forEach(function(a){i.has(a)||jb(a,s)})}B5.set(n,t)},[t]),n}var Yb=require("obsidian"),qb={mac:"Mozilla/5.0 (Macintosh; Intel Mac OS X 12.1; rv:95.0) Gecko/20100101 Firefox/95.0",windows:"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:95.0) Gecko/20100101 Firefox/95.0",linux:"Mozilla/5.0 (Linux x86_64; rv:95.0) Gecko/20100101 Firefox/95.0"};function AP(t){return Yb.Platform.isWin?qb.windows:Yb.Platform.isMacOS?qb.mac:Yb.Platform.isLinux?qb.linux:qb.windows}var U5=I(H()),$P={onLoadCommit:"load-commit",onDidFinishLoad:"did-finish-load",onDidFailLoad:"did-fail-load",onDidFrameFinishLoad:"did-frame-finish-load",onDidStartLoading:"did-start-loading",onDidStopLoading:"did-stop-loading",onDidAttach:"did-attach",onDomReady:"dom-ready",onPageTitleUpdated:"page-title-updated",onPageFaviconUpdated:"page-favicon-updated",onEnterHtmlFullScreen:"enter-html-full-screen",onLeaveHtmlFullScreen:"leave-html-full-screen",onConsoleMessage:"console-message",onFoundInPage:"found-in-page",onWillNavigate:"will-navigate",onDidStartNavigation:"did-start-navigation",onDidRedirectNavigation:"did-redirect-navigation",onDidNavigate:"did-navigate",onDidFrameNavigate:"did-frame-navigate",onDidNavigateInPage:"did-navigate-in-page",onClose:"close",onIpcMessage:"ipc-message",onCrashed:"crashed",onPluginCrashed:"plugin-crashed",onDestroyed:"destroyed",onMediaStartedPlaying:"media-started-playing",onMediaPaused:"media-paused",onDidChangeThemeColor:"did-change-theme-color",onUpdateTargetUrl:"update-target-url",onDevtoolsOpened:"devtools-opened",onDevtoolsClosed:"devtools-closed",onDevtoolsFocused:"devtools-focused",onContextMenu:"context-menu"};function qre(t){return Object.entries(t).reduce((e,[n,r])=>(n in $P?e.event[n]=r:e.rest[n]=r,e),{event:{},rest:{}})}function H5(t,e){let{event:n,rest:r}=qre(t);for(let i of Object.keys($P)){let o=i,s=$P[o],a=n[o];(0,U5.useEffect)(()=>{if(!e.current||!a)return;let l=e.current;return l.addEventListener(s,a),()=>{l.removeEventListener(s,a)}},[s,a,e])}return r}var W5=I(X());function Yre(){let t=bu(),[e,n]=(0,$n.useState)(!1);return(0,$n.useEffect)(()=>{t.preload.untilReady().then(()=>n(!0)).catch(()=>n(null))},[t.preload]),e}var j5=(0,$n.forwardRef)(function({devtools:e=!1,muted:n=!1,className:r,useragent:i,...o},s){let a=(0,$n.useRef)(null),l=Yre(),[c,u]=(0,$n.useState)(!1),d=H5(o,a);Gre(n,a,c);let p=Kre(i??navigator.userAgent,a,c);(0,$n.useEffect)(()=>{if(!a.current)return;let h=a.current;return h.addEventListener("dom-ready",g),h.addEventListener("will-navigate",w),()=>{h.removeEventListener("dom-ready",g),h.removeEventListener("will-navigate",w)};function g(){u(!0)}function w(){u(!1)}},[]);let f=zh([a,s]);if(d.preload){if(l===!1)return null;l===null&&(d.preload=void 0)}return(0,W5.jsx)("webview",{ref:f,className:mt("h-full w-full",r),useragent:p,...d})});function Kre(t,e,n){let r=(0,$n.useMemo)(()=>{let i=t??navigator.userAgent;return AP(i)},[t]);return(0,$n.useEffect)(()=>{!e.current||!n||r===e.current.useragent||e.current.setUserAgent(r)},[r,n,e]),r}function Gre(t,e,n){(0,$n.useEffect)(()=>{!e.current||!n||t===e.current.isAudioMuted()||e.current.setAudioMuted(t)},[t,n,e])}var OP=I(X()),{preload:Qre}=Hb(Jf);function Y5({loaders:t,...e}){let n=sl(l=>l.appId),r=je("viewType"),i=Ze(l=>!!l.transform?.flipHorizontal),o=Ze(l=>!!l.transform?.flipVertical),s=Ze(l=>{if(l.transform?.rotate)switch(l.transform.rotate){case"90":return"rotate-90";case"180":return"rotate-180";case"270":return"rotate-[270deg]";default:return}}),a=Xw();return(0,OP.jsx)(pE,{className:mt(r==="video"&&i&&"-scale-x-100",r==="video"&&o&&"-scale-y-100",r==="video"&&s),loaders:[Vh,...t??[]],buildMediaEl:(0,q5.useCallback)((l,c)=>l instanceof Vh?(0,OP.jsx)(j5,{"aria-hidden":!0,className:mt("data-[play-ready]:blur-none blur-lg transition-opacity",a&&"pointer-events-none"),webpreferences:"autoplayPolicy=user-gesture-required",partition:Wl(n),preload:Qre,ref:u=>{c.load(u)}}):null,[n,a]),...e})}var K5=I(H());function G5(){let t=Ze(o=>o.source?.url),{vault:e}=sl(),n=t?Et(t):null,r=(0,K5.useMemo)(()=>{if(t)return Te(t)?e.getResourcePath(t.file):t.source.href},[n]),i=Ze(o=>{let s=o.source?.viewType;if(s){if(s==="yn-webpage")return"webpage";if(s?.endsWith("video"))return"video/mp4";if(s?.endsWith("audio"))return"audio/mp3"}});if(r)return i==="webpage"?{src:HF(r)}:{src:r,type:i}}var Pi=I(X());function Xre({onViewTypeChange:t}){return GV(t),FV(),XV(),vV(),(0,Pi.jsx)(Pi.Fragment,{})}function Zre(){let t=je("viewType"),e=Xw();return t==="audio"?(0,Pi.jsx)(F5,{}):e?(0,Pi.jsx)(N5,{}):null}function Zs(){let t=Ze(d=>d.setPlayer),{onEnded:e}=Gw(),n=G5(),r=Ze(({source:d})=>{if(d)return Te(d.url)?d.url.file.extension==="webm":d.url.source.pathname.endsWith(".webm")}),i=xi(d=>d.loadStrategy),o=xu(),[s,a]=(0,Q5.useState)("unknown"),l=Ze(d=>d.title),{controls:c,...u}=qE();return n?(0,Pi.jsxs)(dE,{className:mt("w-full bg-slate-900 text-white font-sans overflow-hidden rounded-md ring-mod-border-focus data-[focus]:ring-2","data-[view-type=video]:aspect-video data-[view-type=audio]:h-20 data-[view-type=audio]:aspect-auto"),load:o?i:"eager",src:n,playsInline:!0,title:l,viewType:s,ref:t,onEnded:e,onError:d=>Jre(d,n.src),...u,children:[(0,Pi.jsx)(Y5,{}),(0,Pi.jsx)(Xre,{onViewTypeChange:d=>{a(d),!r&&d==="audio"&&new DP.Notice("Unable to show video content due to a potentially unsupported codec by Obsidian. For verification, please disable this plugin, add the video to the vault, and check if video playback resumes normally.")}}),(0,Pi.jsx)(Zre,{})]}):null}function Jre(t,e){new DP.Notice(createFragment(n=>{switch(n.appendText(`Failed to load media for ${e}: `),n.createEl("br"),t.code){case 1:n.appendText("The media playback was aborted");break;case 2:n.appendText("A network error caused the media playback to fail");break;case 3:n.appendText("The media playback was aborted due to a corruption problem or because the media encoding is not supported");break;case 4:n.appendText("The media is not supported to open as regular video or audio, try open as webpage");break;default:n.appendText(t.message||"Unknown error, check console for more details"),console.error("Failed to load media",e,t);break}}))}function Kb(t,e){let n=new WeakMap,r;t.register(ol(t.store,i=>[i.subscribe(({currentTime:o,paused:s,playbackRate:a})=>{o!==0&&i.el&&n.set(t.leaf.parent,{currentTime:o,paused:s,playbackRate:a})}),i.listen("can-play",()=>{if(!r)return;let o=n.get(r);if(!o){r=void 0;return}let{currentTime:s,paused:a,playbackRate:l}=o;if(!a)i.play(new Event("recover-state")).then(()=>{i.currentTime=s,i.playbackRate=l,r&&(n.delete(r),r=void 0)}).catch(c=>console.error("recov err play",c));else try{i.currentTime=s,i.playbackRate=l,r&&(n.delete(r),r=void 0)}catch(c){console.error("recov err paused",c)}})])),t.register(tie(t,(i,o)=>{e(),n.has(o)?r=o:r=void 0})),t.register(()=>{r=void 0})}function Gb(t,e){let n=new WeakMap,r;t.register(ol(t.store,i=>[i.subscribe(({currentTime:o,paused:s,playbackRate:a})=>{o!==0&&i.el&&n.set(i.el.win,{currentTime:o,paused:s,playbackRate:a})}),i.listen("can-play",()=>{if(!r)return;let o=n.get(r);if(!o){r=void 0;return}let{currentTime:s,paused:a,playbackRate:l}=o;if(!a)i.play(new Event("recover-state")).then(()=>{i.currentTime=s,i.playbackRate=l,r&&(n.delete(r),r=void 0)}).catch(c=>console.error("recov err play",c));else try{i.currentTime=s,i.playbackRate=l,r&&(n.delete(r),r=void 0)}catch(c){console.error("recov err paused",c)}})])),t.register(eie(t.containerEl,(i,o)=>{e(),n.has(o)?r=o:r=void 0})),t.register(()=>{r=void 0})}function eie(t,e){let n=t.win;return t.onNodeInserted(()=>{let r=t.win;r!==n&&(e(r,n),n=r)})}function tie(t,e){let n=t.containerEl.win,r=t.leaf.parent;return t.containerEl.onNodeInserted(()=>{let i=t.containerEl.win,o=t.leaf.parent;i===n?o!==r&&(e(o,r),r=o):n=i})}var nx=require("obsidian");var Qb=require("obsidian");function*Bh(t){for(let e of t.children)e instanceof Qb.TFolder?yield*Bh(e):e instanceof Qb.TFile&&(yield e)}function Xb(t,e){return t.initialized?Promise.resolve():new Promise(n=>{let r=t.on("initialized",()=>{t.offref(r),n()});e?.registerEvent(r)})}var J5=require("obsidian");var X5=require("obsidian");function Zb(t){return t.type==="link"}function Z5(t){let{frontmatter:e,frontmatterLinks:n}=t;return e?dV.reduce((r,i)=>{let o=ch[i],s=e[o.plural];if(Array.isArray(s)&&s.length>0&&s.every(l=>typeof l=="string"))return r.push(...s.map((l,c)=>a({value:l,key:`${o.plural}.${c}`})).filter(l=>!!l)),r;if(s=e[o.singular],typeof s=="string"&&s){let l=a({value:s,key:o.singular});return l&&r.push(l),r}function a({value:l,key:c}){let u=n?.find(d=>d.key===c);if(u){let{path:d,subpath:p}=(0,X5.parseLinktext)(u.link);return{type:"link",path:d,subpath:p,kind:i,alias:u.displayText}}else{let d=pV(l,{kind:i});if(d)return d}return null}return r},[]):[]}function FP({alias:t,kind:e,path:n,subpath:r},i,{metadataCache:o}){let s=o.getFirstLinkpathDest(n,i);return s?Ws(s,{kind:e,subpath:r,alias:t}):null}var fl,Uh,NP,Hh,VP,Jb=class extends J5.Component{constructor(n){super();this.plugin=n;Z(this,Uh);Z(this,Hh);T(this,"app");T(this,"noteToTrack",new Map);Z(this,fl,ay());T(this,"trackIDToNote",new Map);this.app=n.app}on(n,r){return A(this,fl).on("changed",r)}onload(){this.registerEvent(this.app.vault.on("rename",(n,r)=>{if(!this.noteToTrack.has(r))return;let i=this.noteToTrack.get(r);i&&(this.noteToTrack.delete(r),this.noteToTrack.set(n.path,i))})),this.registerEvent(this.app.metadataCache.on("resolve",this.onResolve,this))}onResolve(n){let r=this.noteToTrack.get(n.path);if(!r)return;let i=new Set;this.trackIDToNote.forEach((l,c,u)=>{!l.has(n)||!gV(c)||(i.add(c),l.delete(n),l.size>0?u.set(c,l):u.delete(c))});let o=r.filter(Zb).map(l=>V(this,Uh,NP).call(this,n,l)).filter(l=>!!l),s=new Set(o.filter(l=>i.has(l))),a=new Set([...o,...i].filter(l=>!s.has(l)));a.size>0&&A(this,fl).emit("changed",a,n)}add(n,r){let i=V(this,Hh,VP).call(this,n);this.noteToTrack.set(n.path,r);let o=new Set;r.forEach(l=>{let c;if(Zb(l))c=V(this,Uh,NP).call(this,n,l);else{c=No(l).id;let u=this.trackIDToNote.get(c)??new Set;u.add(n),this.trackIDToNote.set(No(l).id,u)}c&&o.add(c)});let s=new Set(i.filter(l=>o.has(l))),a=new Set([...o,...i].filter(l=>!s.has(l)));a.size>0&&A(this,fl).emit("changed",a,n)}remove(n){let r=new Set(V(this,Hh,VP).call(this,n));r.size>0&&A(this,fl).emit("changed",r,n)}clear(){this.noteToTrack.clear(),this.trackIDToNote.clear()}getLinkedTextTracks(n){let r=this.noteToTrack.get(n.path);return r?r.map(i=>Zb(i)?FP(i,n.path,this.app):i).filter(i=>!!i):[]}getLinkedMediaNotes(n){let r=No(n).id,i=this.trackIDToNote.get(r);return i?[...i]:[]}};fl=new WeakMap,Uh=new WeakSet,NP=function(n,r){let i=FP(r,n.path,this.app);if(!i)return null;let o=No(i).id,s=this.trackIDToNote.get(o)??new Set;return s.add(n),this.trackIDToNote.set(o,s),o},Hh=new WeakSet,VP=function(n){this.noteToTrack.delete(n.path);let r=[];return this.trackIDToNote.forEach((i,o,s)=>{i.has(n)&&(r.push(o),i.delete(n),i.size>0?s.set(o,i):s.delete(o))}),r};var t4=require("obsidian");function e4(t){return{textTracks:Z5(t)}}function BP(t,{metadataCache:e,plugin:n}){let r=e.getFileCache(t);if(!r)return null;let i={metadataCache:e,sourcePath:t.path,plugin:n},o=zP(wh.video,r,i)??zP(wh.audio,r,i)??zP(wh.generic,r,i);return o?{src:o,get data(){return e4(r)}}:null}function zP(t,e,n){let{frontmatter:r,frontmatterLinks:i}=e;if(!r||!(t in r))return null;let o=i?.find(a=>a.key===t);if(o){let{path:a,subpath:l}=(0,t4.parseLinktext)(o.link),c=n.metadataCache.getFirstLinkpathDest(a,n.sourcePath);if(!c)return null;let u=$t(c.extension);return u?{type:u,file:c,hash:l}:null}let s=r[t];return typeof s!="string"?null:n.plugin.resolveUrl(s)}var jh,UP,tx,n4,ex=class extends nx.Component{constructor(n){super();this.plugin=n;Z(this,jh);Z(this,tx);T(this,"app");T(this,"noteToMediaIndex",new Map);T(this,"mediaToNoteIndex",new Map);T(this,"transcript");this.app=n.app,this.transcript=this.addChild(new Jb(this.plugin))}getLinkedTextTracks(n){let r=this.findNote(n);return r?this.transcript.getLinkedTextTracks(r):[]}getLinkedMedia(n){return this.transcript.getLinkedMediaNotes(n).map(i=>this.findMedia(i))}findNote(n){let r=Et(n);return this.mediaToNoteIndex.get(r)??null}findMedia(n){return this.noteToMediaIndex.get(n.path)}onResolved(){this.noteToMediaIndex.clear(),this.mediaToNoteIndex.clear(),this.transcript.clear();let n={metadataCache:this.app.metadataCache,vault:this.app.vault,plugin:this.plugin},r=0;for(let{file:i,meta:o}of nie(n))this.addMediaNote(o,i),r++;this.registerEvent(this.app.metadataCache.on("changed",i=>{let o=BP(i,n);o&&this.addMediaNote(o,i)})),this.registerEvent(this.app.metadataCache.on("deleted",i=>{this.removeMediaNote(i)})),this.registerEvent(this.app.vault.on("rename",(i,o)=>{if(!this.noteToMediaIndex.has(o))return;let s=this.noteToMediaIndex.get(o);this.noteToMediaIndex.delete(o),this.noteToMediaIndex.set(i.path,s)})),this.register(this.transcript.on("changed",(i,o)=>{let s=this.findMedia(o);if(!s){console.warn("Media not found for note while responding to transcript change",o.path);return}this.plugin.app.metadataCache.trigger("yn:transcript-changed",i,Et(s))}))}getNote(n,r){let{metadataCache:i}=this.app;if(!r)throw new Error("Player not initialized");let o=Vo(n,{state:r.state});if(Te(n)){let s=$t(n.file.extension),a=n.file;return V(this,jh,UP).call(this,n,{title:o,fm:l=>({[s]:`[[${i.fileToLinktext(a,l)}]]`}),sourcePath:a.path})}else{let s=n.inferredType??"media";return V(this,jh,UP).call(this,n,{title:o,fm:()=>({[s]:n.jsonState.source})})}}removeMediaNote(n){let r=this.noteToMediaIndex.get(n.path);if(!r)return;this.noteToMediaIndex.delete(n.path);let i=Et(r);this.mediaToNoteIndex.delete(i),this.transcript.remove(n)}addMediaNote(n,r){let i=Et(n.src),o=this.mediaToNoteIndex.get(i);o&&o!==r||(this.noteToMediaIndex.set(r.path,n.src),this.mediaToNoteIndex.set(i,r))}onload(){if(this.app.metadataCache.initialized){this.onResolved();return}let n=setTimeout(()=>{this.onResolved()},5e3);Xb(this.app.metadataCache,this).then(()=>{clearTimeout(n),this.onResolved()})}};jh=new WeakSet,UP=async function(n,r){let i=this.findNote(n);if(i)return i;let s=`Media Note - ${wu(r.title)}`;return await V(this,tx,n4).call(this,s,r.fm,r.sourcePath??"")},tx=new WeakSet,n4=async function(n,r,i=""){let{fileManager:o}=this.app,s=o.getNewFileParent(i,n),a=await o.createNewFile(s,n,"md",`---
---
`);return await o.processFrontMatter(a,l=>{Object.assign(l,r(a.path))}),a};function*nie(t){for(let e of Bh(t.vault.getRoot())){if(e.extension!=="md")continue;let n=BP(e,t);n&&(yield{meta:n,file:e})}}function rx(){let t=rie(async e=>{let n=await this.plugin.transcript.getTracks(e);this.store.getState().setTextTracks(n)});this.registerEvent(this.plugin.app.metadataCache.on("yn:transcript-changed",async(e,n)=>{let r=this.getMediaInfo();!r||Et(r)!==n||await t(r)}))}function rie(t,e){let n=new Set,r=new Set,i=(0,nx.debounce)(o=>{t(...o).then((...s)=>{n.forEach(a=>a(...s)),n.clear()}).catch((...s)=>{r.forEach(a=>a(...s)),r.clear()})},e);return(...o)=>new Promise((s,a)=>{n.add(s),r.add(a),i(o)})}var HP=I(X()),ix=class extends ox.EditableFileView{constructor(n,r){super(n);this.plugin=r;T(this,"allowNoFile",!1);T(this,"store");T(this,"scope");T(this,"root",null);this.store=qs(r),this.scope=new ox.Scope(this.app.scope),this.contentEl.addClasses(["yn","custom"]),Hw(this)}get player(){return this.store.getState().player}onload(){rx.call(this),Gb(this,()=>this.render())}async onLoadFile(n){await this.store.getState().loadFile(n,{vault:this.app.vault})}onPaneMenu(n,r){super.onPaneMenu(n,r),jw(this,n,r)}setEphemeralState(n){if("subpath"in n){let{subpath:r}=n;this.store.getState().setHash(r)}super.setEphemeralState(n)}async onOpen(){await super.onOpen(),this.render()}render(){this.root?.unmount(),this.root=r4.default.createRoot(this.contentEl),this.root.render((0,HP.jsx)(cn.Provider,{value:{plugin:this.plugin,store:this.store,reload:()=>this.render(),onPlaylistChange:n=>{this.plugin.leafOpener.openMediaIn(this.leaf,n.media)},embed:!1},children:(0,HP.jsx)(Zs,{})}))}async onClose(){return this.root?.unmount(),this.root=null,super.onClose()}},Vu=class extends ix{getIcon(){return"file-video"}getMediaInfo(){return this.file?{type:"video",file:this.file,hash:this.getEphemeralState().subpath}:null}getViewType(){return Nn.video}canAcceptExtension(e){return $t(e)==="video"}},zu=class extends ix{getIcon(){return"file-audio"}getViewType(){return Nn.audio}getMediaInfo(){return this.file?{type:"audio",file:this.file,hash:this.getEphemeralState().subpath}:null}canAcceptExtension(e){return $t(e)==="audio"}};var sx=require("obsidian"),o4=I(Tc());function i4(){let t=this.getDisplayText();this.titleEl.setText(t),this.app.workspace.activeLeaf===this.leaf&&this.app.workspace.requestActiveLeafEvents()&&this.leaf.updateHeader()}var jP=I(X()),Js=class extends sx.ItemView{constructor(n,r){super(n);this.plugin=r;T(this,"store");T(this,"scope");T(this,"root",null);T(this,"navigation",!0);T(this,"updateTitle",i4);this.store=qs(r),this.scope=new sx.Scope(this.app.scope),this.contentEl.addClasses(["yn","custom"]),Hw(this)}get player(){return this.store.getState().player}async setSource(n){let r=await this.plugin.transcript.getTracks(n);return{viewType:this.getViewType(),textTracks:r}}getMediaInfo(){let n=this.store.getState().source?.url;return n instanceof wt?n??null:null}get sourceType(){return this.store.getState().player?.state.source.type??""}get playerTitle(){return this.store.getState().player?.state.title??""}onload(){let n=this;super.onload(),rx.call(this),this.register(yt(this.leaf,{detach:r=>function(...i){return n.root?.unmount(),n.root=null,r.call(this,...i)}})),Gb(this,()=>this.render())}registerRemoteTitleChange(){this.register(ol(this.store,n=>n.subscribe(({title:r})=>{this.updateTitle()})))}onPaneMenu(n,r){super.onPaneMenu(n,r),jw(this,n,r)}getState(){let n=super.getState(),r=this.store.getState().source?.url;if(Te(r))throw new Error("Remote view don't handle file media");return{...n,source:r?r.jsonState.source:n.source}}async setState(n,r){if(await super.setState(n,r),!("source"in n))return;let i=this.plugin.resolveUrl(n.source);if(!i)console.warn("Invalid URL",n.source);else if(Te(i))console.warn("Open in-vault media in remote view",i);else{let o=this.store.getState().source?.url;Xn(i,o)||(this.store.getState().setSource(i,await this.setSource(i)),this.render())}}setEphemeralState(n){if("subpath"in n){let{subpath:r}=n;this.store.getState().setHash(r)}super.setEphemeralState(n)}async onOpen(){await super.onOpen(),this.render()}render(){this.root&&this.root.unmount(),this.root=o4.default.createRoot(this.contentEl),this.root.render((0,jP.jsx)(cn.Provider,{value:{plugin:this.plugin,store:this.store,reload:()=>this.render(),onPlaylistChange:n=>{n.media.hash+="&play",this.plugin.leafOpener.openMediaIn(this.leaf,n.media)},embed:!1},children:(0,jP.jsx)(Zs,{})}))}close(){return this.root?.unmount(),this.root=null,super.close()}async onClose(){return this.root?.unmount(),this.root=null,super.onClose()}};var iie={"video/vimeo":"Vimeo","video/youtube":"YouTube"},Bu=class extends Js{onload(){super.onload(),this.registerRemoteTitleChange(),Kb(this,()=>this.render())}getDisplayText(){let e=iie[this.sourceType]??"Embed";return this.playerTitle?`${this.playerTitle} - ${e}`:e}getIcon(){switch(this.sourceType){case"video/youtube":return"youtube";case"video/vimeo":return"vimeo";default:return"video"}}getViewType(){return ma}};var ax=class extends Js{},Uu=class extends ax{getIcon(){return"file-video"}getViewType(){return nr.video}getDisplayText(){return this.playerTitle||"Video"}async setSource(e){let n=await super.setSource(e);return n.title=!0,n}},Hu=class extends ax{getIcon(){return"file-audio"}getDisplayText(){return this.playerTitle||"Audio"}getViewType(){return nr.audio}async setSource(e){let n=await super.setSource(e);return n.title=!0,n}};var ju=class extends Js{onload(){super.onload(),this.registerRemoteTitleChange(),Kb(this,()=>this.render())}getViewType(){return Ir}getIcon(){let e=this.getHost();return e==="generic"?"globe":e}getHost(){let{source:e}=this.store.getState();if(Te(e?.url))throw new Error("Cannot get host for file");return e?.url?e.url.type:"generic"}getDisplayText(){return this.playerTitle?`${this.playerTitle} - ${hm[this.getHost()]}`:"Webpage"}};function s4(t,e){if(!(t.view instanceof Vu||t.view instanceof zu))return!1;let{file:n}=t.view.getState();return n===e.file.path}function a4(t,e){if(!(t.view instanceof Bu||t.view instanceof ju||t.view instanceof Uu||t.view instanceof Hu))return!1;let{source:n}=t.view.store.getState();return Xn(n?.url,e)}function l4(t,e){let n=t.stat.mtime,r=e.stat.mtime;return!n||!r?0:r-n}var lx="yn-media-active",ux,u4,dx,d4,cx=class extends Wu.Component{constructor(n){super();this.plugin=n;Z(this,ux);Z(this,dx);T(this,"app");T(this,"activeMediaLeaf",null);T(this,"onLeafUpdate",(0,Wu.debounce)(n=>{n=n??this.workspace.activeLeaf,this.onActiveLeafChange(n)},200));this.app=n.app}onload(){let n=this.app.workspace;n.onLayoutReady(()=>{this.onLeafUpdate()}),this.registerEvent(n.on("active-leaf-change",r=>{this.onLeafUpdate(r)})),this.registerEvent(n.on("layout-change",()=>{this.onLeafUpdate()}))}onunload(){this.applyActiveMediaLeaf(null)}get workspace(){return this.app.workspace}onActiveLeafChange(n){let r=this.detectActiveMediaLeaf(n);this.activeMediaLeaf!==r&&this.applyActiveMediaLeaf(r)}applyActiveMediaLeaf(n){this.activeMediaLeaf?.tabHeaderEl.removeClass(lx),this.activeMediaLeaf?.containerEl.removeClass(lx),n?.tabHeaderEl.addClass(lx),n?.containerEl.addClass(lx),this.activeMediaLeaf=n}detectActiveMediaLeaf(n){let r=()=>{let i=this.findPinnedPlayer();if(i)return i;let o=c4(this.workspace),{activeTabGroup:s}=this.workspace;return(!n||!s?o:o.filter(l=>!s.children.includes(l))).at(0)??null};if(!n)return r();if(WP(n))return n;if(n.view instanceof Wu.MarkdownView&&n.view.file){let{mediaNote:i}=this.plugin,o=i.findMedia(n.view.file);if(o)return this.findPlayerWithSameMedia(o)}return r()}findPlayerWithSameMedia(n){for(let r of this.plugin.urlViewType.getSupported(n)){let i=oie(n,r,this.workspace);if(i.length>0)return i[0]}return null}findPinnedPlayer(){return c4(this.workspace).filter(n=>n.pinned)[0]??null}get settings(){return this.plugin.settings.getState()}getSplitBehavior(n,r){if(!r)return ss(n)??!1;n=ss(n);let{defaultYnLinkClick:{click:i,alt:o}}=this.settings;return i===null?n??!1:n===void 0||n===!1?i:o!==null&&n===i?o:n}async openMedia(n,r,{direction:i,viewType:o,fromUser:s=!1}={}){let{workspace:a}=this.app;if(!r){let u=await V(this,ux,u4).call(this,n,o);if(u)return u}let l=this.getSplitBehavior(r,s),c;return l==="split-horizontal"?c=a.getLeaf("split",i??"horizontal"):c=a.getLeaf(l,i),this.openMediaIn(c,n,o)}async openMediaIn(n,r,i){if(Te(r))await n.openFile(r.file,{eState:{subpath:r.hash},active:!0});else{let{hash:o,source:s}=r.jsonState,a={source:s};i??(i=this.plugin.urlViewType.getPreferred(r)),await n.setViewState({type:i,state:a,active:!0},{subpath:o})}return n}async openNote(n,r="split",i="vertical"){let o=V(this,dx,d4).call(this,[n]);if(o)return o.getMode()!=="source"&&await o.setState({mode:"source"},{history:!1}),o;let s=this.app.workspace.getLeaf(r,i);return await s.openFile(n,{state:{mode:"source"}}),{file:n,editor:s.view.editor}}};ux=new WeakSet,u4=async function(n,r){let i=this.findPinnedPlayer();if(i)return await this.openMediaIn(i,n,r);let o=this.findPlayerWithSameMedia(n);return o?(sie(n.hash,o),o):null},dx=new WeakSet,d4=function(n){let{workspace:r}=this.app,i=r.getLeavesOfType("markdown").filter(s=>{let a=s.view.file?.path;return!!a&&n.some(l=>l.path===a)});return i.length===0?null:(i.find(s=>s===r.activeLeaf)??i.sort((s,a)=>l4(s.view.file,a.view.file)).at(0)).view};function c4(t){let e=[];return t.iterateAllLeaves(n=>{M_(n.view.getViewType())&&e.push(n)}),e.sort(px),e}function oie(t,e,n){let r=n.getLeavesOfType(e).filter(i=>Te(t)?s4(i,t):a4(i,t));return r.sort(px),r}function WP(t){return!!t&&M_(t.view.getViewType())}function px(t,e){return e.activeTime-t.activeTime}function sie(t,e){e.setEphemeralState({subpath:t})}function aie(t,e,n){return r=>{let i=n.workspace.activeEditor;if(!i)return t?t(r):void 0;if(e&&i.getMode()!=="preview")return i instanceof fx.MarkdownView&&i.inlineTitleEl.isActiveElement()?void 0:e(r,i.editor,i)}}function ea({playerCheckCallback:t,noteCheckCallback:e,...n},r){let{app:i}=r,o=r.addCommand({...n,checkCallback:aie(t&&(s=>!t||!WP(i.workspace.activeLeaf)?!1:s?!0:t(s,i.workspace.activeLeaf.view)),e&&((s,a,l)=>{if(!l.file)return!1;let c=r.mediaNote.findMedia(l.file),u=r.leafOpener.detectActiveMediaLeaf(i.workspace.activeLeaf);return e(s,u?.view,{isMediaNote:c,file:l.file,editor:a})}),i)});return!e||!n.menu||r.registerEvent(r.app.workspace.on("editor-menu",(s,a,l)=>{if(!l.file)return!1;let c=r.mediaNote.findMedia(l.file),u=r.leafOpener.detectActiveMediaLeaf(i.workspace.activeLeaf);if(!e(!0,u?.view,{isMediaNote:c,file:l.file,editor:a}))return;let d=l.file;s.addItem(p=>{n.icon&&p.setIcon(n.icon),n.name&&p.setTitle(n.name),n.section&&p.setSection(n.section),p.onClick(()=>{e(!1,u?.view,{isMediaNote:c,file:d,editor:a})})})})),o}function p4(t,{onKeyDown:e,onTrigger:n,onKeyUp:r}){let i=null,o=new Set;return t.register(()=>{o.forEach(s=>{window.removeEventListener("keyup",s,{capture:!0})})}),t.registerDomEvent(window,"keydown",s=>{if(!i)return;let a=s.target;if(a.instanceOf(HTMLElement)&&a.matches("input.prompt-input"))return;let l=s;if(e(s,...i),r){let c=i,u=d=>{let p=lie(l);(d.code===l.code&&p.every(f=>fx.Keymap.isModifier(d,f))||p.some(f=>d.key===f))&&(r(d,...c),window.removeEventListener("keyup",u,{capture:!0}),o.delete(u))};o.add(u),window.addEventListener("keyup",u,{passive:!0,capture:!0})}i=null},!0),{callback:(...s)=>{i=s,setTimeout(()=>{i===null||(n?.(...s),i=null)},0)}}}function lie(t){let e=[];return t.ctrlKey&&e.push("Ctrl"),t.altKey&&e.push("Alt"),t.shiftKey&&e.push("Shift"),t.metaKey&&e.push("Meta"),e}var cie=t=>[{id:"toggle-play",label:"Play/pause",icon:"play",action:e=>{e.paused=!e.paused}},{id:"play",label:"Play",icon:"play",action:e=>{e.play()}},{id:"pause",label:"Pause",icon:"pause",action:e=>{e.pause()}},...[.5,1,2,5,10,30,60].flatMap(e=>[{id:`forward-${e}s`,label:`Forward ${e}s`,icon:"forward",action:n=>{n.currentTime+=e},repeat:!0},{id:`rewind-${e}s`,label:`Rewind ${e}s`,icon:"rewind",action:n=>{n.currentTime-=e},repeat:!0}]),{id:"toggle-mute",label:"Mute/unmute",icon:"volume-x",action:e=>{e.muted=!e.muted}},{id:"toggle-fullscreen",label:"Enter/exit fullscreen",icon:"expand",check:e=>e.state.canFullscreen,action:e=>{e.state.fullscreen?e.exitFullscreen():e.enterFullscreen()}},...uie(t)];function uie(t){let e=null,n=(0,qu.debounce)(()=>e?.hide(),2e3,!0);function r(s){!e||e.noticeEl.isConnected===!1?e=new qu.Notice(s,0):e.setMessage(s),n()}function i(s){!e||e.noticeEl.isConnected===!1?e=new qu.Notice(s,0):e.setMessage(s)}function o(s){new qu.Notice(s,2e3)}return[...Lr.filter(s=>s>1).map(s=>{let a=!1,{callback:l}=p4(t,{onKeyDown(c,u){c.repeat&&!a&&(a=!0,u.playbackRate=s,i(`Fast forwarding at ${s}x`))},onKeyUp(c,u){a&&(u.playbackRate=1,e?.hide())}});return{id:`fast-forward-${s}x`,label:`Fast forward at ${s}x by holding hotkey`,icon:"forward",action:l,repeat:!0}}),...Lr.map(s=>({id:`set-speed-${s}x`,label:`Set playback speed to ${s}x`,icon:"gauge",action:async a=>{a.playbackRate=s,r(`Speed set to ${s}x`)}})),{id:"reset-speed",label:"Reset playback speed",icon:"reset",check:s=>s.state.playbackRate!==1,action:s=>{s.playbackRate=1,o("Speed reset to 1x")}},{id:"increase-speed",label:"Increase playback speed",icon:"arrow-up",action:s=>{let a=s.playbackRate;if(a>=Lr.last()){o("Cannot increase speed further");return}let l=Lr.find(c=>c>a);s.playbackRate=l,r(`Speed increased to ${l}x`)}},{id:"decrease-speed",label:"Decrease playback speed",icon:"arrow-down",action:s=>{let a=s.playbackRate;if(a<=Lr.first()){o("Cannot decrease speed further");return}let l=Lr.slice().reverse().find(c=>c<a);s.playbackRate=l,r(`Speed decreased to ${l}x`)}},{id:"set-speed",label:"Set playback speed to custom value",icon:"gauge",action:async s=>{let a=await ql.run();a&&(s.playbackRate=a,r(`Speed set to ${a}x`))}},{id:"increase-speed-granular",label:"Increase playback speed slightly",icon:"arrow-up",action:s=>{let a=s.playbackRate;if(a>=Lr.last()){o("Cannot increase speed further");return}let l=t.settings.getState().speedStep,c=Math.round((a+l)*100)/100;s.playbackRate=c,r(`Speed increased to ${c}x`)}},{id:"decrease-speed-granular",label:"Decrease playback speed slightly",icon:"arrow-down",action:s=>{let a=s.playbackRate;if(a<=Lr.first()){o("Cannot decrease speed further");return}let l=t.settings.getState().speedStep,c=Math.round((a-l)*100)/100;s.playbackRate=c,r(`Speed decreased to ${c}x`)}}]}function f4(t){cie(t).forEach(({id:e,label:n,icon:r,action:i,repeat:o,check:s})=>{ea({id:e,name:n,icon:r,repeatable:o,playerCheckCallback:(a,l)=>{if(!l)return!1;let c=l.player;if(!c||s&&!s(c))return!1;if(a)return!0;i(c)},noteCheckCallback(a,l){if(!l)return!1;let c=l.player;if(!c||s&&!s(c))return!1;if(a)return!0;if(c.el?.doc){let u=window.activeDocument;window.activeDocument=c.el.doc,i(c),window.activeDocument=u}else i(c)}},t)})}var hx=require("obsidian");function h4(t){let e=null;ea({id:"copy-screenshot",name:"Copy screenshot",icon:"focus",playerCheckCallback(r,i){if(r)return!0;let o=Bw(i);o&&gh(o)},noteCheckCallback:n(r=>{let i=Bw(r);i&&gh(i)}).noteCheckCallback},t),ea({id:"take-timestamp",name:"Take timestamp",icon:"star",menu:!0,section:"selection-link",...n(async(r,i)=>{let o=e;e=i.file,await vh(r,i)&&i.from==="player"&&o!==i.file&&new hx.Notice(`Timestamp taken in "${i.file.basename}"`)})},t),ea({id:"save-screenshot",name:"Save screenshot",icon:"camera",section:"selection-link",menu:!0,...n(async(r,i)=>{let o=e;e=i.file,await mh(r,i)&&i.from==="player"&&o!==i.file&&new hx.Notice(`Taking screenshot in "${i.file.basename}"`)})},t),ea({id:"take-timestamp-media-note",name:"Take timestamp in media note",icon:"star",menu:!0,section:"selection-link",playerCheckCallback(r,i){let o=i.getMediaInfo();if(!o)return!1;if(r)return!0;t.mediaNote.getNote(o,i.player).then(s=>t.leafOpener.openNote(s)).then(s=>vh(i,s))}},t),ea({id:"save-screenshot-media-note",name:"Save screenshot in media note",icon:"camera",section:"selection-link",menu:!0,playerCheckCallback(r,i){let o=i.getMediaInfo();if(!o)return!1;if(r)return!0;t.mediaNote.getNote(o,i.player).then(s=>t.leafOpener.openNote(s)).then(s=>mh(i,s))}},t);function n(r){return{playerCheckCallback:(i,o)=>{let s=die(t.app);if(!s){if(i)return!1;new hx.Notice("No active note can be edited");return}if(i)return!0;(async()=>{let a=window.activeDocument;window.activeDocument=s.containerEl.doc,await r(o,{file:s.view.file,editor:s.view.editor,from:"player"}),window.activeDocument=a})()},noteCheckCallback:(i,o,{isMediaNote:s,...a})=>{let l;if(o){if(i)return!0;t.app.workspace.revealLeaf(o.leaf),l=Promise.resolve(o)}else{if(!s)return!1;if(i)return!0;l=t.leafOpener.openMedia(s,void 0,{fromUser:!0}).then(c=>c.view)}l.then(async c=>{await r(c,{...a,from:"note"})})}}}}function die(t){return t.workspace.getLeavesOfType("markdown").filter(n=>{let r=n.view;return r.file&&r.getMode()==="source"}).sort(px)[0]??null}function g4(){this.registerEvent(this.app.workspace.on("file-menu",(t,e,n,r)=>{if(!(e instanceof m4.TFile))return;let i=this.mediaNote.findMedia(e);i&&t.addItem(o=>o.setSection("view").setIcon("play").setTitle("Open linked media").onClick(()=>this.leafOpener.openMedia(i,void 0,{fromUser:!0})))})),h4(this),f4(this)}var Qi=require("obsidian");var Yu=require("obsidian");function mx(t,e){if(Yu.Platform.isDesktopApp&&t.isFileUrl&&t.filePath){let n=t.filePath;e.addItem(r=>r.setIcon("folder").setTitle(Yu.Platform.isMacOS?"Reveal in Finder":"Show in system explorer").setSection("view").onClick(()=>{y4(n).catch(i=>{new Yu.Notice(`Failed to open file in file explorer: ${i.message}`),console.error("Failed to open file in file explorer",i)})})).addItem(r=>r.setIcon("arrow-up-right").setTitle("Open in default player").setSection("view").onClick(()=>{v4(n).catch(i=>{new Yu.Notice(`Failed to open file in system player: ${i.message}`),console.error("Failed to open file in system player",i)})}))}}var w4={"yn-embed":{label:"iframe",icon:"code"},"yn-url-audio":{label:"regular audio",icon:"headphones"},"yn-url-video":{label:"regular video",icon:"film"},"yn-webpage":{label:"webpage",icon:"globe"}};function qP(t,e,n=!1){let r=w4[e].label;return t.setTitle(n?r:`Open as ${r}`).setIcon(w4[e].icon)}function Wh(t,{mode:e,plugin:n,targetViewTypes:r,open:i=!0,url:o}){let{protocol:s,hostname:a,pathname:l,host:c,port:u}=o;r.length!==0&&(e==="once"&&r.forEach(d=>{if(!i)throw new Error("openAsMenu: cannot set 'open' to false in 'open once' mode");t.addItem(p=>qP(p,d).setSection("yn-link").onClick(async()=>{await n.leafOpener.openMedia(o,void 0,{viewType:d,fromUser:!0})}))}),e==="always"&&(t.addItem(d=>{let p=d.setTitle("Always open this url as").setIcon("external-link").setSection("yn-link").setSubmenu();r.forEach(f=>{p.addItem(h=>qP(h,f,!0).setSection("yn-link").onClick(async()=>{n.urlViewType.setPreferred({protocol:s,hostname:a,pathname:l,port:u},f),i&&await n.leafOpener.openMedia(o,void 0,{viewType:f,fromUser:!0})}))})}),a&&t.addItem(d=>{let p=d.setTitle(`Always open ${c} as`).setIcon("external-link").setSection("yn-link").setSubmenu();r.forEach(f=>{p.addItem(h=>qP(h,f,!0).setSection("yn-link").onClick(async()=>{n.urlViewType.setPreferred({protocol:s,hostname:a,port:u},f),i&&await n.leafOpener.openMedia(o,void 0,{viewType:f,fromUser:!0})}))})})))}function Ku(t,e){return!!(t.type!=="generic"||t.inferredType||t.tempFrag||e.mediaNote.findNote(t)||e.urlViewType.getPreferred(t,!0))}var YP=async function(t,e,n){let r=this.resolveUrl(t);if(Te(r)){new Qi.Notice("For in-vault media, use internal link instead"),n();return}if(!r||!Ku(r,this)){n();return}await this.leafOpener.openMedia(r,e,{fromUser:!0})};async function y4(t){if(!Qi.Platform.isDesktopApp)return;let e=window.electron;if(!e)return;await(Qi.Platform.isMacOS?e.remote.shell:e.shell).showItemInFolder(t)}async function v4(t){if(!Qi.Platform.isDesktopApp)return;let e=window.electron;if(!e)return;let r=await(Qi.Platform.isMacOS?e.remote.shell:e.shell).openPath(t);if(r)throw new Error(r)}function b4(t){t.registerEvent(t.app.workspace.on("url-menu",(e,n)=>{let r=t.resolveUrl(n);if(!r)return;if(Te(r)){new Qi.Notice("For in-vault media, use internal link instead");return}mx(r,e);let i=t.urlViewType.getSupported(r),o=t.urlViewType.getPreferred(r),s=Ku(r,t)?i.filter(a=>a!==o):i;Wh(e,{targetViewTypes:s,url:r,mode:"once",plugin:t}),Wh(e,{targetViewTypes:s,url:r,mode:"always",plugin:t})}))}var x4=async function(t,e,n,r){let{metadataCache:i}=this.app,{path:o,subpath:s}=(0,Qi.parseLinktext)(t),a=i.getFirstLinkpathDest(o,e),l;if(!a||!(l=$t(a.extension))){r();return}let c={file:a,hash:s,type:l,viewType:Nn[l]};await this.leafOpener.openMedia(c,n,{fromUser:!0})};var xl=require("obsidian");var _4=require("url"),Gu=require("obsidian");function KP(t,e){let n=`#EXTM3U
`,r=[],i=!1;for(let o of t.list)if(o.media instanceof wt)n+=`#EXTINF:-1,${o.title}
${o.media.href}
`;else if(Te(o.media))if(e.adapter instanceof Gu.FileSystemAdapter){let s=e.adapter.getFullPath(o.media.file.path);try{let a=(0,_4.pathToFileURL)(s).href;n+=`#EXTINF:-1,${o.title}
${a}
`}catch(a){new Gu.Notice(`Failed to convert file path to URL: ${a}`),r.push(o.title||Et(o.media))}}else i=!0,r.push(o.title||Et(o.media));r.length>0&&(i?new Gu.Notice(createFragment(o=>{o.createDiv({text:"File URI is not supported in this environment. "}),o.createDiv({text:`Skipped items: ${r.join(", ")}`})})):new Gu.Notice(`Skipped items: ${r.join(", ")}`)),pie(n,t.title)}function pie(t,e){let n=new Blob([t],{type:"application/vnd.apple.mpegurl"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=`${e}.m3u8`,document.body.appendChild(r),r.click(),document.body.removeChild(r)}var rU=require("obsidian");function GP(t,e){let n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}var Bt=ta(/[A-Za-z]/),Ut=ta(/[\dA-Za-z]/),k4=ta(/[#-'*+\--9=?A-Z^-~]/);function hl(t){return t!==null&&(t<32||t===127)}var qh=ta(/\d/),T4=ta(/[\dA-Fa-f]/),S4=ta(/[!-/:-@[-`{-~]/);function q(t){return t!==null&&t<-2}function _e(t){return t!==null&&(t<0||t===32)}function oe(t){return t===-2||t===-1||t===32}var ml=ta(/\p{P}|\p{S}/u),Xi=ta(/\s/);function ta(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function QP(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}var na=function(t){if(t==null)return gie;if(typeof t=="function")return gx(t);if(typeof t=="object")return Array.isArray(t)?fie(t):hie(t);if(typeof t=="string")return mie(t);throw new Error("Expected function, string, or object as test")};function fie(t){let e=[],n=-1;for(;++n<t.length;)e[n]=na(t[n]);return gx(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function hie(t){let e=t;return gx(n);function n(r){let i=r,o;for(o in t)if(i[o]!==e[o])return!1;return!0}}function mie(t){return gx(e);function e(n){return n&&n.type===t}}function gx(t){return e;function e(n,r,i){return!!(yie(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function gie(){return!0}function yie(t){return t!==null&&typeof t=="object"&&"type"in t}var E4=[],yx=!0,Zi=!1,vx="skip";function Yh(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;let o=na(i),s=r?-1:1;a(t,void 0,[])();function a(l,c,u){let d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){let f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return p;function p(){let f=E4,h,g,w;if((!e||o(l,c,u[u.length-1]||void 0))&&(f=vie(n(l,u)),f[0]===Zi))return f;if("children"in l&&l.children){let m=l;if(m.children&&f[0]!==vx)for(g=(r?m.children.length:-1)+s,w=u.concat(m);g>-1&&g<m.children.length;){let y=m.children[g];if(h=a(y,g,w)(),h[0]===Zi)return h;g=typeof h[1]=="number"?h[1]:g+s}}return f}}}function vie(t){return Array.isArray(t)?t:typeof t=="number"?[yx,t]:t==null?E4:[t]}function XP(t,e,n){let i=na((n||{}).ignore||[]),o=wie(e),s=-1;for(;++s<o.length;)Yh(t,"text",a);function a(c,u){let d=-1,p;for(;++d<u.length;){let f=u[d],h=p?p.children:void 0;if(i(f,h?h.indexOf(f):void 0,p))return;p=f}if(p)return l(c,u)}function l(c,u){let d=u[u.length-1],p=o[s][0],f=o[s][1],h=0,w=d.children.indexOf(c),m=!1,y=[];p.lastIndex=0;let v=p.exec(c.value);for(;v;){let b=v.index,k={index:v.index,input:v.input,stack:[...u,c]},_=f(...v,k);if(typeof _=="string"&&(_=_.length>0?{type:"text",value:_}:void 0),_===!1?p.lastIndex=b+1:(h!==b&&y.push({type:"text",value:c.value.slice(h,b)}),Array.isArray(_)?y.push(..._):_&&y.push(_),h=b+v[0].length,m=!0),!p.global)break;v=p.exec(c.value)}return m?(h<c.value.length&&y.push({type:"text",value:c.value.slice(h)}),d.children.splice(w,1,...y)):y=[c],w+y.length}}function wie(t){let e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");let n=!t[0]||Array.isArray(t[0])?t:[t],r=-1;for(;++r<n.length;){let i=n[r];e.push([bie(i[0]),xie(i[1])])}return e}function bie(t){return typeof t=="string"?new RegExp(QP(t),"g"):t}function xie(t){return typeof t=="function"?t:function(){return t}}var ZP="phrasing",JP=["autolink","link","image","label"];function tC(){return{transforms:[Pie],enter:{literalAutolink:_ie,literalAutolinkEmail:eC,literalAutolinkHttp:eC,literalAutolinkWww:eC},exit:{literalAutolink:Eie,literalAutolinkEmail:Sie,literalAutolinkHttp:kie,literalAutolinkWww:Tie}}}function nC(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ZP,notInConstruct:JP},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ZP,notInConstruct:JP},{character:":",before:"[ps]",after:"\\/",inConstruct:ZP,notInConstruct:JP}]}}function _ie(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function eC(t){this.config.enter.autolinkProtocol.call(this,t)}function kie(t){this.config.exit.autolinkProtocol.call(this,t)}function Tie(t){this.config.exit.data.call(this,t);let e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Sie(t){this.config.exit.autolinkEmail.call(this,t)}function Eie(t){this.exit(t)}function Pie(t){XP(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Cie],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,Rie]],{ignore:["link","linkReference"]})}function Cie(t,e,n,r,i){let o="";if(!P4(i)||(/^w/i.test(e)&&(n=e+n,e="",o="http://"),!Mie(n)))return!1;let s=Iie(n+r);if(!s[0])return!1;let a={type:"link",title:null,url:o+e+s[0],children:[{type:"text",value:e+s[0]}]};return s[1]?[a,{type:"text",value:s[1]}]:a}function Rie(t,e,n,r){return!P4(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Mie(t){let e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Iie(t){let e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")"),i=GP(t,"("),o=GP(t,")");for(;r!==-1&&i>o;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[t,n]}function P4(t,e){let n=t.input.charCodeAt(t.index-1);return(t.index===0||Xi(n)||ml(n))&&(!e||n!==47)}function wn(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}C4.peek=zie;function Lie(){this.buffer()}function Aie(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function $ie(){this.buffer()}function Oie(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Die(t){let e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wn(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Fie(t){this.exit(t)}function Nie(t){let e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=wn(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Vie(t){this.exit(t)}function zie(){return"["}function C4(t,e,n,r){let i=n.createTracker(r),o=i.move("[^"),s=n.enter("footnoteReference"),a=n.enter("reference");return o+=i.move(n.safe(n.associationId(t),{after:"]",before:o})),a(),s(),o+=i.move("]"),o}function rC(){return{enter:{gfmFootnoteCallString:Lie,gfmFootnoteCall:Aie,gfmFootnoteDefinitionLabelString:$ie,gfmFootnoteDefinition:Oie},exit:{gfmFootnoteCallString:Die,gfmFootnoteCall:Fie,gfmFootnoteDefinitionLabelString:Nie,gfmFootnoteDefinition:Vie}}}function iC(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:C4},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,o,s){let a=o.createTracker(s),l=a.move("[^"),c=o.enter("footnoteDefinition"),u=o.enter("label");return l+=a.move(o.safe(o.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+o.indentLines(o.containerFlow(r,a.current()),e?R4:Bie))),c(),l}}function Bie(t,e,n){return e===0?t:R4(t,e,n)}function R4(t,e,n){return(n?"":"    ")+t}var Uie=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];M4.peek=Wie;function oC(){return{canContainEols:["delete"],enter:{strikethrough:Hie},exit:{strikethrough:jie}}}function sC(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Uie}],handlers:{delete:M4}}}function Hie(t){this.enter({type:"delete",children:[]},t)}function jie(t){this.exit(t)}function M4(t,e,n,r){let i=n.createTracker(r),o=n.enter("strikethrough"),s=i.move("~~");return s+=n.containerPhrasing(t,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),o(),s}function Wie(){return"~"}function qie(t){return t.length}function L4(t,e){let n=e||{},r=(n.align||[]).concat(),i=n.stringLength||qie,o=[],s=[],a=[],l=[],c=0,u=-1;for(;++u<t.length;){let g=[],w=[],m=-1;for(t[u].length>c&&(c=t[u].length);++m<t[u].length;){let y=Yie(t[u][m]);if(n.alignDelimiters!==!1){let v=i(y);w[m]=v,(l[m]===void 0||v>l[m])&&(l[m]=v)}g.push(y)}s[u]=g,a[u]=w}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)o[d]=I4(r[d]);else{let g=I4(r);for(;++d<c;)o[d]=g}d=-1;let p=[],f=[];for(;++d<c;){let g=o[d],w="",m="";g===99?(w=":",m=":"):g===108?w=":":g===114&&(m=":");let y=n.alignDelimiters===!1?1:Math.max(1,l[d]-w.length-m.length),v=w+"-".repeat(y)+m;n.alignDelimiters!==!1&&(y=w.length+y+m.length,y>l[d]&&(l[d]=y),f[d]=y),p[d]=v}s.splice(1,0,p),a.splice(1,0,f),u=-1;let h=[];for(;++u<s.length;){let g=s[u],w=a[u];d=-1;let m=[];for(;++d<c;){let y=g[d]||"",v="",b="";if(n.alignDelimiters!==!1){let k=l[d]-(w[d]||0),_=o[d];_===114?v=" ".repeat(k):_===99?k%2?(v=" ".repeat(k/2+.5),b=" ".repeat(k/2-.5)):(v=" ".repeat(k/2),b=v):b=" ".repeat(k)}n.delimiterStart!==!1&&!d&&m.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&y==="")&&(n.delimiterStart!==!1||d)&&m.push(" "),n.alignDelimiters!==!1&&m.push(v),m.push(y),n.alignDelimiters!==!1&&m.push(b),n.padding!==!1&&m.push(" "),(n.delimiterEnd!==!1||d!==c-1)&&m.push("|")}h.push(n.delimiterEnd===!1?m.join("").replace(/ +$/,""):m.join(""))}return h.join(`
`)}function Yie(t){return t==null?"":String(t)}function I4(t){let e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function A4(t,e,n,r){let i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);let s=n.indentLines(n.containerFlow(t,o.current()),Kie);return i(),s}function Kie(t,e,n){return">"+(n?"":" ")+t}function O4(t,e){return $4(t,e.inConstruct,!0)&&!$4(t,e.notInConstruct,!1)}function $4(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function aC(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&O4(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function D4(t,e){let n=String(t),r=n.indexOf(e),i=r,o=0,s=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>s&&(s=o):o=1,i=r+e.length,r=n.indexOf(e,i);return s}function F4(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function N4(t){let e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function V4(t,e,n,r){let i=N4(n),o=t.value||"",s=i==="`"?"GraveAccent":"Tilde";if(F4(t,n)){let d=n.enter("codeIndented"),p=n.indentLines(o,Gie);return d(),p}let a=n.createTracker(r),l=i.repeat(Math.max(D4(o,i)+1,3)),c=n.enter("codeFenced"),u=a.move(l);if(t.lang){let d=n.enter(`codeFencedLang${s}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){let d=n.enter(`codeFencedMeta${s}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),o&&(u+=a.move(o+`
`)),u+=a.move(l),c(),u}function Gie(t,e,n){return(n?"":"    ")+t}function Qu(t){let e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function z4(t,e,n,r){let i=Qu(n),o=i==='"'?"Quote":"Apostrophe",s=n.enter("definition"),a=n.enter("label"),l=n.createTracker(r),c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${o}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),s(),c}function B4(t){let e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ra(t){return"&#x"+t.toString(16).toUpperCase()+";"}function qo(t){if(t===null||_e(t)||Xi(t))return 1;if(ml(t))return 2}function Xu(t,e,n){let r=qo(t),i=qo(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}lC.peek=Qie;function lC(t,e,n,r){let i=B4(n),o=n.enter("emphasis"),s=n.createTracker(r),a=s.move(i),l=s.move(n.containerPhrasing(t,{after:i,before:a,...s.current()})),c=l.charCodeAt(0),u=Xu(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=ra(c)+l.slice(1));let d=l.charCodeAt(l.length-1),p=Xu(r.after.charCodeAt(0),d,i);p.inside&&(l=l.slice(0,-1)+ra(d));let f=s.move(i);return o(),n.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+f}function Qie(t,e,n){return n.options.emphasis||"*"}function Zu(t,e,n,r){let i,o,s;typeof e=="function"&&typeof n!="function"?(o=void 0,s=e,i=n):(o=e,s=n,i=r),Yh(t,o,a,i);function a(l,c){let u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return s(l,d,u)}}var Xie={};function gl(t,e){let n=e||Xie,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return H4(t,r,i)}function H4(t,e,n){if(Zie(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return U4(t.children,e,n)}return Array.isArray(t)?U4(t,e,n):""}function U4(t,e,n){let r=[],i=-1;for(;++i<t.length;)r[i]=H4(t[i],e,n);return r.join("")}function Zie(t){return!!(t&&typeof t=="object")}function j4(t,e){let n=!1;return Zu(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Zi}),!!((!t.depth||t.depth<3)&&gl(t)&&(e.options.setext||n))}function W4(t,e,n,r){let i=Math.max(Math.min(6,t.depth||1),1),o=n.createTracker(r);if(j4(t,n)){let u=n.enter("headingSetext"),d=n.enter("phrasing"),p=n.containerPhrasing(t,{...o.current(),before:`
`,after:`
`});return d(),u(),p+`
`+(i===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}let s="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");o.move(s+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(c)&&(c=ra(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,n.options.closeAtx&&(c+=" "+s),l(),a(),c}cC.peek=Jie;function cC(t){return t.value||""}function Jie(){return"<"}uC.peek=eoe;function uC(t,e,n,r){let i=Qu(n),o=i==='"'?"Quote":"Apostrophe",s=n.enter("image"),a=n.enter("label"),l=n.createTracker(r),c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${o}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),s(),c}function eoe(){return"!"}dC.peek=toe;function dC(t,e,n,r){let i=t.referenceType,o=n.enter("imageReference"),s=n.enter("label"),a=n.createTracker(r),l=a.move("!["),c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();let u=n.stack;n.stack=[],s=n.enter("reference");let d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return s(),n.stack=u,o(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function toe(){return"!"}pC.peek=noe;function pC(t,e,n){let r=t.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){let s=n.unsafe[o],a=n.compilePattern(s),l;if(s.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function noe(){return"`"}function fC(t,e){let n=gl(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}hC.peek=roe;function hC(t,e,n,r){let i=Qu(n),o=i==='"'?"Quote":"Apostrophe",s=n.createTracker(r),a,l;if(fC(t,n)){let u=n.stack;n.stack=[],a=n.enter("autolink");let d=s.move("<");return d+=s.move(n.containerPhrasing(t,{before:d,after:">",...s.current()})),d+=s.move(">"),a(),n.stack=u,d}a=n.enter("link"),l=n.enter("label");let c=s.move("[");return c+=s.move(n.containerPhrasing(t,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(n.safe(t.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=n.enter("destinationRaw"),c+=s.move(n.safe(t.url,{before:c,after:t.title?" ":")",...s.current()}))),l(),t.title&&(l=n.enter(`title${o}`),c+=s.move(" "+i),c+=s.move(n.safe(t.title,{before:c,after:i,...s.current()})),c+=s.move(i),l()),c+=s.move(")"),a(),c}function roe(t,e,n){return fC(t,n)?"<":"["}mC.peek=ioe;function mC(t,e,n,r){let i=t.referenceType,o=n.enter("linkReference"),s=n.enter("label"),a=n.createTracker(r),l=a.move("["),c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();let u=n.stack;n.stack=[],s=n.enter("reference");let d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return s(),n.stack=u,o(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function ioe(){return"["}function Ju(t){let e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function q4(t){let e=Ju(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Y4(t){let e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function wx(t){let e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function K4(t,e,n,r){let i=n.enter("list"),o=n.bulletCurrent,s=t.ordered?Y4(n):Ju(n),a=t.ordered?s==="."?")":".":q4(n),l=e&&n.bulletLastUsed?s===n.bulletLastUsed:!1;if(!t.ordered){let u=t.children?t.children[0]:void 0;if((s==="*"||s==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),wx(n)===s&&u){let d=-1;for(;++d<t.children.length;){let p=t.children[d];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(s=a),n.bulletCurrent=s;let c=n.containerFlow(t,r);return n.bulletLastUsed=s,n.bulletCurrent=o,i(),c}function G4(t){let e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Q4(t,e,n,r){let i=G4(n),o=n.bulletCurrent||Ju(n);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+o);let s=o.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(s=Math.ceil(s/4)*4);let a=n.createTracker(r);a.move(o+" ".repeat(s-o.length)),a.shift(s);let l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(d,p,f){return p?(f?"":" ".repeat(s))+d:(f?o:o+" ".repeat(s-o.length))+d}}function X4(t,e,n,r){let i=n.enter("paragraph"),o=n.enter("phrasing"),s=n.containerPhrasing(t,r);return o(),i(),s}var gC=na(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Z4(t,e,n,r){return(t.children.some(function(s){return gC(s)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function J4(t){let e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}yC.peek=ooe;function yC(t,e,n,r){let i=J4(n),o=n.enter("strong"),s=n.createTracker(r),a=s.move(i+i),l=s.move(n.containerPhrasing(t,{after:i,before:a,...s.current()})),c=l.charCodeAt(0),u=Xu(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=ra(c)+l.slice(1));let d=l.charCodeAt(l.length-1),p=Xu(r.after.charCodeAt(0),d,i);p.inside&&(l=l.slice(0,-1)+ra(d));let f=s.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+f}function ooe(t,e,n){return n.options.strong||"*"}function eB(t,e,n,r){return n.safe(t.value,r)}function tB(t){let e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function nB(t,e,n){let r=(wx(n)+(n.options.ruleSpaces?" ":"")).repeat(tB(n));return n.options.ruleSpaces?r.slice(0,-1):r}var Kh={blockquote:A4,break:aC,code:V4,definition:z4,emphasis:lC,hardBreak:aC,heading:W4,html:cC,image:uC,imageReference:dC,inlineCode:pC,link:hC,linkReference:mC,list:K4,listItem:Q4,paragraph:X4,root:Z4,strong:yC,text:eB,thematicBreak:nB};var rB=document.createElement("i");function ed(t){let e="&"+t+";";rB.innerHTML=e;let n=rB.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function bx(t,e){let n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCodePoint(n)}var soe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function iB(t){return t.replace(soe,aoe)}function aoe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){let i=n.charCodeAt(1),o=i===120||i===88;return bx(n.slice(o?2:1),o?16:10)}return ed(n)||t}function wC(){return{enter:{table:loe,tableData:oB,tableHeader:oB,tableRow:uoe},exit:{codeText:doe,table:coe,tableData:vC,tableHeader:vC,tableRow:vC}}}function loe(t){let e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function coe(t){this.exit(t),this.data.inTable=void 0}function uoe(t){this.enter({type:"tableRow",children:[]},t)}function vC(t){this.exit(t)}function oB(t){this.enter({type:"tableCell",children:[]},t)}function doe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,poe));let n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function poe(t,e){return e==="|"?e:t}function bC(t){let e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:s,tableCell:l,tableRow:a}};function s(f,h,g,w){return c(u(f,g,w),f.align)}function a(f,h,g,w){let m=d(f,g,w),y=c([m]);return y.slice(0,y.indexOf(`
`))}function l(f,h,g,w){let m=g.enter("tableCell"),y=g.enter("phrasing"),v=g.containerPhrasing(f,{...w,before:o,after:o});return y(),m(),v}function c(f,h){return L4(f,{align:h,alignDelimiters:r,padding:n,stringLength:i})}function u(f,h,g){let w=f.children,m=-1,y=[],v=h.enter("table");for(;++m<w.length;)y[m]=d(w[m],h,g);return v(),y}function d(f,h,g){let w=f.children,m=-1,y=[],v=h.enter("tableRow");for(;++m<w.length;)y[m]=l(w[m],f,h,g);return v(),y}function p(f,h,g){let w=Kh.inlineCode(f,h,g);return g.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function xC(){return{exit:{taskListCheckValueChecked:sB,taskListCheckValueUnchecked:sB,paragraph:foe}}}function _C(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:hoe}}}function sB(t){let e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function foe(t){let e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){let n=this.stack[this.stack.length-1];n.type;let r=n.children[0];if(r&&r.type==="text"){let i=e.children,o=-1,s;for(;++o<i.length;){let a=i[o];if(a.type==="paragraph"){s=a;break}}s===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function hoe(t,e,n,r){let i=t.children[0],o=typeof t.checked=="boolean"&&i&&i.type==="paragraph",s="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);o&&a.move(s);let l=Kh.listItem(t,e,n,{...r,...a.current()});return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+s}}function kC(){return[tC(),rC(),oC(),wC(),xC()]}function TC(t){return{extensions:[nC(),iC(t),sC(),bC(t),_C()]}}function _t(t,e,n,r){let i=t.length,o=0,s;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);o<r.length;)s=r.slice(o,o+1e4),s.unshift(e,0),t.splice(...s),o+=1e4,e+=1e4}function On(t,e){return t.length>0?(_t(t,t.length,0,e),t):e}var aB={}.hasOwnProperty;function xx(t){let e={},n=-1;for(;++n<t.length;)moe(e,t[n]);return e}function moe(t,e){let n;for(n in e){let i=(aB.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n],s;if(o)for(s in o){aB.call(i,s)||(i[s]=[]);let a=o[s];goe(i[s],Array.isArray(a)?a:a?[a]:[])}}}function goe(t,e){let n=-1,r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);_t(t,0,0,r)}var yoe={tokenize:_oe,partial:!0},lB={tokenize:koe,partial:!0},cB={tokenize:Toe,partial:!0},uB={tokenize:Soe,partial:!0},voe={tokenize:Eoe,partial:!0},dB={name:"wwwAutolink",tokenize:boe,previous:fB},pB={name:"protocolAutolink",tokenize:xoe,previous:hB},Yo={name:"emailAutolink",tokenize:woe,previous:mB},Ji={};function EC(){return{text:Ji}}var yl=48;for(;yl<123;)Ji[yl]=Yo,yl++,yl===58?yl=65:yl===91&&(yl=97);Ji[43]=Yo;Ji[45]=Yo;Ji[46]=Yo;Ji[95]=Yo;Ji[72]=[Yo,pB];Ji[104]=[Yo,pB];Ji[87]=[Yo,dB];Ji[119]=[Yo,dB];function woe(t,e,n){let r=this,i,o;return s;function s(d){return!SC(d)||!mB.call(r,r.previous)||PC(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return SC(d)?(t.consume(d),a):d===64?(t.consume(d),l):n(d)}function l(d){return d===46?t.check(voe,u,c)(d):d===45||d===95||Ut(d)?(o=!0,t.consume(d),l):u(d)}function c(d){return t.consume(d),i=!0,l}function u(d){return o&&i&&Bt(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function boe(t,e,n){let r=this;return i;function i(s){return s!==87&&s!==119||!fB.call(r,r.previous)||PC(r.events)?n(s):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(yoe,t.attempt(lB,t.attempt(cB,o),n),n)(s))}function o(s){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(s)}}function xoe(t,e,n){let r=this,i="",o=!1;return s;function s(d){return(d===72||d===104)&&hB.call(r,r.previous)&&!PC(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(Bt(d)&&i.length<5)return i+=String.fromCodePoint(d),t.consume(d),a;if(d===58){let p=i.toLowerCase();if(p==="http"||p==="https")return t.consume(d),l}return n(d)}function l(d){return d===47?(t.consume(d),o?c:(o=!0,l)):n(d)}function c(d){return d===null||hl(d)||_e(d)||Xi(d)||ml(d)?n(d):t.attempt(lB,t.attempt(cB,u),n)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function _oe(t,e,n){let r=0;return i;function i(s){return(s===87||s===119)&&r<3?(r++,t.consume(s),i):s===46&&r===3?(t.consume(s),o):n(s)}function o(s){return s===null?n(s):e(s)}}function koe(t,e,n){let r,i,o;return s;function s(c){return c===46||c===95?t.check(uB,l,a)(c):c===null||_e(c)||Xi(c)||c!==45&&ml(c)?l(c):(o=!0,t.consume(c),s)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),s}function l(c){return i||r||!o?n(c):e(c)}}function Toe(t,e){let n=0,r=0;return i;function i(s){return s===40?(n++,t.consume(s),i):s===41&&r<n?o(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?t.check(uB,e,o)(s):s===null||_e(s)||Xi(s)?e(s):(t.consume(s),i)}function o(s){return s===41&&r++,t.consume(s),i}}function Soe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),o):a===93?(t.consume(a),i):a===60||a===null||_e(a)||Xi(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||_e(a)||Xi(a)?e(a):r(a)}function o(a){return Bt(a)?s(a):n(a)}function s(a){return a===59?(t.consume(a),r):Bt(a)?(t.consume(a),s):n(a)}}function Eoe(t,e,n){return r;function r(o){return t.consume(o),i}function i(o){return Ut(o)?n(o):e(o)}}function fB(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||_e(t)}function hB(t){return!Bt(t)}function mB(t){return!(t===47||SC(t))}function SC(t){return t===43||t===45||t===46||t===95||Ut(t)}function PC(t){let e=t.length,n=!1;for(;e--;){let r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function ia(t,e,n){let r=[],i=-1;for(;++i<t.length;){let o=t[i].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}var Gh={name:"attention",resolveAll:Poe,tokenize:Coe};function Poe(t,e){let n=-1,r,i,o,s,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;let d={...t[r][1].end},p={...t[n][1].start};gB(d,-l),gB(p,l),s={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:p},o={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},t[r][1].end={...s.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=On(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=On(c,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",o,e]]),c=On(c,ia(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=On(c,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=On(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,_t(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Coe(t,e){let n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=qo(r),o;return s;function s(l){return o=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===o)return t.consume(l),a;let c=t.exit("attentionSequence"),u=qo(l),d=!u||u===2&&i||n.includes(l),p=!i||i===2&&u||n.includes(r);return c._open=!!(o===42?d:d&&(i||!p)),c._close=!!(o===42?p:p&&(u||!d)),e(l)}}function gB(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}var CC={name:"autolink",tokenize:Roe};function Roe(t,e,n){let r=0;return i;function i(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(f){return Bt(f)?(t.consume(f),s):f===64?n(f):c(f)}function s(f){return f===43||f===45||f===46||Ut(f)?(r=1,a(f)):c(f)}function a(f){return f===58?(t.consume(f),r=0,l):(f===43||f===45||f===46||Ut(f))&&r++<32?(t.consume(f),a):(r=0,c(f))}function l(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||hl(f)?n(f):(t.consume(f),l)}function c(f){return f===64?(t.consume(f),u):k4(f)?(t.consume(f),c):n(f)}function u(f){return Ut(f)?d(f):n(f)}function d(f){return f===46?(t.consume(f),r=0,u):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):p(f)}function p(f){if((f===45||Ut(f))&&r++<63){let h=f===45?p:d;return t.consume(f),h}return n(f)}}function re(t,e,n,r){let i=r?r-1:Number.POSITIVE_INFINITY,o=0;return s;function s(l){return oe(l)?(t.enter(n),a(l)):e(l)}function a(l){return oe(l)&&o++<i?(t.consume(l),a):(t.exit(n),e(l))}}var eo={partial:!0,tokenize:Moe};function Moe(t,e,n){return r;function r(o){return oe(o)?re(t,i,"linePrefix")(o):i(o)}function i(o){return o===null||q(o)?e(o):n(o)}}var _x={continuation:{tokenize:Loe},exit:Aoe,name:"blockQuote",tokenize:Ioe};function Ioe(t,e,n){let r=this;return i;function i(s){if(s===62){let a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(s),t.exit("blockQuoteMarker"),o}return n(s)}function o(s){return oe(s)?(t.enter("blockQuotePrefixWhitespace"),t.consume(s),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(s))}}function Loe(t,e,n){let r=this;return i;function i(s){return oe(s)?re(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return t.attempt(_x,e,n)(s)}}function Aoe(t){t.exit("blockQuote")}var kx={name:"characterEscape",tokenize:$oe};function $oe(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),i}function i(o){return S4(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}var Tx={name:"characterReference",tokenize:Ooe};function Ooe(t,e,n){let r=this,i=0,o,s;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),o=31,s=Ut,u(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,s=T4,u):(t.enter("characterReferenceValue"),o=7,s=qh,u(d))}function u(d){if(d===59&&i){let p=t.exit("characterReferenceValue");return s===Ut&&!ed(r.sliceSerialize(p))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return s(d)&&i++<o?(t.consume(d),u):n(d)}}var yB={partial:!0,tokenize:Foe},Sx={concrete:!0,name:"codeFenced",tokenize:Doe};function Doe(t,e,n){let r=this,i={partial:!0,tokenize:k},o=0,s=0,a;return l;function l(_){return c(_)}function c(_){let S=r.events[r.events.length-1];return o=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=_,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(_)}function u(_){return _===a?(s++,t.consume(_),u):s<3?n(_):(t.exit("codeFencedFenceSequence"),oe(_)?re(t,d,"whitespace")(_):d(_))}function d(_){return _===null||q(_)?(t.exit("codeFencedFence"),r.interrupt?e(_):t.check(yB,g,b)(_)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),p(_))}function p(_){return _===null||q(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(_)):oe(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),re(t,f,"whitespace")(_)):_===96&&_===a?n(_):(t.consume(_),p)}function f(_){return _===null||q(_)?d(_):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),h(_))}function h(_){return _===null||q(_)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(_)):_===96&&_===a?n(_):(t.consume(_),h)}function g(_){return t.attempt(i,b,w)(_)}function w(_){return t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),m}function m(_){return o>0&&oe(_)?re(t,y,"linePrefix",o+1)(_):y(_)}function y(_){return _===null||q(_)?t.check(yB,g,b)(_):(t.enter("codeFlowValue"),v(_))}function v(_){return _===null||q(_)?(t.exit("codeFlowValue"),y(_)):(t.consume(_),v)}function b(_){return t.exit("codeFenced"),e(_)}function k(_,S,C){let M=0;return x;function x(W){return _.enter("lineEnding"),_.consume(W),_.exit("lineEnding"),$}function $(W){return _.enter("codeFencedFence"),oe(W)?re(_,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):L(W)}function L(W){return W===a?(_.enter("codeFencedFenceSequence"),F(W)):C(W)}function F(W){return W===a?(M++,_.consume(W),F):M>=s?(_.exit("codeFencedFenceSequence"),oe(W)?re(_,N,"whitespace")(W):N(W)):C(W)}function N(W){return W===null||q(W)?(_.exit("codeFencedFence"),S(W)):C(W)}}}function Foe(t,e,n){let r=this;return i;function i(s){return s===null?n(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),o)}function o(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}var Qh={name:"codeIndented",tokenize:Voe},Noe={partial:!0,tokenize:zoe};function Voe(t,e,n){let r=this;return i;function i(c){return t.enter("codeIndented"),re(t,o,"linePrefix",5)(c)}function o(c){let u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(c):n(c)}function s(c){return c===null?l(c):q(c)?t.attempt(Noe,s,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||q(c)?(t.exit("codeFlowValue"),s(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function zoe(t,e,n){let r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):q(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),i):re(t,o,"linePrefix",5)(s)}function o(s){let a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):q(s)?i(s):n(s)}}var RC={name:"codeText",previous:Uoe,resolve:Boe,tokenize:Hoe};function Boe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function Uoe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Hoe(t,e,n){let r=this,i=0,o,s;return a;function a(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),i++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(s=t.enter("codeTextSequence"),o=0,d(p)):q(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||q(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),u)}function d(p){return p===96?(t.consume(p),o++,d):o===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(s.type="codeTextData",u(p))}}var Ex=class{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){let r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){let i=n||0;this.setCursor(Math.trunc(e));let o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Xh(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Xh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Xh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){let n=this.left.splice(e,Number.POSITIVE_INFINITY);Xh(this.right,n.reverse())}else{let n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Xh(this.left,n.reverse())}}};function Xh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Px(t){let e={},n=-1,r,i,o,s,a,l,c,u=new Ex(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,joe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(s=u.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return _t(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function joe(t,e){let n=t.get(e)[1],r=t.get(e)[2],i=e-1,o=[],s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));let a=s.events,l=[],c={},u,d,p=-1,f=n,h=0,g=0,w=[g];for(;f;){for(;t.get(++i)[1]!==f;);o.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&s.defineSkip(f.start),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(g=p+1,w.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(s.events=[],f?(f._tokenizer=void 0,f.previous=void 0):w.pop(),p=w.length;p--;){let m=a.slice(w[p],w[p+1]),y=o.pop();l.push([y,y+m.length-1]),t.splice(y,2,m)}for(l.reverse(),p=-1;++p<l.length;)c[h+l[p][0]]=h+l[p][1],h+=l[p][1]-l[p][0]-1;return c}var MC={resolve:qoe,tokenize:Yoe},Woe={partial:!0,tokenize:Koe};function qoe(t){return Px(t),t}function Yoe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?o(a):q(a)?t.check(Woe,s,o)(a):(t.consume(a),i)}function o(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function s(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Koe(t,e,n){let r=this;return i;function i(s){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),re(t,o,"linePrefix")}function o(s){if(s===null||q(s))return n(s);let a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(s):t.interrupt(r.parser.constructs.flow,n,e)(s)}}function Cx(t,e,n,r,i,o,s,a,l){let c=l||Number.POSITIVE_INFINITY,u=0;return d;function d(m){return m===60?(t.enter(r),t.enter(i),t.enter(o),t.consume(m),t.exit(o),p):m===null||m===32||m===41||hl(m)?n(m):(t.enter(r),t.enter(s),t.enter(a),t.enter("chunkString",{contentType:"string"}),g(m))}function p(m){return m===62?(t.enter(o),t.consume(m),t.exit(o),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===62?(t.exit("chunkString"),t.exit(a),p(m)):m===null||m===60||q(m)?n(m):(t.consume(m),m===92?h:f)}function h(m){return m===60||m===62||m===92?(t.consume(m),f):f(m)}function g(m){return!u&&(m===null||m===41||_e(m))?(t.exit("chunkString"),t.exit(a),t.exit(s),t.exit(r),e(m)):u<c&&m===40?(t.consume(m),u++,g):m===41?(t.consume(m),u--,g):m===null||m===32||m===40||hl(m)?n(m):(t.consume(m),m===92?w:g)}function w(m){return m===40||m===41||m===92?(t.consume(m),g):g(m)}}function Rx(t,e,n,r,i,o){let s=this,a=0,l;return c;function c(f){return t.enter(r),t.enter(i),t.consume(f),t.exit(i),t.enter(o),u}function u(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(f):f===93?(t.exit(o),t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):q(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||q(f)||a++>999?(t.exit("chunkString"),u(f)):(t.consume(f),l||(l=!oe(f)),f===92?p:d)}function p(f){return f===91||f===92||f===93?(t.consume(f),a++,d):d(f)}}function Mx(t,e,n,r,i,o){let s;return a;function a(p){return p===34||p===39||p===40?(t.enter(r),t.enter(i),t.consume(p),t.exit(i),s=p===40?41:p,l):n(p)}function l(p){return p===s?(t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):(t.enter(o),c(p))}function c(p){return p===s?(t.exit(o),l(s)):p===null?n(p):q(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),re(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(p))}function u(p){return p===s||p===null||q(p)?(t.exit("chunkString"),c(p)):(t.consume(p),p===92?d:u)}function d(p){return p===s||p===92?(t.consume(p),u):u(p)}}function vl(t,e){let n;return r;function r(i){return q(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):oe(i)?re(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}var IC={name:"definition",tokenize:Qoe},Goe={partial:!0,tokenize:Xoe};function Qoe(t,e,n){let r=this,i;return o;function o(f){return t.enter("definition"),s(f)}function s(f){return Rx.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return i=wn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),l):n(f)}function l(f){return _e(f)?vl(t,c)(f):c(f)}function c(f){return Cx(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return t.attempt(Goe,d,d)(f)}function d(f){return oe(f)?re(t,p,"whitespace")(f):p(f)}function p(f){return f===null||q(f)?(t.exit("definition"),r.parser.defined.push(i),e(f)):n(f)}}function Xoe(t,e,n){return r;function r(a){return _e(a)?vl(t,i)(a):n(a)}function i(a){return Mx(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return oe(a)?re(t,s,"whitespace")(a):s(a)}function s(a){return a===null||q(a)?e(a):n(a)}}var LC={name:"hardBreakEscape",tokenize:Zoe};function Zoe(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),i}function i(o){return q(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}var AC={name:"headingAtx",resolve:Joe,tokenize:ese};function Joe(t,e){let n=t.length-2,r=3,i,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},_t(t,r,n-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),t}function ese(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),o(u)}function o(u){return t.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&r++<6?(t.consume(u),s):u===null||_e(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||q(u)?(t.exit("atxHeading"),e(u)):oe(u)?re(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||_e(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}var vB=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$C=["pre","script","style","textarea"];var OC={concrete:!0,name:"htmlFlow",resolveTo:rse,tokenize:ise},tse={partial:!0,tokenize:sse},nse={partial:!0,tokenize:ose};function rse(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function ise(t,e,n){let r=this,i,o,s,a,l;return c;function c(P){return u(P)}function u(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),d}function d(P){return P===33?(t.consume(P),p):P===47?(t.consume(P),o=!0,g):P===63?(t.consume(P),i=3,r.interrupt?e:E):Bt(P)?(t.consume(P),s=String.fromCharCode(P),w):n(P)}function p(P){return P===45?(t.consume(P),i=2,f):P===91?(t.consume(P),i=5,a=0,h):Bt(P)?(t.consume(P),i=4,r.interrupt?e:E):n(P)}function f(P){return P===45?(t.consume(P),r.interrupt?e:E):n(P)}function h(P){let xn="CDATA[";return P===xn.charCodeAt(a++)?(t.consume(P),a===xn.length?r.interrupt?e:L:h):n(P)}function g(P){return Bt(P)?(t.consume(P),s=String.fromCharCode(P),w):n(P)}function w(P){if(P===null||P===47||P===62||_e(P)){let xn=P===47,ro=s.toLowerCase();return!xn&&!o&&$C.includes(ro)?(i=1,r.interrupt?e(P):L(P)):vB.includes(s.toLowerCase())?(i=6,xn?(t.consume(P),m):r.interrupt?e(P):L(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):o?y(P):v(P))}return P===45||Ut(P)?(t.consume(P),s+=String.fromCharCode(P),w):n(P)}function m(P){return P===62?(t.consume(P),r.interrupt?e:L):n(P)}function y(P){return oe(P)?(t.consume(P),y):x(P)}function v(P){return P===47?(t.consume(P),x):P===58||P===95||Bt(P)?(t.consume(P),b):oe(P)?(t.consume(P),v):x(P)}function b(P){return P===45||P===46||P===58||P===95||Ut(P)?(t.consume(P),b):k(P)}function k(P){return P===61?(t.consume(P),_):oe(P)?(t.consume(P),k):v(P)}function _(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,S):oe(P)?(t.consume(P),_):C(P)}function S(P){return P===l?(t.consume(P),l=null,M):P===null||q(P)?n(P):(t.consume(P),S)}function C(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||_e(P)?k(P):(t.consume(P),C)}function M(P){return P===47||P===62||oe(P)?v(P):n(P)}function x(P){return P===62?(t.consume(P),$):n(P)}function $(P){return P===null||q(P)?L(P):oe(P)?(t.consume(P),$):n(P)}function L(P){return P===45&&i===2?(t.consume(P),Y):P===60&&i===1?(t.consume(P),J):P===62&&i===4?(t.consume(P),tt):P===63&&i===3?(t.consume(P),E):P===93&&i===5?(t.consume(P),se):q(P)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(tse,Tr,F)(P)):P===null||q(P)?(t.exit("htmlFlowData"),F(P)):(t.consume(P),L)}function F(P){return t.check(nse,N,Tr)(P)}function N(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),W}function W(P){return P===null||q(P)?F(P):(t.enter("htmlFlowData"),L(P))}function Y(P){return P===45?(t.consume(P),E):L(P)}function J(P){return P===47?(t.consume(P),s="",Q):L(P)}function Q(P){if(P===62){let xn=s.toLowerCase();return $C.includes(xn)?(t.consume(P),tt):L(P)}return Bt(P)&&s.length<8?(t.consume(P),s+=String.fromCharCode(P),Q):L(P)}function se(P){return P===93?(t.consume(P),E):L(P)}function E(P){return P===62?(t.consume(P),tt):P===45&&i===2?(t.consume(P),E):L(P)}function tt(P){return P===null||q(P)?(t.exit("htmlFlowData"),Tr(P)):(t.consume(P),tt)}function Tr(P){return t.exit("htmlFlow"),e(P)}}function ose(t,e,n){let r=this;return i;function i(s){return q(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),o):n(s)}function o(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}function sse(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(eo,e,n)}}var DC={name:"htmlText",tokenize:ase};function ase(t,e,n){let r=this,i,o,s;return a;function a(E){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(E),l}function l(E){return E===33?(t.consume(E),c):E===47?(t.consume(E),k):E===63?(t.consume(E),v):Bt(E)?(t.consume(E),C):n(E)}function c(E){return E===45?(t.consume(E),u):E===91?(t.consume(E),o=0,h):Bt(E)?(t.consume(E),y):n(E)}function u(E){return E===45?(t.consume(E),f):n(E)}function d(E){return E===null?n(E):E===45?(t.consume(E),p):q(E)?(s=d,J(E)):(t.consume(E),d)}function p(E){return E===45?(t.consume(E),f):d(E)}function f(E){return E===62?Y(E):E===45?p(E):d(E)}function h(E){let tt="CDATA[";return E===tt.charCodeAt(o++)?(t.consume(E),o===tt.length?g:h):n(E)}function g(E){return E===null?n(E):E===93?(t.consume(E),w):q(E)?(s=g,J(E)):(t.consume(E),g)}function w(E){return E===93?(t.consume(E),m):g(E)}function m(E){return E===62?Y(E):E===93?(t.consume(E),m):g(E)}function y(E){return E===null||E===62?Y(E):q(E)?(s=y,J(E)):(t.consume(E),y)}function v(E){return E===null?n(E):E===63?(t.consume(E),b):q(E)?(s=v,J(E)):(t.consume(E),v)}function b(E){return E===62?Y(E):v(E)}function k(E){return Bt(E)?(t.consume(E),_):n(E)}function _(E){return E===45||Ut(E)?(t.consume(E),_):S(E)}function S(E){return q(E)?(s=S,J(E)):oe(E)?(t.consume(E),S):Y(E)}function C(E){return E===45||Ut(E)?(t.consume(E),C):E===47||E===62||_e(E)?M(E):n(E)}function M(E){return E===47?(t.consume(E),Y):E===58||E===95||Bt(E)?(t.consume(E),x):q(E)?(s=M,J(E)):oe(E)?(t.consume(E),M):Y(E)}function x(E){return E===45||E===46||E===58||E===95||Ut(E)?(t.consume(E),x):$(E)}function $(E){return E===61?(t.consume(E),L):q(E)?(s=$,J(E)):oe(E)?(t.consume(E),$):M(E)}function L(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(t.consume(E),i=E,F):q(E)?(s=L,J(E)):oe(E)?(t.consume(E),L):(t.consume(E),N)}function F(E){return E===i?(t.consume(E),i=void 0,W):E===null?n(E):q(E)?(s=F,J(E)):(t.consume(E),F)}function N(E){return E===null||E===34||E===39||E===60||E===61||E===96?n(E):E===47||E===62||_e(E)?M(E):(t.consume(E),N)}function W(E){return E===47||E===62||_e(E)?M(E):n(E)}function Y(E){return E===62?(t.consume(E),t.exit("htmlTextData"),t.exit("htmlText"),e):n(E)}function J(E){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),Q}function Q(E){return oe(E)?re(t,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):se(E)}function se(E){return t.enter("htmlTextData"),s(E)}}var wl={name:"labelEnd",resolveAll:dse,resolveTo:pse,tokenize:fse},lse={tokenize:hse},cse={tokenize:mse},use={tokenize:gse};function dse(t){let e=-1,n=[];for(;++e<t.length;){let r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){let i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&_t(t,0,t.length,n),t}function pse(t,e){let n=t.length,r=0,i,o,s,a;for(;n--;)if(i=t[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);let l={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[o][1].start},end:{...t[s][1].end}},u={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[s-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=On(a,t.slice(o+1,o+r+3)),a=On(a,[["enter",u,e]]),a=On(a,ia(e.parser.constructs.insideSpan.null,t.slice(o+r+4,s-3),e)),a=On(a,[["exit",u,e],t[s-2],t[s-1],["exit",c,e]]),a=On(a,t.slice(s+1)),a=On(a,[["exit",l,e]]),_t(t,o,t.length,a),t}function fse(t,e,n){let r=this,i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return a;function a(p){return o?o._inactive?d(p):(s=r.parser.defined.includes(wn(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelEnd"),l):n(p)}function l(p){return p===40?t.attempt(lse,u,s?u:d)(p):p===91?t.attempt(cse,u,s?c:d)(p):s?u(p):d(p)}function c(p){return t.attempt(use,u,d)(p)}function u(p){return e(p)}function d(p){return o._balanced=!0,n(p)}}function hse(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return _e(d)?vl(t,o)(d):o(d)}function o(d){return d===41?u(d):Cx(t,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function s(d){return _e(d)?vl(t,l)(d):u(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?Mx(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return _e(d)?vl(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function mse(t,e,n){let r=this;return i;function i(a){return Rx.call(r,t,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(wn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function s(a){return n(a)}}function gse(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),i}function i(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}var FC={name:"labelStartImage",resolveAll:wl.resolveAll,tokenize:yse};function yse(t,e,n){let r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),o}function o(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}var NC={name:"labelStartLink",resolveAll:wl.resolveAll,tokenize:vse};function vse(t,e,n){let r=this;return i;function i(s){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}var Zh={name:"lineEnding",tokenize:wse};function wse(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),re(t,e,"linePrefix")}}var bl={name:"thematicBreak",tokenize:bse};function bse(t,e,n){let r=0,i;return o;function o(c){return t.enter("thematicBreak"),s(c)}function s(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||q(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),oe(c)?re(t,a,"whitespace")(c):a(c))}}var bn={continuation:{tokenize:Tse},exit:Ese,name:"list",tokenize:kse},xse={partial:!0,tokenize:Pse},_se={partial:!0,tokenize:Sse};function kse(t,e,n){let r=this,i=r.events[r.events.length-1],o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return a;function a(f){let h=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(h==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:qh(f)){if(r.containerState.type||(r.containerState.type=h,t.enter(h,{_container:!0})),h==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(bl,n,c)(f):c(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return qh(f)&&++s<10?(t.consume(f),l):(!r.interrupt||s<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),c(f)):n(f)}function c(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(eo,r.interrupt?n:u,t.attempt(xse,p,d))}function u(f){return r.containerState.initialBlankLine=!0,o++,p(f)}function d(f){return oe(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),p):n(f)}function p(f){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function Tse(t,e,n){let r=this;return r.containerState._closeFlow=void 0,t.check(eo,i,o);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,re(t,e,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!oe(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(_se,e,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,re(t,t.attempt(bn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Sse(t,e,n){let r=this;return re(t,i,"listItemIndent",r.containerState.size+1);function i(o){let s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?e(o):n(o)}}function Ese(t){t.exit(this.containerState.type)}function Pse(t,e,n){let r=this;return re(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){let s=r.events[r.events.length-1];return!oe(o)&&s&&s[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}var Ix={name:"setextUnderline",resolveTo:Cse,tokenize:Rse};function Cse(t,e){let n=t.length,r,i,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);let s={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",o?(t.splice(i,0,["enter",s,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=s,t.push(["exit",s,e]),t}function Rse(t,e,n){let r=this,i;return o;function o(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=c,s(c)):n(c)}function s(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),oe(c)?re(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||q(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}var Mse={tokenize:Fse,partial:!0};function VC(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:$se,continuation:{tokenize:Ose},exit:Dse}},text:{91:{name:"gfmFootnoteCall",tokenize:Ase},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Ise,resolveTo:Lse}}}}function Ise(t,e,n){let r=this,i=r.events.length,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),s;for(;i--;){let l=r.events[i][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!s||!s._balanced)return n(l);let c=wn(r.sliceSerialize({start:s.end,end:r.now()}));return c.codePointAt(0)!==94||!o.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function Lse(t,e){let n=t.length,r;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){r=t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";let i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;let s={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},t[t.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",o,e],["exit",o,e],["enter",s,e],["enter",a,e],["exit",a,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...l),t}function Ase(t,e,n){let r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),o=0,s;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(d){if(o>999||d===93&&!s||d===null||d===91||_e(d))return n(d);if(d===93){t.exit("chunkString");let p=t.exit("gfmFootnoteCallString");return i.includes(wn(r.sliceSerialize(p)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return _e(d)||(s=!0),o++,t.consume(d),d===92?u:c}function u(d){return d===91||d===92||d===93?(t.consume(d),o++,c):c(d)}}function $se(t,e,n){let r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),o,s=0,a;return l;function l(h){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(h),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(h){return h===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(h),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(h)}function u(h){if(s>999||h===93&&!a||h===null||h===91||_e(h))return n(h);if(h===93){t.exit("chunkString");let g=t.exit("gfmFootnoteDefinitionLabelString");return o=wn(r.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(h),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),p}return _e(h)||(a=!0),s++,t.consume(h),h===92?d:u}function d(h){return h===91||h===92||h===93?(t.consume(h),s++,u):u(h)}function p(h){return h===58?(t.enter("definitionMarker"),t.consume(h),t.exit("definitionMarker"),i.includes(o)||i.push(o),re(t,f,"gfmFootnoteDefinitionWhitespace")):n(h)}function f(h){return e(h)}}function Ose(t,e,n){return t.check(eo,e,t.attempt(Mse,e,n))}function Dse(t){t.exit("gfmFootnoteDefinition")}function Fse(t,e,n){let r=this;return re(t,i,"gfmFootnoteDefinitionIndent",5);function i(o){let s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?e(o):n(o)}}function zC(t){let n=(t||{}).singleTilde,r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(s,a){let l=-1;for(;++l<s.length;)if(s[l][0]==="enter"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._close){let c=l;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[l][1].end.offset-s[l][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[l][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";let u={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[l][1].end)},d={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[l][1].start)},p=[["enter",u,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",d,a]],f=a.parser.constructs.insideSpan.null;f&&_t(p,p.length,0,ia(f,s.slice(c+1,l),a)),_t(p,p.length,0,[["exit",d,a],["enter",s[l][1],a],["exit",s[l][1],a],["exit",u,a]]),_t(s,c-1,l-c+3,p),l=c+p.length-2;break}}for(l=-1;++l<s.length;)s[l][1].type==="strikethroughSequenceTemporary"&&(s[l][1].type="data");return s}function o(s,a,l){let c=this.previous,u=this.events,d=0;return p;function p(h){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(h):(s.enter("strikethroughSequenceTemporary"),f(h))}function f(h){let g=qo(c);if(h===126)return d>1?l(h):(s.consume(h),d++,f);if(d<2&&!n)return l(h);let w=s.exit("strikethroughSequenceTemporary"),m=qo(h);return w._open=!m||m===2&&!!g,w._close=!g||g===2&&!!m,a(h)}}}var Lx=class{constructor(){this.map=[]}add(e,n,r){Nse(this,e,n,r)}consume(e){if(this.map.sort(function(o,s){return o[0]-s[0]}),this.map.length===0)return;let n=this.map.length,r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(let o of i)e.push(o);i=r.pop()}this.map.length=0}};function Nse(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function wB(t,e){let n=!1,r=[];for(;e<t.length;){let i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){let o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function BC(){return{flow:{null:{name:"table",tokenize:Vse,resolveAll:zse}}}}function Vse(t,e,n){let r=this,i=0,o=0,s;return a;function a(x){let $=r.events.length-1;for(;$>-1;){let N=r.events[$][1].type;if(N==="lineEnding"||N==="linePrefix")$--;else break}let L=$>-1?r.events[$][1].type:null,F=L==="tableHead"||L==="tableRow"?_:l;return F===_&&r.parser.lazy[r.now().line]?n(x):F(x)}function l(x){return t.enter("tableHead"),t.enter("tableRow"),c(x)}function c(x){return x===124||(s=!0,o+=1),u(x)}function u(x){return x===null?n(x):q(x)?o>1?(o=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),f):n(x):oe(x)?re(t,u,"whitespace")(x):(o+=1,s&&(s=!1,i+=1),x===124?(t.enter("tableCellDivider"),t.consume(x),t.exit("tableCellDivider"),s=!0,u):(t.enter("data"),d(x)))}function d(x){return x===null||x===124||_e(x)?(t.exit("data"),u(x)):(t.consume(x),x===92?p:d)}function p(x){return x===92||x===124?(t.consume(x),d):d(x)}function f(x){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(x):(t.enter("tableDelimiterRow"),s=!1,oe(x)?re(t,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):h(x))}function h(x){return x===45||x===58?w(x):x===124?(s=!0,t.enter("tableCellDivider"),t.consume(x),t.exit("tableCellDivider"),g):k(x)}function g(x){return oe(x)?re(t,w,"whitespace")(x):w(x)}function w(x){return x===58?(o+=1,s=!0,t.enter("tableDelimiterMarker"),t.consume(x),t.exit("tableDelimiterMarker"),m):x===45?(o+=1,m(x)):x===null||q(x)?b(x):k(x)}function m(x){return x===45?(t.enter("tableDelimiterFiller"),y(x)):k(x)}function y(x){return x===45?(t.consume(x),y):x===58?(s=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(x),t.exit("tableDelimiterMarker"),v):(t.exit("tableDelimiterFiller"),v(x))}function v(x){return oe(x)?re(t,b,"whitespace")(x):b(x)}function b(x){return x===124?h(x):x===null||q(x)?!s||i!==o?k(x):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(x)):k(x)}function k(x){return n(x)}function _(x){return t.enter("tableRow"),S(x)}function S(x){return x===124?(t.enter("tableCellDivider"),t.consume(x),t.exit("tableCellDivider"),S):x===null||q(x)?(t.exit("tableRow"),e(x)):oe(x)?re(t,S,"whitespace")(x):(t.enter("data"),C(x))}function C(x){return x===null||x===124||_e(x)?(t.exit("data"),S(x)):(t.consume(x),x===92?M:C)}function M(x){return x===92||x===124?(t.consume(x),C):C(x)}}function zse(t,e){let n=-1,r=!0,i=0,o=[0,0,0,0],s=[0,0,0,0],a=!1,l=0,c,u,d,p=new Lx;for(;++n<t.length;){let f=t[n],h=f[1];f[0]==="enter"?h.type==="tableHead"?(a=!1,l!==0&&(bB(p,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},h.start),end:Object.assign({},h.end)},p.add(n,0,[["enter",c,e]])):h.type==="tableRow"||h.type==="tableDelimiterRow"?(r=!0,d=void 0,o=[0,0,0,0],s=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},h.start),end:Object.assign({},h.end)},p.add(n,0,[["enter",u,e]])),i=h.type==="tableDelimiterRow"?2:u?3:1):i&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(o[1]!==0&&(s[0]=s[1],d=Ax(p,e,o,i,void 0,d),o=[0,0,0,0]),s[2]=n)):h.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(s[0]=s[1],d=Ax(p,e,o,i,void 0,d)),o=s,s=[o[1],n,0,0])):h.type==="tableHead"?(a=!0,l=n):h.type==="tableRow"||h.type==="tableDelimiterRow"?(l=n,o[1]!==0?(s[0]=s[1],d=Ax(p,e,o,i,n,d)):s[1]!==0&&(d=Ax(p,e,s,i,n,d)),i=0):i&&(h.type==="data"||h.type==="tableDelimiterMarker"||h.type==="tableDelimiterFiller")&&(s[3]=n)}for(l!==0&&bB(p,e,l,c,u),p.consume(e.events),n=-1;++n<e.events.length;){let f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=wB(e.events,n))}return t}function Ax(t,e,n,r,i,o){let s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(o.end=Object.assign({},td(e.events,n[0])),t.add(n[0],0,[["exit",o,e]]));let l=td(e.events,n[1]);if(o={type:s,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",o,e]]),n[2]!==0){let c=td(e.events,n[2]),u=td(e.events,n[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){let p=e.events[n[2]],f=e.events[n[3]];if(p[1].end=Object.assign({},f[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){let h=n[2]+1,g=n[3]-n[2]-1;t.add(h,g,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return i!==void 0&&(o.end=Object.assign({},td(e.events,i)),t.add(i,0,[["exit",o,e]]),o=void 0),o}function bB(t,e,n,r,i){let o=[],s=td(e.events,n);i&&(i.end=Object.assign({},s),o.push(["exit",i,e])),r.end=Object.assign({},s),o.push(["exit",r,e]),t.add(n+1,0,o)}function td(t,e){let n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}var Bse={name:"tasklistCheck",tokenize:Use};function UC(){return{text:{91:Bse}}}function Use(t,e,n){let r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),o)}function o(l){return _e(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),s):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),s):n(l)}function s(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return q(l)?e(l):oe(l)?t.check({tokenize:Hse},e,n)(l):n(l)}}function Hse(t,e,n){return re(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function xB(t){return xx([EC(),VC(),zC(t),BC(),UC()])}var jse={};function $x(t){let e=this,n=t||jse,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(xB(n)),o.push(kC()),s.push(TC(n))}var _B={tokenize:Wse};function Wse(t){let e=t.attempt(this.parser.constructs.contentInitial,r,i),n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),re(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),o(a)}function o(a){let l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,s(a)}function s(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return q(a)?(t.consume(a),t.exit("chunkText"),o):(t.consume(a),s)}}var TB={tokenize:qse},kB={tokenize:Yse};function qse(t){let e=this,n=[],r=0,i,o,s;return a;function a(v){if(r<n.length){let b=n[r];return e.containerState=b[1],t.attempt(b[0].continuation,l,c)(v)}return c(v)}function l(v){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&y();let b=e.events.length,k=b,_;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){_=e.events[k][1].end;break}m(r);let S=b;for(;S<e.events.length;)e.events[S][1].end={..._},S++;return _t(e.events,k+1,0,e.events.slice(b)),e.events.length=S,c(v)}return a(v)}function c(v){if(r===n.length){if(!i)return p(v);if(i.currentConstruct&&i.currentConstruct.concrete)return h(v);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(kB,u,d)(v)}function u(v){return i&&y(),m(r),p(v)}function d(v){return e.parser.lazy[e.now().line]=r!==n.length,s=e.now().offset,h(v)}function p(v){return e.containerState={},t.attempt(kB,f,h)(v)}function f(v){return r++,n.push([e.currentConstruct,e.containerState]),p(v)}function h(v){if(v===null){i&&y(),m(0),t.consume(v);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),g(v)}function g(v){if(v===null){w(t.exit("chunkFlow"),!0),m(0),t.consume(v);return}return q(v)?(t.consume(v),w(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(v),g)}function w(v,b){let k=e.sliceStream(v);if(b&&k.push(null),v.previous=o,o&&(o.next=v),o=v,i.defineSkip(v.start),i.write(k),e.parser.lazy[v.start.line]){let _=i.events.length;for(;_--;)if(i.events[_][1].start.offset<s&&(!i.events[_][1].end||i.events[_][1].end.offset>s))return;let S=e.events.length,C=S,M,x;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(M){x=e.events[C][1].end;break}M=!0}for(m(r),_=S;_<e.events.length;)e.events[_][1].end={...x},_++;_t(e.events,C+1,0,e.events.slice(S)),e.events.length=_}}function m(v){let b=n.length;for(;b-- >v;){let k=n[b];e.containerState=k[1],k[0].exit.call(e,t)}n.length=v}function y(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Yse(t,e,n){return re(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}var SB={tokenize:Kse};function Kse(t){let e=this,n=t.attempt(eo,r,t.attempt(this.parser.constructs.flowInitial,i,re(t,t.attempt(this.parser.constructs.flow,i,t.attempt(MC,i)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}var EB={resolveAll:MB()},PB=RB("string"),CB=RB("text");function RB(t){return{resolveAll:MB(t==="text"?Gse:void 0),tokenize:e};function e(n){let r=this,i=this.parser.constructs[t],o=n.attempt(i,s,a);return s;function s(u){return c(u)?o(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),o(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;let d=i[u],p=-1;if(d)for(;++p<d.length;){let f=d[p];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function MB(t){return e;function e(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return t?t(n,r):n}}function Gse(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){let r=t[n-1][1],i=e.sliceStream(r),o=i.length,s=-1,a=0,l;for(;o--;){let c=i[o];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(c===-2)l=!0,a++;else if(c!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){let c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:r.start._bufferIndex+s,_index:r.start._index+o,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}var HC={};At(HC,{attentionMarkers:()=>rae,contentInitial:()=>Xse,disable:()=>iae,document:()=>Qse,flow:()=>Jse,flowInitial:()=>Zse,insideSpan:()=>nae,string:()=>eae,text:()=>tae});var Qse={42:bn,43:bn,45:bn,48:bn,49:bn,50:bn,51:bn,52:bn,53:bn,54:bn,55:bn,56:bn,57:bn,62:_x},Xse={91:IC},Zse={[-2]:Qh,[-1]:Qh,32:Qh},Jse={35:AC,42:bl,45:[Ix,bl],60:OC,61:Ix,95:bl,96:Sx,126:Sx},eae={38:Tx,92:kx},tae={[-5]:Zh,[-4]:Zh,[-3]:Zh,33:FC,38:Tx,42:Gh,60:[CC,DC],91:NC,92:[LC,kx],93:wl,95:Gh,96:RC},nae={null:[Gh,EB]},rae={null:[42,95]},iae={null:[]};function IB(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0},i={},o=[],s=[],a=[],l=!0,c={attempt:M(S),check:M(C),consume:b,enter:k,exit:_,interrupt:M(C,{interrupt:!0})},u={code:null,containerState:{},defineSkip:m,events:[],now:w,parser:t,previous:null,sliceSerialize:h,sliceStream:g,write:f},d=e.tokenize.call(u,c),p;return e.resolveAll&&o.push(e),u;function f(F){return s=On(s,F),y(),s[s.length-1]!==null?[]:(x(e,0),u.events=ia(o,u.events,u),u.events)}function h(F,N){return sae(g(F),N)}function g(F){return oae(s,F)}function w(){let{_bufferIndex:F,_index:N,line:W,column:Y,offset:J}=r;return{_bufferIndex:F,_index:N,line:W,column:Y,offset:J}}function m(F){i[F.line]=F.column,L()}function y(){let F;for(;r._index<s.length;){let N=s[r._index];if(typeof N=="string")for(F=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===F&&r._bufferIndex<N.length;)v(N.charCodeAt(r._bufferIndex));else v(N)}}function v(F){l=void 0,p=F,d=d(F)}function b(F){q(F)?(r.line++,r.column=1,r.offset+=F===-3?2:1,L()):F!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=F,l=!0}function k(F,N){let W=N||{};return W.type=F,W.start=w(),u.events.push(["enter",W,u]),a.push(W),W}function _(F){let N=a.pop();return N.end=w(),u.events.push(["exit",N,u]),N}function S(F,N){x(F,N.from)}function C(F,N){N.restore()}function M(F,N){return W;function W(Y,J,Q){let se,E,tt,Tr;return Array.isArray(Y)?xn(Y):"tokenize"in Y?xn([Y]):P(Y);function P(ot){return Qo;function Qo(ni){let io=ni!==null&&ot[ni],Xo=ni!==null&&ot.null,yd=[...Array.isArray(io)?io:io?[io]:[],...Array.isArray(Xo)?Xo:Xo?[Xo]:[]];return xn(yd)(ni)}}function xn(ot){return se=ot,E=0,ot.length===0?Q:ro(ot[E])}function ro(ot){return Qo;function Qo(ni){return Tr=$(),tt=ot,ot.partial||(u.currentConstruct=ot),ot.name&&u.parser.constructs.disable.null.includes(ot.name)?Cl(ni):ot.tokenize.call(N?Object.assign(Object.create(u),N):u,c,gd,Cl)(ni)}}function gd(ot){return l=!0,F(tt,Tr),J}function Cl(ot){return l=!0,Tr.restore(),++E<se.length?ro(se[E]):Q}}}function x(F,N){F.resolveAll&&!o.includes(F)&&o.push(F),F.resolve&&_t(u.events,N,u.events.length-N,F.resolve(u.events.slice(N),u)),F.resolveTo&&(u.events=F.resolveTo(u.events,u))}function $(){let F=w(),N=u.previous,W=u.currentConstruct,Y=u.events.length,J=Array.from(a);return{from:Y,restore:Q};function Q(){r=F,u.previous=N,u.currentConstruct=W,u.events.length=Y,a=J,L()}}function L(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function oae(t,e){let n=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex,s;if(n===i)s=[t[n].slice(r,o)];else{if(s=t.slice(n,i),r>-1){let a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}o>0&&s.push(t[i].slice(0,o))}return s}function sae(t,e){let n=-1,r=[],i;for(;++n<t.length;){let o=t[n],s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}function jC(t){let r={constructs:xx([HC,...(t||{}).extensions||[]]),content:i(_B),defined:[],document:i(TB),flow:i(SB),lazy:{},string:i(PB),text:i(CB)};return r;function i(o){return s;function s(a){return IB(r,o,a)}}}function WC(t){for(;!Px(t););return t}var LB=/[\0\t\n\r]/g;function qC(){let t=1,e="",n=!0,r;return i;function i(o,s,a){let l=[],c,u,d,p,f;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),d=0,e="",n&&(o.charCodeAt(0)===65279&&d++,n=void 0);d<o.length;){if(LB.lastIndex=d,c=LB.exec(o),p=c&&c.index!==void 0?c.index:o.length,f=o.charCodeAt(p),!c){e=o.slice(d);break}if(f===10&&d===p&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<p&&(l.push(o.slice(d,p)),t+=p-d),f){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}d=p+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}function oa(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?AB(t.position):"start"in t||"end"in t?AB(t):"line"in t||"column"in t?YC(t):""}function YC(t){return $B(t&&t.line)+":"+$B(t&&t.column)}function AB(t){return YC(t&&t.start)+"-"+YC(t&&t.end)}function $B(t){return t&&typeof t=="number"?t:1}var DB={}.hasOwnProperty;function KC(t,e,n){return typeof e!="string"&&(n=e,e=void 0),aae(n)(WC(jC(n).document().write(qC()(t,e,!0))))}function aae(t){let e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(mR),autolinkProtocol:M,autolinkEmail:M,atxHeading:o(pR),blockQuote:o(ni),characterEscape:M,characterReference:M,codeFenced:o(io),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(io,s),codeText:o(Xo,s),codeTextData:M,data:M,codeFlowValue:M,definition:o(yd),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Rl),hardBreakEscape:o(fR),hardBreakTrailing:o(fR),htmlFlow:o(hR,s),htmlFlowData:M,htmlText:o(hR,s),htmlTextData:M,image:o(Pj),label:s,link:o(mR),listItem:o(Cj),listItemValue:p,listOrdered:o(gR,d),listUnordered:o(gR),paragraph:o(Rj),reference:P,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(pR),strong:o(Mj),thematicBreak:o(Lj)},exit:{atxHeading:l(),atxHeadingSequence:k,autolink:l(),autolinkEmail:Qo,autolinkProtocol:ot,blockQuote:l(),characterEscapeValue:x,characterReferenceMarkerHexadecimal:ro,characterReferenceMarkerNumeric:ro,characterReferenceValue:gd,characterReference:Cl,codeFenced:l(w),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:h,codeFlowValue:x,codeIndented:l(m),codeText:l(W),codeTextData:x,data:x,definition:l(),definitionDestinationString:b,definitionLabelString:y,definitionTitleString:v,emphasis:l(),hardBreakEscape:l(L),hardBreakTrailing:l(L),htmlFlow:l(F),htmlFlowData:x,htmlText:l(N),htmlTextData:x,image:l(J),label:se,labelText:Q,lineEnding:$,link:l(Y),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:xn,resourceDestinationString:E,resourceTitleString:tt,resource:Tr,setextHeading:l(C),setextHeadingLineSequence:S,setextHeadingText:_,strong:l(),thematicBreak:l()}};FB(e,(t||{}).mdastExtensions||[]);let n={};return r;function r(D){let j={type:"root",children:[]},pe={stack:[j],tokenStack:[],config:e,enter:a,exit:c,buffer:s,resume:u,data:n},Ee=[],Ne=-1;for(;++Ne<D.length;)if(D[Ne][1].type==="listOrdered"||D[Ne][1].type==="listUnordered")if(D[Ne][0]==="enter")Ee.push(Ne);else{let ri=Ee.pop();Ne=i(D,ri,Ne)}for(Ne=-1;++Ne<D.length;){let ri=e[D[Ne][0]];DB.call(ri,D[Ne][1].type)&&ri[D[Ne][1].type].call(Object.assign({sliceSerialize:D[Ne][2].sliceSerialize},pe),D[Ne][1])}if(pe.tokenStack.length>0){let ri=pe.tokenStack[pe.tokenStack.length-1];(ri[1]||OB).call(pe,void 0,ri[0])}for(j.position={start:sa(D.length>0?D[0][1].start:{line:1,column:1,offset:0}),end:sa(D.length>0?D[D.length-2][1].end:{line:1,column:1,offset:0})},Ne=-1;++Ne<e.transforms.length;)j=e.transforms[Ne](j)||j;return j}function i(D,j,pe){let Ee=j-1,Ne=-1,ri=!1,ua,oo,vd,wd;for(;++Ee<=pe;){let er=D[Ee];switch(er[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{er[0]==="enter"?Ne++:Ne--,wd=void 0;break}case"lineEndingBlank":{er[0]==="enter"&&(ua&&!wd&&!Ne&&!vd&&(vd=Ee),wd=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wd=void 0}if(!Ne&&er[0]==="enter"&&er[1].type==="listItemPrefix"||Ne===-1&&er[0]==="exit"&&(er[1].type==="listUnordered"||er[1].type==="listOrdered")){if(ua){let Ml=Ee;for(oo=void 0;Ml--;){let so=D[Ml];if(so[1].type==="lineEnding"||so[1].type==="lineEndingBlank"){if(so[0]==="exit")continue;oo&&(D[oo][1].type="lineEndingBlank",ri=!0),so[1].type="lineEnding",oo=Ml}else if(!(so[1].type==="linePrefix"||so[1].type==="blockQuotePrefix"||so[1].type==="blockQuotePrefixWhitespace"||so[1].type==="blockQuoteMarker"||so[1].type==="listItemIndent"))break}vd&&(!oo||vd<oo)&&(ua._spread=!0),ua.end=Object.assign({},oo?D[oo][1].start:er[1].end),D.splice(oo||Ee,0,["exit",ua,er[2]]),Ee++,pe++}if(er[1].type==="listItemPrefix"){let Ml={type:"listItem",_spread:!1,start:Object.assign({},er[1].start),end:void 0};ua=Ml,D.splice(Ee,0,["enter",Ml,er[2]]),Ee++,pe++,vd=void 0,wd=!0}}}return D[j][1]._spread=ri,pe}function o(D,j){return pe;function pe(Ee){a.call(this,D(Ee),Ee),j&&j.call(this,Ee)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(D,j,pe){this.stack[this.stack.length-1].children.push(D),this.stack.push(D),this.tokenStack.push([j,pe||void 0]),D.position={start:sa(j.start),end:void 0}}function l(D){return j;function j(pe){D&&D.call(this,pe),c.call(this,pe)}}function c(D,j){let pe=this.stack.pop(),Ee=this.tokenStack.pop();if(Ee)Ee[0].type!==D.type&&(j?j.call(this,D,Ee[0]):(Ee[1]||OB).call(this,D,Ee[0]));else throw new Error("Cannot close `"+D.type+"` ("+oa({start:D.start,end:D.end})+"): it\u2019s not open");pe.position.end=sa(D.end)}function u(){return gl(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function p(D){if(this.data.expectingFirstListItemValue){let j=this.stack[this.stack.length-2];j.start=Number.parseInt(this.sliceSerialize(D),10),this.data.expectingFirstListItemValue=void 0}}function f(){let D=this.resume(),j=this.stack[this.stack.length-1];j.lang=D}function h(){let D=this.resume(),j=this.stack[this.stack.length-1];j.meta=D}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){let D=this.resume(),j=this.stack[this.stack.length-1];j.value=D.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function m(){let D=this.resume(),j=this.stack[this.stack.length-1];j.value=D.replace(/(\r?\n|\r)$/g,"")}function y(D){let j=this.resume(),pe=this.stack[this.stack.length-1];pe.label=j,pe.identifier=wn(this.sliceSerialize(D)).toLowerCase()}function v(){let D=this.resume(),j=this.stack[this.stack.length-1];j.title=D}function b(){let D=this.resume(),j=this.stack[this.stack.length-1];j.url=D}function k(D){let j=this.stack[this.stack.length-1];if(!j.depth){let pe=this.sliceSerialize(D).length;j.depth=pe}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function S(D){let j=this.stack[this.stack.length-1];j.depth=this.sliceSerialize(D).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function M(D){let pe=this.stack[this.stack.length-1].children,Ee=pe[pe.length-1];(!Ee||Ee.type!=="text")&&(Ee=Ij(),Ee.position={start:sa(D.start),end:void 0},pe.push(Ee)),this.stack.push(Ee)}function x(D){let j=this.stack.pop();j.value+=this.sliceSerialize(D),j.position.end=sa(D.end)}function $(D){let j=this.stack[this.stack.length-1];if(this.data.atHardBreak){let pe=j.children[j.children.length-1];pe.position.end=sa(D.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(j.type)&&(M.call(this,D),x.call(this,D))}function L(){this.data.atHardBreak=!0}function F(){let D=this.resume(),j=this.stack[this.stack.length-1];j.value=D}function N(){let D=this.resume(),j=this.stack[this.stack.length-1];j.value=D}function W(){let D=this.resume(),j=this.stack[this.stack.length-1];j.value=D}function Y(){let D=this.stack[this.stack.length-1];if(this.data.inReference){let j=this.data.referenceType||"shortcut";D.type+="Reference",D.referenceType=j,delete D.url,delete D.title}else delete D.identifier,delete D.label;this.data.referenceType=void 0}function J(){let D=this.stack[this.stack.length-1];if(this.data.inReference){let j=this.data.referenceType||"shortcut";D.type+="Reference",D.referenceType=j,delete D.url,delete D.title}else delete D.identifier,delete D.label;this.data.referenceType=void 0}function Q(D){let j=this.sliceSerialize(D),pe=this.stack[this.stack.length-2];pe.label=iB(j),pe.identifier=wn(j).toLowerCase()}function se(){let D=this.stack[this.stack.length-1],j=this.resume(),pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,pe.type==="link"){let Ee=D.children;pe.children=Ee}else pe.alt=j}function E(){let D=this.resume(),j=this.stack[this.stack.length-1];j.url=D}function tt(){let D=this.resume(),j=this.stack[this.stack.length-1];j.title=D}function Tr(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function xn(D){let j=this.resume(),pe=this.stack[this.stack.length-1];pe.label=j,pe.identifier=wn(this.sliceSerialize(D)).toLowerCase(),this.data.referenceType="full"}function ro(D){this.data.characterReferenceType=D.type}function gd(D){let j=this.sliceSerialize(D),pe=this.data.characterReferenceType,Ee;pe?(Ee=bx(j,pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ee=ed(j);let Ne=this.stack[this.stack.length-1];Ne.value+=Ee}function Cl(D){let j=this.stack.pop();j.position.end=sa(D.end)}function ot(D){x.call(this,D);let j=this.stack[this.stack.length-1];j.url=this.sliceSerialize(D)}function Qo(D){x.call(this,D);let j=this.stack[this.stack.length-1];j.url="mailto:"+this.sliceSerialize(D)}function ni(){return{type:"blockquote",children:[]}}function io(){return{type:"code",lang:null,meta:null,value:""}}function Xo(){return{type:"inlineCode",value:""}}function yd(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Rl(){return{type:"emphasis",children:[]}}function pR(){return{type:"heading",depth:0,children:[]}}function fR(){return{type:"break"}}function hR(){return{type:"html",value:""}}function Pj(){return{type:"image",title:null,url:"",alt:null}}function mR(){return{type:"link",title:null,url:"",children:[]}}function gR(D){return{type:"list",ordered:D.type==="listOrdered",start:null,spread:D._spread,children:[]}}function Cj(D){return{type:"listItem",spread:D._spread,checked:null,children:[]}}function Rj(){return{type:"paragraph",children:[]}}function Mj(){return{type:"strong",children:[]}}function Ij(){return{type:"text",value:""}}function Lj(){return{type:"thematicBreak"}}}function sa(t){return{line:t.line,column:t.column,offset:t.offset}}function FB(t,e){let n=-1;for(;++n<e.length;){let r=e[n];Array.isArray(r)?FB(t,r):lae(t,r)}}function lae(t,e){let n;for(n in e)if(DB.call(e,n))switch(n){case"canContainEols":{let r=e[n];r&&t[n].push(...r);break}case"transforms":{let r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{let r=e[n];r&&Object.assign(t[n],r);break}}}function OB(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+oa({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+oa({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+oa({start:e.start,end:e.end})+") is still open")}function Ox(t){let e=this;e.parser=n;function n(r){return KC(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function GC(t){if(t)throw t}var Nx=I(qB(),1);function Jh(t){if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function QC(){let t=[],e={run:n,use:r};return e;function n(...i){let o=-1,s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...i);function a(l,...c){let u=t[++o],d=-1;if(l){s(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?YB(u,a)(...c):s(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function YB(t,e){let n;return r;function r(...s){let a=t.length>s.length,l;a&&s.push(i);try{l=t.apply(this,s)}catch(c){let u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(o,i):l instanceof Error?i(l):o(l))}function i(s,...a){n||(n=!0,e(s,...a))}function o(s){i(null,s)}}var Xt=class extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?i=e:!o.cause&&e&&(s=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){let l=r.indexOf(":");l===-1?o.ruleId=r:(o.source=r.slice(0,l),o.ruleId=r.slice(l+1))}if(!o.place&&o.ancestors&&o.ancestors){let l=o.ancestors[o.ancestors.length-1];l&&(o.place=l.position)}let a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=oa(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}};Xt.prototype.file="";Xt.prototype.name="";Xt.prototype.reason="";Xt.prototype.message="";Xt.prototype.stack="";Xt.prototype.column=void 0;Xt.prototype.line=void 0;Xt.prototype.ancestors=void 0;Xt.prototype.cause=void 0;Xt.prototype.fatal=void 0;Xt.prototype.place=void 0;Xt.prototype.ruleId=void 0;Xt.prototype.source=void 0;var Ci={basename:cae,dirname:uae,extname:dae,join:pae,sep:"/"};function cae(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');em(t);let n=0,r=-1,i=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let s=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=s));return n===r?r=s:r<0&&(r=t.length),t.slice(n,r)}function uae(t){if(em(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function dae(t){em(t);let e=t.length,n=-1,r=0,i=-1,o=0,s;for(;e--;){let a=t.codePointAt(e);if(a===47){if(s){r=e+1;break}continue}n<0&&(s=!0,n=e+1),a===46?i<0?i=e:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function pae(...t){let e=-1,n;for(;++e<t.length;)em(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":fae(n)}function fae(t){em(t);let e=t.codePointAt(0)===47,n=hae(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function hae(t,e){let n="",r=0,i=-1,o=0,s=-1,a,l;for(;++s<=t.length;){if(s<t.length)a=t.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=s,o=0;continue}}else if(n.length>0){n="",r=0,i=s,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,s):n=t.slice(i+1,s),r=s-i-1;i=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function em(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}var KB={cwd:mae};function mae(){return"/"}function nd(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function GB(t){if(typeof t=="string")t=new URL(t);else if(!nd(t)){let e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){let e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return gae(t)}function gae(t){if(t.hostname!==""){let r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}let e=t.pathname,n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){let r=e.codePointAt(n+2);if(r===70||r===102){let i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}var XC=["history","path","basename","stem","extname","dirname"],tm=class{constructor(e){let n;e?nd(e)?n={path:e}:typeof e=="string"||yae(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":KB.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<XC.length;){let o=XC[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)XC.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ci.basename(this.path):void 0}set basename(e){JC(e,"basename"),ZC(e,"basename"),this.path=Ci.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ci.dirname(this.path):void 0}set dirname(e){QB(this.basename,"dirname"),this.path=Ci.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ci.extname(this.path):void 0}set extname(e){if(ZC(e,"extname"),QB(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ci.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){nd(e)&&(e=GB(e)),JC(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ci.basename(this.path,this.extname):void 0}set stem(e){JC(e,"stem"),ZC(e,"stem"),this.path=Ci.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){let i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){let i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){let i=new Xt(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function ZC(t,e){if(t&&t.includes(Ci.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ci.sep+"`")}function JC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function QB(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function yae(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}var XB=function(t){let r=this.constructor.prototype,i=r[t],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o};var vae={}.hasOwnProperty,r1=class t extends XB{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=QC()}copy(){let e=new t,n=-1;for(;++n<this.attachers.length;){let r=this.attachers[n];e.use(...r)}return e.data((0,Nx.default)(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(n1("data",this.frozen),this.namespace[e]=n,this):vae.call(this.namespace,e)&&this.namespace[e]||void 0:e?(n1("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);let i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();let n=Fx(e),r=this.parser||this.Parser;return e1("parse",r),r(String(n),n)}process(e,n){let r=this;return this.freeze(),e1("process",this.parser||this.Parser),t1("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,s){let a=Fx(e),l=r.parse(a);r.run(l,a,function(u,d,p){if(u||!d||!p)return c(u);let f=d,h=r.stringify(f,p);bae(h)?p.value=h:p.result=h,c(u,p)});function c(u,d){u||!d?s(u):o?o(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),e1("processSync",this.parser||this.Parser),t1("processSync",this.compiler||this.Compiler),this.process(e,i),JB("processSync","process",n),r;function i(o,s){n=!0,GC(o),r=s}}run(e,n,r){ZB(e),this.freeze();let i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(s,a){let l=Fx(n);i.run(e,l,c);function c(u,d,p){let f=d||e;u?a(u):s?s(f):r(void 0,f,p)}}}runSync(e,n){let r=!1,i;return this.run(e,n,o),JB("runSync","run",r),i;function o(s,a){GC(s),i=a,r=!0}}stringify(e,n){this.freeze();let r=Fx(n),i=this.compiler||this.Compiler;return t1("stringify",i),ZB(e),i(e,r)}use(e,...n){let r=this.attachers,i=this.namespace;if(n1("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){let[u,...d]=c;l(u,d)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=(0,Nx.default)(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){let d=c[u];o(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,p=-1;for(;++d<r.length;)if(r[d][0]===c){p=d;break}if(p===-1)r.push([c,...u]);else if(u.length>0){let[f,...h]=u,g=r[p][1];Jh(g)&&Jh(f)&&(f=(0,Nx.default)(!0,g,f)),r[p]=[c,f,...h]}}}},i1=new r1().freeze();function e1(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function t1(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function n1(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ZB(t){if(!Jh(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function JB(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Fx(t){return wae(t)?t:new tm(t)}function wae(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function bae(t){return typeof t=="string"||xae(t)}function xae(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}function eU(t){return i1().use(Ox).use($x).parse(t)}function tU(t,e){let n;if(Zu(e,"link",s=>(n=s,Zi)),!n)return null;let r=n.children.first()?.position?.start.offset,i=n.children.last()?.position?.end.offset;return{display:r&&i?t.slice(r,i).trim():"",url:n.url,title:n.title}}function nU(t,e){let n="";return Zu(e,"listItem",r=>{let i=r.children.first()?.position?.start.offset,o=r.children.last()?.position?.end.offset;return i&&o&&(n=t.slice(i,o)),Zi}),n}function _ae(t){return!t.frontmatter||!("autoplay"in t.frontmatter)?!0:!!t.frontmatter.autoplay}async function iU(t,e){let n=e.app.metadataCache.getFileCache(t);if(!n)return null;let i=await kae(n,{source:t,plugin:e});return i?{autoplay:_ae(n),title:Sae(n,t),list:i,file:t}:null}async function kae(t,e){let{metadataCache:n,vault:r}=e.plugin.app,{frontmatter:i}=t;if(i?.playlist!==!0||!t.sections||!t.listItems)return null;let o=t.sections.find(p=>p.type==="list");if(!o)return[];let s=p=>o1(p,o),a=Tae(t.listItems.filter(s)),l=t.links?.filter(s)??[],c=await r.cachedRead(e.source);return a.map((p,f,h)=>{let g=l.findIndex(S=>o1(S,p)),{parent:w,task:m}=p,y=m&&BE[m],v=w>=0?h.findIndex(S=>S.position.start.line===w):-1;if(g!==-1){let S=l[g],C=l.findLastIndex(x=>o1(x,p));return l.splice(g,C-g+1),{media:d(S),type:y??"generic",parent:v,title:S.displayText??""}}let b=Eae(c,p.position),k=eU(b),_=tU(b,k);if(_){let{url:S}=_,C=e.plugin.resolveUrl(S),{display:M}=_;return C&&(M===S||!M)&&(M=Vo(C)),{media:C,title:M,type:y||"generic",parent:v}}return{media:null,title:nU(b,k)||"Item",type:y||"chapter",parent:v}});function d({link:p}){let{path:f,subpath:h}=(0,rU.parseLinktext)(p),g=n.getFirstLinkpathDest(f,e.source.path);return Mi(g,h)}}function Tae(t){return t.map(({task:e,...n})=>$V(e)?{task:e,...n}:n)}function Sae(t,e){return t.frontmatter?.title?.trim()||t.headings?.find(n=>n.level===1)?.heading?.trim()||e.basename.trim()}function o1(t,e){return t.position.start.offset>=e.position.start.offset&&t.position.end.offset<=e.position.end.offset}function Eae(t,e){return t.slice(e.start.offset,e.end.offset)}var Vx=class extends xl.Component{constructor(n){super();this.plugin=n;T(this,"app");T(this,"mediaToPlaylistIndex",new Map);T(this,"listVariantMap",new WeakMap);T(this,"listFileCache",new Map);T(this,"updateQueue",new Set);T(this,"updater",(0,xl.debounce)(async()=>{let n=[...this.updateQueue.values()];this.updateQueue.clear(),n.length!==0&&(await Promise.all(n.map(r=>iU(r,this.plugin).then(i=>{i?this.update(r,i):this.remove(r.path)}))),this.updateQueue.size>0&&this.updater())},500));T(this,"requestNotify",(0,xl.debounce)(()=>this.notify(),500));this.app=n.app}get(n){return n?this.mediaToPlaylistIndex.get(Et(n))??UE:UE}onResolve(){this.mediaToPlaylistIndex.clear();for(let n of Bh(this.app.vault.getRoot()))n.extension==="md"&&this.requestUpdate(n);this.registerEvent(this.app.metadataCache.on("changed",n=>{this.requestUpdate(n)})),this.registerEvent(this.app.metadataCache.on("deleted",n=>{this.remove(n.path)})),this.registerEvent(this.app.vault.on("rename",(n,r)=>{if(!(n instanceof xl.TFile))return;let i=this.listFileCache.get(r);i&&(this.remove(r),this.update(n,i))}))}remove(n){let r=this.listFileCache.get(n);if(r){this.listFileCache.delete(n);for(let i of this.mediaToPlaylistIndex.keys()){let s=this.mediaToPlaylistIndex.get(i).filter(a=>!this.listVariantMap.has(a)||this.listVariantMap.get(a)!==r);s.length===0?this.mediaToPlaylistIndex.delete(i):this.mediaToPlaylistIndex.set(i,s)}this.requestNotify()}}requestUpdate(n){this.updateQueue.add(n),this.updater()}notify(){this.app.metadataCache.trigger("yn:playlist-change")}update(n,r){this.remove(n.path),this.listFileCache.set(n.path,r);let i=new Set;r.list.forEach(o=>{let{media:s}=o;if(!s)return;let a=Et(s);if(i.has(a))return;let l=this.mediaToPlaylistIndex.get(a)??[],c={...r,active:r.list.findIndex(u=>u.media&&a===Et(u.media))};this.listVariantMap.set(c,r),this.mediaToPlaylistIndex.set(a,[...l,c]),i.add(a)}),this.requestNotify()}onload(){Xb(this.app.metadataCache,this).then(()=>{this.onResolve()}),this.plugin.addCommand({id:"playlist-export",name:"Export current playlist to m3u8 file",editorCheckCallback:(n,r,i)=>{if(!i.file||!this.listFileCache.has(i.file.path))return!1;if(n)return!0;KP(this.listFileCache.get(i.file.path),this.app.vault)}}),this.registerEvent(this.app.workspace.on("file-menu",(n,r,i)=>i==="more-options"&&this.listFileCache.has(r.path)&&n.addItem(o=>o.setTitle("Export to m3u8...").setIcon("file-down").setSection("action").onClick(()=>{KP(this.listFileCache.get(r.path),this.app.vault)}))))}};var oU=require("obsidian"),sU=I(Tc());var s1=I(X()),zx=class extends oU.Component{constructor(n,r,i,o){super();this.info=n;this.file=r;this.subpath=i;this.plugin=o;T(this,"store");T(this,"root",null);T(this,"containerEl");this.containerEl=n.containerEl,this.store=qs(o);let{containerEl:s}=n;s.addClasses(["yn","yn-media-embed","custom"]);function a(l){if(!(l instanceof Element))return!1;let c=l.closest("button");return c?c.hasAttribute(Gi):!1}this.registerDomEvent(s,"click",l=>{a(l.target)||l.stopImmediatePropagation()})}get player(){return this.store.getState().player}getMediaInfo(){return Mi(this.file,this.subpath)}render(){this.root?.unmount(),this.root=sU.default.createRoot(this.info.containerEl),this.root.render((0,s1.jsx)(cn.Provider,{value:{plugin:this.plugin,store:this.store,reload:()=>this.render(),embed:!0},children:(0,s1.jsx)(Zs,{})}))}onload(){super.onload(),this.render()}async loadFile(){await this.store.getState().loadFile(this.file,{vault:this.plugin.app.vault,subpath:this.subpath})}onunload(){this.root?.unmount(),this.root=null,super.onunload()}};function aU(t,e){let n=e.muted;t.addItem(r=>r.setSection("yn-player").setIcon(n?"volume-2":"volume-x").setTitle(n?"Unmute":"Mute").onClick(()=>{e.muted=!n}))}function lU(t,e){e.state.canPictureInPicture&&(e.state.pictureInPicture?t.addItem(n=>n.setTitle("Exit Picture in Picture").setIcon("picture-in-picture-2").setSection("yn-player").onClick(()=>e.exitPictureInPicture())):t.addItem(n=>n.setTitle("Picture in Picture").setSection("yn-player").setIcon("picture-in-picture").onClick(()=>e.enterPictureInPicture())))}var kr=require("obsidian");nm();var kU=require("obsidian");function _U(t){let e=kU.moment.utc(0);return e.add(t,"seconds"),e.format("HH:mm:ss.SSS")}var f1={"&":"&amp;","<":"&lt;",">":"&gt;","=":"&#61;",":":"&#58;"},Zae=new RegExp(`[${Mw(Object.keys(f1).join(""))}]`,"g"),TU=Object.fromEntries(Object.entries(f1).map(([t,e])=>[e,t])),Jae=new RegExp(`(${Object.keys(TU).map(Mw).join("|")})`,"g");function ele(t){return t=t.replace(/-->/g,""),t.replaceAll(Zae,e=>f1[e])}function tle(t){return t.replaceAll(Jae,e=>TU[e])}function SU({cues:t,metadata:e={},regions:n=[]},r={}){let i=[...Object.entries({...e,...r}).map(([a,l])=>l?`${a}: ${ele(l)}`:void 0).filter(a=>!!a),""],o=t.flatMap(a=>{let{id:l,startTime:c,endTime:u,text:d}=a;return[l,`${_U(c)} --> ${_U(u)}`,d,""]}),s=n.flatMap(a=>{let{id:l,...c}=a;return["REGION",`id:${l}`,...Object.entries(c).map(([u,d])=>`${u}:${d}`),""]});return["WEBVTT",...i,...o,...s].join(`
`)}async function h1(t,e){let n=await p1(t,e);return n.metadata=IE(n.metadata,r=>tle(r)),n}function EU(t,e){if(e.tracks.local.length===0&&e.tracks.remote.length===0)return;let n=[...e.tracks.local.map(r=>({...r,_type:"local"})),...e.tracks.remote.map(r=>({...r,_type:"remote"}))];t.addItem(r=>{let i=r.setSection("view").setTitle("Open transcript").setIcon("subtitles").setSubmenu();n.sort($E).forEach((o,s)=>{let a=o.label||yu(o.language)||o.wid||`${sh(o.kind)} ${s+1}`;i.addItem(l=>l.setTitle(a).onClick(async()=>{if(o._type==="remote"){let c=await nle(o,e);c&&e.plugin.app.workspace.openLinkText(c.path,"","split")}else o._type==="local"&&(o.src instanceof kr.TFile?e.plugin.app.vault.getFileByPath(o.src.path)&&e.plugin.app.workspace.openLinkText(o.src.path,"","split"):new kr.Notice("Remote track not yet supported"))}))})})}async function nle({wid:t,language:e,label:n,kind:r},{source:i,plugin:o,player:s}){let a=s.provider;if(!(a instanceof yn)||!(i instanceof wt))return new kr.Notice("Cannot save transcript from this media"),null;try{let l=await a.media.methods.getTrack(t);if(!l)return new kr.Notice(`Failed to save transcript: track ${t} not found`),null;let c=SU(l,{Source:i.jsonState.source,Title:Vo(i,s),Language:e,Label:n}),u=wu([Vo(i).replace(/\s+/gu,"").toLowerCase(),t.replaceAll(".","_"),e,"vtt"].filter(Boolean).join(".")).replaceAll(/_+-+|-+_+/gu,"-").replaceAll(/-{2,}/gu,"-").replaceAll(/_{2,}$/gu,"_"),d=await o.mediaNote.getNote(i,s),p=await Vw(o.settings.getState().subtitleFolderPath,{plugin:o,sourcePath:d.path}),f=(0,kr.normalizePath)(`${p.path}/${u}`),h=o.app.vault.getFileByPath(f);h?await o.app.vault.modify(h,c):h=await o.app.vault.create(f,c),new kr.Notice(`Transcript saved to ${h.path}`);let{fileManager:g}=o.app,w=(n||e||t).trim(),m=g.generateMarkdownLink(h,d.path,`#wid=${encodeURIComponent(t)}`,w).replace(/^!/u,""),y=ch[r],v=b=>typeof b=="string";return await o.app.fileManager.processFrontMatter(d,b=>{let k=[];if(y.plural in b){let S=b[y.plural];if(!S)k=[];else if(Array.isArray(S)&&S.every(v))k=S;else{new kr.Notice(`Failed to save transcript: field \`${y.plural}\` in note ${d.path} is not an array of strings, you may need to fix it manually.`),console.log("EXISTING",S);return}}else if(y.singular in b){let S=b[y.singular];if(!S)k=[];else if(v(S))k=[S];else{new kr.Notice(`Failed to save transcript: field \`${y.singular}\` in note ${d.path} is not a string, you may need to fix it manually.`);return}}let _=Fw([...k.filter(S=>{let C=S.match(/#wid=(?<wid>[^&|)\]]+)/u);return C?C.groups.wid!==t:!0}),m]);_.length===1?(delete b[y.plural],b[y.singular]=m):(delete b[y.singular],b[y.plural]=_)}),h}catch(l){return console.error("Failed to save transcript",l),l instanceof Error?new kr.Notice(`Failed to save transcript: ${l.message}`):new kr.Notice("Failed to save transcript, for details see console."),null}}function PU(t,{setTransform:e,transform:n}){let r=t.setTitle("Transform").setIcon("rotate-3d").setSection("yn-player").setSubmenu();(n?.flipHorizontal||n?.flipVertical||n?.rotate)&&r.addItem(i=>i.setIcon("reset").setTitle("Reset").onClick(()=>e(null))),r.addItem(i=>i.setTitle("Flip horizontally").setIcon("flip-horizontal").setChecked(!!n?.flipHorizontal).onClick(()=>e({flipHorizontal:!n?.flipHorizontal}))).addItem(i=>i.setTitle("Flip vertically").setIcon("flip-vertical").setChecked(!!n?.flipVertical).onClick(()=>e({flipVertical:!n?.flipVertical}))).addSeparator().addItem(i=>i.setChecked(n?.rotate==="180").setIcon("iteration-cw").setTitle("Rotate 180\xB0").onClick(()=>{e({rotate:n?.rotate==="180"?void 0:"180"})}))}var m1=require("obsidian");function CU(t,{source:e,plugin:n,viewType:r,player:i}){if(Te(e))return;if(e.isFileUrl){mx(e,t);return}let o=e.jsonState.source,s=e.print({start:i.currentTime,end:-1});t.addItem(u=>u.setTitle("Copy URL").setIcon("copy").setSection("action").onClick(()=>{navigator.clipboard.writeText(o),new m1.Notice("URL copied to clipboard")})),s!==o&&t.addItem(u=>u.setTitle("Copy URL with timestamp").setIcon("copy-check").setSection("action").onClick(()=>{navigator.clipboard.writeText(s),new m1.Notice("URL with timestamp copied")})),t.addItem(u=>u.setTitle("Open in default browser").setIcon("globe").setSection("view").onClick(()=>{window.open(s)}));let a=n.urlViewType.getSupported(e),l=r,c=a.filter(u=>u!==l);Wh(t,{mode:"always",open:!1,url:e,plugin:n,targetViewTypes:c})}function RU(t,{controls:e=!0,toggleControls:n,player:r,source:i,disableWebFullscreen:o,toggleWebFullscreen:s},a){r.provider instanceof yn&&a==="more-options"&&(t.addItem(l=>{l.setTitle(e?"Show website native controls":"Hide website controls").setSection("yn-web-player").setIcon("sliders-horizontal").onClick(()=>{n(!e)})}),i.type!=="bilibili"&&i.type!=="youtube"&&t.addItem(l=>{l.setTitle(o?"Enable in-player fullscreen":"Disable in-player fullscreen").setSection("yn-web-player").setIcon(o?"maximize":"minimize").onClick(()=>{s(!!o)})}))}function g1(){b4(this),this.registerEvent(this.app.workspace.on("yn:media-menu",(t,e,n)=>{if((n==="more-options"||n==="sidebar-context-menu"||n==="tab-header"||n==="player-menu-embed")&&t.addItem(i=>i.setTitle("Refresh").setSection("action").setIcon("reset").onClick(()=>{e.reload()})),n!=="sidebar-context-menu"&&n!=="tab-header"?(t.addItem(i=>CM(i,e.player)),e.player.state.viewType==="video"&&(t.addItem(i=>PU(i,e)),lU(t,e.player))):aU(t,e.player),n==="player-menu-embed"){let i=e.source;t.addItem(o=>o.setTitle("Open to the right").setIcon("separator-vertical").setSection("open").onClick(()=>{this.leafOpener.openMedia(i,"split")})).addItem(o=>o.setTitle("Open in new tab").setSection("open").setIcon("file-plus").onClick(()=>{this.leafOpener.openMedia(i,"tab")})).addItem(o=>o.setTitle("Open in new window").setSection("open").setIcon("maximize").onClick(()=>{this.leafOpener.openMedia(i,"window")}))}RU(t,e,n),(n==="player-menu-embed"||n==="more-options")&&(EU(t,e),t.addItem(i=>i.setTitle("Open media note").setIcon("book").setSection("view").onClick(async()=>{await e.plugin.leafOpener.openNote(await e.plugin.mediaNote.getNote(e.source,e.player),"split")})),CU(t,e));let r=e.player.provider;(n==="player-menu-embed"||n==="more-options"||n==="sidebar-context-menu")&&rl(r)&&t.addItem(i=>i.setTitle("Copy Screenshot").setSection("action").setIcon("focus").onClick(()=>{gh({app:this.app,media:e.source,provider:r,settings:this.settings.getState(),state:e.player.state})}))}))}var rle=/^(?<x>\d+)?x(?<y>\d+)$|^(?<xOnly>\d+)$/;function MU(t){let e=parseInt(t,10);return Number.isNaN(e)?-1:e}var IU=t=>{let e=t?.match(rle)?.groups;if(!e)return null;let n=MU(e.xOnly??e.x),r=MU(e.y);return[n,r]},om=t=>{let e=t.lastIndexOf("|"),n,r=t;return e===-1?(n=IU(t),n&&(r="")):(n=IU(r.substring(e+1)),n&&(r=r.substring(0,e))),{title:r,size:n}};function qx(t,{title:e,size:n}){e?t.setAttr("alt",e):t.removeAttribute("alt");let r=(i,o)=>{o<0?t.style.removeProperty(i):t.style[i]=`${o}px`};n?(r("width",n[0]),r("height",n[1])):(r("width",-1),r("height",-1))}var LU=require("obsidian"),AU=I(Tc());var y1=I(X()),sd=class extends LU.MarkdownRenderChild{constructor(n,r){super(n);this.containerEl=n;this.plugin=r;T(this,"store");T(this,"root",null);this.store=qs(r),n.addClasses(["yn","custom","yn-media-embed"])}get player(){return this.store.getState().player}getMediaInfo(){return this.store.getState().source?.url??null}async setSource(n,r={}){let i=this.plugin.urlViewType.getPreferred(n);this.store.getState().setSource(n,{title:r.title??!0,hash:r.hash,viewType:i,textTracks:await this.plugin.transcript.getTracks(n).catch(o=>(console.error("Failed to get text tracks",o,n.href),[]))})}render(){this.root?.unmount(),this.root=AU.default.createRoot(this.containerEl),this.root.render((0,y1.jsx)(cn.Provider,{value:{plugin:this.plugin,store:this.store,reload:()=>this.render(),embed:!0},children:(0,y1.jsx)(Zs,{})}))}onload(){super.onload(),this.render()}onunload(){this.root?.unmount(),this.root=null,super.onunload()}};var FU=require("@codemirror/state"),ad=require("@codemirror/view"),ld=require("obsidian");var DU=require("@codemirror/language"),S1=require("@codemirror/view");var $U=t=>!(!t.startsWith("./")&&!t.startsWith("../"))||t.indexOf(":")===-1;var k1=require("@codemirror/view"),T1=require("obsidian");var v1=class extends sd{constructor(n,r){super(n,r);this.containerEl=n;this.plugin=r;n.addClasses(["yn-external-media-embed"]);function i(o){if(!(o instanceof Element))return!1;let s=o.closest("button");return s?s.hasAttribute(Gi):!1}this.registerDomEvent(n,"click",o=>{i(o.target)||o.stopImmediatePropagation()})}},Yx=class t extends k1.WidgetType{constructor(n,r,i){super();this.message=n;this.start=r;this.end=i}toDOM(n){let r=document.createElement("div");return this.hookClickHandler(n,r),r.className="external-embed yn-external-media-embed yn-invalid-notice",r.createEl("p",{text:this.message}),r}eq(n){return n instanceof t&&n.message===this.message}updateDOM(n){return n.textContent!==this.message?(n.empty(),n.createEl("p",{text:this.message}),!0):!1}hookClickHandler(n,r){r.addEventListener("click",i=>{i.defaultPrevented||(this.selectElement(n,r),i.preventDefault())})}selectElement(n,r){let i=r.playerInfo,{start:o}=i??this,{end:s}=i??this;try{if(o<0||s<0){let a=n.posAtDOM(r);n.dispatch({selection:{head:a,anchor:a}}),n.focus()}else T1.Platform.isMobile&&(s=o),n.dispatch({selection:{head:o,anchor:s}}),n.focus()}catch{}}},kl=class extends k1.WidgetType{constructor(n,r,i,o,s){super();this.plugin=n;this.media=r;this.title=i;this.start=o;this.end=s}setPos(n){let r=n.playerInfo;r&&(r.start=this.start,r.end=this.end)}hookClickHandler(n,r){r.on("click","button.yn-lp-edit",i=>{i.defaultPrevented||(this.selectElement(n,r),i.preventDefault())})}selectElement(n,r){let i=r.playerInfo,{start:o}=i??this,{end:s}=i??this;try{if(o<0||s<0){let a=n.posAtDOM(r);n.dispatch({selection:{head:a,anchor:a}}),n.focus()}else T1.Platform.isMobile&&(s=o),n.dispatch({selection:{head:o,anchor:s}}),n.focus()}catch{}}resizeWidget(n,r){window.ResizeObserver&&new window.ResizeObserver(()=>n.requestMeasure()).observe(r,{box:"border-box"})}setInfo(n,r){n.playerInfo={title:this.title,start:this.start,end:this.end,child:r,url:this.media}}updateDOM(n){let r=n.playerInfo;if(!r)return!1;let{title:i}=r;return this.media.compare(r.url)?this.title!==i&&(r.title=this.title,this.applyTitle(n),this.setPos(n)):r.child.setSource(this.media),!0}destroy(n){let r=n.playerInfo;r&&(delete n.playerInfo,r.child.unload())}eq(n){return this.media.compare(n.media)&&this.title===n.title}setDOM(n,r){r.tabIndex=-1,this.applyTitle(r);let i=new v1(r,this.plugin);i.setSource(this.media),i.load(),this.hookClickHandler(n,r),this.setInfo(r,i),this.resizeWidget(n,r)}applyTitle(n){qx(n,om(this.title))}toDOM(n){let r=createDiv();return r.style.display="none",r.setAttr("src",this.media.source.href),r.addClasses(["external-embed","cm-embed-block","yn-media-embed"]),r.style.removeProperty("display"),this.setDOM(n,r),r}};Object.defineProperty(kl.prototype,"estimatedHeight",{get:()=>100,enumerable:!1,configurable:!0});var w1=class extends kl{constructor(){super(...arguments);T(this,"enableWebview",!1)}},b1=class extends kl{constructor(){super(...arguments);T(this,"enableWebview",!1)}},x1=class extends kl{constructor(){super(...arguments);T(this,"enableWebview",!1)}},_1=class extends kl{constructor(){super(...arguments);T(this,"enableWebview",!0)}},OU={"yn-url-audio":b1,"yn-url-video":w1,"yn-embed":x1,"yn-webpage":_1};var ile=(t,e,n,r,i)=>{let o=e.doc,s=null;(0,DU.syntaxTree)(e).iterate({from:r,to:i,enter:({type:l,from:c,to:u})=>{let d=l.name;if(d.includes("Image")){if(d==="Image"||d==="ImageMark"){s={imgMarkLoc:c};return}if(!s)return;if(d==="ImageAlt"||d.includes("Alt")){s.alt=o.sliceString(c,u);return}if(d==="URL"||d.includes("Link")){s.url=o.sliceString(c,u);return}if(d.includes("Formatting")&&s.url){let{imgMarkLoc:p,alt:f,url:h}=s;if(s=null,$U(h))return;let g=t.resolveUrl(h);if(!g)return;if(Te(g)){let w=t.app.metadataCache.fileToLinktext(g.file,"");a(new Yx(`Please use internal embed in favor of file url embed: ![[${w}]]`,p,u),p,u)}else if(Ku(g,t)){let w=t.urlViewType.getPreferred(g),m=new OU[w](t,g,f??"",p,u);a(m,p,u)}}}}});function a(l,c,u){let{from:p,text:f}=o.lineAt(c);f.substring(0,c-p).trim()===""&&f.substring(u-p).trim()===""?n.push(S1.Decoration.widget({widget:l,block:!0,side:-1}).range(p)):n.push(S1.Decoration.widget({widget:l,side:-1}).range(c))}},E1=ile;var ole=(t,e)=>Kx(t,e[0])||Kx(t,e[1]),Kx=(t,e)=>t[0]<e&&t[1]>e,sle=(t,e)=>{let n=Kx(t,e[0])?t[0]:e[0],r=Kx(t,e[1])?t[1]:e[1];return[n,r]};function P1(t){return t.sort((e,n)=>e[0]-n[0]).reduce((e,n)=>{let r=e.findIndex(i=>ole(i,n));return r!==-1?e[r]=sle(e[r],n):e.push(n),e},[])}var ale=t=>{let e=n=>{if(n.field(ld.editorLivePreviewField)){let r=[];return E1(t,n,r),ad.Decoration.set(r)}else return ad.Decoration.none};return FU.StateField.define({create:e,update:(n,r)=>{let i=r.startState.field(ld.editorLivePreviewField),o=r.state.field(ld.editorLivePreviewField);if(i!==o)return e(r.state);if(!o)return ad.Decoration.none;if(!r.docChanged)return n;if(r.state.field(ld.editorEditorField).composing)return n.map(r.changes);n=n.map(r.changes);let s=[];r.changes.iterChangedRanges((l,c,u,d)=>{s.push([r.state.doc.lineAt(u).number,r.state.doc.lineAt(d).number])});let a=[];for(let[l,c]of P1(s)){let{from:u}=r.state.doc.line(l),{to:d}=r.state.doc.line(c);n=n.update({filterFrom:u,filterTo:d,filter:()=>!1}),E1(t,r.state,a,u,d)}return n.update({add:a,sort:!0})},provide:n=>ad.EditorView.decorations.from(n)})},NU=ale;function C1(t){t.registerEditorExtension(NU(t)),cle(t)}var lle=["cm-line","cm-content"],VU="ynError";function zU(t){if(!t.parentElement)return!1;let e=t.parentElement;return lle.some(n=>e.classList.contains(n))}function BU(){zU(this)&&(this.dataset[VU]="",this.removeEventListener("load",UU))}function UU(){zU(this)&&(delete this.dataset[VU],this.removeEventListener("error",BU))}function cle(t){t.register(yt(window,{createEl:e=>function(){let n=e.apply(this,arguments);return n instanceof HTMLImageElement&&(n.addEventListener("error",BU,{once:!0}),n.addEventListener("load",UU,{once:!0})),n}}))}var ule=require("obsidian");function HU(t,e){let{app:n}=e;return new Promise(r=>{function i(){let o=n.workspace.getLeavesOfType(t)[0];return o?(r(o.view),!0):!1}n.workspace.onLayoutReady(()=>{if(i())return;let o=()=>{i()&&n.workspace.off("layout-change",o)};n.workspace.on("layout-change",o),e.register(()=>n.workspace.off("layout-change",o))})})}function Gx(t){return t.constructor.prototype}function R1(t){t.getLeavesOfType("markdown").forEach(async e=>{let n=e.getViewState();await e.setViewState({type:"empty"}),await e.setViewState(n)})}function I1(t){dle.call(this,t),ple.call(this),C1(this)}function dle(t){let{app:e}=this;["video","audio"].forEach(i=>{let o=Zo(i),s=r(o),a=n(o,t);this.register(()=>{a(),s()})}),R1(e.workspace),this.register(()=>{R1(e.workspace)});function n(i,o){return e.embedRegistry.registerExtensions(i,o),()=>{e.embedRegistry.unregisterExtensions(i)}}function r(i){let o=i.map(s=>e.embedRegistry.embedByExtension[s]);return e.embedRegistry.unregisterExtensions(i),()=>{i.forEach((s,a)=>{let l=o[a];l&&e.embedRegistry.registerExtension(s,l)})}}}var M1=class extends sd{constructor(n,r,i){super(r,i);this.info=n;this.containerEl=r;this.plugin=i;r.addClasses(["yn-external-media-embed"])}onload(){this.setSource(this.info),super.onload()}};function ple(){let t=this;this.registerMarkdownPostProcessor((e,n)=>{for(let i of e.querySelectorAll("img")){let o=fle(i);o&&r(o,i)}for(let i of e.querySelectorAll('iframe.external-embed[src*="youtube.com/embed/"]')){let o=n.getSectionInfo(i)?.text,s=hle(o)??mle(i);!s||!this.resolveUrl(s.url)||r(s,i)}function r(i,o){let s=t.resolveUrl(i.url);if(!s||Te(s)||!Ku(s,t))return;let a=createDiv({cls:["media-embed","external-embed","is-loaded"],attr:{src:s.href}});qx(a,i),o.replaceWith(a);let l=new M1(s,a,t);n.addChild(l)}})}function fle(t){let e=t.alt,n=t.src;return n?{url:n,...om(e)}:null}function hle(t){if(!t)return null;let e=t.match(/!\[(?<alt>[^\]]*)\]\((?<src>[^)]+)\)/);if(!e)return null;let{alt:n,src:r}=e.groups;return r?{url:r,...om(n)}:null}function mle(t){console.warn("cannot get source text of iframe, use src instead");let e=t.src;return e?{url:e,title:Uw(e),size:null}:null}function L1({onExternalLinkClick:t}){let e=this;return HU("markdown",e).then(n=>{if(!n.editMode){console.error("MarkdownView.editMode is not available, cannot patch editor click");return}e.register(yt(Gx(n.editMode),{triggerClickableToken:r=>async function(i,o,...s){let a=()=>r.call(this,i,o,...s);if(t&&i.type==="external-link")try{await t.call(e,i.text,ss(o),a)}catch(l){console.error("onExternalLinkClick error in editor, fallback to default",l),a()}else a()}})),console.debug("editor click patched")})}var jU=require("obsidian");function A1(){let t=n=>{let r=n.target;if(!r.instanceOf(HTMLElement)||!r.matches(".metadata-property .metadata-property-value .external-link"))return;let i=r.closest(".metadata-property");if(!i)return;let o=i.dataset.propertyKey;if(!PV.includes(o))return;let s=this.resolveUrl(r.textContent);s&&(n.stopImmediatePropagation(),this.leafOpener.openMedia(s,Yl(n),{fromUser:!0}))},e=yt(jU.MarkdownView.prototype,{onload:n=>function(){return this.registerDomEvent(this.containerEl,"click",t,{capture:!0}),n.call(this)}});this.register(()=>{e(),this.app.workspace.getLeavesOfType("markdown").forEach(n=>n.view.containerEl.removeEventListener("click",t))})}var WU=require("obsidian");function $1({onInternalLinkClick:t}){let e=this;this.register(yt(WU.Workspace.prototype,{openLinkText:n=>async function(r,i,o,s,...a){let l=()=>n.call(this,r,i,o,s,...a);try{await t.call(e,r,i,ss(o),l)}catch(c){console.error("onInternalLinkClick error in openLinktext, fallback to default",c),l()}}}))}function O1(){this.registerMarkdownPostProcessor(t=>t.querySelectorAll("a").forEach(e=>{let n=e.getAttr("aria-label");if(n)try{let r=decodeURI(n);n!==r&&e.setAttr("aria-label",r)}catch{}}))}var qU=require("obsidian");function D1(t){let e=this,n=yt(qU.MarkdownPreviewRenderer,{registerDomEvents:r=>function(i,o,...s){return gle(o,t,e),n(),console.debug("preview click patched"),r.call(this,i,o,...s)}});e.register(n)}function gle(t,{onExternalLinkClick:e},n){n.register(yt(Gx(t),{onExternalLinkClick:r=>async function(i,o,s,...a){let l=()=>r.call(this,i,o,s,...a);if(!e)return l();i.preventDefault();try{await e.call(n,s,Yl(i),l)}catch(c){console.error("onExternalLinkClick error in preview, fallback to default",c),l()}}}))}function F1(t,e,n){let{app:r}=this;this.registerView(t,e),this.register(i(n)),this.registerExtensions(n,t);function i(o){let s=o.map(a=>({ext:a,type:r.viewRegistry.typeByExtension[a]}));return r.viewRegistry.unregisterExtensions(o),()=>{yle(s,"type").forEach((a,l)=>{l&&r.viewRegistry.registerExtensions(a.map(c=>c.ext),l)})}}}function yle(t,e){return t.reduce((n,r)=>{let i=r[e],o=n.get(i);return o?o.push(r):n.set(i,[r]),n},new Map)}var YU=require("obsidian");function KU(t){return t?(t=t instanceof URL?t:rr(t),YU.Platform.isWin||!t||t.protocol!=="file:"||!t.pathname.includes("%5C")||(t.pathname=t.pathname.replaceAll(/%5C/g,"/")),t):null}var nH=I(Sd()),kt=require("obsidian");var GU=()=>(...t)=>t;var QU=require("obsidian");var XU={6:"240P \u6781\u901F",16:"360P \u6D41\u7545",32:"480P \u6E05\u6670",64:"720P \u9AD8\u6E05",74:"720P60 \u9AD8\u5E27\u7387",80:"1080P \u9AD8\u6E05",112:"1080P+ \u9AD8\u7801\u7387",116:"1080P60 \u9AD8\u5E27\u7387",120:"4K \u8D85\u6E05",125:"HDR \u771F\u5F69\u8272",126:"\u675C\u6BD4\u89C6\u754C",127:"8K \u8D85\u9AD8\u6E05"};async function N1(t,e){await t.cookies.set({url:"https://www.bilibili.com",domain:".bilibili.com",path:"/",name:"CURRENT_QUALITY",value:e.toString(),expirationDate:Date.now()+1e3*60*60*24*365})}var ZU=GU()("defaultVolume","urlMappingData","devices","defaultYnLinkClick","linkHandler","speedStep","loadStrategy","timestampTemplate","screenshotTemplate","screenshotEmbedTemplate","insertBefore","timestampOffset","biliDefaultQuality","screenshotFormat","screenshotQuality","enableSubtitle","defaultLanguage","screenshotFolderPath","subtitleFolderPath"),JU={defaultVolume:80,urlMappingData:[],devices:[],defaultYnLinkClick:{click:"split",alt:"window"},linkHandler:{"yn-embed":[],"yn-url-audio":[],"yn-url-video":[],"yn-webpage":[]},enableSubtitle:!1,loadStrategy:"eager",timestampTemplate:`
- {{TIMESTAMP}} `,screenshotEmbedTemplate:"{{TITLE}}{{DURATION}}|50",screenshotTemplate:`
- !{{SCREENSHOT}} {{TIMESTAMP}} `,insertBefore:!1,timestampOffset:0,biliDefaultQuality:80,screenshotFormat:"image/webp",speedStep:.1};function eH(){return kt.Platform.isDesktopApp?require("os").hostname()||(kt.Platform.isMacOS?"Mac":kt.Platform.isWin?"Windows":kt.Platform.isLinux?"Linux":"Desktop"):kt.Platform.isIosApp?kt.Platform.isPhone?"iPhone":kt.Platform.isTablet?"iPad":"iOS Device":kt.Platform.isAndroidApp?kt.Platform.isPhone?"Android Phone":kt.Platform.isTablet?"Android Tablet":"Android Device":"Unknown Device"}function tH(t){return new Map(t.map(e=>[`${e.appId}%${e.protocol}`,e.replace]))}function vle(t){return Array.from(t.entries()).map(([e,n])=>{let[r,i]=e.split("%");return{appId:r,protocol:i,replace:n}}).filter(e=>e.appId&&e.protocol&&e.replace)}function rH(t){let e=(0,kt.debounce)(n=>{let r=w_(n,ZU);t.saveData({...r,urlMappingData:n.getUrlMappingData()})},1e3);return Sc((n,r)=>({...fm(JU,["urlMappingData"]),setEnableSubtitle(i){n({enableSubtitle:i}),e(r())},setSpeedStep(i){i=Math.abs(i),i!==0&&(n({speedStep:i}),e(r()))},setScreenshotFormat(i){n({screenshotFormat:i}),e(r())},setScreenshotQuality(i){n({screenshotQuality:i??void 0}),e(r())},setDefaultLanguage(i){n({defaultLanguage:i?.format()}),e(r())},getDefaultLang(){let i=r().defaultLanguage,o=kt.moment.locale();return i&&!lh(i)?(new kt.Notice(`Invalid language code detected in preferences: ${i}, reverting to ${o}.`),n({defaultLanguage:void 0}),e(r()),o):i??kt.moment.locale()},getUrlMappingData(){return vle(r().urlMapping)},setBiliDefaultQuality(i){n({biliDefaultQuality:i}),e(r())},setInsertPosition(i){n({insertBefore:i==="before"}),e(r())},setLinkHandler(i,o){n(s=>{let a={...s.linkHandler};for(let l of Object.keys(a)){let c=l;a[c]=a[c].filter(u=>typeof u=="string"?u!==i:typeof i=="string"||!wle(u,i)),c===o&&(a[c]=[...a[c],i])}return{linkHandler:a}}),e(r())},setTimestampOffset(i){n({timestampOffset:i}),e(r())},setDefaultYnLinkBehavior:i=>{let o;i==="split"||i==="split-horizontal"?o="window":i==="window"?o="tab":i==="tab"?o="split":o=null,n({defaultYnLinkClick:{click:i,alt:o}}),e(r())},setTemplate(i,o){switch(i){case"screenshot":n({screenshotTemplate:o});break;case"screenshotEmbed":n({screenshotEmbedTemplate:o});break;case"timestamp":n({timestampTemplate:o});break;default:(0,nH.assertNever)(i)}e(r())},setYnLinkAltBehavior:i=>{n(({defaultYnLinkClick:o})=>({defaultYnLinkClick:{...o,alt:i}})),e(r())},urlMapping:tH(JU.urlMappingData),setDefaultVolume:i=>{n({defaultVolume:i}),e(r())},getUrlMapping:i=>r().urlMapping.get(`${t.app.appId}%${i}`),setUrlMapping:(i,o)=>{if(i.includes("%"))throw new Error("Protocol cannot contain %");let s=`${t.app.appId}%${i}`;n(a=>({urlMapping:new Map(a.urlMapping).set(s,o),devices:a.getDeviceName()?a.devices:[...a.devices,{appId:t.app.appId,name:eH()}]})),e(r())},removeUrlMapping:i=>{if(i.includes("%"))throw new Error("Protocol cannot contain %");n(o=>{let s=`${t.app.appId}%${i}`,a=new Map(o.urlMapping);return a.delete(s),{urlMapping:a}}),e(r())},getDeviceName(i=t.app.appId){return r().devices.find(o=>o.appId===i)?.name},getDeviceNameWithDefault(i=t.app.appId){let o=r().devices.find(s=>s.appId===i);return o?o.name:i===t.app.appId?eH():"Unknown Device"},setDeviceName(i,o=t.app.appId){n({devices:[...r().devices.filter(s=>s.appId!==o),{appId:o,name:i}]}),e(r())},setLoadStrategy:i=>{n({loadStrategy:i}),e(r())},setScreenshotFolder(i){i!==null?(i=(0,kt.normalizePath)(i),i==="."?i="/":i.startsWith("./")&&(i=i.slice(2)),n({screenshotFolderPath:i})):n({screenshotFolderPath:void 0})},setSubtitleFolder(i){i!==null?(i=(0,kt.normalizePath)(i),i==="."?i="/":i.startsWith("./")&&(i=i.slice(2)),n({subtitleFolderPath:i})):n({subtitleFolderPath:void 0})},load:async()=>{let i=await t.loadData();if(!i)return;let{urlMappingData:o,...s}=w_(i,ZU);n({...s,urlMapping:tH(o??[])})},save:()=>{e(r())}}))}function wle(t,e){let n=new Set([...Object.keys(t),...Object.keys(e)]);for(let r of n)if(t[r]!==e[r])return!1;return!0}var oH=require("url"),z1=I(LE()),de=require("obsidian");var Xx=class extends de.PluginSettingTab{constructor(n){super(n.app,n);T(this,"plugin");this.plugin=n}get state(){return this.plugin.settings.getState()}get sub(){return this.plugin.settings.subscribe.bind(this.plugin.settings)}protocol(){new de.Setting(this.containerEl).setHeading().setName("Protocols").setDesc("Create custom protocols that resolve link per device");let n=this.containerEl.createDiv({cls:"yn-protocol-container"});new de.Setting(n).setHeading().setName("This device").addText(a=>a.setPlaceholder(this.state.getDeviceNameWithDefault()).setValue(this.state.getDeviceName()??"").onChange(l=>this.state.setDeviceName(l))).addExtraButton(a=>a.setIcon("plus").setTooltip("Add new protocol").onClick(()=>{let l=new de.Menu().addItem(c=>c.setIcon("link").setTitle("Link mapping").onClick(()=>{let u=i({protocol:"",replace:"https://"});r.insertAdjacentElement("afterbegin",u.settingEl)}));de.Platform.isDesktopApp&&l.addItem(c=>c.setIcon("folder").setTitle("Folder mapping").onClick(async()=>{let u=(await Om().showOpenDialog({title:"Pick a folder",message:"Pick a folder to resolve media files from",buttonLabel:"Pick",properties:["openDirectory"]})).filePaths[0];if(!u)return;let d=i({protocol:"",replace:(0,oH.pathToFileURL)(u).href});r.insertAdjacentElement("afterbegin",d.settingEl)})),jl(a.extraSettingsEl,l)}));let r=n.createDiv({cls:"yn-protocol-list"}),i=a=>new de.Setting(r).then(l=>{let c=a.protocol,u=new de.TextComponent(l.controlEl).setPlaceholder("Protocol name").setValue(c).onChange(f=>{if(!f)return;let h=c;c=f,this.state.removeUrlMapping(h);let g=p.getValue();g&&this.state.setUrlMapping(f,g)}),d="Target URL prefix";if(a.devices){d="Configured in ";let f=a.devices.filter(h=>!!h).slice(0,2);f.length>0?(d+=f.join(", "),f.length<a.devices.length&&(d+=", ...")):(d+="unknown device",a.devices.length>1&&(d+="s"))}let p=new de.TextComponent(l.controlEl).setPlaceholder(d).setValue(a.replace).onChange(f=>{u.getValue()&&this.state.setUrlMapping(u.getValue(),f)});u.inputEl.addClass("yn-protocol-input"),p.inputEl.addClass("yn-replace-input"),l.addExtraButton(f=>f.setIcon("trash").setTooltip(`Remove ${u.getValue()||"empty"} protocol`).onClick(()=>{this.state.removeUrlMapping(u.getValue()),l.settingEl.remove()}))}),o=this.state.getUrlMappingData();[...new Set(o.map(a=>a.protocol))].sort().forEach(a=>{i({protocol:a,devices:o.filter(l=>l.protocol===a&&l.appId!==this.plugin.app.appId).map(l=>this.state.devices.find(c=>c.appId===l.appId)?.name??null),replace:this.state.getUrlMapping(a)??""})})}linkOpen(){let{containerEl:n}=this;new de.Setting(n).setHeading().setName("Link open").setDesc("Configure how links to media are opened");let r={default:"Default obsidian behavior",replace:"In current pane",split:"New pane on the right","split-horizontal":"New pane on the bottom",tab:"New tab",window:"New window"},i=c=>{switch(c){case"split":case"split-horizontal":return de.Platform.isMacOS?"click holding \u2318+\u2325":"click holding Ctrl+Alt";case"window":return de.Platform.isMacOS?"click holding \u2318+\u2325+\u21E7":"click holding Ctrl+Alt+Shift";case"tab":default:return de.Platform.isMacOS?"click holding \u2318 or middle-click":"middle-click or click holding Ctrl"}},o=c=>c===null?"default":c===!1?"replace":c,s=c=>{switch(c){case"replace":return!1;case"split":case"tab":case"window":return c;case"split-horizontal":return"split-horizontal";default:return null}};new de.Setting(n).setName("Default link click").setDesc("Configure how links to media are opened").addDropdown(c=>c.addOptions(r).setValue(o(this.state.defaultYnLinkClick.click)).onChange(u=>this.state.setDefaultYnLinkBehavior(s(u))).then(()=>this.sub((u,d)=>{u.defaultYnLinkClick.click!==d.defaultYnLinkClick.click&&c.setValue(o(u.defaultYnLinkClick.click))})));let a=new de.Setting(n).setName("Altnernative behavior").addDropdown(c=>c.addOptions(r).setValue(o(this.state.defaultYnLinkClick.alt)).onChange(u=>this.state.setYnLinkAltBehavior(s(u))).then(()=>this.sub((u,d)=>{u.defaultYnLinkClick.alt!==d.defaultYnLinkClick.alt&&c.setValue(o(u.defaultYnLinkClick.alt))})));function l(c){let u=i(c);a.setDesc("Configure link open behavior"+u?` when ${u}`:"")}l(this.state.defaultYnLinkClick.click),this.sub((c,u)=>{c.defaultYnLinkClick!==u.defaultYnLinkClick&&l(c.defaultYnLinkClick.click)})}playback(){let{containerEl:n}=this;new de.Setting(n).setHeading().setName("Playback"),new de.Setting(n).setName("Default volume").setDesc("The default volume for media files").addSlider(r=>r.setLimits(0,100,1).setValue(this.state.defaultVolume).onChange(this.state.setDefaultVolume).then(i=>{this.sub((o,s)=>{o.defaultVolume!==s.defaultVolume&&i.setValue(o.defaultVolume)})})).addText(r=>r.setValue(cd(this.state.defaultVolume)).onChange(iH(this.state.setDefaultVolume)).then(i=>{Qx.call(i,0,100,1),i.inputEl.type="number",i.inputEl.style.textAlign="center",this.sub((o,s)=>{o.defaultVolume!==s.defaultVolume&&i.setValue(cd(o.defaultVolume))})})).then(r=>r.controlEl.appendText("%")),new de.Setting(n).setName("Load strategy").setDesc(createFragment(r=>{r.appendText("Configure when media embeds are loaded in the note"),r.createEl("br"),r.appendText("Useful if you want lazy load media embeds in a note when there are many of them")})).addDropdown(r=>r.addOption("eager","On note open").addOption("play","When interacted with").setValue(this.state.loadStrategy).onChange(i=>this.state.setLoadStrategy(i)))}subtitle(){let{containerEl:n}=this;new de.Setting(n).setName("Enable subtitle by default").setDesc("Toggle subtitle on by default when available").addToggle(s=>s.setValue(this.state.enableSubtitle).onChange(this.state.setEnableSubtitle));let r="_follow_",i=lV(),o=Object.fromEntries(z1.default.getAllCodes().flatMap(s=>i.has(s)?[...i.get(s).values()]:[[s,z1.default.getNativeName(s)]]));new de.Setting(n).setName("Default locale").setDesc("The default locale for subtitles").addDropdown(s=>s.addOption(r,"Follow obsidian locale").addOptions(o).setValue(this.state.defaultLanguage??r).onChange(a=>this.state.setDefaultLanguage(a===r?null:a))),new de.Setting(n).setName("Speed step").setDesc("Configure the step for command to slightly increasing or decreasing playback speed").addSlider(s=>s.setLimits(.01,2,.01).setValue(this.state.speedStep).onChange(this.state.setSpeedStep).then(a=>{this.sub((l,c)=>{l.speedStep!==c.speedStep&&a.setValue(l.speedStep)})})).addText(s=>s.setValue(cd(this.state.speedStep)).onChange(V1(this.state.setSpeedStep)).then(a=>{Qx.call(a,.01,2,.01),a.inputEl.type="number",a.inputEl.style.textAlign="center",this.sub((l,c)=>{l.speedStep!==c.speedStep&&a.setValue(cd(l.speedStep))})})).then(s=>s.controlEl.appendText("x")),new de.Setting(n).setName("Default location for downloaded subtitle").setDesc("Where subtitles from website are placed.").addDropdown(s=>s.addOptions({default:"In attachment folder",specific:"In the folder specified below"}).onChange(a=>{this.state.setSubtitleFolder(a==="specific"?"":null)})),new de.Setting(n).setName("Subtitle folder path").setDesc("Place newly created subtitle files in this folder.").addText(s=>s.setPlaceholder("Example: folder 1/folder").setValue(this.state.subtitleFolderPath??"").onChange(this.state.setSubtitleFolder)).then(s=>{s.settingEl.style.display=this.state.subtitleFolderPath!==void 0?"":"none",this.sub((a,l)=>{typeof a.subtitleFolderPath!=typeof l.subtitleFolderPath&&(s.settingEl.style.display=a.subtitleFolderPath!==void 0?"":"none")})})}timestamp(){let{containerEl:n}=this;new de.Setting(n).setHeading().setName("Timestamp"),new de.Setting(n).setName("Timestamp template").setDesc(createFragment(r=>{r.appendText("The template used to insert timestamps."),r.createEl("br"),r.appendText("Supported placeholders: {{TIMESTAMP}}")})).addTextArea(r=>{r.setValue(this.state.timestampTemplate).onChange(i=>this.state.setTemplate("timestamp",i)),r.inputEl.rows=5,r.inputEl.cols=40}),new de.Setting(n).setName("Timestamp offset").setDesc("Offset in seconds to add to the timestamp").addSlider(r=>r.setLimits(-10,10,.01).setValue(this.state.timestampOffset).onChange(this.state.setTimestampOffset).then(i=>{this.sub((o,s)=>{o.timestampOffset!==s.timestampOffset&&i.setValue(o.timestampOffset)})})).addText(r=>r.setValue(cd(this.state.timestampOffset)).onChange(V1(this.state.setTimestampOffset)).then(i=>{Qx.call(i,-10,10,.01),i.inputEl.type="number",i.inputEl.style.textAlign="center",this.sub((o,s)=>{o.timestampOffset!==s.timestampOffset&&i.setValue(cd(o.timestampOffset))})})).then(r=>r.controlEl.appendText("s"))}screenshot(){let{containerEl:n}=this;new de.Setting(n).setHeading().setName("Screenshot"),new de.Setting(n).setName("Screenshot linktext template").setDesc(createFragment(i=>{i.appendText("The template used to create screenshot linktext."),i.createEl("br"),i.appendText("Supported placeholders: {{DURATION}}, {{TITLE}}"),i.createEl("br"),i.appendText("Remove `|50` suffix to embed image in full size")})).addTextArea(i=>{i.setValue(this.state.screenshotEmbedTemplate).onChange(o=>this.state.setTemplate("screenshotEmbed",o)),i.inputEl.rows=5,i.inputEl.cols=40}),new de.Setting(n).setName("Screenshot template").setDesc(createFragment(i=>{i.appendText("The template used to insert screenshot."),i.createEl("br"),i.appendText("Supported placeholders: "),i.createEl("ul",{},o=>{o.createEl("li").appendText("{{TIMESTAMP}} - timestamp link"),o.createEl("li",{},s=>{s.appendText("{{SCREENSHOT}} - link to screenshot"),s.createEl("br"),s.appendText("add `!` prefix to insert as image embed")})})})).addTextArea(i=>{i.setValue(this.state.screenshotTemplate).onChange(o=>this.state.setTemplate("screenshot",o)),i.inputEl.rows=5,i.inputEl.cols=40}),new de.Setting(n).setName("Screenshot format").setDesc(createFragment(i=>{i.appendText("The format to use when taking screenshots"),i.createEl("br"),i.appendText("Note that the webp format falls back to jpeg in iOS or iPadOS")})).addDropdown(i=>i.addOptions({"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WEBP"}).setValue(this.state.screenshotFormat).onChange(o=>this.state.setScreenshotFormat(o))),new de.Setting(n).setName("Default location for new screenshots").setDesc("Where newly added attachments are placed.").addDropdown(i=>i.addOptions({default:"In attachment folder",specific:"In the folder specified below"}).onChange(o=>{this.state.setScreenshotFolder(o==="specific"?"":null)})),new de.Setting(n).setName("Attachment folder path").setDesc("Place newly created screenshot files in this folder.").addText(i=>i.setPlaceholder("Example: folder 1/folder").setValue(this.state.screenshotFolderPath??"").onChange(this.state.setScreenshotFolder)).then(i=>{i.settingEl.style.display=this.state.screenshotFolderPath!==void 0?"":"none",this.sub((o,s)=>{typeof o.screenshotFolderPath!=typeof s.screenshotFolderPath&&(i.settingEl.style.display=o.screenshotFolderPath!==void 0?"":"none")})});let r=i=>i.screenshotFormat==="image/webp"?.8:.92;new de.Setting(n).setName("Screenshot quality").setDesc("Quality of the screenshot").addText(i=>i.setValue(this.state.screenshotQuality?.toString()??"").setPlaceholder(r(this.state).toString()).onChange(V1(this.state.setScreenshotQuality)).then(o=>{Qx.call(o,0,1,.01),o.inputEl.type="number",o.inputEl.style.textAlign="center",this.sub((s,a)=>{s.screenshotFormat!==a.screenshotFormat&&o.setPlaceholder(r(this.state).toString()),s.screenshotQuality!==a.screenshotQuality&&o.setValue(s.screenshotQuality?.toString()??"")})})).addButton(i=>i.setTooltip("Reset to default").setIcon("reset").onClick(()=>{this.state.setScreenshotQuality(null)}).setDisabled(this.state.screenshotQuality===null).then(()=>{this.sub((o,s)=>{o.screenshotQuality!==s.screenshotQuality&&i.setDisabled(o.screenshotQuality===null)})})).then(i=>{this.sub((o,s)=>{o.screenshotFormat!==s.screenshotFormat&&(i.settingEl.style.display=o.screenshotFormat==="image/png"?"none":"")})})}noteTaking(){let{containerEl:n}=this;new de.Setting(n).setHeading().setName("Note taking"),new de.Setting(n).setDesc("Configure where timestamps and screenshots are inserted").setName("Insert location").addDropdown(r=>r.addOption("before","Latest content on top").addOption("after","Latest content at end").setValue(this.state.insertBefore===!0?"before":"after").onChange(i=>this.state.setInsertPosition(i))),this.timestamp(),this.screenshot()}webpage(){if(!de.Platform.isDesktopApp)return;let{containerEl:n}=this;new de.Setting(n).setHeading().setName("Webpage"),new de.Setting(n).setName("Login").setDesc("If website requires login to access content or request login during playback, you can open a browser page here to login.").addButton(r=>r.setCta().setButtonText("Open broswer").onClick(()=>{new os(this.app).open()}))}bilibili(){let{containerEl:n}=this;new de.Setting(n).setHeading().setName("Bilibili"),new de.Setting(n).setName("Default quality").setDesc(createFragment(r=>{r.appendText("The default quality for bilibili videos, will fallback to closest quality if not available"),r.createEl("br"),r.appendText("Only new videos will use this quality")})).addDropdown(r=>r.addOptions(XU).setValue(this.state.biliDefaultQuality.toString()).onChange(iH(i=>this.state.setBiliDefaultQuality(i))))}display(){let{containerEl:n}=this;n.empty(),this.webpage(),this.playback(),this.subtitle(),this.noteTaking(),this.linkOpen(),this.protocol(),this.bilibili()}};function iH(t){return e=>t(parseInt(e,10))}function V1(t){return e=>t(parseFloat(e))}function cd(t){return t.toString()}function Qx(t,e,n){return this.inputEl.min=t.toString(),this.inputEl.max=e.toString(),this.inputEl.step=n.toString(),this}var uH=require("url"),dH=I(Sd()),Tt=require("obsidian");var sH=require("obsidian");async function B1(t){if(!sH.Platform.isDesktopApp)throw new Error("Not supported in web");let e=await Om().showOpenDialog({title:"Pick a media file",message:"Pick a media file to open",buttonLabel:"Pick",properties:["openFile"],filters:[{extensions:Zo("video"),name:"Video"},{extensions:Zo("audio"),name:"Audio"}],defaultPath:t});return e.canceled?null:e.filePaths[0]??null}var aH=require("url"),lH=require("obsidian");var Zx=class t extends lH.FuzzySuggestModal{constructor(n){super(n.app);this.plugin=n;T(this,"resolve",Pp)}static choose(n){return new Promise(r=>{let i=new t(n);i.open(),i.resolve=r})}getItems(){return this.plugin.settings.getState().getUrlMappingData().filter(n=>n.appId===this.app.appId&&n.replace.startsWith("file://")).map(n=>({action:n.protocol,path:(0,aH.fileURLToPath)(n.replace),url:n.replace}))}getItemText(n){return`yn://${n.action}: ${n.path}`}onChooseItem(n){this.resolve(n)}onClose(){super.onClose(),setTimeout(()=>{this.resolve(null)},0)}};var ble=/^av(?<id>\d+)$/i,xle=/^BV1(?<id>[1-9A-HJ-NP-Za-km-z]{9})$/,_le=/^[\w-]{11}$/,kle=/^(?:(?:[a-zA-Z\d]|[a-zA-Z\d][a-zA-Z\d-]*[a-zA-Z\d])\.)*(?:[A-Za-z\d]|[A-Za-z\d][A-Za-z\d-]*[A-Za-z\d])$/;function U1(t){try{return(0,uH.pathToFileURL)(t)}catch(e){return console.error(`Failed to convert path ${t} to URL: `,e),null}}function cH(t){let e=en.isAbsolute(t)?U1(t):rr(t);return!e||["http:","https:"].includes(e.protocol)&&!kle.test(e.hostname)?null:e}var Jx=class extends Tt.SuggestModal{constructor(n){super(n.app);this.plugin=n;this.inputEl.addEventListener("drop",r=>{if(!r.dataTransfer||r.dataTransfer.files.length===0)return;let i=[...r.dataTransfer.files],o=[...r.dataTransfer.files].filter(l=>$t(en.extname(l.name)));if(o.length===0){new Tt.Notice(`Cannot open dropped file${i.length>1?"s":""}, not supported media file type`);return}let s=o[0];r.preventDefault();let a=r.target;a.value=s.path,a.dispatchEvent(new Event("input"))}),this.setPlaceholder("Enter file path, URL or media id, or drop a media file here"),this.setInstructions([{command:"\u2191\u2193",purpose:"to navigate"},{command:"\u21B5",purpose:"to open url"},{command:Tt.Platform.isMacOS?"\u2318 \u21B5":"ctrl \u21B5",purpose:"to open in new tab"},{command:Tt.Platform.isMacOS?"\u2318 \u2325 \u21B5":"ctrl alt \u21B5",purpose:"to open to the right"},{command:"esc",purpose:"to dismiss"}]),this.scope.register(null,"Enter",r=>(this.chooser.useSelectedItem(r),!1))}getSuggestions(n){let r=cH(n),i=[];if(!r){let a;if((a=n.match(ble))&&i.push(new URL(`https://www.bilibili.com/video/av${a.groups.id}`)),(a=n.match(xle))&&i.push(new URL(`https://www.bilibili.com/video/${n}`)),(a=n.match(_le))&&i.push(new URL(`https://www.youtube.com/watch?v=${n}`)),!a){let l=cH(`https://${n}`);l&&i.push(l)}}let o=i.map(a=>wt.create(a.href)).filter(a=>!!a),s=this.plugin.resolveUrl(r?.href);return s?[s,...o]:o}onNoSuggestion(){super.onNoSuggestion(),this.chooser.setSuggestions(["file-picker","file-protocol-picker"])}renderSuggestion(n,r){n instanceof wt?r.setText(decodeURI(n.href)):Te(n)?r.setText(n.file.path):n==="file-picker"?r.setText("Open local file"):n==="file-protocol-picker"?r.setText("Pick from folders defined in custom protocol"):(0,dH.assertNever)(n)}async onChooseSuggestion(n,r){let i;if(n==="file-protocol-picker"){let o=await Zx.choose(this.plugin);if(!o)return;let s=await B1(o.path);if(!s)return;if(!s.startsWith(o.path)){new Tt.Notice(`For protocol ${o.action}, the file must be in ${o.path}`);return}let a=U1(s);if(!a)return;let l=this.plugin.resolveUrl(a.href.replace(o.url.replace(/\/*$/,"/"),`yn://${o.action}/`));if(!l){new Tt.Notice(`Failed to resolve file protocol url: ${a.href} with ${o.url}`);return}i=l}else if(n==="file-picker"){let o=await B1();if(!o)return;let s=U1(o);if(!s){new Tt.Notice("Failed to convert file path to URL: "+o);return}let a=this.plugin.resolveUrl(s);if(!a){new Tt.Notice("Failed to resolve file: "+o);return}i=a}else i=n;if(!Te(i)){if(i.isFileUrl){if(i.hostname){new Tt.Notice(`Network path is not supported in obsidian, you need to map it to a local path: ${i.filePath??i.readableHref}`);return}let o=ga();if(!o){new Tt.Notice("File path is only supported in desktop app");return}try{if(!(await o.stat(i)).isFile()){new Tt.Notice("Not a file: "+i.readableHref);return}}catch(s){let a=s,l=i.filePath??i.href;a.code==="ENOENT"?new Tt.Notice("File not found: "+l):a.code==="EACCES"?new Tt.Notice("Permission denied: "+l):new Tt.Notice(`Failed to access file (${a.code}): `+l);return}}}console.debug("media selected",i),Tt.Keymap.isModifier(r,"Mod")&&Tt.Keymap.isModifier(r,"Alt")?this.plugin.leafOpener.openMedia(i,"split",{direction:"vertical"}):Tt.Keymap.isModifier(r,"Mod")?this.plugin.leafOpener.openMedia(i,"tab"):this.plugin.leafOpener.openMedia(i,!1)}};var sm=require("obsidian");var pH="yn-open";function fH(t){window.OBS_ACT&&t.register(yt(window,{OBS_ACT:r=>function(o){if(o.action.startsWith(pH+"/")){e(o);return}return r.apply(this,arguments)}})),t.registerObsidianProtocolHandler("yn-open",async r=>{let i=rr(r.url);if(!i){new sm.Notice("Invalid URL: "+r.url);return}await n(i)});async function e(r){let i=r.action.substring(pH.length+1),o=rr(i),s=new URLSearchParams(r);if(s.delete("action"),!o){new sm.Notice("Invalid URL: "+i+"?"+s.toString());return}o.search=s.toString(),await n(o)}async function n(r){let i=t.resolveUrl(r);if(!i){new sm.Notice("Invail URL: "+r.href);return}new sm.Notice(createFragment(o=>{o.appendText(`Opening ${i.type} from browser: `),o.createEl("br"),o.createEl("a",{text:r.href.length>50?r.href.slice(0,25)+"..."+r.href.slice(-25):r.href,href:r.href})})),await t.leafOpener.openMedia(i,"tab")}}function hH(t){function e(){new Jx(t).open()}t.addCommand({id:"open-media-switcher",name:"Open media",icon:"play",callback:e}),t.addRibbonIcon("play","Open media",e),fH(t)}var d_=require("obsidian"),dj=I(Tc());var uj=I(Sd()),El=I(H());var qe=function(){return qe=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qe.apply(this,arguments)};function Tle(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Sle(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function be(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}var Ele="ENTRIES",wH="KEYS",bH="VALUES",un="",H1=function(){function t(e,n){var r=e._tree,i=Array.from(r.keys());this.set=e,this._type=n,this._path=i.length>0?[{node:r,keys:i}]:[]}return t.prototype.next=function(){var e=this.dive();return this.backtrack(),e},t.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var e=ud(this._path),n=e.node,r=e.keys;if(ud(r)===un)return{done:!1,value:this.result()};var i=n.get(ud(r));return this._path.push({node:i,keys:Array.from(i.keys())}),this.dive()},t.prototype.backtrack=function(){if(this._path.length!==0){var e=ud(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}},t.prototype.key=function(){return this.set._prefix+this._path.map(function(e){var n=e.keys;return ud(n)}).filter(function(e){return e!==un}).join("")},t.prototype.value=function(){return ud(this._path).node.get(un)},t.prototype.result=function(){switch(this._type){case bH:return this.value();case wH:return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t}(),ud=function(t){return t[t.length-1]},Ple=function(t,e,n){var r=new Map;if(e===void 0)return r;for(var i=e.length+1,o=i+n,s=new Uint8Array(o*i).fill(n+1),a=0;a<i;++a)s[a]=a;for(var l=1;l<o;++l)s[l*i]=l;return xH(t,e,n,r,s,1,i,""),r},xH=function(t,e,n,r,i,o,s,a){var l,c,u=o*s;try{e:for(var d=be(t.keys()),p=d.next();!p.done;p=d.next()){var f=p.value;if(f===un){var h=i[u-1];h<=n&&r.set(a,[t.get(f),h])}else{for(var g=o,w=0;w<f.length;++w,++g){for(var m=f[w],y=s*g,v=y-s,b=i[y],k=Math.max(0,g-n-1),_=Math.min(s-1,g+n),S=k;S<_;++S){var C=m!==e[S],M=i[v+S]+ +C,x=i[v+S+1]+1,$=i[y+S]+1,L=i[y+S+1]=Math.min(M,x,$);L<b&&(b=L)}if(b>n)continue e}xH(t.get(f),e,n,r,i,g,s,a+f)}}}catch(F){l={error:F}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}},j1=function(){function t(e,n){e===void 0&&(e=new Map),n===void 0&&(n=""),this._size=void 0,this._tree=e,this._prefix=n}return t.prototype.atPrefix=function(e){var n,r;if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");var i=St(t_(this._tree,e.slice(this._prefix.length)),2),o=i[0],s=i[1];if(o===void 0){var a=St(Z1(s),2),l=a[0],c=a[1];try{for(var u=be(l.keys()),d=u.next();!d.done;d=u.next()){var p=d.value;if(p!==un&&p.startsWith(c)){var f=new Map;return f.set(p.slice(c.length),l.get(p)),new t(f,e)}}}catch(h){n={error:h}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}return new t(o,e)},t.prototype.clear=function(){this._size=void 0,this._tree.clear()},t.prototype.delete=function(e){return this._size=void 0,Cle(this._tree,e)},t.prototype.entries=function(){return new H1(this,Ele)},t.prototype.forEach=function(e){var n,r;try{for(var i=be(this),o=i.next();!o.done;o=i.next()){var s=St(o.value,2),a=s[0],l=s[1];e(a,l,this)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.fuzzyGet=function(e,n){return Ple(this._tree,e,n)},t.prototype.get=function(e){var n=G1(this._tree,e);return n!==void 0?n.get(un):void 0},t.prototype.has=function(e){var n=G1(this._tree,e);return n!==void 0&&n.has(un)},t.prototype.keys=function(){return new H1(this,wH)},t.prototype.set=function(e,n){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;var r=W1(this._tree,e);return r.set(un,n),this},Object.defineProperty(t.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var e=this.entries();!e.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),t.prototype.update=function(e,n){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;var r=W1(this._tree,e);return r.set(un,n(r.get(un))),this},t.prototype.fetch=function(e,n){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;var r=W1(this._tree,e),i=r.get(un);return i===void 0&&r.set(un,i=n()),i},t.prototype.values=function(){return new H1(this,bH)},t.prototype[Symbol.iterator]=function(){return this.entries()},t.from=function(e){var n,r,i=new t;try{for(var o=be(e),s=o.next();!s.done;s=o.next()){var a=St(s.value,2),l=a[0],c=a[1];i.set(l,c)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.fromObject=function(e){return t.from(Object.entries(e))},t}(),t_=function(t,e,n){var r,i;if(n===void 0&&(n=[]),e.length===0||t==null)return[t,n];try{for(var o=be(t.keys()),s=o.next();!s.done;s=o.next()){var a=s.value;if(a!==un&&e.startsWith(a))return n.push([t,a]),t_(t.get(a),e.slice(a.length),n)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.push([t,e]),t_(void 0,"",n)},G1=function(t,e){var n,r;if(e.length===0||t==null)return t;try{for(var i=be(t.keys()),o=i.next();!o.done;o=i.next()){var s=o.value;if(s!==un&&e.startsWith(s))return G1(t.get(s),e.slice(s.length))}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},W1=function(t,e){var n,r,i=e.length;e:for(var o=0;t&&o<i;){try{for(var s=(n=void 0,be(t.keys())),a=s.next();!a.done;a=s.next()){var l=a.value;if(l!==un&&e[o]===l[0]){for(var c=Math.min(i-o,l.length),u=1;u<c&&e[o+u]===l[u];)++u;var d=t.get(l);if(u===l.length)t=d;else{var p=new Map;p.set(l.slice(u),d),t.set(e.slice(o,o+u),p),t.delete(l),t=p}o+=u;continue e}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}var f=new Map;return t.set(e.slice(o),f),f}return t},Cle=function(t,e){var n=St(t_(t,e),2),r=n[0],i=n[1];if(r!==void 0){if(r.delete(un),r.size===0)_H(i);else if(r.size===1){var o=St(r.entries().next().value,2),s=o[0],a=o[1];kH(i,s,a)}}},_H=function(t){if(t.length!==0){var e=St(Z1(t),2),n=e[0],r=e[1];if(n.delete(r),n.size===0)_H(t.slice(0,-1));else if(n.size===1){var i=St(n.entries().next().value,2),o=i[0],s=i[1];o!==un&&kH(t.slice(0,-1),o,s)}}},kH=function(t,e,n){if(t.length!==0){var r=St(Z1(t),2),i=r[0],o=r[1];i.set(o+e,n),i.delete(o)}},Z1=function(t){return t[t.length-1]},am,J1="or",TH="and",Rle="and_not",SH=function(){function t(e){if(e?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');var n=e.autoVacuum==null||e.autoVacuum===!0?K1:e.autoVacuum;this._options=qe(qe(qe({},Y1),e),{autoVacuum:n,searchOptions:qe(qe({},mH),e.searchOptions||{}),autoSuggestOptions:qe(qe({},$le),e.autoSuggestOptions||{})}),this._index=new j1,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=X1,this.addFields(this._options.fields)}return t.prototype.add=function(e){var n,r,i,o,s,a,l=this._options,c=l.extractField,u=l.tokenize,d=l.processTerm,p=l.fields,f=l.idField,h=c(e,f);if(h==null)throw new Error('MiniSearch: document does not have ID field "'.concat(f,'"'));if(this._idToShortId.has(h))throw new Error("MiniSearch: duplicate ID ".concat(h));var g=this.addDocumentId(h);this.saveStoredFields(g,e);try{for(var w=be(p),m=w.next();!m.done;m=w.next()){var y=m.value,v=c(e,y);if(v!=null){var b=u(v.toString(),y),k=this._fieldIds[y],_=new Set(b).size;this.addFieldLength(g,k,this._documentCount-1,_);try{for(var S=(i=void 0,be(b)),C=S.next();!C.done;C=S.next()){var M=C.value,x=d(M,y);if(Array.isArray(x))try{for(var $=(s=void 0,be(x)),L=$.next();!L.done;L=$.next()){var F=L.value;this.addTerm(k,g,F)}}catch(N){s={error:N}}finally{try{L&&!L.done&&(a=$.return)&&a.call($)}finally{if(s)throw s.error}}else x&&this.addTerm(k,g,x)}}catch(N){i={error:N}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(i)throw i.error}}}}}catch(N){n={error:N}}finally{try{m&&!m.done&&(r=w.return)&&r.call(w)}finally{if(n)throw n.error}}},t.prototype.addAll=function(e){var n,r;try{for(var i=be(e),o=i.next();!o.done;o=i.next()){var s=o.value;this.add(s)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.addAllAsync=function(e,n){var r=this;n===void 0&&(n={});var i=n.chunkSize,o=i===void 0?10:i,s={chunk:[],promise:Promise.resolve()},a=e.reduce(function(u,d,p){var f=u.chunk,h=u.promise;return f.push(d),(p+1)%o===0?{chunk:[],promise:h.then(function(){return new Promise(function(g){return setTimeout(g,0)})}).then(function(){return r.addAll(f)})}:{chunk:f,promise:h}},s),l=a.chunk,c=a.promise;return c.then(function(){return r.addAll(l)})},t.prototype.remove=function(e){var n,r,i,o,s,a,l=this._options,c=l.tokenize,u=l.processTerm,d=l.extractField,p=l.fields,f=l.idField,h=d(e,f);if(h==null)throw new Error('MiniSearch: document does not have ID field "'.concat(f,'"'));var g=this._idToShortId.get(h);if(g==null)throw new Error("MiniSearch: cannot remove document with ID ".concat(h,": it is not in the index"));try{for(var w=be(p),m=w.next();!m.done;m=w.next()){var y=m.value,v=d(e,y);if(v!=null){var b=c(v.toString(),y),k=this._fieldIds[y],_=new Set(b).size;this.removeFieldLength(g,k,this._documentCount,_);try{for(var S=(i=void 0,be(b)),C=S.next();!C.done;C=S.next()){var M=C.value,x=u(M,y);if(Array.isArray(x))try{for(var $=(s=void 0,be(x)),L=$.next();!L.done;L=$.next()){var F=L.value;this.removeTerm(k,g,F)}}catch(N){s={error:N}}finally{try{L&&!L.done&&(a=$.return)&&a.call($)}finally{if(s)throw s.error}}else x&&this.removeTerm(k,g,x)}}catch(N){i={error:N}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(i)throw i.error}}}}}catch(N){n={error:N}}finally{try{m&&!m.done&&(r=w.return)&&r.call(w)}finally{if(n)throw n.error}}this._storedFields.delete(g),this._documentIds.delete(g),this._idToShortId.delete(h),this._fieldLength.delete(g),this._documentCount-=1},t.prototype.removeAll=function(e){var n,r;if(e)try{for(var i=be(e),o=i.next();!o.done;o=i.next()){var s=o.value;this.remove(s)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new j1,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},t.prototype.discard=function(e){var n=this,r=this._idToShortId.get(e);if(r==null)throw new Error("MiniSearch: cannot discard document with ID ".concat(e,": it is not in the index"));this._idToShortId.delete(e),this._documentIds.delete(r),this._storedFields.delete(r),(this._fieldLength.get(r)||[]).forEach(function(i,o){n.removeFieldLength(r,o,n._documentCount,i)}),this._fieldLength.delete(r),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()},t.prototype.maybeAutoVacuum=function(){if(this._options.autoVacuum!==!1){var e=this._options.autoVacuum,n=e.minDirtFactor,r=e.minDirtCount,i=e.batchSize,o=e.batchWait;this.conditionalVacuum({batchSize:i,batchWait:o},{minDirtCount:r,minDirtFactor:n})}},t.prototype.discardAll=function(e){var n,r,i=this._options.autoVacuum;try{this._options.autoVacuum=!1;try{for(var o=be(e),s=o.next();!s.done;s=o.next()){var a=s.value;this.discard(a)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}finally{this._options.autoVacuum=i}this.maybeAutoVacuum()},t.prototype.replace=function(e){var n=this._options,r=n.idField,i=n.extractField,o=i(e,r);this.discard(o),this.add(e)},t.prototype.vacuum=function(e){return e===void 0&&(e={}),this.conditionalVacuum(e)},t.prototype.conditionalVacuum=function(e,n){var r=this;return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&n,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(function(){var i=r._enqueuedVacuumConditions;return r._enqueuedVacuumConditions=X1,r.performVacuuming(e,i)}),this._enqueuedVacuum)):this.vacuumConditionsMet(n)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)},t.prototype.performVacuuming=function(e,n){return Tle(this,void 0,void 0,function(){var r,i,o,s,a,l,c,u,d,p,f,h,g,w,m,y,v,b,k,_,S,C,M,x,$;return Sle(this,function(L){switch(L.label){case 0:if(r=this._dirtCount,!this.vacuumConditionsMet(n))return[3,10];i=e.batchSize||Q1.batchSize,o=e.batchWait||Q1.batchWait,s=1,L.label=1;case 1:L.trys.push([1,7,8,9]),a=be(this._index),l=a.next(),L.label=2;case 2:if(l.done)return[3,6];c=St(l.value,2),u=c[0],d=c[1];try{for(p=(C=void 0,be(d)),f=p.next();!f.done;f=p.next()){h=St(f.value,2),g=h[0],w=h[1];try{for(m=(x=void 0,be(w)),y=m.next();!y.done;y=m.next())v=St(y.value,1),b=v[0],!this._documentIds.has(b)&&(w.size<=1?d.delete(g):w.delete(b))}catch(F){x={error:F}}finally{try{y&&!y.done&&($=m.return)&&$.call(m)}finally{if(x)throw x.error}}}}catch(F){C={error:F}}finally{try{f&&!f.done&&(M=p.return)&&M.call(p)}finally{if(C)throw C.error}}return this._index.get(u).size===0&&this._index.delete(u),s%i!==0?[3,4]:[4,new Promise(function(F){return setTimeout(F,o)})];case 3:L.sent(),L.label=4;case 4:s+=1,L.label=5;case 5:return l=a.next(),[3,2];case 6:return[3,9];case 7:return k=L.sent(),_={error:k},[3,9];case 8:try{l&&!l.done&&(S=a.return)&&S.call(a)}finally{if(_)throw _.error}return[7];case 9:this._dirtCount-=r,L.label=10;case 10:return[4,null];case 11:return L.sent(),this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null,[2]}})})},t.prototype.vacuumConditionsMet=function(e){if(e==null)return!0;var n=e.minDirtCount,r=e.minDirtFactor;return n=n||K1.minDirtCount,r=r||K1.minDirtFactor,this.dirtCount>=n&&this.dirtFactor>=r},Object.defineProperty(t.prototype,"isVacuuming",{get:function(){return this._currentVacuum!=null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtCount",{get:function(){return this._dirtCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtFactor",{get:function(){return this._dirtCount/(1+this._documentCount+this._dirtCount)},enumerable:!1,configurable:!0}),t.prototype.has=function(e){return this._idToShortId.has(e)},t.prototype.getStoredFields=function(e){var n=this._idToShortId.get(e);if(n!=null)return this._storedFields.get(n)},t.prototype.search=function(e,n){var r,i;n===void 0&&(n={});var o=this.executeQuery(e,n),s=[];try{for(var a=be(o),l=a.next();!l.done;l=a.next()){var c=St(l.value,2),u=c[0],d=c[1],p=d.score,f=d.terms,h=d.match,g=f.length||1,w={id:this._documentIds.get(u),score:p*g,terms:Object.keys(h),queryTerms:f,match:h};Object.assign(w,this._storedFields.get(u)),(n.filter==null||n.filter(w))&&s.push(w)}}catch(m){r={error:m}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return e===t.wildcard&&n.boostDocument==null&&this._options.searchOptions.boostDocument==null||s.sort(yH),s},t.prototype.autoSuggest=function(e,n){var r,i,o,s;n===void 0&&(n={}),n=qe(qe({},this._options.autoSuggestOptions),n);var a=new Map;try{for(var l=be(this.search(e,n)),c=l.next();!c.done;c=l.next()){var u=c.value,d=u.score,p=u.terms,f=p.join(" "),h=a.get(f);h!=null?(h.score+=d,h.count+=1):a.set(f,{score:d,terms:p,count:1})}}catch(k){r={error:k}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}var g=[];try{for(var w=be(a),m=w.next();!m.done;m=w.next()){var y=St(m.value,2),h=y[0],v=y[1],d=v.score,p=v.terms,b=v.count;g.push({suggestion:h,terms:p,score:d/b})}}catch(k){o={error:k}}finally{try{m&&!m.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}return g.sort(yH),g},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"termCount",{get:function(){return this._index.size},enumerable:!1,configurable:!0}),t.loadJSON=function(e,n){if(n==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),n)},t.getDefault=function(e){if(Y1.hasOwnProperty(e))return q1(Y1,e);throw new Error('MiniSearch: unknown option "'.concat(e,'"'))},t.loadJS=function(e,n){var r,i,o,s,a,l,c=e.index,u=e.documentCount,d=e.nextId,p=e.documentIds,f=e.fieldIds,h=e.fieldLength,g=e.averageFieldLength,w=e.storedFields,m=e.dirtCount,y=e.serializationVersion;if(y!==1&&y!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var v=new t(n);v._documentCount=u,v._nextId=d,v._documentIds=e_(p),v._idToShortId=new Map,v._fieldIds=f,v._fieldLength=e_(h),v._avgFieldLength=g,v._storedFields=e_(w),v._dirtCount=m||0,v._index=new j1;try{for(var b=be(v._documentIds),k=b.next();!k.done;k=b.next()){var _=St(k.value,2),S=_[0],C=_[1];v._idToShortId.set(C,S)}}catch(se){r={error:se}}finally{try{k&&!k.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}try{for(var M=be(c),x=M.next();!x.done;x=M.next()){var $=St(x.value,2),L=$[0],F=$[1],N=new Map;try{for(var W=(a=void 0,be(Object.keys(F))),Y=W.next();!Y.done;Y=W.next()){var J=Y.value,Q=F[J];y===1&&(Q=Q.ds),N.set(parseInt(J,10),e_(Q))}}catch(se){a={error:se}}finally{try{Y&&!Y.done&&(l=W.return)&&l.call(W)}finally{if(a)throw a.error}}v._index.set(L,N)}}catch(se){o={error:se}}finally{try{x&&!x.done&&(s=M.return)&&s.call(M)}finally{if(o)throw o.error}}return v},t.prototype.executeQuery=function(e,n){var r=this;if(n===void 0&&(n={}),e===t.wildcard)return this.executeWildcardQuery(n);if(typeof e!="string"){var i=qe(qe(qe({},n),e),{queries:void 0}),o=e.queries.map(function(w){return r.executeQuery(w,i)});return this.combineResults(o,i.combineWith)}var s=this._options,a=s.tokenize,l=s.processTerm,c=s.searchOptions,u=qe(qe({tokenize:a,processTerm:l},c),n),d=u.tokenize,p=u.processTerm,f=d(e).flatMap(function(w){return p(w)}).filter(function(w){return!!w}),h=f.map(Ale(u)),g=h.map(function(w){return r.executeQuerySpec(w,u)});return this.combineResults(g,u.combineWith)},t.prototype.executeQuerySpec=function(e,n){var r,i,o,s,a=qe(qe({},this._options.searchOptions),n),l=(a.fields||this._options.fields).reduce(function(J,Q){var se;return qe(qe({},J),(se={},se[Q]=q1(a.boost,Q)||1,se))},{}),c=a.boostDocument,u=a.weights,d=a.maxFuzzy,p=a.bm25,f=qe(qe({},mH.weights),u),h=f.fuzzy,g=f.prefix,w=this._index.get(e.term),m=this.termResults(e.term,e.term,1,w,l,c,p),y,v;if(e.prefix&&(y=this._index.atPrefix(e.term)),e.fuzzy){var b=e.fuzzy===!0?.2:e.fuzzy,k=b<1?Math.min(d,Math.round(e.term.length*b)):b;k&&(v=this._index.fuzzyGet(e.term,k))}if(y)try{for(var _=be(y),S=_.next();!S.done;S=_.next()){var C=St(S.value,2),M=C[0],x=C[1],$=M.length-e.term.length;if($){v?.delete(M);var L=g*M.length/(M.length+.3*$);this.termResults(e.term,M,L,x,l,c,p,m)}}}catch(J){r={error:J}}finally{try{S&&!S.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}if(v)try{for(var F=be(v.keys()),N=F.next();!N.done;N=F.next()){var M=N.value,W=St(v.get(M),2),Y=W[0],$=W[1];if($){var L=h*M.length/(M.length+$);this.termResults(e.term,M,L,Y,l,c,p,m)}}}catch(J){o={error:J}}finally{try{N&&!N.done&&(s=F.return)&&s.call(F)}finally{if(o)throw o.error}}return m},t.prototype.executeWildcardQuery=function(e){var n,r,i=new Map,o=qe(qe({},this._options.searchOptions),e);try{for(var s=be(this._documentIds),a=s.next();!a.done;a=s.next()){var l=St(a.value,2),c=l[0],u=l[1],d=o.boostDocument?o.boostDocument(u,"",this._storedFields.get(c)):1;i.set(c,{score:d,terms:[],match:{}})}}catch(p){n={error:p}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.prototype.combineResults=function(e,n){if(n===void 0&&(n=J1),e.length===0)return new Map;var r=n.toLowerCase();return e.reduce(Mle[r])||new Map},t.prototype.toJSON=function(){var e,n,r,i,o=[];try{for(var s=be(this._index),a=s.next();!a.done;a=s.next()){var l=St(a.value,2),c=l[0],u=l[1],d={};try{for(var p=(r=void 0,be(u)),f=p.next();!f.done;f=p.next()){var h=St(f.value,2),g=h[0],w=h[1];d[g]=Object.fromEntries(w)}}catch(m){r={error:m}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}o.push([c,d])}}catch(m){e={error:m}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:o,serializationVersion:2}},t.prototype.termResults=function(e,n,r,i,o,s,a,l){var c,u,d,p,f;if(l===void 0&&(l=new Map),i==null)return l;try{for(var h=be(Object.keys(o)),g=h.next();!g.done;g=h.next()){var w=g.value,m=o[w],y=this._fieldIds[w],v=i.get(y);if(v!=null){var b=v.size,k=this._avgFieldLength[y];try{for(var _=(d=void 0,be(v.keys())),S=_.next();!S.done;S=_.next()){var C=S.value;if(!this._documentIds.has(C)){this.removeTerm(y,C,n),b-=1;continue}var M=s?s(this._documentIds.get(C),n,this._storedFields.get(C)):1;if(M){var x=v.get(C),$=this._fieldLength.get(C)[y],L=Lle(x,b,this._documentCount,$,k,a),F=r*m*M*L,N=l.get(C);if(N){N.score+=F,Ole(N.terms,e);var W=q1(N.match,n);W?W.push(w):N.match[n]=[w]}else l.set(C,{score:F,terms:[e],match:(f={},f[n]=[w],f)})}}}catch(Y){d={error:Y}}finally{try{S&&!S.done&&(p=_.return)&&p.call(_)}finally{if(d)throw d.error}}}}}catch(Y){c={error:Y}}finally{try{g&&!g.done&&(u=h.return)&&u.call(h)}finally{if(c)throw c.error}}return l},t.prototype.addTerm=function(e,n,r){var i=this._index.fetch(r,vH),o=i.get(e);if(o==null)o=new Map,o.set(n,1),i.set(e,o);else{var s=o.get(n);o.set(n,(s||0)+1)}},t.prototype.removeTerm=function(e,n,r){if(!this._index.has(r)){this.warnDocumentChanged(n,e,r);return}var i=this._index.fetch(r,vH),o=i.get(e);o==null||o.get(n)==null?this.warnDocumentChanged(n,e,r):o.get(n)<=1?o.size<=1?i.delete(e):o.delete(n):o.set(n,o.get(n)-1),this._index.get(r).size===0&&this._index.delete(r)},t.prototype.warnDocumentChanged=function(e,n,r){var i,o;try{for(var s=be(Object.keys(this._fieldIds)),a=s.next();!a.done;a=s.next()){var l=a.value;if(this._fieldIds[l]===n){this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(e),' has changed before removal: term "').concat(r,'" was not present in field "').concat(l,'". Removing a document after it has changed can corrupt the index!'),"version_conflict");return}}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.addDocumentId=function(e){var n=this._nextId;return this._idToShortId.set(e,n),this._documentIds.set(n,e),this._documentCount+=1,this._nextId+=1,n},t.prototype.addFields=function(e){for(var n=0;n<e.length;n++)this._fieldIds[e[n]]=n},t.prototype.addFieldLength=function(e,n,r,i){var o=this._fieldLength.get(e);o==null&&this._fieldLength.set(e,o=[]),o[n]=i;var s=this._avgFieldLength[n]||0,a=s*r+i;this._avgFieldLength[n]=a/(r+1)},t.prototype.removeFieldLength=function(e,n,r,i){if(r===1){this._avgFieldLength[n]=0;return}var o=this._avgFieldLength[n]*r-i;this._avgFieldLength[n]=o/(r-1)},t.prototype.saveStoredFields=function(e,n){var r,i,o=this._options,s=o.storeFields,a=o.extractField;if(!(s==null||s.length===0)){var l=this._storedFields.get(e);l==null&&this._storedFields.set(e,l={});try{for(var c=be(s),u=c.next();!u.done;u=c.next()){var d=u.value,p=a(n,d);p!==void 0&&(l[d]=p)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}},t.wildcard=Symbol("*"),t}(),q1=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},Mle=(am={},am[J1]=function(t,e){var n,r;try{for(var i=be(e.keys()),o=i.next();!o.done;o=i.next()){var s=o.value,a=t.get(s);if(a==null)t.set(s,e.get(s));else{var l=e.get(s),c=l.score,u=l.terms,d=l.match;a.score=a.score+c,a.match=Object.assign(a.match,d),gH(a.terms,u)}}}catch(p){n={error:p}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},am[TH]=function(t,e){var n,r,i=new Map;try{for(var o=be(e.keys()),s=o.next();!s.done;s=o.next()){var a=s.value,l=t.get(a);if(l!=null){var c=e.get(a),u=c.score,d=c.terms,p=c.match;gH(l.terms,d),i.set(a,{score:l.score+u,terms:l.terms,match:Object.assign(l.match,p)})}}}catch(f){n={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},am[Rle]=function(t,e){var n,r;try{for(var i=be(e.keys()),o=i.next();!o.done;o=i.next()){var s=o.value;t.delete(s)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},am),Ile={k:1.2,b:.7,d:.5},Lle=function(t,e,n,r,i,o){var s=o.k,a=o.b,l=o.d,c=Math.log(1+(n-e+.5)/(e+.5));return c*(l+t*(s+1)/(t+s*(1-a+a*r/i)))},Ale=function(t){return function(e,n,r){var i=typeof t.fuzzy=="function"?t.fuzzy(e,n,r):t.fuzzy||!1,o=typeof t.prefix=="function"?t.prefix(e,n,r):t.prefix===!0;return{term:e,fuzzy:i,prefix:o}}},Y1={idField:"id",extractField:function(t,e){return t[e]},tokenize:function(t){return t.split(Dle)},processTerm:function(t){return t.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[],logger:function(t,e){typeof console?.[t]=="function"&&console[t](e)},autoVacuum:!0},mH={combineWith:J1,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Ile},$le={combineWith:TH,prefix:function(t,e,n){return e===n.length-1}},Q1={batchSize:1e3,batchWait:10},X1={minDirtFactor:.1,minDirtCount:20},K1=qe(qe({},Q1),X1),Ole=function(t,e){t.includes(e)||t.push(e)},gH=function(t,e){var n,r;try{for(var i=be(e),o=i.next();!o.done;o=i.next()){var s=o.value;t.includes(s)||t.push(s)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},yH=function(t,e){var n=t.score,r=e.score;return r-n},vH=function(){return new Map},e_=function(t){var e,n,r=new Map;try{for(var i=be(Object.keys(t)),o=i.next();!o.done;o=i.next()){var s=o.value;r.set(parseInt(s,10),t[s])}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},Dle=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;var lm=require("obsidian"),cm=I(H());function EH(){return Sc((e,n,r)=>({source:null,title:null,showSearchBox:!1,media:null,activeCueIDs:new Set,updateActiveCues(i){let o=n().activeCueIDs,s=new Set(i);o.size===s.size&&[...o].every(a=>s.has(a))||e({activeCueIDs:s})},setLinkedMedia(i){let o=n().media;return Xn(o,i)?!1:(e({media:i}),!0)},toggleSearchBox(i){e(typeof i=="boolean"?{showSearchBox:i}:({showSearchBox:o})=>({showSearchBox:!o}))},textTrack:null,setCaptions(i){if(!i){e({textTrack:null,title:null});return}let{track:o,locales:s}=i,{metadata:a,cues:l}=o.content,c=a.Label||o.label,u=a.Language||o.language,d=c||(lh(u)?yu(u):"");d&&a.Title&&(d=a.Title+" - "+d),e({title:d??null}),n().textTrack?._minisearch?.removeAll();let p=Fle(...i.locales),f=new SH({idField:"id",fields:["text"],tokenize:p?h=>[...p.segment(h)].filter(g=>g.isWordLike).map(g=>g.segment):void 0});f.addAll(l),e({textTrack:{_minisearch:f,locales:s,content:o.content,id:i.id}})},search(i,o){let s=n().textTrack?._minisearch;return s?s.search(i,o).map(l=>({matches:Object.keys(l.match),queryTerms:l.queryTerms,score:l.score,id:l.id})):[]}}))}function Fle(...t){return typeof window.Intl>"u"||typeof Intl.Segmenter>"u"?null:new Intl.Segmenter(t,{granularity:"word"})}var n_=(0,cm.createContext)(null);function Ko(t){let{store:e}=(0,cm.useContext)(n_);return Ep(e,t)}function PH(){let{plugin:t}=(0,cm.useContext)(n_);return t}function CH(){let t=Ko(n=>!!n.textTrack?._minisearch),e=Ko(n=>n.search);return t?e:null}function RH(){let t=Ko(n=>n.showSearchBox),e=Ko(n=>n.toggleSearchBox);return[t,e]}function MH(){let t=PH(),e=Ko(n=>n.media);if(e)return async(n,r)=>{let i=e instanceof wt?e.clone():{...e};i.hash=`#t=${r}`,await t.leafOpener.openMedia(i,Yl(n.nativeEvent),{fromUser:!0})}}function eR(){let t=PH(),e=Ko(n=>n.media);return e?function(n,r){let o=es(n,e,{app:t.app,settings:t.settings.getState()})(""),s=(0,lm.htmlToMarkdown)(`<pre>${r}</pre>`);return{text:`${o} ${s}`,timestamp:o}}:function(n,r){let i=(0,lm.htmlToMarkdown)(`<pre>${r}</pre>`),o=Jo(n);return{text:`${o} ${i}`,timestamp:o}}}function IH(){let t=eR();return async(e,n,r)=>{let{text:i,timestamp:o}=await t(n,r);await navigator.clipboard.writeText(i),new lm.Notice(`Copied at ${o} to clipboard`)}}var la=I(H(),1),BH=I(bo(),1);function Tl(t,e,n){let r=n.initialDeps??[],i;function o(){var s,a,l,c;let u;n.key&&((s=n.debug)!=null&&s.call(n))&&(u=Date.now());let d=t();if(!(d.length!==r.length||d.some((h,g)=>r[g]!==h)))return i;r=d;let f;if(n.key&&((a=n.debug)!=null&&a.call(n))&&(f=Date.now()),i=e(...d),n.key&&((l=n.debug)!=null&&l.call(n))){let h=Math.round((Date.now()-u)*100)/100,g=Math.round((Date.now()-f)*100)/100,w=g/16,m=(y,v)=>{for(y=String(y);y.length<v;)y=" "+y;return y};console.info(`%c\u23F1 ${m(g,5)} /${m(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*w,120))}deg 100% 31%);`,n?.key)}return(c=n?.onChange)==null||c.call(n,i),i}return o.updateDeps=s=>{r=s},o}function r_(t,e){if(t===void 0)throw new Error(`Unexpected undefined${e?`: ${e}`:""}`);return t}var LH=(t,e)=>Math.abs(t-e)<1,AH=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}};var Nle=t=>t,Vle=t=>{let e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},DH=(t,e)=>{let n=t.scrollElement;if(!n)return;let r=t.targetWindow;if(!r)return;let i=s=>{let{width:a,height:l}=s;e({width:Math.round(a),height:Math.round(l)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};let o=new r.ResizeObserver(s=>{let a=()=>{let l=s[0];if(l?.borderBoxSize){let c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(n.getBoundingClientRect())};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return o.observe(n,{box:"border-box"}),()=>{o.unobserve(n)}},$H={passive:!0};var OH=typeof window>"u"?!0:"onscrollend"in window,FH=(t,e)=>{let n=t.scrollElement;if(!n)return;let r=t.targetWindow;if(!r)return;let i=0,o=t.options.useScrollendEvent&&OH?()=>{}:AH(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),s=u=>()=>{let{horizontal:d,isRtl:p}=t.options;i=d?n.scrollLeft*(p&&-1||1):n.scrollTop,o(),e(i,u)},a=s(!0),l=s(!1);l(),n.addEventListener("scroll",a,$H);let c=t.options.useScrollendEvent&&OH;return c&&n.addEventListener("scrollend",l,$H),()=>{n.removeEventListener("scroll",a),c&&n.removeEventListener("scrollend",l)}};var zle=(t,e,n)=>{if(e?.borderBoxSize){let r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[n.options.horizontal?"width":"height"])};var NH=(t,{adjustments:e=0,behavior:n},r)=>{var i,o;let s=t+e;(o=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||o.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})},i_=class{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null,r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(o=>{let s=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var o;return(o=r())==null?void 0:o.observe(i,{box:"border-box"})},unobserve:i=>{var o;return(o=r())==null?void 0:o.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Nle,rangeExtractor:Vle,onChange:()=>{},measureElement:zle,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Tl(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;let r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=o,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{let i=new Map,o=new Map;for(let s=r-1;s>=0;s--){let a=n[s];if(i.has(a.lane))continue;let l=o.get(a.lane);if(l==null||a.end>l.end?o.set(a.lane,a):a.end<l.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((s,a)=>s.end===a.end?s.index-a.index:s.end-a.end)[0]:void 0},this.getMeasurementOptions=Tl(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,o,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:o,enabled:s}),{key:!1}),this.getMeasurements=Tl(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:o,enabled:s},a)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));let l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];let c=this.measurementsCache.slice(0,l);for(let u=l;u<n;u++){let d=o(u),p=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),f=p?p.end+this.options.gap:r+i,h=a.get(d),g=typeof h=="number"?h:this.options.estimateSize(u),w=f+g,m=p?p.lane:u%this.options.lanes;c[u]={index:u,start:f,size:g,end:w,key:d,lane:m}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Tl(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,o)=>this.range=n.length>0&&r>0?Ble({measurements:n,outerSize:r,scrollOffset:i,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Tl(()=>{let n=null,r=null,i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,o,s)=>o===null||s===null?[]:n({startIndex:o,endIndex:s,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{let r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{let i=this.indexFromElement(n),o=this.measurementsCache[i];if(!o)return;let s=o.key,a=this.elementsCache.get(s);a!==n&&(a&&this.observer.unobserve(a),this.observer.observe(n),this.elementsCache.set(s,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{let i=this.measurementsCache[n];if(!i)return;let o=this.itemSizeCache.get(i.key)??i.size,s=r-o;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Tl(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{let i=[];for(let o=0,s=n.length;o<s;o++){let a=n[o],l=r[a];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{let r=this.getMeasurements();if(r.length!==0)return r_(r[VH(0,r.length-1,i=>r_(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{let o=this.getSize(),s=this.getScrollOffset();r==="auto"&&(r=n>=s+o?"end":"start"),r==="center"?n+=(i-o)/2:r==="end"&&(n-=o);let a=this.options.horizontal?"scrollWidth":"scrollHeight",c=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[a]:this.scrollElement[a]:0)-o;return Math.max(Math.min(c,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));let i=this.measurementsCache[n];if(!i)return;let o=this.getSize(),s=this.getScrollOffset();if(r==="auto")if(i.end>=s+o-this.options.scrollPaddingEnd)r="end";else if(i.start<=s+this.options.scrollPaddingStart)r="start";else return[s,r];let a=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");let o=this.getOffsetForIndex(n,r);if(!o)return;let[s,a]=o;this._scrollToOffset(s,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){let[c]=r_(this.getOffsetForIndex(n,a));LH(c,this.getScrollOffset())||this.scrollToIndex(n,{align:a,behavior:i})}else this.scrollToIndex(n,{align:a,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;let r=this.getMeasurements(),i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{let o=Array(this.options.lanes).fill(null),s=r.length-1;for(;s>=0&&o.some(a=>a===null);){let a=r[s];o[a.lane]===null&&(o[a.lane]=a.end),s--}i=Math.max(...o.filter(a=>a!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}},VH=(t,e,n,r)=>{for(;t<=e;){let i=(t+e)/2|0,o=n(i);if(o<r)t=i+1;else if(o>r)e=i-1;else return i}return t>0?t-1:0};function Ble({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){let i=t.length-1,o=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let s=VH(0,i,o,n),a=s;if(r===1)for(;a<i&&t[a].end<n+e;)a++;else if(r>1){let l=Array(r).fill(0);for(;a<i&&l.some(u=>u<n+e);){let u=t[a];l[u.lane]=u.end,a++}let c=Array(r).fill(n+e);for(;s>=0&&c.some(u=>u>=n);){let u=t[s];c[u.lane]=u.start,s--}s=Math.max(0,s-s%r),a=Math.min(i,a+(r-1-a%r))}return{startIndex:s,endIndex:a}}var zH=typeof document<"u"?la.useLayoutEffect:la.useEffect;function Ule(t){let e=la.useReducer(()=>({}),{})[1],n={...t,onChange:(i,o)=>{var s;o?(0,BH.flushSync)(e):e(),(s=t.onChange)==null||s.call(t,i,o)}},[r]=la.useState(()=>new i_(n));return r.setOptions(n),zH(()=>r._didMount(),[]),zH(()=>r._willUpdate()),r}function UH(t){return Ule({observeElementRect:DH,observeElementOffset:FH,scrollToFn:NH,...t})}var no=I(H());var te=I(H(),1);var jH=I(H(),1),Ae=I(X(),1);function Hle(t,e){return jH.useReducer((n,r)=>e[n][r]??n,t)}var tR="ScrollArea",[WH,n2e]=Ou(tR),[jle,ti]=WH(tR),qH=te.forwardRef((t,e)=>{let{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:o=600,...s}=t,[a,l]=te.useState(null),[c,u]=te.useState(null),[d,p]=te.useState(null),[f,h]=te.useState(null),[g,w]=te.useState(null),[m,y]=te.useState(0),[v,b]=te.useState(0),[k,_]=te.useState(!1),[S,C]=te.useState(!1),M=gt(e,$=>l($)),x=Ab(i);return(0,Ae.jsx)(jle,{scope:n,type:r,dir:x,scrollHideDelay:o,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:p,scrollbarX:f,onScrollbarXChange:h,scrollbarXEnabled:k,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:y,onCornerHeightChange:b,children:(0,Ae.jsx)(Vt.div,{dir:x,...s,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":m+"px","--radix-scroll-area-corner-height":v+"px",...t.style}})})});qH.displayName=tR;var YH="ScrollAreaViewport",KH=te.forwardRef((t,e)=>{let{__scopeScrollArea:n,children:r,nonce:i,...o}=t,s=ti(YH,n),a=te.useRef(null),l=gt(e,a,s.onViewportChange);return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),(0,Ae.jsx)(Vt.div,{"data-radix-scroll-area-viewport":"",...o,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t.style},children:(0,Ae.jsx)("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});KH.displayName=YH;var to="ScrollAreaScrollbar",a_=te.forwardRef((t,e)=>{let{forceMount:n,...r}=t,i=ti(to,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:s}=i,a=t.orientation==="horizontal";return te.useEffect(()=>(a?o(!0):s(!0),()=>{a?o(!1):s(!1)}),[a,o,s]),i.type==="hover"?(0,Ae.jsx)(Wle,{...r,ref:e,forceMount:n}):i.type==="scroll"?(0,Ae.jsx)(qle,{...r,ref:e,forceMount:n}):i.type==="auto"?(0,Ae.jsx)(GH,{...r,ref:e,forceMount:n}):i.type==="always"?(0,Ae.jsx)(nR,{...r,ref:e}):null});a_.displayName=to;var Wle=te.forwardRef((t,e)=>{let{forceMount:n,...r}=t,i=ti(to,t.__scopeScrollArea),[o,s]=te.useState(!1);return te.useEffect(()=>{let a=i.scrollArea,l=0;if(a){let c=()=>{window.clearTimeout(l),s(!0)},u=()=>{l=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),(0,Ae.jsx)(jo,{present:n||o,children:(0,Ae.jsx)(GH,{"data-state":o?"visible":"hidden",...r,ref:e})})}),qle=te.forwardRef((t,e)=>{let{forceMount:n,...r}=t,i=ti(to,t.__scopeScrollArea),o=t.orientation==="horizontal",s=c_(()=>l("SCROLL_END"),100),[a,l]=Hle("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return te.useEffect(()=>{if(a==="idle"){let c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),te.useEffect(()=>{let c=i.viewport,u=o?"scrollLeft":"scrollTop";if(c){let d=c[u],p=()=>{let f=c[u];d!==f&&(l("SCROLL"),s()),d=f};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[i.viewport,o,l,s]),(0,Ae.jsx)(jo,{present:n||a!=="hidden",children:(0,Ae.jsx)(nR,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:We(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:We(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),GH=te.forwardRef((t,e)=>{let n=ti(to,t.__scopeScrollArea),{forceMount:r,...i}=t,[o,s]=te.useState(!1),a=t.orientation==="horizontal",l=c_(()=>{if(n.viewport){let c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;s(a?c:u)}},10);return dd(n.viewport,l),dd(n.content,l),(0,Ae.jsx)(jo,{present:r||o,children:(0,Ae.jsx)(nR,{"data-state":o?"visible":"hidden",...i,ref:e})})}),nR=te.forwardRef((t,e)=>{let{orientation:n="vertical",...r}=t,i=ti(to,t.__scopeScrollArea),o=te.useRef(null),s=te.useRef(0),[a,l]=te.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=JH(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:p=>o.current=p,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:p=>s.current=p};function d(p,f){return Zle(p,s.current,a,f)}return n==="horizontal"?(0,Ae.jsx)(Yle,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){let p=i.viewport.scrollLeft,f=HH(p,a,i.dir);o.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=d(p,i.dir))}}):n==="vertical"?(0,Ae.jsx)(Kle,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&o.current){let p=i.viewport.scrollTop,f=HH(p,a);o.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=d(p))}}):null}),Yle=te.forwardRef((t,e)=>{let{sizes:n,onSizesChange:r,...i}=t,o=ti(to,t.__scopeScrollArea),[s,a]=te.useState(),l=te.useRef(null),c=gt(e,l,o.onScrollbarXChange);return te.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),(0,Ae.jsx)(XH,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":l_(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(o.viewport){let p=o.viewport.scrollLeft+u.deltaX;t.onWheelScroll(p),tj(p,d)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&s&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:s_(s.paddingLeft),paddingEnd:s_(s.paddingRight)}})}})}),Kle=te.forwardRef((t,e)=>{let{sizes:n,onSizesChange:r,...i}=t,o=ti(to,t.__scopeScrollArea),[s,a]=te.useState(),l=te.useRef(null),c=gt(e,l,o.onScrollbarYChange);return te.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),(0,Ae.jsx)(XH,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":l_(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(o.viewport){let p=o.viewport.scrollTop+u.deltaY;t.onWheelScroll(p),tj(p,d)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&s&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:s_(s.paddingTop),paddingEnd:s_(s.paddingBottom)}})}})}),[Gle,QH]=WH(to),XH=te.forwardRef((t,e)=>{let{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:s,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...p}=t,f=ti(to,n),[h,g]=te.useState(null),w=gt(e,M=>g(M)),m=te.useRef(null),y=te.useRef(""),v=f.viewport,b=r.content-r.viewport,k=vr(u),_=vr(l),S=c_(d,10);function C(M){if(m.current){let x=M.clientX-m.current.left,$=M.clientY-m.current.top;c({x,y:$})}}return te.useEffect(()=>{let M=x=>{let $=x.target;h?.contains($)&&k(x,b)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[v,h,b,k]),te.useEffect(_,[r,_]),dd(h,S),dd(f.content,S),(0,Ae.jsx)(Gle,{scope:n,scrollbar:h,hasThumb:i,onThumbChange:vr(o),onThumbPointerUp:vr(s),onThumbPositionChange:_,onThumbPointerDown:vr(a),children:(0,Ae.jsx)(Vt.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:We(t.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),m.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),C(M))}),onPointerMove:We(t.onPointerMove,C),onPointerUp:We(t.onPointerUp,M=>{let x=M.target;x.hasPointerCapture(M.pointerId)&&x.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=y.current,f.viewport&&(f.viewport.style.scrollBehavior=""),m.current=null})})})}),o_="ScrollAreaThumb",rR=te.forwardRef((t,e)=>{let{forceMount:n,...r}=t,i=QH(o_,t.__scopeScrollArea);return(0,Ae.jsx)(jo,{present:n||i.hasThumb,children:(0,Ae.jsx)(Qle,{ref:e,...r})})}),Qle=te.forwardRef((t,e)=>{let{__scopeScrollArea:n,style:r,...i}=t,o=ti(o_,n),s=QH(o_,n),{onThumbPositionChange:a}=s,l=gt(e,d=>s.onThumbChange(d)),c=te.useRef(void 0),u=c_(()=>{c.current&&(c.current(),c.current=void 0)},100);return te.useEffect(()=>{let d=o.viewport;if(d){let p=()=>{if(u(),!c.current){let f=Jle(d,a);c.current=f,a()}};return a(),d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[o.viewport,u,a]),(0,Ae.jsx)(Vt.div,{"data-state":s.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:We(t.onPointerDownCapture,d=>{let f=d.target.getBoundingClientRect(),h=d.clientX-f.left,g=d.clientY-f.top;s.onThumbPointerDown({x:h,y:g})}),onPointerUp:We(t.onPointerUp,s.onThumbPointerUp)})});rR.displayName=o_;var iR="ScrollAreaCorner",ZH=te.forwardRef((t,e)=>{let n=ti(iR,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?(0,Ae.jsx)(Xle,{...t,ref:e}):null});ZH.displayName=iR;var Xle=te.forwardRef((t,e)=>{let{__scopeScrollArea:n,...r}=t,i=ti(iR,n),[o,s]=te.useState(0),[a,l]=te.useState(0),c=!!(o&&a);return dd(i.scrollbarX,()=>{let u=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(u),l(u)}),dd(i.scrollbarY,()=>{let u=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(u),s(u)}),c?(0,Ae.jsx)(Vt.div,{...r,ref:e,style:{width:o,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function s_(t){return t?parseInt(t,10):0}function JH(t,e){let n=t/e;return isNaN(n)?0:n}function l_(t){let e=JH(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Zle(t,e,n,r="ltr"){let i=l_(n),o=i/2,s=e||o,a=i-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return ej([l,c],d)(t)}function HH(t,e,n="ltr"){let r=l_(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-i,s=e.content-e.viewport,a=o-r,l=n==="ltr"?[0,s]:[s*-1,0],c=Fh(t,l);return ej([0,s],[0,a])(c)}function ej(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];let r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function tj(t,e){return t>0&&t<e}var Jle=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){let o={left:t.scrollLeft,top:t.scrollTop},s=n.left!==o.left,a=n.top!==o.top;(s||a)&&e(),n=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function c_(t,e){let n=vr(t),r=te.useRef(0);return te.useEffect(()=>()=>window.clearTimeout(r.current),[]),te.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function dd(t,e){let n=vr(e);wr(()=>{let r=0;if(t){let i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var oR=qH,nj=KH;var rj=ZH;var sR=I(H());var ca=I(X()),aR=sR.forwardRef(({className:t,children:e,...n},r)=>(0,ca.jsxs)(oR,{className:mt("relative overflow-hidden",t),...n,children:[(0,ca.jsx)(nj,{className:"h-full w-full rounded-[inherit]",ref:r,children:e}),(0,ca.jsx)(ij,{}),(0,ca.jsx)(rj,{})]}));aR.displayName=oR.displayName;var ij=sR.forwardRef(({className:t,orientation:e="vertical",...n},r)=>(0,ca.jsx)(a_,{ref:r,orientation:e,className:mt("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:(0,ca.jsx)(rR,{className:"relative flex-1 rounded-full bg-mod-border"})}));ij.displayName=a_.displayName;var pd=I(H());var Zt=I(X());function oj({onPlay:t,onCopy:e}){return(0,Zt.jsxs)(Zt.Fragment,{children:[e&&(0,Zt.jsx)("div",{role:"button",tabIndex:0,onClick:e,"aria-label":"Copy markdown",onKeyDown:n=>{n.key==="Enter"&&e(n)},children:(0,Zt.jsx)(t5,{className:"w-3 h-3"})}),t&&(0,Zt.jsx)("div",{role:"button",tabIndex:0,onClick:t,onKeyDown:n=>{n.key==="Enter"&&t(n)},children:(0,Zt.jsx)(_b,{className:"w-3 h-3"})})]})}var sj=(0,pd.forwardRef)(function({children:e,matches:n,time:r,className:i,actions:o,active:s=!1,...a},l){let c=n?nce(e,n):(f=>{let h=[];return aj(f,h,0),h})(e),u=eR(),d=(0,pd.useRef)(null),p=zh([l,d]);return(0,Zt.jsxs)("div",{...a,ref:p,className:mt("grid items-center group hover:bg-accent pr-2 py-1 mr-1 transition-all rounded-md hover:delay-100",i,n?.length&&"bg-text-highlight bg-opacity-10",s&&"text-md font-semibold"),children:[(0,Zt.jsx)("div",{className:"text-xs font-medium select-none text-gray-400 group-hover:text-black group-hover:pl-1 transition-all flex items-center group-hover:delay-100",children:(0,Zt.jsxs)("div",{className:"flex cursor-pointer items-center",draggable:!0,onDragStart:f=>{f.dataTransfer.setData("text/plain",u(r,e).text),f.dataTransfer.dropEffect="copy",f.dataTransfer.setDragImage(d.current,0,0)},children:[(0,Zt.jsx)(rce,{children:r}),(0,Zt.jsx)("div",{className:"ml-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity group-hover:duration-300 group-hover:delay-100",children:o})]})}),(0,Zt.jsx)("p",{className:"select-text",children:c})]})});function tce(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function nce(t,e){let n=new RegExp(e.map(i=>i.trim()).filter(Boolean).map(tce).join("|"),"gi"),r=[...t.matchAll(n)].reduceRight((i,o)=>{let s=o.index,a=o[0],l=t.slice(s+a.length);return aj(l,i,s),i.push((0,Zt.jsx)("mark",{children:a},s)),t=t.slice(0,s),i},[]);return r.push(t),r.reverse(),r}function rce({children:t}){let e=(0,pd.useMemo)(()=>Jo(t),[t]);return(0,Zt.jsx)("span",{children:e})}function aj(t,e,n){t.includes(`
`)?t.split(`
`).forEach((r,i)=>{i===0?e.push(r):e.push((0,Zt.jsx)("br",{},`${n}seg-${i}`),r)}):e.push(t)}var fd=I(X()),lj=(0,no.forwardRef)(function({children:e,className:n,searchResult:r,onPlay:i,onCopy:o,activeCueIDs:s},a){let l=(0,no.useRef)(null),c=(0,no.useMemo)(()=>new Map(r?.map(p=>[p.id,p.matches])??[]),[r]),u=UH({count:e.length,getScrollElement:()=>l.current,estimateSize:()=>45,overscan:20});(0,no.useEffect)(()=>{if(!s)return;let[p]=s;if(!p)return;let f=e.findIndex(h=>h.id===p);f-1<0||u.scrollToIndex(f-1,{behavior:"smooth",align:"start"})},[s,e,u]),(0,no.useImperativeHandle)(a,()=>({scrollToIndex:p=>u.scrollToIndex(p,{behavior:"auto",align:"start"})}),[u]);let d=u.getVirtualItems();return(0,fd.jsx)(aR,{className:mt(n,"h-full"),ref:l,children:(0,fd.jsx)("div",{style:{height:`${u.getTotalSize()}px`},className:"w-full relative max-w-[var(--file-line-width)] yn-auto",children:(0,fd.jsx)("div",{className:"absolute w-full top-0 left-0",style:{transform:`translateY(${d[0]?.start??0}px)`},children:d.map(p=>{let f=e[p.index];return(0,fd.jsx)(sj,{active:s?.has(f.id),ref:u.measureElement,"data-index":p.index,time:f.startTime,matches:c?.get(f.id),actions:(0,fd.jsx)(oj,{onPlay:i&&(h=>i(h,f.startTime)),onCopy:o&&(h=>o(h,f.startTime,f.text))}),children:f.text},f.id)})})})})});var Sl=I(H());var Go=I(X());function cj({onSubmit:t,onExit:e,noResult:n=!1}){let[r,i]=(0,Sl.useState)(""),o=(0,Sl.useRef)("");function s(l){l.preventDefault(),i(""),o.current="",e?.()}let a=(0,Sl.useRef)(null);return(0,Sl.useEffect)(()=>{a.current?.focus()},[]),(0,Go.jsx)("div",{className:"document-search-container",children:(0,Go.jsxs)("form",{className:mt("document-search"),onSubmit:l=>{l.preventDefault(),t(r,o.current!==r,"next"),o.current=r},children:[(0,Go.jsx)("input",{type:"text",ref:a,value:r,onChange:l=>i(l.target.value),onKeyDown:l=>{l.key==="Escape"&&s(l)},placeholder:"Search transcript",className:mt("document-search keep-ob",n&&o.current&&o.current===r&&"bg-[rgba(var(--background-modifier-error-rgb),0.2)]")}),(0,Go.jsxs)("div",{className:"document-search-buttons",children:[(0,Go.jsx)("button",{type:"button",className:"document-search-button keep-ob",onClick:l=>{l.preventDefault(),t(r,o.current!==r,"prev"),o.current=r},children:"Prev"}),(0,Go.jsx)("button",{type:"submit",className:"document-search-button keep-ob",children:"Next"})]}),(0,Go.jsx)("span",{className:"document-search-close-button",tabIndex:0,role:"button",onKeyDown:l=>{l.key==="Enter"&&s(l)},onClick:s})]})})}var um=I(X());function lR(){let t=Ko(p=>p.textTrack?.content.cues||[]),e=Ko(p=>p.activeCueIDs),n=MH(),r=IH(),i=(0,El.useMemo)(()=>new Map(t.map((p,f)=>[p.id,{cue:p,index:f}])),[t]),[o,s]=RH(),[a,l]=(0,El.useState)([]),c=(0,El.useRef)(-1),u=CH(),d=(0,El.useRef)(null);return(0,um.jsxs)("div",{className:"h-full",children:[u&&o&&(0,um.jsx)(cj,{noResult:a.length===0,onSubmit:(p,f,h)=>{if(!f){if(c.current<0||a.length===0)return;h==="next"?c.current<a.length-1?c.current+=1:c.current=0:h==="prev"?c.current>0?c.current-=1:c.current=a.length-1:(0,uj.assertNever)(h),d.current?.scrollToIndex(i.get(a[c.current].id)?.index??-1);return}let g=u(p.trim(),{prefix:!0,fuzzy:!0});if(g.length===0){l([]);return}let{top:w,alt:m}=g.reduce((_,S,C,M)=>(S.queryTerms.length>=M[0].queryTerms.length?_.top.push(S):_.alt.push(S),_),{top:[],alt:[]}),[{score:y},v]=w;v&&y-v.score<10&&w.sort((_,S)=>{let C=i.get(_.id)?.index??-1,M=i.get(S.id)?.index??-1;return C-M});let b=w[0].id,{index:k}=i.get(b)??{};typeof k=="number"&&(l([...w,...m]),d.current?.scrollToIndex(k),c.current=0)},onExit:()=>{s(!1),l([])}}),(0,um.jsx)(lj,{className:"p-[var(--file-margins)] pt-0",ref:d,onPlay:n,onCopy:r,activeCueIDs:e,searchResult:a,children:t})]})}var u_={local:"yn-transcript-local",webpage:"yn-transcript-webpage"};var cR=I(X()),dm=class t extends d_.EditableFileView{constructor(n,r){super(n);this.plugin=r;T(this,"store",EH());T(this,"root",null);T(this,"allowNoFile",!1);this.contentEl.addClasses(["yn","custom","yn-transcript-view"])}static register(n){n.registerView(u_.local,r=>new t(r,n)),n.registerExtensions(Dw(),u_.local)}canAcceptExtension(n){return tl(n)}getViewType(){return u_.local}async onLoadFile(n){await super.onLoadFile(n);let r=Ws(n);if(!r)throw new Error(`Caption file not supported: ${n.path}`);this.registerEvent(this.app.workspace.on("yn:cue-change",(o,s,a)=>{let{media:l,textTrack:c,updateActiveCues:u}=this.store.getState();!l||!c||c.id!==s||!Xn(o,l)||u(a)}));let i=async()=>{let{setLinkedMedia:o,updateActiveCues:s}=this.store.getState(),[a]=await this.plugin.transcript.getLinkedMedia(r);if(!o(a||null)||!a)return;let l=this.plugin.leafOpener.findPlayerWithSameMedia(a);if(!l)return;let c=l.view.player?.textTracks.selected;c&&s(c.activeCues.map(u=>u.id))};this.registerEvent(this.app.metadataCache.on("yn:transcript-changed",o=>{let{textTrack:s}=this.store.getState();!s||!o.has(s.id)||i()})),await Promise.allSettled([i(),this.plugin.transcript.loadAndParseTrack(r).then(o=>{this.store.getState().setCaptions({track:o,id:No(o).id,locales:o.language?[o.language]:[]}),this.render()}).catch(o=>{new d_.Notice(`Failed to load subtitle ${n.path}: ${o instanceof Error?o.message:"See console for details"}`),console.error("Failed to load subtitle",n,o)})])}async onOpen(){await super.onOpen(),this.render()}render(){this.root?.unmount(),this.root=dj.default.createRoot(this.contentEl),this.root.render((0,cR.jsx)(n_.Provider,{value:{plugin:this.plugin,store:this.store},children:(0,cR.jsx)(lR,{})}))}getIcon(){return"subtitles"}onPaneMenu(n,r){super.onPaneMenu(n,r),r==="more-options"&&n.addItem(i=>{i.setTitle("Find...").setIcon("file-search").setSection("action").onClick(()=>this.store.getState().toggleSearchBox())})}async onClose(){return this.root?.unmount(),this.root=null,super.onClose()}};function pj(t){dm.register(t),t.app.workspace.onLayoutReady(()=>t.register(yt(t.app.commands.commands["editor:open-search"],{checkCallback:e=>function(n){if(e?.(n))return!0;let r=t.app.workspace.getActiveViewOfType(dm);if(!r)return!1;if(n)return!0;r.store.getState().toggleSearchBox()}})))}var Pl=require("obsidian");var fj=require("url"),uR=require("obsidian");async function*p_(t,e=[]){let n=ga();if(!n)return;let r=new Set(e),i=await n.opendir(t,{encoding:"utf-8"});for await(let o of i)!(o.isFile()||o.isSymbolicLink())||r.has(o.name)||(yield bi(en.join(t,o.name),en.sep))}function hj(t){for(let e of bR){let n=t.find(r=>r.extension===e);if(n)return n instanceof uR.TFile?{type:$t(e),file:n,hash:""}:wt.create((0,fj.pathToFileURL)(n.path))}return null}async function mj(t){let e=t.src.path,n=en.dirname(e);try{let r=[];for await(let i of p_(n,[en.basename(e)]))i.basename!==t.basename||!__(i.extension)||r.push(i);return hj(r)}catch(r){return console.error(`Failed to resolve local media for ${e}`,r),null}}async function gj(t){let e=t.src.parent;if(!e)return null;let n=e.children.map(r=>r instanceof uR.TFile&&r.name!==t.src.name&&r.basename===t.basename&&__(r.extension)?r:null).filter(r=>!!r);return hj(n)}var yj=require("obsidian");function vj(t){return[...Aw(t,e=>e.language).values()].reduce((e,n)=>{let r=Dw().reduce((i,o)=>i||n.find(s=>s.type===o),void 0);return r&&e.push(r),e},[])}async function wj(t){let e=t.filePath;if(!e||!t.inferredType)return[];let{name:n,basename:r,parent:i}=bi(e,en.sep);try{let o=[];for await(let s of p_(i,[n])){let a=Ws(s);!a||a.basename!==r||o.push(a)}return vj(o)}catch(o){return console.error(`Failed to resolve local tracks for ${e}`,o),[]}}async function bj(t){if(!t.parent)return[];let e,n=t.parent.children.map(r=>r instanceof yj.TFile&&(e=Ws(r))&&e.basename===t.basename?e:null).filter(r=>!!r);return vj(n)}var hd,f_,pm,dR,h_=class extends Pl.Component{constructor(n){super();this.plugin=n;Z(this,hd);Z(this,pm);T(this,"app");this.app=n.app}async loadCaption(n){if(!tl(n.extension))return null;let r=await V(this,hd,f_).call(this,n);return h1(r,{type:n.extension})}async loadAndParseTrack(n){let r=n.src instanceof URL?await V(this,pm,dR).call(this,n.src):await V(this,hd,f_).call(this,n.src);return{...n,content:await h1(r,{type:n.type})}}async loadTrack(n){let r=n.src instanceof URL?await V(this,pm,dR).call(this,n.src):await V(this,hd,f_).call(this,n.src);return{...n,content:r}}async loadTracks(...n){return(await Promise.all(n.map(i=>this.loadTrack(i)))).filter(i=>!!i.content.trim())}async getTracks(n){try{let r=await(Te(n)?bj(n.file):wj(n)),i=this.plugin.mediaNote.getLinkedTextTracks(n);return this.loadTracks(...r,...i)}catch(r){return console.error(`Failed to get tracks for ${Te(n)?n.file.path:n.toString()}`,r),[]}}async getLinkedMedia(n){let r=this.plugin.mediaNote.getLinkedMedia(n);if(!oce(n)){let i=ice(n)?await gj(n):await mj(n);i&&r.push(i)}return r}};hd=new WeakSet,f_=function(n){return n instanceof Pl.TFile?this.app.vault.cachedRead(n):kM(n.path)},pm=new WeakSet,dR=async function(n){return(await(0,Pl.requestUrl)({url:n.toString(),method:"GET"})).text};function ice(t){return t.src instanceof Pl.TFile}function oce(t){return t.src instanceof URL}var xj='"use strict";function s(n,...e){return n.reduce((t,o,r)=>{let c=e[r],i=c!==void 0?JSON.stringify(c):"";return t+o+i},"")}process.once("document-start",()=>{let n="monkey-patch-xmlhttprequest",e="try{"+__USERSCRIPT__+"}finally{"+s`document.getElementById(${n})?.remove();`+"}",t=document.createElement("script");if(t.id=n,window.trustedTypes){let o=window.trustedTypes.createPolicy("preload",{createScript:r=>r});t.textContent=o.createScript(e)}else t.textContent=e;document.documentElement.prepend(e)});\n';var _j='"use strict";var n=require("electron"),i=require("electron/main");function d(e){return{enable:`yn-enable-preload-${e}`,disable:`yn-disable-preload-${e}`,preload:`file:///yn-preload-${e}`}}var t=(e=>{if(!e)throw new Error("env var BILI_REQ_STORE not inited");return e})(process.env.BILI_REQ_STORE);var r=d(t),o=new WeakMap,c=({sender:e},l)=>{let a=(b,s,p)=>{p.preload===r.preload&&(s.preload=l)};o.has(e)||(e.on("will-attach-webview",a),o.set(e,a))};n.ipcMain.handle(r.enable,c);n.ipcMain.handle(r.disable,()=>{for(let e of i.webContents.getAllWebContents()){let l=o.get(e);l&&e.off("will-attach-webview",l)}n.ipcMain.removeHandler(r.enable),n.ipcMain.removeHandler(r.disable)});\n';var kj=`"use strict";function l(r,e){let t=Object.keys(e).map(n=>w(r,n,e[n]));return t.length===1?t[0]:function(){t.forEach(n=>n())}}function w(r,e,t){let n=r[e],o=r.hasOwnProperty(e),s=t(n);return n&&Object.setPrototypeOf(s,n),Object.setPrototypeOf(a,s),r[e]=a,i;function a(...p){return s===n&&r[e]===a&&i(),s.apply(this,p)}function i(){r[e]===a&&(o?r[e]=n:delete r[e]),s!==n&&(s=n,Object.setPrototypeOf(a,n||Function))}}var f=()=>({emit(r,...e){for(let t=this.events[r]||[],n=0,o=t.length;n<o;n++)t[n](...e)},events:{},on(r,e){return(this.events[r]||=[]).push(e),()=>{this.events[r]=this.events[r]?.filter(t=>e!==t)}}});function m(){let r=f();return r.once=function(t,n){let o=this.on(t,(...s)=>{o(),n(...s)});return o},r}var u=class{#n=[];#e=!1;async load(){if(!this.#e){this.#e=!0,await this.onload();for(let e of this.#t)await e.load()}}async onload(){}async unload(){if(!this.#e)return;this.#e=!1;let e;for(;e=this.#n.pop();)await e();let t;for(;t=this.#t.pop();)await t.unload();await this.onunload()}async onunload(){}register(e){this.#n.push(e)}registerInterval(e,t){let n=setInterval(e,t);this.register(()=>clearInterval(n))}registerDomEvent(e,t,n,o){e.addEventListener(t,n,o),this.register(()=>e.removeEventListener(t,n,o))}#t=[];async addChild(e){return this.#t.push(e),this.#e&&await e.load(),e}async removeChild(e){let t=this.#t.indexOf(e);return t!==-1&&(this.#t.splice(t,1),e.unload()),e}};var L=()=>{},d=L;var c=class extends u{constructor(t){super();this.filter=t}event=m();respCache=new Map;stop=d;async getRequest(t,n=1e4){if(this.respCache.size>0){if(!t){let[o]=this.respCache.values();return o}for(let[o,s]of this.respCache)if(t(new URL(o)))return s}return new Promise((o,s)=>{let a=this.event.on("request",(p,y)=>{t&&!t(p)||(a(),window.clearTimeout(i),o(y))}),i=window.setTimeout(()=>{a(),s(new Error("XHR timeout"))},n)})}async onload(){let t=this;this.stop=l(XMLHttpRequest.prototype,{open:n=>function(o,s){let a=new URL(s,window.location.href);return t.filter(a,o)&&g(this).then(i=>{t.respCache.set(a.href,i),t.event.emit("request",a,i)}),n.apply(this,arguments)}})}async onunload(){this.stop(),this.respCache.clear()}};function g(r){return new Promise((e,t)=>{let n=()=>{try{if(r.status<200||r.status>=400){t(new Error("Request failed: "+r.status));return}e(r.responseText)}catch(s){t(s)}r.removeEventListener("error",o)},o=()=>{t(new Error("XHR error")),r.removeEventListener("load",n)};r.addEventListener("load",n,{once:!0}),r.addEventListener("error",o,{once:!0})})}var v=/codecs="?av01\\./;function h(){let r=[l(HTMLMediaElement.prototype,{canPlayType:e=>function(n){return v.test(n)?"":e.call(this,n)}}),l(window.MediaSource,{isTypeSupported:e=>function(n){return v.test(n)?!1:e.call(this,n)}})];return()=>r.forEach(e=>e())}var E=(r=>{if(!r)throw new Error("env var BILI_REQ_STORE not inited");return r})(process.env.BILI_REQ_STORE);h();if(location.hostname.includes("bilibili.com")){let r=[{hostname:"api.bilibili.com",pathname:"/x/player/v2"},{hostname:"api.bilibili.com",pathname:"/x/player/wbi/v2"}].map(n=>new URLPattern(n)),e=new c(n=>r.some(o=>o.test(n)));e.load(),window[E]=e;let t;(i=>(i[i.default=0]="default",i[i.hevc=1]="hevc",i[i.avc=2]="avc",i[i.av1=3]="av1"))(t||={}),localStorage.setItem("recommend_auto_play","close"),localStorage.setItem("bpx_player_profile",JSON.stringify({media:{autoplay:!1}})),localStorage.setItem("bilibili_player_codec_prefer_type",JSON.stringify(1))}
`;var md=require("obsidian");var cce=ou(_j),uce=ou(kj),dce=ou(xj).replace("__USERSCRIPT__",JSON.stringify(uce)),Tj=Hb(Jf),m_=class extends md.Component{constructor(n){super();this.plugin=n;T(this,"ready",!1)}get app(){return this.plugin.app}onReady(){this.ready=!0,this.app.metadataCache.trigger("yn:preload-ready")}onError(n){console.error("Failed to load preload",n),this.ready=null,this.app.metadataCache.trigger("yn:preload-error",n)}untilReady(n=5e3){return new Promise((r,i)=>{if(this.ready)return r();if(this.ready===null)return i(new Error("Cannot load"));let o=()=>{this.app.metadataCache.off("yn:preload-ready",o),this.app.metadataCache.off("yn:preload-error",s),r()},s=a=>{this.app.metadataCache.off("yn:preload-ready",o),this.app.metadataCache.off("yn:preload-error",s),i(a)};this.app.metadataCache.on("yn:preload-ready",o),this.app.metadataCache.on("yn:preload-error",s),setTimeout(()=>{s(new Error("Timeout"))},n)})}onload(){if(!md.Platform.isDesktopApp){this.onReady();return}let n=ga(),r=EM(),i=en.join(r,`yn-player-hack.${Date.now()}.js`),o=en.join(r,`yn-preload.${Date.now()}.js`);(async()=>{await Promise.all([n.writeFile(i,cce,"utf-8"),n.writeFile(o,dce,"utf-8")]),this.register(()=>{n.rm(o,{force:!0,maxRetries:5}).catch(l=>console.warn("Failed to remove preload script",o,l))});try{await SM(i),console.debug("preload patch loaded")}finally{await n.rm(i,{force:!0,maxRetries:5}).catch(l=>console.warn("Failed to remove hack script",i,l))}let{enable:s,disable:a}=LP({ipcRenderer:require("electron").ipcRenderer,channel:Tj});await s(o),this.app.workspace.onLayoutReady(()=>{this.app.workspace.floatingSplit.children.forEach(l=>{l instanceof md.WorkspaceWindow&&this.enablePreload(o,l.win)}),this.registerEvent(this.app.workspace.on("window-open",async(l,c)=>{await this.enablePreload(o,c)}))}),this.register(a),console.log("yn-player-hack loaded"),this.onReady()})().catch(s=>this.onError(s))}async enablePreload(n,r){let{ipcRenderer:i}=r.require("electron"),{enable:o}=LP({ipcRenderer:i,channel:Tj});await o(n)}};var Sj=require("obsidian");async function Ej(){if(!Sj.Platform.isDesktopApp)return;let t=Ad(this.app.appId);t&&(this.settings.subscribe((e,n)=>{e.biliDefaultQuality!==n.biliDefaultQuality&&N1(t,e.biliDefaultQuality)}),await N1(t,this.settings.getState().biliDefaultQuality))}var g_=class extends y_.Plugin{constructor(){super(...arguments);T(this,"settings",rH(this));T(this,"transcript",this.addChild(new h_(this)));T(this,"api",{openUrl:async(n,r,i)=>{let o=this.resolveUrl(n);if(!o){new y_.Notice("Protocol not yet supported");return}await this.leafOpener.openMedia(o,r,{direction:i})}});T(this,"urlViewType",this.addChild(new Am(this)));T(this,"mediaNote",this.addChild(new ex(this)));T(this,"playlist",this.addChild(new Vx(this)));T(this,"preload",this.addChild(new m_(this)));T(this,"leafOpener",this.addChild(new cx(this)));T(this,"recorderNote",this.addChild(new gm(this)));T(this,"handleMediaNote",g4);T(this,"injectMediaEmbed",I1);T(this,"injectMediaView",F1);T(this,"registerMediaMenu",g1);T(this,"fixLinkLabel",O1);T(this,"patchEditorClick",L1);T(this,"patchPreviewClick",D1);T(this,"patchInlineUrl",A1);T(this,"patchLinktextOpen",$1);T(this,"modifySession",Ej);T(this,"initLogin",PM)}resolveUrl(n){let r=KU(n);return r?vM(rr(r),this.settings.getState(),this.app):null}async onload(){this.addSettingTab(new Xx(this)),await this.loadSettings(),this.initLogin(),this.loadPatches(),this.registerMediaMenu(),this.handleMediaNote(),pj(this),await this.modifySession(),hH(this)}async loadSettings(){await this.settings.getState().load()}loadPatches(){this.injectMediaView(Nn.audio,n=>new zu(n,this),Zo("audio")),this.injectMediaView(Nn.video,n=>new Vu(n,this),Zo("video")),this.injectMediaEmbed((n,r,i)=>new zx(n,r,i,this)),this.registerView(Ir,n=>new ju(n,this)),this.registerView(ma,n=>new Bu(n,this)),this.registerView(nr.video,n=>new Uu(n,this)),this.registerView(nr.audio,n=>new Hu(n,this)),this.patchEditorClick({onExternalLinkClick:YP}),this.patchPreviewClick({onExternalLinkClick:YP}),this.fixLinkLabel(),this.patchInlineUrl(),this.patchLinktextOpen({onInternalLinkClick:x4})}};
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
